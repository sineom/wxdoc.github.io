import{a as xn}from"https://app.gitbook.com/public/app/chunks/chunk-X3AYHRT5.min.js";import{a as aR,b as dR,c as pR,d as Vg,e as XR,f as QR,g as nc,h as xP,i as EP}from"https://app.gitbook.com/public/app/chunks/chunk-3HAOHAXD.min.js";import{a as CP}from"https://app.gitbook.com/public/app/chunks/chunk-PRQPMRVV.min.js";import{a as M4}from"https://app.gitbook.com/public/app/chunks/chunk-DVWSRWE2.min.js";import{a as OR,b as T4,c as SP,d as wP}from"https://app.gitbook.com/public/app/chunks/chunk-AJIKXD5Q.min.js";import{a as Gr,b as Du}from"https://app.gitbook.com/public/app/chunks/chunk-KFUN4FKJ.min.js";import{a as Qg}from"https://app.gitbook.com/public/app/chunks/chunk-4SKIXFLQ.min.js";import{a as ba,b as Sp,c as h_,d as y_}from"https://app.gitbook.com/public/app/chunks/chunk-TZ7MGRF4.min.js";import{A as qR,C as mw,D as YR,E as fw,F as Eu,G as vP,K as bP,a as mi,b as lw,c as he,d as yt,e as Ag,f as Rp,g as IR,h as pw,i as Bg,j as _u,k as qg,l as _R,m as RR,n as PR,o as ER,p as zg,q as MR,r as LR,s as DR,t as Qs,u as Ru,v as NR,w as AR,x as tr,y as BR,z as Js}from"https://app.gitbook.com/public/app/chunks/chunk-GHHFPXNR.min.js";import{a as Xg}from"https://app.gitbook.com/public/app/chunks/chunk-2CCWSS5P.min.js";import{a as ds}from"https://app.gitbook.com/public/app/chunks/chunk-42DWTZ2S.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-WHHPPK2R.min.js";import{a as UR,b as yP,c as kP,d as OP}from"https://app.gitbook.com/public/app/chunks/chunk-ZYWLKMQK.min.js";import{a as zR}from"https://app.gitbook.com/public/app/chunks/chunk-ZCLGQXOO.min.js";import{a as Tu}from"https://app.gitbook.com/public/app/chunks/chunk-B6WKKRN2.min.js";import{a as Kg}from"https://app.gitbook.com/public/app/chunks/chunk-5Y4M2SEI.min.js";import{a as Nu,b as IP,c as _P}from"https://app.gitbook.com/public/app/chunks/chunk-WYLLZWEI.min.js";import{a as Kf,b as fI,e as t_,f as _p,g as Oa,h as ms,i as Tp,j as Yg,k as ZR,l as Ki,n as RP,o as PP}from"https://app.gitbook.com/public/app/chunks/chunk-RCZOER4L.min.js";import{a as Ue,b as Hr,c as nh}from"https://app.gitbook.com/public/app/chunks/chunk-OT2AKSE2.min.js";import{a as Ug,b as Jg,c as cP}from"https://app.gitbook.com/public/app/chunks/chunk-RMS6GUBL.min.js";import{a as KR}from"https://app.gitbook.com/public/app/chunks/chunk-BFVEWMIT.min.js";import{a as rh}from"https://app.gitbook.com/public/app/chunks/chunk-BFS3WYOW.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-25JMJVW3.min.js";import{a as K_,b as pP}from"https://app.gitbook.com/public/app/chunks/chunk-A2IMMTOQ.min.js";import{b as vp,c as bp,e as f_,f as g_}from"https://app.gitbook.com/public/app/chunks/chunk-NQAYVNMA.min.js";import{a as Tg,b as Wg,c as Fg,d as TR}from"https://app.gitbook.com/public/app/chunks/chunk-BUINTDJU.min.js";import{a as ec}from"https://app.gitbook.com/public/app/chunks/chunk-E65COFQJ.min.js";import{a as zr,b as X_,c as ku,d as kg,e as U_}from"https://app.gitbook.com/public/app/chunks/chunk-4PRCWQIL.min.js";import{a as wr,b as Zg,c as _a,d as fl}from"https://app.gitbook.com/public/app/chunks/chunk-3EZSKGMX.min.js";import{a as Gi}from"https://app.gitbook.com/public/app/chunks/chunk-IERZH3N3.min.js";import{a as sP}from"https://app.gitbook.com/public/app/chunks/chunk-LL6O2EME.min.js";import{a as Ot,b as $R,c as fs,d as Ia,e as oc,g as gP,h as hP,j as gw}from"https://app.gitbook.com/public/app/chunks/chunk-ZXCRW5AL.min.js";import{a as xo,b as ka,c as ps}from"https://app.gitbook.com/public/app/chunks/chunk-QD7T4AW2.min.js";import{a as jR,b as rP,c as iP,d as aP}from"https://app.gitbook.com/public/app/chunks/chunk-RY6SPYVU.min.js";import{a as $_,b as Ce}from"https://app.gitbook.com/public/app/chunks/chunk-MTEZGPFE.min.js";import{a as Jo,b as Mp,c as tt,d as eh}from"https://app.gitbook.com/public/app/chunks/chunk-IAHN6UYT.min.js";import{a as L_,b as Ep,c as Bo}from"https://app.gitbook.com/public/app/chunks/chunk-NIYDTERA.min.js";import{a as ko,b as jg}from"https://app.gitbook.com/public/app/chunks/chunk-X54H5XQ2.min.js";import{a as Pu,b as Gg,c as ao,d as Hg,e as WR,f as FR,g as VR,h as ce,i as GR,j as HR,k as tc,l as Pp,m as de,n as $g}from"https://app.gitbook.com/public/app/chunks/chunk-U3BX7JG4.min.js";import{a as Vr}from"https://app.gitbook.com/public/app/chunks/chunk-DTCVNCSG.min.js";import{a as Z,c as Sr}from"https://app.gitbook.com/public/app/chunks/chunk-2WYFX7KO.min.js";import{a as hl}from"https://app.gitbook.com/public/app/chunks/chunk-I62KJKF2.min.js";import{a as kR}from"https://app.gitbook.com/public/app/chunks/chunk-FGQG7VN5.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-75Y2SVKU.min.js";import{a as xR,b as bi}from"https://app.gitbook.com/public/app/chunks/chunk-BDZEERAY.min.js";import{a as Hi}from"https://app.gitbook.com/public/app/chunks/chunk-PK3C2PBB.min.js";import{$ as sw,H as mI,M as wg,N as F_,O as Nt,P as Cg,Q as z_,S as V_,U as G_,V as H_,W as ae,_ as xg,aa as j_,ca as rc,da as JR,ea as eP,fa as tP,ga as oP,ka as nP,ma as gs,na as th,oa as Mu,pa as Ra,qa as oh,ra as lP,sa as uP,ta as dP,ua as Lu,va as mP,xa as gl,ya as fP}from"https://app.gitbook.com/public/app/chunks/chunk-LSC33JKS.min.js";import{d as xe}from"https://app.gitbook.com/public/app/chunks/chunk-ZHAFCB2C.min.js";import{a as Hf}from"https://app.gitbook.com/public/app/chunks/chunk-7BKFWG65.min.js";import{$a as gI,$b as Xf,$e as A_,Ab as XS,Ac as ow,Ae as P_,Bb as US,Bc as vr,Be as E_,Cc as Pt,Dc as Qn,Ec as wa,Fc as Jn,Gc as A,Hc as wp,He as xp,Ib as wI,Ic as nw,Jc as v_,Je as aw,Kc as Su,Lc as Sn,Mc as wu,Nc as b_,Ne as T_,Ob as Bi,Oe as M_,Pb as CI,Qb as cp,Qc as S_,Rb as xI,Rc as ro,Sb as kI,Sc as cs,Uc as ls,Va as ga,Vb as lp,Wa as Ai,We as pl,Ye as vg,Ze as D_,_b as sl,_e as N_,a as Vf,ab as hI,ad as mg,af as B_,b as an,bb as yI,bc as PI,bd as w_,c as al,cc as EI,d as uI,df as bg,e as dI,ee as k_,fe as iw,g as fa,gc as TI,ge as Xs,hc as MI,ic as dg,ie as Cu,j as Gf,jb as vI,jc as o_,je as O_,k as pI,kc as n_,ke as Us,lc as pi,mc as r_,me as I_,nc as i_,ne as hg,ob as GS,oc as a_,oe as __,pb as Qa,pc as s_,pe as Cp,qc as c_,qd as C_,qf as q_,rc as l_,rf as Sg,sc as u_,sd as x_,se as R_,sf as xu,tb as HS,tc as d_,td as rw,tf as W_,ub as bI,uc as tw,ud as fg,vc as p_,wb as KS,wc as m_,xc as pg,yc as yp,yd as gg,zb as SI,zc as Sa,ze as yg}from"https://app.gitbook.com/public/app/chunks/chunk-5LZ65SFJ.min.js";import{$ as bR,A as Mg,B as Ca,C as v,D as uR,E as te,F as Re,G as Ao,H as br,I as Lg,K as $s,L as xa,M as Ys,N as mR,O as fR,Q as gR,R as Vi,S as Zs,T as hR,Y as vR,Z as Iu,_ as yi,a as us,aa as vi,b as Og,c as uw,d as Y_,da as z,e as Z_,ea as SR,f as io,fa as wR,ga as Co,h as J_,ha as Dg,ia as Ng,ja as Ip,l as dw,la as CR,m as K,n as wn,o as js,q as iR,s as hi,t as Ou,u as sR,v as cR,w as Qo,x as lR,y as No,z as Ct}from"https://app.gitbook.com/public/app/chunks/chunk-KI43RY3V.min.js";import{a as E4,c as wo,d as Op,e as Cn,f as yR}from"https://app.gitbook.com/public/app/chunks/chunk-7HRECDDP.min.js";import{c as Ni,e as P4}from"https://app.gitbook.com/public/app/chunks/chunk-QZT6GV7G.min.js";import{$ as es,$a as as,A as NI,Aa as ns,Ab as ZI,B as Zf,Ba as di,Bb as Te,C as Xt,Ca as Yn,Cb as R4,D as up,Da as Zn,Db as QI,E as I4,Ea as Fr,Eb as re,Fa as bo,Fb as Fi,Ga as mp,Gb as JI,H as AI,Hb as e_,I as dp,Ia as bn,Ib as vu,J as Ks,Ja as fp,Jb as bu,Ka as gp,La as mu,Ma as Jf,Na as va,Oa as fu,Pa as eg,Q as pp,Qa as tg,R as qI,Ra as og,S as WI,Sa as HI,T as _4,Ta as rs,U as FI,V as YS,Va as hp,W as Un,Wa as is,X as ya,Xa as ng,Y as zI,Ya as rg,Z as vn,Za as JS,_ as Ja,_a as De,aa as jn,ab as KI,b as OI,ba as qi,bb as kt,c as jS,ca as VI,cb as gu,da as Ve,db as ew,e as II,ea as Xe,eb as ig,f as $S,fa as rt,fb as no,g as Uf,ga as ho,ha as yo,hb as ul,i as du,ia as Ut,ib as XI,j as ui,ja as vo,jb as UI,k as _I,ka as Zo,kb as jI,l as RI,la as ge,lb as ag,ma as ts,mb as sg,na as jt,nb as ss,o as ha,oa as Lo,ob as cg,p as LI,pa as ZS,q as jf,qa as GI,qb as hu,ra as QS,rb as $I,s as pu,sa as cl,sb as lg,ta as Qf,tb as ug,u as $f,ua as $n,ub as YI,v as Kt,va as hr,vb as Do,w as Mo,wa as Wr,wb as yu,xa as os,xb as Wi,y as DI,ya as ll,yb as ft,z as ye,za as yr,zb as dl}from"https://app.gitbook.com/public/app/chunks/chunk-JG6EIYGT.min.js";import{a as dt}from"https://app.gitbook.com/public/app/chunks/chunk-GNRHQE6Q.min.js";import{$ as Ig,A as VS,C as Ff,D as Ke,E as li,F as go,G as iI,H as zf,I as H,J as aI,K as Dt,M as sI,N as cI,O as Kn,P as Xn,Q as Di,R as lI,U as er,V as cw,W as Y,X as M,Y as g,Z as b,_ as Q_,aa as _g,ba as Rg,da as Ze,ea as Pg,fa as So,ga as Qe,ha as N,ia as zi,ja as eR,k as Q,ka as tR,la as oR,m as O,ma as ml,na as nR,oa as rR,pa as Eg,qa as fi,ra as _,s as S,ta as gi,u as ma,ua as W,v as qf,va as G,w as rI,x as Wf,y as V,z as rn}from"https://app.gitbook.com/public/app/chunks/chunk-LA4BX4DG.min.js";import{a as kp}from"https://app.gitbook.com/public/app/chunks/chunk-PX7C75DT.min.js";import{b as Yf,c as Fe,d as ze,e as fe,f as BI}from"https://app.gitbook.com/public/app/chunks/chunk-IXBKM5AN.min.js";import{c as L,d as nI,e as x,f as Af,h as uu,i as Bf,j as il,l as s}from"https://app.gitbook.com/public/app/chunks/chunk-OAKVUAEN.min.js";var BP=L(()=>{s()});var so=L((Vce,qP)=>{s();qP.exports=function(t){try{return!!t()}catch(o){return!0}}});var Dp=L((Hce,WP)=>{s();var D4=so();WP.exports=!D4(function(){var t=function(){}.bind();return typeof t!="function"||t.hasOwnProperty("prototype")})});var or=L((Xce,VP)=>{s();var FP=Dp(),zP=Function.prototype,yw=zP.call,N4=FP&&zP.bind.bind(yw,yw);VP.exports=FP?N4:function(t){return function(){return yw.apply(t,arguments)}}});var ic=L((jce,HP)=>{s();var GP=or(),A4=GP({}.toString),B4=GP("".slice);HP.exports=function(t){return B4(A4(t),8,-1)}});var bw=L((Yce,KP)=>{s();var q4=or(),W4=so(),F4=ic(),vw=Object,z4=q4("".split);KP.exports=W4(function(){return!vw("z").propertyIsEnumerable(0)})?function(t){return F4(t)=="String"?z4(t,""):vw(t)}:vw});var Wu=L((Qce,XP)=>{s();XP.exports=function(t){return t==null}});var Sw=L((ele,UP)=>{s();var V4=Wu(),G4=TypeError;UP.exports=function(t){if(V4(t))throw G4("Can't call method on "+t);return t}});var yl=L((ole,jP)=>{s();var H4=bw(),K4=Sw();jP.exports=function(t){return H4(K4(t))}});var YP=L((rle,$P)=>{s();$P.exports=function(){}});var Fu=L((ale,ZP)=>{s();ZP.exports={}});var Cr=L((cle,QP)=>{s();var ah=function(t){return t&&t.Math==Math&&t};QP.exports=ah(typeof globalThis=="object"&&globalThis)||ah(typeof window=="object"&&window)||ah(typeof self=="object"&&self)||ah(typeof window=="object"&&window)||function(){return this}()||Function("return this")()});var Cw=L((ule,JP)=>{s();var ww=typeof document=="object"&&document.all,X4=typeof ww>"u"&&ww!==void 0;JP.exports={all:ww,IS_HTMLDDA:X4}});var qo=L((ple,tE)=>{s();var eE=Cw(),U4=eE.all;tE.exports=eE.IS_HTMLDDA?function(t){return typeof t=="function"||t===U4}:function(t){return typeof t=="function"}});var rE=L((fle,nE)=>{s();var j4=Cr(),$4=qo(),oE=j4.WeakMap;nE.exports=$4(oE)&&/native code/.test(String(oE))});var Kr=L((hle,sE)=>{s();var iE=qo(),aE=Cw(),Y4=aE.all;sE.exports=aE.IS_HTMLDDA?function(t){return typeof t=="object"?t!==null:iE(t)||t===Y4}:function(t){return typeof t=="object"?t!==null:iE(t)}});var nr=L((vle,cE)=>{s();var Z4=so();cE.exports=!Z4(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})});var kw=L((Sle,uE)=>{s();var Q4=Cr(),lE=Kr(),xw=Q4.document,J4=lE(xw)&&lE(xw.createElement);uE.exports=function(t){return J4?xw.createElement(t):{}}});var Ow=L((Cle,dE)=>{s();var ez=nr(),tz=so(),oz=kw();dE.exports=!ez&&!tz(function(){return Object.defineProperty(oz("div"),"a",{get:function(){return 7}}).a!=7})});var Iw=L((kle,pE)=>{s();var nz=nr(),rz=so();pE.exports=nz&&rz(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})});var Si=L((Ile,mE)=>{s();var iz=Kr(),az=String,sz=TypeError;mE.exports=function(t){if(iz(t))return t;throw sz(az(t)+" is not an object")}});var hs=L((Rle,fE)=>{s();var cz=Dp(),sh=Function.prototype.call;fE.exports=cz?sh.bind(sh):function(){return sh.apply(sh,arguments)}});var ch=L((Ele,gE)=>{s();gE.exports={}});var Xi=L((Mle,yE)=>{s();var _w=ch(),Rw=Cr(),lz=qo(),hE=function(t){return lz(t)?t:void 0};yE.exports=function(t,o){return arguments.length<2?hE(_w[t])||hE(Rw[t]):_w[t]&&_w[t][o]||Rw[t]&&Rw[t][o]}});var Np=L((Dle,vE)=>{s();var uz=or();vE.exports=uz({}.isPrototypeOf)});var SE=L((Ale,bE)=>{s();bE.exports=typeof navigator<"u"&&String(navigator.userAgent)||""});var Ew=L((qle,IE)=>{s();var OE=Cr(),Pw=SE(),wE=OE.process,CE=OE.Deno,xE=wE&&wE.versions||CE&&CE.version,kE=xE&&xE.v8,Ui,lh;kE&&(Ui=kE.split("."),lh=Ui[0]>0&&Ui[0]<4?1:+(Ui[0]+Ui[1]));!lh&&Pw&&(Ui=Pw.match(/Edge\/(\d+)/),(!Ui||Ui[1]>=74)&&(Ui=Pw.match(/Chrome\/(\d+)/),Ui&&(lh=+Ui[1])));IE.exports=lh});var Tw=L((Fle,RE)=>{s();var _E=Ew(),dz=so();RE.exports=!!Object.getOwnPropertySymbols&&!dz(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&_E&&_E<41})});var Mw=L((Vle,PE)=>{s();var pz=Tw();PE.exports=pz&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var uh=L((Hle,EE)=>{s();var mz=Xi(),fz=qo(),gz=Np(),hz=Mw(),yz=Object;EE.exports=hz?function(t){return typeof t=="symbol"}:function(t){var o=mz("Symbol");return fz(o)&&gz(o.prototype,yz(t))}});var dh=L((Xle,TE)=>{s();var vz=String;TE.exports=function(t){try{return vz(t)}catch(o){return"Object"}}});var Ap=L((jle,ME)=>{s();var bz=qo(),Sz=dh(),wz=TypeError;ME.exports=function(t){if(bz(t))return t;throw wz(Sz(t)+" is not a function")}});var ph=L((Yle,LE)=>{s();var Cz=Ap(),xz=Wu();LE.exports=function(t,o){var e=t[o];return xz(e)?void 0:Cz(e)}});var NE=L((Qle,DE)=>{s();var Lw=hs(),Dw=qo(),Nw=Kr(),kz=TypeError;DE.exports=function(t,o){var e,n;if(o==="string"&&Dw(e=t.toString)&&!Nw(n=Lw(e,t))||Dw(e=t.valueOf)&&!Nw(n=Lw(e,t))||o!=="string"&&Dw(e=t.toString)&&!Nw(n=Lw(e,t)))return n;throw kz("Can't convert object to primitive value")}});var ac=L((eue,AE)=>{s();AE.exports=!0});var WE=L((oue,qE)=>{s();var BE=Cr(),Oz=Object.defineProperty;qE.exports=function(t,o){try{Oz(BE,t,{value:o,configurable:!0,writable:!0})}catch(e){BE[t]=o}return o}});var mh=L((rue,zE)=>{s();var Iz=Cr(),_z=WE(),FE="__core-js_shared__",Rz=Iz[FE]||_z(FE,{});zE.exports=Rz});var Aw=L((aue,GE)=>{s();var Pz=ac(),VE=mh();(GE.exports=function(t,o){return VE[t]||(VE[t]=o!==void 0?o:{})})("versions",[]).push({version:"3.30.1",mode:Pz?"pure":"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.1/LICENSE",source:"https://github.com/zloirock/core-js"})});var Bp=L((cue,HE)=>{s();var Ez=Sw(),Tz=Object;HE.exports=function(t){return Tz(Ez(t))}});var xr=L((uue,KE)=>{s();var Mz=or(),Lz=Bp(),Dz=Mz({}.hasOwnProperty);KE.exports=Object.hasOwn||function(o,e){return Dz(Lz(o),e)}});var qp=L((pue,XE)=>{s();var Nz=or(),Az=0,Bz=Math.random(),qz=Nz(1 .toString);XE.exports=function(t){return"Symbol("+(t===void 0?"":t)+")_"+qz(++Az+Bz,36)}});var ji=L((fue,jE)=>{s();var Wz=Cr(),Fz=Aw(),UE=xr(),zz=qp(),Vz=Tw(),Gz=Mw(),zu=Wz.Symbol,Bw=Fz("wks"),Hz=Gz?zu.for||zu:zu&&zu.withoutSetter||zz;jE.exports=function(t){return UE(Bw,t)||(Bw[t]=Vz&&UE(zu,t)?zu[t]:Hz("Symbol."+t)),Bw[t]}});var QE=L((hue,ZE)=>{s();var Kz=hs(),$E=Kr(),YE=uh(),Xz=ph(),Uz=NE(),jz=ji(),$z=TypeError,Yz=jz("toPrimitive");ZE.exports=function(t,o){if(!$E(t)||YE(t))return t;var e=Xz(t,Yz),n;if(e){if(o===void 0&&(o="default"),n=Kz(e,t,o),!$E(n)||YE(n))return n;throw $z("Can't convert object to primitive value")}return o===void 0&&(o="number"),Uz(t,o)}});var fh=L((vue,JE)=>{s();var Zz=QE(),Qz=uh();JE.exports=function(t){var o=Zz(t,"string");return Qz(o)?o:o+""}});var $i=L(tT=>{s();var Jz=nr(),eV=Ow(),tV=Iw(),gh=Si(),eT=fh(),oV=TypeError,qw=Object.defineProperty,nV=Object.getOwnPropertyDescriptor,Ww="enumerable",Fw="configurable",zw="writable";tT.f=Jz?tV?function(o,e,n){if(gh(o),e=eT(e),gh(n),typeof o=="function"&&e==="prototype"&&"value"in n&&zw in n&&!n[zw]){var r=nV(o,e);r&&r[zw]&&(o[e]=n.value,n={configurable:Fw in n?n[Fw]:r[Fw],enumerable:Ww in n?n[Ww]:r[Ww],writable:!1})}return qw(o,e,n)}:qw:function(o,e,n){if(gh(o),e=eT(e),gh(n),eV)try{return qw(o,e,n)}catch(r){}if("get"in n||"set"in n)throw oV("Accessors not supported");return"value"in n&&(o[e]=n.value),o}});var sc=L((Cue,oT)=>{s();oT.exports=function(t,o){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:o}}});var cc=L((kue,nT)=>{s();var rV=nr(),iV=$i(),aV=sc();nT.exports=rV?function(t,o,e){return iV.f(t,o,aV(1,e))}:function(t,o,e){return t[o]=e,t}});var hh=L((Iue,iT)=>{s();var sV=Aw(),cV=qp(),rT=sV("keys");iT.exports=function(t){return rT[t]||(rT[t]=cV(t))}});var Wp=L((Rue,aT)=>{s();aT.exports={}});var zp=L((Eue,lT)=>{s();var lV=rE(),cT=Cr(),uV=Kr(),dV=cc(),Vw=xr(),Gw=mh(),pV=hh(),mV=Wp(),sT="Object already initialized",Hw=cT.TypeError,fV=cT.WeakMap,yh,Fp,vh,gV=function(t){return vh(t)?Fp(t):yh(t,{})},hV=function(t){return function(o){var e;if(!uV(o)||(e=Fp(o)).type!==t)throw Hw("Incompatible receiver, "+t+" required");return e}};lV||Gw.state?(Yi=Gw.state||(Gw.state=new fV),Yi.get=Yi.get,Yi.has=Yi.has,Yi.set=Yi.set,yh=function(t,o){if(Yi.has(t))throw Hw(sT);return o.facade=t,Yi.set(t,o),o},Fp=function(t){return Yi.get(t)||{}},vh=function(t){return Yi.has(t)}):(vl=pV("state"),mV[vl]=!0,yh=function(t,o){if(Vw(t,vl))throw Hw(sT);return o.facade=t,dV(t,vl,o),o},Fp=function(t){return Vw(t,vl)?t[vl]:{}},vh=function(t){return Vw(t,vl)});var Yi,vl;lT.exports={set:yh,get:Fp,has:vh,enforce:gV,getterFor:hV}});var fT=L((Mue,mT)=>{s();var yV=Dp(),pT=Function.prototype,uT=pT.apply,dT=pT.call;mT.exports=typeof Reflect=="object"&&Reflect.apply||(yV?dT.bind(uT):function(){return dT.apply(uT,arguments)})});var Kw=L((Due,gT)=>{s();var vV=ic(),bV=or();gT.exports=function(t){if(vV(t)==="Function")return bV(t)}});var bT=L(vT=>{"use strict";s();var hT={}.propertyIsEnumerable,yT=Object.getOwnPropertyDescriptor,SV=yT&&!hT.call({1:2},1);vT.f=SV?function(o){var e=yT(this,o);return!!e&&e.enumerable}:hT});var CT=L(wT=>{s();var wV=nr(),CV=hs(),xV=bT(),kV=sc(),OV=yl(),IV=fh(),_V=xr(),RV=Ow(),ST=Object.getOwnPropertyDescriptor;wT.f=wV?ST:function(o,e){if(o=OV(o),e=IV(e),RV)try{return ST(o,e)}catch(n){}if(_V(o,e))return kV(!CV(xV.f,o,e),o[e])}});var kT=L((Fue,xT)=>{s();var PV=so(),EV=qo(),TV=/#|\.prototype\./,Vp=function(t,o){var e=LV[MV(t)];return e==NV?!0:e==DV?!1:EV(o)?PV(o):!!o},MV=Vp.normalize=function(t){return String(t).replace(TV,".").toLowerCase()},LV=Vp.data={},DV=Vp.NATIVE="N",NV=Vp.POLYFILL="P";xT.exports=Vp});var Gp=L((Vue,IT)=>{s();var OT=Kw(),AV=Ap(),BV=Dp(),qV=OT(OT.bind);IT.exports=function(t,o){return AV(t),o===void 0?t:BV?qV(t,o):function(){return t.apply(o,arguments)}}});var lc=L((Hue,RT)=>{"use strict";s();var bh=Cr(),WV=fT(),FV=Kw(),zV=qo(),VV=CT().f,GV=kT(),Vu=ch(),HV=Gp(),Gu=cc(),_T=xr(),KV=function(t){var o=function(e,n,r){if(this instanceof o){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return WV(t,this,arguments)};return o.prototype=t.prototype,o};RT.exports=function(t,o){var e=t.target,n=t.global,r=t.stat,i=t.proto,a=n?bh:r?bh[e]:(bh[e]||{}).prototype,c=n?Vu:Vu[e]||Gu(Vu,e,{})[e],l=c.prototype,u,d,p,m,f,h,y,w,C;for(m in o)u=GV(n?m:e+(r?".":"#")+m,t.forced),d=!u&&a&&_T(a,m),h=c[m],d&&(t.dontCallGetSet?(C=VV(a,m),y=C&&C.value):y=a[m]),f=d&&y?y:o[m],!(d&&typeof h==typeof f)&&(t.bind&&d?w=HV(f,bh):t.wrap&&d?w=KV(f):i&&zV(f)?w=FV(f):w=f,(t.sham||f&&f.sham||h&&h.sham)&&Gu(w,"sham",!0),Gu(c,m,w),i&&(p=e+"Prototype",_T(Vu,p)||Gu(Vu,p,{}),Gu(Vu[p],m,f),t.real&&l&&(u||!l[m])&&Gu(l,m,f)))}});var TT=L((Xue,ET)=>{s();var Xw=nr(),XV=xr(),PT=Function.prototype,UV=Xw&&Object.getOwnPropertyDescriptor,Uw=XV(PT,"name"),jV=Uw&&function(){}.name==="something",$V=Uw&&(!Xw||Xw&&UV(PT,"name").configurable);ET.exports={EXISTS:Uw,PROPER:jV,CONFIGURABLE:$V}});var LT=L((jue,MT)=>{s();var YV=Math.ceil,ZV=Math.floor;MT.exports=Math.trunc||function(o){var e=+o;return(e>0?ZV:YV)(e)}});var jw=L((Yue,DT)=>{s();var QV=LT();DT.exports=function(t){var o=+t;return o!==o||o===0?0:QV(o)}});var $w=L((Que,NT)=>{s();var JV=jw(),eG=Math.max,tG=Math.min;NT.exports=function(t,o){var e=JV(t);return e<0?eG(e+o,0):tG(e,o)}});var BT=L((ede,AT)=>{s();var oG=jw(),nG=Math.min;AT.exports=function(t){return t>0?nG(oG(t),9007199254740991):0}});var Hu=L((ode,qT)=>{s();var rG=BT();qT.exports=function(t){return rG(t.length)}});var zT=L((rde,FT)=>{s();var iG=yl(),aG=$w(),sG=Hu(),WT=function(t){return function(o,e,n){var r=iG(o),i=sG(r),a=aG(n,i),c;if(t&&e!=e){for(;i>a;)if(c=r[a++],c!=c)return!0}else for(;i>a;a++)if((t||a in r)&&r[a]===e)return t||a||0;return!t&&-1}};FT.exports={includes:WT(!0),indexOf:WT(!1)}});var Zw=L((ade,GT)=>{s();var cG=or(),Yw=xr(),lG=yl(),uG=zT().indexOf,dG=Wp(),VT=cG([].push);GT.exports=function(t,o){var e=lG(t),n=0,r=[],i;for(i in e)!Yw(dG,i)&&Yw(e,i)&&VT(r,i);for(;o.length>n;)Yw(e,i=o[n++])&&(~uG(r,i)||VT(r,i));return r}});var Sh=L((cde,HT)=>{s();HT.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Qw=L((ude,KT)=>{s();var pG=Zw(),mG=Sh();KT.exports=Object.keys||function(o){return pG(o,mG)}});var UT=L(XT=>{s();var fG=nr(),gG=Iw(),hG=$i(),yG=Si(),vG=yl(),bG=Qw();XT.f=fG&&!gG?Object.defineProperties:function(o,e){yG(o);for(var n=vG(e),r=bG(e),i=r.length,a=0,c;i>a;)hG.f(o,c=r[a++],n[c]);return o}});var $T=L((fde,jT)=>{s();var SG=Xi();jT.exports=SG("document","documentElement")});var Ku=L((hde,oM)=>{s();var wG=Si(),CG=UT(),YT=Sh(),xG=Wp(),kG=$T(),OG=kw(),IG=hh(),ZT=">",QT="<",eC="prototype",tC="script",eM=IG("IE_PROTO"),Jw=function(){},tM=function(t){return QT+tC+ZT+t+QT+"/"+tC+ZT},JT=function(t){t.write(tM("")),t.close();var o=t.parentWindow.Object;return t=null,o},_G=function(){var t=OG("iframe"),o="java"+tC+":",e;return t.style.display="none",kG.appendChild(t),t.src=String(o),e=t.contentWindow.document,e.open(),e.write(tM("document.F=Object")),e.close(),e.F},wh,Ch=function(){try{wh=new ActiveXObject("htmlfile")}catch(o){}Ch=typeof document<"u"?document.domain&&wh?JT(wh):_G():JT(wh);for(var t=YT.length;t--;)delete Ch[eC][YT[t]];return Ch()};xG[eM]=!0;oM.exports=Object.create||function(o,e){var n;return o!==null?(Jw[eC]=wG(o),n=new Jw,Jw[eC]=null,n[eM]=o):n=Ch(),e===void 0?n:CG.f(n,e)}});var rM=L((vde,nM)=>{s();var RG=so();nM.exports=!RG(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})});var nC=L((Sde,aM)=>{s();var PG=xr(),EG=qo(),TG=Bp(),MG=hh(),LG=rM(),iM=MG("IE_PROTO"),oC=Object,DG=oC.prototype;aM.exports=LG?oC.getPrototypeOf:function(t){var o=TG(t);if(PG(o,iM))return o[iM];var e=o.constructor;return EG(e)&&o instanceof e?e.prototype:o instanceof oC?DG:null}});var Hp=L((Cde,sM)=>{s();var NG=cc();sM.exports=function(t,o,e,n){return n&&n.enumerable?t[o]=e:NG(t,o,e),t}});var sC=L((kde,uM)=>{"use strict";s();var AG=so(),BG=qo(),qG=Kr(),WG=Ku(),cM=nC(),FG=Hp(),zG=ji(),VG=ac(),aC=zG("iterator"),lM=!1,ys,rC,iC;[].keys&&(iC=[].keys(),"next"in iC?(rC=cM(cM(iC)),rC!==Object.prototype&&(ys=rC)):lM=!0);var GG=!qG(ys)||AG(function(){var t={};return ys[aC].call(t)!==t});GG?ys={}:VG&&(ys=WG(ys));BG(ys[aC])||FG(ys,aC,function(){return this});uM.exports={IteratorPrototype:ys,BUGGY_SAFARI_ITERATORS:lM}});var xh=L((Ide,pM)=>{s();var HG=ji(),KG=HG("toStringTag"),dM={};dM[KG]="z";pM.exports=String(dM)==="[object z]"});var Xu=L((Rde,mM)=>{s();var XG=xh(),UG=qo(),kh=ic(),jG=ji(),$G=jG("toStringTag"),YG=Object,ZG=kh(function(){return arguments}())=="Arguments",QG=function(t,o){try{return t[o]}catch(e){}};mM.exports=XG?kh:function(t){var o,e,n;return t===void 0?"Undefined":t===null?"Null":typeof(e=QG(o=YG(t),$G))=="string"?e:ZG?kh(o):(n=kh(o))=="Object"&&UG(o.callee)?"Arguments":n}});var gM=L((Ede,fM)=>{"use strict";s();var JG=xh(),eH=Xu();fM.exports=JG?{}.toString:function(){return"[object "+eH(this)+"]"}});var Kp=L((Mde,yM)=>{s();var tH=xh(),oH=$i().f,nH=cc(),rH=xr(),iH=gM(),aH=ji(),hM=aH("toStringTag");yM.exports=function(t,o,e,n){if(t){var r=e?t:t.prototype;rH(r,hM)||oH(r,hM,{configurable:!0,value:o}),n&&!tH&&nH(r,"toString",iH)}}});var bM=L((Dde,vM)=>{"use strict";s();var sH=sC().IteratorPrototype,cH=Ku(),lH=sc(),uH=Kp(),dH=Fu(),pH=function(){return this};vM.exports=function(t,o,e,n){var r=o+" Iterator";return t.prototype=cH(sH,{next:lH(+!n,e)}),uH(t,r,!1,!0),dH[r]=pH,t}});var wM=L((Ade,SM)=>{s();var mH=or(),fH=Ap();SM.exports=function(t,o,e){try{return mH(fH(Object.getOwnPropertyDescriptor(t,o)[e]))}catch(n){}}});var xM=L((qde,CM)=>{s();var gH=qo(),hH=String,yH=TypeError;CM.exports=function(t){if(typeof t=="object"||gH(t))return t;throw yH("Can't set "+hH(t)+" as a prototype")}});var cC=L((Fde,kM)=>{s();var vH=wM(),bH=Si(),SH=xM();kM.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t=!1,o={},e;try{e=vH(Object.prototype,"__proto__","set"),e(o,[]),t=o instanceof Array}catch(n){}return function(r,i){return bH(r),SH(i),t?e(r,i):r.__proto__=i,r}}():void 0)});var uC=L((Vde,DM)=>{"use strict";s();var wH=lc(),CH=hs(),Oh=ac(),MM=TT(),xH=qo(),kH=bM(),OM=nC(),IM=cC(),OH=Kp(),IH=cc(),lC=Hp(),_H=ji(),_M=Fu(),LM=sC(),RH=MM.PROPER,PH=MM.CONFIGURABLE,RM=LM.IteratorPrototype,Ih=LM.BUGGY_SAFARI_ITERATORS,Xp=_H("iterator"),PM="keys",Up="values",EM="entries",TM=function(){return this};DM.exports=function(t,o,e,n,r,i,a){kH(e,o,n);var c=function(C){if(C===r&&m)return m;if(!Ih&&C in d)return d[C];switch(C){case PM:return function(){return new e(this,C)};case Up:return function(){return new e(this,C)};case EM:return function(){return new e(this,C)}}return function(){return new e(this)}},l=o+" Iterator",u=!1,d=t.prototype,p=d[Xp]||d["@@iterator"]||r&&d[r],m=!Ih&&p||c(r),f=o=="Array"&&d.entries||p,h,y,w;if(f&&(h=OM(f.call(new t)),h!==Object.prototype&&h.next&&(!Oh&&OM(h)!==RM&&(IM?IM(h,RM):xH(h[Xp])||lC(h,Xp,TM)),OH(h,l,!0,!0),Oh&&(_M[l]=TM))),RH&&r==Up&&p&&p.name!==Up&&(!Oh&&PH?IH(d,"name",Up):(u=!0,m=function(){return CH(p,this)})),r)if(y={values:c(Up),keys:i?m:c(PM),entries:c(EM)},a)for(w in y)(Ih||u||!(w in d))&&lC(d,w,y[w]);else wH({target:o,proto:!0,forced:Ih||u},y);return(!Oh||a)&&d[Xp]!==m&&lC(d,Xp,m,{name:r}),_M[o]=m,y}});var dC=L((Hde,NM)=>{s();NM.exports=function(t,o){return{value:t,done:o}}});var zM=L((Xde,FM)=>{"use strict";s();var EH=yl(),pC=YP(),AM=Fu(),qM=zp(),TH=$i().f,MH=uC(),_h=dC(),LH=ac(),DH=nr(),WM="Array Iterator",NH=qM.set,AH=qM.getterFor(WM);FM.exports=MH(Array,"Array",function(t,o){NH(this,{type:WM,target:EH(t),index:0,kind:o})},function(){var t=AH(this),o=t.target,e=t.kind,n=t.index++;return!o||n>=o.length?(t.target=void 0,_h(void 0,!0)):e=="keys"?_h(n,!1):e=="values"?_h(o[n],!1):_h([n,o[n]],!1)},"values");var BM=AM.Arguments=AM.Array;pC("keys");pC("values");pC("entries");if(!LH&&DH&&BM.name!=="values")try{TH(BM,"name",{value:"values"})}catch(t){}});var GM=L(()=>{s();var BH=lc(),qH=Bp(),VM=Qw(),WH=so(),FH=WH(function(){VM(1)});BH({target:"Object",stat:!0,forced:FH},{keys:function(o){return VM(qH(o))}})});var HM=L(()=>{s()});var mC=L(KM=>{s();var zH=Zw(),VH=Sh(),GH=VH.concat("length","prototype");KM.f=Object.getOwnPropertyNames||function(o){return zH(o,GH)}});var fC=L((ope,XM)=>{"use strict";s();var HH=fh(),KH=$i(),XH=sc();XM.exports=function(t,o,e){var n=HH(o);n in t?KH.f(t,n,XH(0,e)):t[n]=e}});var $M=L((rpe,jM)=>{s();var UM=$w(),UH=Hu(),jH=fC(),$H=Array,YH=Math.max;jM.exports=function(t,o,e){for(var n=UH(t),r=UM(o,n),i=UM(e===void 0?n:e,n),a=$H(YH(i-r,0)),c=0;r<i;r++,c++)jH(a,c,t[r]);return a.length=c,a}});var JM=L((ape,QM)=>{s();var ZH=ic(),QH=yl(),YM=mC().f,JH=$M(),ZM=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],eK=function(t){try{return YM(t)}catch(o){return JH(ZM)}};QM.exports.f=function(o){return ZM&&ZH(o)=="Window"?eK(o):YM(QH(o))}});var t0=L((cpe,e0)=>{s();var tK=so();e0.exports=tK(function(){if(typeof ArrayBuffer=="function"){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})});var r0=L((upe,n0)=>{s();var oK=so(),nK=Kr(),rK=ic(),o0=t0(),Rh=Object.isExtensible,iK=oK(function(){Rh(1)});n0.exports=iK||o0?function(o){return!nK(o)||o0&&rK(o)=="ArrayBuffer"?!1:Rh?Rh(o):!0}:Rh});var a0=L((ppe,i0)=>{s();var aK=so();i0.exports=!aK(function(){return Object.isExtensible(Object.preventExtensions({}))})});var vC=L((fpe,l0)=>{s();var sK=lc(),cK=or(),lK=Wp(),uK=Kr(),gC=xr(),dK=$i().f,s0=mC(),pK=JM(),hC=r0(),mK=qp(),fK=a0(),c0=!1,vs=mK("meta"),gK=0,yC=function(t){dK(t,vs,{value:{objectID:"O"+gK++,weakData:{}}})},hK=function(t,o){if(!uK(t))return typeof t=="symbol"?t:(typeof t=="string"?"S":"P")+t;if(!gC(t,vs)){if(!hC(t))return"F";if(!o)return"E";yC(t)}return t[vs].objectID},yK=function(t,o){if(!gC(t,vs)){if(!hC(t))return!0;if(!o)return!1;yC(t)}return t[vs].weakData},vK=function(t){return fK&&c0&&hC(t)&&!gC(t,vs)&&yC(t),t},bK=function(){SK.enable=function(){},c0=!0;var t=s0.f,o=cK([].splice),e={};e[vs]=1,t(e).length&&(s0.f=function(n){for(var r=t(n),i=0,a=r.length;i<a;i++)if(r[i]===vs){o(r,i,1);break}return r},sK({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:pK.f}))},SK=l0.exports={enable:bK,fastKey:hK,getWeakData:yK,onFreeze:vK};lK[vs]=!0});var d0=L((hpe,u0)=>{s();var wK=ji(),CK=Fu(),xK=wK("iterator"),kK=Array.prototype;u0.exports=function(t){return t!==void 0&&(CK.Array===t||kK[xK]===t)}});var bC=L((vpe,m0)=>{s();var OK=Xu(),p0=ph(),IK=Wu(),_K=Fu(),RK=ji(),PK=RK("iterator");m0.exports=function(t){if(!IK(t))return p0(t,PK)||p0(t,"@@iterator")||_K[OK(t)]}});var g0=L((Spe,f0)=>{s();var EK=hs(),TK=Ap(),MK=Si(),LK=dh(),DK=bC(),NK=TypeError;f0.exports=function(t,o){var e=arguments.length<2?DK(t):o;if(TK(e))return MK(EK(e,t));throw NK(LK(t)+" is not iterable")}});var v0=L((Cpe,y0)=>{s();var AK=hs(),h0=Si(),BK=ph();y0.exports=function(t,o,e){var n,r;h0(t);try{if(n=BK(t,"return"),!n){if(o==="throw")throw e;return e}n=AK(n,t)}catch(i){r=!0,n=i}if(o==="throw")throw e;if(r)throw n;return h0(n),e}});var Eh=L((kpe,C0)=>{s();var qK=Gp(),WK=hs(),FK=Si(),zK=dh(),VK=d0(),GK=Hu(),b0=Np(),HK=g0(),KK=bC(),S0=v0(),XK=TypeError,Ph=function(t,o){this.stopped=t,this.result=o},w0=Ph.prototype;C0.exports=function(t,o,e){var n=e&&e.that,r=!!(e&&e.AS_ENTRIES),i=!!(e&&e.IS_RECORD),a=!!(e&&e.IS_ITERATOR),c=!!(e&&e.INTERRUPTED),l=qK(o,n),u,d,p,m,f,h,y,w=function(k){return u&&S0(u,"normal",k),new Ph(!0,k)},C=function(k){return r?(FK(k),c?l(k[0],k[1],w):l(k[0],k[1])):c?l(k,w):l(k)};if(i)u=t.iterator;else if(a)u=t;else{if(d=KK(t),!d)throw XK(zK(t)+" is not iterable");if(VK(d)){for(p=0,m=GK(t);m>p;p++)if(f=C(t[p]),f&&b0(w0,f))return f;return new Ph(!1)}u=HK(t,d)}for(h=i?t.next:u.next;!(y=WK(h,u)).done;){try{f=C(y.value)}catch(k){S0(u,"throw",k)}if(typeof f=="object"&&f&&b0(w0,f))return f}return new Ph(!1)}});var jp=L((Ipe,x0)=>{s();var UK=Np(),jK=TypeError;x0.exports=function(t,o){if(UK(o,t))return t;throw jK("Incorrect invocation")}});var O0=L((Rpe,k0)=>{s();var $K=ic();k0.exports=Array.isArray||function(o){return $K(o)=="Array"}});var _0=L((Epe,I0)=>{s();var YK=or(),ZK=qo(),SC=mh(),QK=YK(Function.toString);ZK(SC.inspectSource)||(SC.inspectSource=function(t){return QK(t)});I0.exports=SC.inspectSource});var CC=L((Mpe,M0)=>{s();var JK=or(),eX=so(),R0=qo(),tX=Xu(),oX=Xi(),nX=_0(),P0=function(){},rX=[],E0=oX("Reflect","construct"),wC=/^\s*(?:class|function)\b/,iX=JK(wC.exec),aX=!wC.exec(P0),$p=function(o){if(!R0(o))return!1;try{return E0(P0,rX,o),!0}catch(e){return!1}},T0=function(o){if(!R0(o))return!1;switch(tX(o)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return aX||!!iX(wC,nX(o))}catch(e){return!0}};T0.sham=!0;M0.exports=!E0||eX(function(){var t;return $p($p.call)||!$p(Object)||!$p(function(){t=!0})||t})?T0:$p});var A0=L((Dpe,N0)=>{s();var L0=O0(),sX=CC(),cX=Kr(),lX=ji(),uX=lX("species"),D0=Array;N0.exports=function(t){var o;return L0(t)&&(o=t.constructor,sX(o)&&(o===D0||L0(o.prototype))?o=void 0:cX(o)&&(o=o[uX],o===null&&(o=void 0))),o===void 0?D0:o}});var q0=L((Ape,B0)=>{s();var dX=A0();B0.exports=function(t,o){return new(dX(t))(o===0?0:o)}});var z0=L((qpe,F0)=>{s();var pX=Gp(),mX=or(),fX=bw(),gX=Bp(),hX=Hu(),yX=q0(),W0=mX([].push),uc=function(t){var o=t==1,e=t==2,n=t==3,r=t==4,i=t==6,a=t==7,c=t==5||i;return function(l,u,d,p){for(var m=gX(l),f=fX(m),h=pX(u,d),y=hX(f),w=0,C=p||yX,k=o?C(l,y):e||a?C(l,0):void 0,I,P;y>w;w++)if((c||w in f)&&(I=f[w],P=h(I,w,m),t))if(o)k[w]=P;else if(P)switch(t){case 3:return!0;case 5:return I;case 6:return w;case 2:W0(k,I)}else switch(t){case 4:return!1;case 7:W0(k,I)}return i?-1:n||r?r:k}};F0.exports={forEach:uc(0),map:uc(1),filter:uc(2),some:uc(3),every:uc(4),find:uc(5),findIndex:uc(6),filterReject:uc(7)}});var xC=L((Fpe,G0)=>{"use strict";s();var vX=lc(),bX=Cr(),SX=vC(),wX=so(),CX=cc(),xX=Eh(),kX=jp(),OX=qo(),IX=Kr(),_X=Kp(),RX=$i().f,PX=z0().forEach,EX=nr(),V0=zp(),TX=V0.set,MX=V0.getterFor;G0.exports=function(t,o,e){var n=t.indexOf("Map")!==-1,r=t.indexOf("Weak")!==-1,i=n?"set":"add",a=bX[t],c=a&&a.prototype,l={},u;if(!EX||!OX(a)||!(r||c.forEach&&!wX(function(){new a().entries().next()})))u=e.getConstructor(o,t,n,i),SX.enable();else{u=o(function(m,f){TX(kX(m,d),{type:t,collection:new a}),f!=null&&xX(f,m[i],{that:m,AS_ENTRIES:n})});var d=u.prototype,p=MX(t);PX(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(m){var f=m=="add"||m=="set";m in c&&!(r&&m=="clear")&&CX(d,m,function(h,y){var w=p(this).collection;if(!f&&r&&!IX(h))return m=="get"?void 0:!1;var C=w[m](h===0?0:h,y);return f?this:C})}),r||RX(d,"size",{configurable:!0,get:function(){return p(this).collection.size}})}return _X(u,t,!1,!0),l[t]=u,vX({global:!0,forced:!0},l),r||e.setStrong(u,t,n),u}});var Th=L((Vpe,H0)=>{s();var LX=$i();H0.exports=function(t,o,e){return LX.f(t,o,e)}});var X0=L((Hpe,K0)=>{s();var DX=Hp();K0.exports=function(t,o,e){for(var n in o)e&&e.unsafe&&t[n]?t[n]=o[n]:DX(t,n,o[n],e);return t}});var $0=L((Xpe,j0)=>{"use strict";s();var NX=Xi(),AX=Th(),BX=ji(),qX=nr(),U0=BX("species");j0.exports=function(t){var o=NX(t);qX&&o&&!o[U0]&&AX(o,U0,{configurable:!0,get:function(){return this}})}});var OC=L((jpe,eL)=>{"use strict";s();var WX=Ku(),FX=Th(),Y0=X0(),zX=Gp(),VX=jp(),GX=Wu(),HX=Eh(),KX=uC(),Mh=dC(),XX=$0(),Yp=nr(),Z0=vC().fastKey,J0=zp(),Q0=J0.set,kC=J0.getterFor;eL.exports={getConstructor:function(t,o,e,n){var r=t(function(u,d){VX(u,i),Q0(u,{type:o,index:WX(null),first:void 0,last:void 0,size:0}),Yp||(u.size=0),GX(d)||HX(d,u[n],{that:u,AS_ENTRIES:e})}),i=r.prototype,a=kC(o),c=function(u,d,p){var m=a(u),f=l(u,d),h,y;return f?f.value=p:(m.last=f={index:y=Z0(d,!0),key:d,value:p,previous:h=m.last,next:void 0,removed:!1},m.first||(m.first=f),h&&(h.next=f),Yp?m.size++:u.size++,y!=="F"&&(m.index[y]=f)),u},l=function(u,d){var p=a(u),m=Z0(d),f;if(m!=="F")return p.index[m];for(f=p.first;f;f=f.next)if(f.key==d)return f};return Y0(i,{clear:function(){for(var d=this,p=a(d),m=p.index,f=p.first;f;)f.removed=!0,f.previous&&(f.previous=f.previous.next=void 0),delete m[f.index],f=f.next;p.first=p.last=void 0,Yp?p.size=0:d.size=0},delete:function(u){var d=this,p=a(d),m=l(d,u);if(m){var f=m.next,h=m.previous;delete p.index[m.index],m.removed=!0,h&&(h.next=f),f&&(f.previous=h),p.first==m&&(p.first=f),p.last==m&&(p.last=h),Yp?p.size--:d.size--}return!!m},forEach:function(d){for(var p=a(this),m=zX(d,arguments.length>1?arguments[1]:void 0),f;f=f?f.next:p.first;)for(m(f.value,f.key,this);f&&f.removed;)f=f.previous},has:function(d){return!!l(this,d)}}),Y0(i,e?{get:function(d){var p=l(this,d);return p&&p.value},set:function(d,p){return c(this,d===0?0:d,p)}}:{add:function(d){return c(this,d=d===0?0:d,d)}}),Yp&&FX(i,"size",{configurable:!0,get:function(){return a(this).size}}),r},setStrong:function(t,o,e){var n=o+" Iterator",r=kC(o),i=kC(n);KX(t,o,function(a,c){Q0(this,{type:n,target:a,state:r(a),kind:c,last:void 0})},function(){for(var a=i(this),c=a.kind,l=a.last;l&&l.removed;)l=l.previous;return!a.target||!(a.last=l=l?l.next:a.state.first)?(a.target=void 0,Mh(void 0,!0)):c=="keys"?Mh(l.key,!1):c=="values"?Mh(l.value,!1):Mh([l.key,l.value],!1)},e?"entries":"values",!e,!0),XX(o)}}});var tL=L(()=>{"use strict";s();var UX=xC(),jX=OC();UX("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},jX)});var oL=L(()=>{s();tL()});var nL=L(()=>{"use strict";s();var $X=xC(),YX=OC();$X("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},YX)});var rL=L(()=>{s();nL()});var Lh=L((cme,iL)=>{s();var ZX=ic();iL.exports=typeof process<"u"&&ZX(process)=="process"});var sL=L((ume,aL)=>{s();var QX=Lh();aL.exports=function(t){try{if(QX)return Function('return require("'+t+'")')()}catch(o){}}});var lL=L((pme,cL)=>{s();var JX=Xu(),eU=String;cL.exports=function(t){if(JX(t)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return eU(t)}});var Dh=L((fme,uL)=>{s();var tU=lL();uL.exports=function(t,o){return t===void 0?arguments.length<2?"":o:tU(t)}});var mL=L((hme,pL)=>{"use strict";s();var oU=nr(),nU=so(),rU=Si(),iU=Ku(),dL=Dh(),Nh=Error.prototype.toString,aU=nU(function(){if(oU){var t=iU(Object.defineProperty({},"name",{get:function(){return this===t}}));if(Nh.call(t)!=="true")return!0}return Nh.call({message:1,name:2})!=="2: 1"||Nh.call({})!=="Error"});pL.exports=aU?function(){var o=rU(this),e=dL(o.name,"Error"),n=dL(o.message);return e?n?e+": "+n:e:n}:Nh});var IC=L((vme,fL)=>{s();fL.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var _C=L((Sme,yL)=>{s();var sU=or(),gL=Error,cU=sU("".replace),lU=function(t){return String(gL(t).stack)}("zxcasd"),hL=/\n\s*at [^:]*:[^\n]*/,uU=hL.test(lU);yL.exports=function(t,o){if(uU&&typeof t=="string"&&!gL.prepareStackTrace)for(;o--;)t=cU(t,hL,"");return t}});var RL=L(()=>{"use strict";s();var dU=lc(),pU=sL(),qh=Xi(),LC=so(),mU=Ku(),DC=sc(),Wh=$i().f,fU=Hp(),Ah=Th(),Bh=xr(),gU=jp(),hU=Si(),SL=mL(),vL=Dh(),Uu=IC(),yU=_C(),wL=zp(),NC=nr(),CL=ac(),ju="DOMException",MC="DATA_CLONE_ERR",zh=qh("Error"),bs=qh(ju)||function(){try{var t=qh("MessageChannel")||pU("worker_threads").MessageChannel;new t().port1.postMessage(new WeakMap)}catch(o){if(o.name==MC&&o.code==25)return o.constructor}}(),vU=bs&&bs.prototype,xL=zh.prototype,bU=wL.set,SU=wL.getterFor(ju),wU="stack"in zh(ju),kL=function(t){return Bh(Uu,t)&&Uu[t].m?Uu[t].c:0},AC=function(){gU(this,Qp);var o=arguments.length,e=vL(o<1?void 0:arguments[0]),n=vL(o<2?void 0:arguments[1],"Error"),r=kL(n);if(bU(this,{type:ju,name:n,message:e,code:r}),NC||(this.name=n,this.message=e,this.code=r),wU){var i=zh(e);i.name=ju,Wh(this,"stack",DC(1,yU(i.stack,1)))}},Qp=AC.prototype=mU(xL),OL=function(t){return{enumerable:!0,configurable:!0,get:t}},RC=function(t){return OL(function(){return SU(this)[t]})};NC&&(Ah(Qp,"code",RC("code")),Ah(Qp,"message",RC("message")),Ah(Qp,"name",RC("name")));Wh(Qp,"constructor",DC(1,AC));var Vh=LC(function(){return!(new bs instanceof zh)}),IL=Vh||LC(function(){return xL.toString!==SL||String(new bs(1,2))!=="2: 1"}),_L=Vh||LC(function(){return new bs(1,"DataCloneError").code!==25}),CU=Vh||bs[MC]!==25||vU[MC]!==25,bL=CL?IL||_L||CU:Vh;dU({global:!0,constructor:!0,forced:bL},{DOMException:bL?AC:bs});var Jp=qh(ju),Fh=Jp.prototype;IL&&(CL||bs===Jp)&&fU(Fh,"toString",SL);_L&&NC&&bs===Jp&&Ah(Fh,"code",OL(function(){return kL(hU(this).name)}));for(PC in Uu)Bh(Uu,PC)&&(EC=Uu[PC],Zp=EC.s,TC=DC(6,EC.c),Bh(Jp,Zp)||Wh(Jp,Zp,TC),Bh(Fh,Zp)||Wh(Fh,Zp,TC));var EC,Zp,TC,PC});var TL=L((Ome,EL)=>{s();var xU=qo(),kU=Kr(),PL=cC();EL.exports=function(t,o,e){var n,r;return PL&&xU(n=o.constructor)&&n!==e&&kU(r=n.prototype)&&r!==e.prototype&&PL(t,r),t}});var qL=L(()=>{"use strict";s();var OU=lc(),IU=Cr(),HC=Xi(),VC=sc(),GC=$i().f,ML=xr(),_U=jp(),RU=TL(),LL=Dh(),BC=IC(),PU=_C(),EU=nr(),AL=ac(),tm="DOMException",BL=HC("Error"),om=HC(tm),KC=function(){_U(this,TU);var o=arguments.length,e=LL(o<1?void 0:arguments[0]),n=LL(o<2?void 0:arguments[1],"Error"),r=new om(e,n),i=BL(e);return i.name=tm,GC(r,"stack",VC(1,PU(i.stack,1))),RU(r,this,KC),r},TU=KC.prototype=om.prototype,MU="stack"in BL(tm),LU="stack"in new om(1,2),qC=om&&EU&&Object.getOwnPropertyDescriptor(IU,tm),DU=!!qC&&!(qC.writable&&qC.configurable),DL=MU&&!DU&&!LU;OU({global:!0,constructor:!0,forced:AL||DL},{DOMException:DL?KC:om});var em=HC(tm),NL=em.prototype;if(NL.constructor!==em){AL||GC(NL,"constructor",VC(1,em));for(WC in BC)ML(BC,WC)&&(FC=BC[WC],zC=FC.s,ML(em,zC)||GC(em,zC,VC(6,FC.c)))}var FC,zC,WC});var FL=L(()=>{s();var NU=Xi(),AU=Kp(),WL="DOMException";AU(NU(WL),WL)});var VL=L((Lme,zL)=>{s();var BU=TypeError;zL.exports=function(t,o){if(t<o)throw BU("Not enough arguments");return t}});var HL=L((Nme,GL)=>{"use strict";s();var qU=Si();GL.exports=function(){var t=qU(this),o="";return t.hasIndices&&(o+="d"),t.global&&(o+="g"),t.ignoreCase&&(o+="i"),t.multiline&&(o+="m"),t.dotAll&&(o+="s"),t.unicode&&(o+="u"),t.unicodeSets&&(o+="v"),t.sticky&&(o+="y"),o}});var UL=L((Bme,XL)=>{s();var WU=hs(),FU=xr(),zU=Np(),VU=HL(),KL=RegExp.prototype;XL.exports=function(t){var o=t.flags;return o===void 0&&!("flags"in KL)&&!FU(t,"flags")&&zU(KL,t)?WU(VU,t):o}});var XC=L((Wme,jL)=>{s();jL.exports=function(t,o){return o==1?function(e,n){return e[t](n)}:function(e,n,r){return e[t](n,r)}}});var ZL=L((zme,YL)=>{s();var GU=Xi(),Gh=XC(),$L=GU("Map");YL.exports={Map:$L,set:Gh("set",2),get:Gh("get",1),has:Gh("has",1),remove:Gh("delete",1),proto:$L.prototype}});var eD=L((Gme,JL)=>{s();var HU=Xi(),UC=XC(),QL=HU("Set"),KU=QL.prototype;JL.exports={Set:QL,add:UC("add",1),has:UC("has",1),remove:UC("delete",1),proto:KU}});var oD=L((Kme,tD)=>{s();var XU=so(),UU=sc();tD.exports=!XU(function(){var t=Error("a");return"stack"in t?(Object.defineProperty(t,"stack",UU(1,7)),t.stack!==7):!0})});var jC=L((Ume,nD)=>{s();nD.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"});var iD=L(($me,rD)=>{s();var jU=jC(),$U=Lh();rD.exports=!jU&&!$U&&typeof window=="object"&&typeof document=="object"});var cD=L((Zme,sD)=>{s();var YU=Cr(),ZU=so(),$C=Ew(),QU=iD(),JU=jC(),ej=Lh(),aD=YU.structuredClone;sD.exports=!!aD&&!ZU(function(){if(JU&&$C>92||ej&&$C>94||QU&&$C>97)return!1;var t=new ArrayBuffer(8),o=aD(t,{transfer:[t]});return t.byteLength!=0||o.byteLength!=8})});var vD=L(()=>{s();var tj=ac(),oj=lc(),$t=Cr(),tx=Xi(),im=or(),ox=so(),nj=qp(),Kh=qo(),rj=CC(),ij=Wu(),QC=Kr(),aj=uh(),sj=Eh(),uD=Si(),dD=Xu(),cj=xr(),lj=fC(),YC=cc(),Xh=Hu(),uj=VL(),dj=UL(),jh=ZL(),pD=eD(),pj=oD(),mD=cD(),nm=$t.Object,mj=$t.Array,fD=$t.Date,am=$t.Error,fj=$t.EvalError,gj=$t.RangeError,hj=$t.ReferenceError,yj=$t.SyntaxError,gD=$t.TypeError,vj=$t.URIError,bj=$t.PerformanceMark,Yu=$t.WebAssembly,Sj=Yu&&Yu.CompileError||am,wj=Yu&&Yu.LinkError||am,Cj=Yu&&Yu.RuntimeError||am,bl=tx("DOMException"),JC=jh.Map,hD=jh.has,xj=jh.get,Uh=jh.set,kj=pD.Set,Oj=pD.add,Ij=tx("Object","keys"),_j=im([].push),Rj=im((!0).valueOf),Pj=im(1 .valueOf),Ej=im("".valueOf),Tj=im(fD.prototype.getTime),ex=nj("structuredClone"),rm="DataCloneError",Hh="Transferring",yD=function(t){return!ox(function(){var o=new $t.Set([7]),e=t(o),n=t(nm(7));return e==o||!e.has(7)||typeof n!="object"||n!=7})&&t},lD=function(t,o){return!ox(function(){var e=new o,n=t({a:e,b:e});return!(n&&n.a===n.b&&n.a instanceof o&&n.a.stack===e.stack)})},Mj=function(t){return!ox(function(){var o=t(new $t.AggregateError([1],ex,{cause:3}));return o.name!="AggregateError"||o.errors[0]!=1||o.message!=ex||o.cause!=3})},$u=$t.structuredClone,Lj=tj||!lD($u,am)||!lD($u,bl)||!Mj($u),Dj=!$u&&yD(function(t){return new bj(ex,{detail:t}).detail}),dc=yD($u)||Dj,ZC=function(t){throw new bl("Uncloneable type: "+t,rm)},On=function(t,o){throw new bl((o||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",rm)},Nj=function(){var t;try{t=new $t.DataTransfer}catch(o){try{t=new $t.ClipboardEvent("").clipboardData}catch(e){}}return t&&t.items&&t.files?t:null},kn=function(t,o){if(aj(t)&&ZC("Symbol"),!QC(t))return t;if(o){if(hD(o,t))return xj(o,t)}else o=new JC;var e=dD(t),n=!1,r,i,a,c,l,u,d,p,m,f,h;switch(e){case"Array":a=mj(Xh(t)),n=!0;break;case"Object":a={},n=!0;break;case"Map":a=new JC,n=!0;break;case"Set":a=new kj,n=!0;break;case"RegExp":a=new RegExp(t.source,dj(t));break;case"Error":switch(i=t.name,i){case"AggregateError":a=tx("AggregateError")([]);break;case"EvalError":a=fj();break;case"RangeError":a=gj();break;case"ReferenceError":a=hj();break;case"SyntaxError":a=yj();break;case"TypeError":a=gD();break;case"URIError":a=vj();break;case"CompileError":a=Sj();break;case"LinkError":a=wj();break;case"RuntimeError":a=Cj();break;default:a=am()}n=!0;break;case"DOMException":a=new bl(t.message,t.name),n=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":r=$t[e],QC(r)||On(e),a=new r(kn(t.buffer,o),t.byteOffset,e==="DataView"?t.byteLength:t.length);break;case"DOMQuad":try{a=new DOMQuad(kn(t.p1,o),kn(t.p2,o),kn(t.p3,o),kn(t.p4,o))}catch(y){dc?a=dc(t):On(e)}break;case"FileList":if(c=Nj(),c){for(l=0,u=Xh(t);l<u;l++)c.items.add(kn(t[l],o));a=c.files}else dc?a=dc(t):On(e);break;case"ImageData":try{a=new ImageData(kn(t.data,o),t.width,t.height,{colorSpace:t.colorSpace})}catch(y){dc?a=dc(t):On(e)}break;default:if(dc)a=dc(t);else switch(e){case"BigInt":a=nm(t.valueOf());break;case"Boolean":a=nm(Rj(t));break;case"Number":a=nm(Pj(t));break;case"String":a=nm(Ej(t));break;case"Date":a=new fD(Tj(t));break;case"ArrayBuffer":r=$t.DataView,!r&&typeof t.slice!="function"&&On(e);try{if(typeof t.slice=="function"&&!t.resizable)a=t.slice(0);else for(u=t.byteLength,h=("maxByteLength"in t)?{maxByteLength:t.maxByteLength}:void 0,a=new ArrayBuffer(u,h),m=new r(t),f=new r(a),l=0;l<u;l++)f.setUint8(l,m.getUint8(l))}catch(y){throw new bl("ArrayBuffer is detached",rm)}break;case"SharedArrayBuffer":a=t;break;case"Blob":try{a=t.slice(0,t.size,t.type)}catch(y){On(e)}break;case"DOMPoint":case"DOMPointReadOnly":r=$t[e];try{a=r.fromPoint?r.fromPoint(t):new r(t.x,t.y,t.z,t.w)}catch(y){On(e)}break;case"DOMRect":case"DOMRectReadOnly":r=$t[e];try{a=r.fromRect?r.fromRect(t):new r(t.x,t.y,t.width,t.height)}catch(y){On(e)}break;case"DOMMatrix":case"DOMMatrixReadOnly":r=$t[e];try{a=r.fromMatrix?r.fromMatrix(t):new r(t)}catch(y){On(e)}break;case"AudioData":case"VideoFrame":Kh(t.clone)||On(e);try{a=t.clone()}catch(y){ZC(e)}break;case"File":try{a=new File([t],t.name,t)}catch(y){On(e)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":On(e);default:ZC(e)}}if(Uh(o,t,a),n)switch(e){case"Array":case"Object":for(d=Ij(t),l=0,u=Xh(d);l<u;l++)p=d[l],lj(a,p,kn(t[p],o));break;case"Map":t.forEach(function(y,w){Uh(a,kn(w,o),kn(y,o))});break;case"Set":t.forEach(function(y){Oj(a,kn(y,o))});break;case"Error":YC(a,"message",kn(t.message,o)),cj(t,"cause")&&YC(a,"cause",kn(t.cause,o)),i=="AggregateError"&&(a.errors=kn(t.errors,o));case"DOMException":pj&&YC(a,"stack",kn(t.stack,o))}return a},Aj=function(t,o){if(!QC(t))throw gD("Transfer option cannot be converted to a sequence");var e=[];sj(t,function(m){_j(e,uD(m))});var n=0,r=Xh(e),i,a,c,l,u,d,p;if(mD)for(l=$u(e,{transfer:e});n<r;)Uh(o,e[n],l[n++]);else for(;n<r;){if(i=e[n++],hD(o,i))throw new bl("Duplicate transferable",rm);switch(a=dD(i),a){case"ImageBitmap":c=$t.OffscreenCanvas,rj(c)||On(a,Hh);try{d=new c(i.width,i.height),p=d.getContext("bitmaprenderer"),p.transferFromImageBitmap(i),u=d.transferToImageBitmap()}catch(m){}break;case"AudioData":case"VideoFrame":(!Kh(i.clone)||!Kh(i.close))&&On(a,Hh);try{u=i.clone(),i.close()}catch(m){}break;case"ArrayBuffer":Kh(i.transfer)||On(a,Hh),u=i.transfer();break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":On(a,Hh)}if(u===void 0)throw new bl("This object cannot be transferred: "+a,rm);Uh(o,i,u)}};oj({global:!0,enumerable:!0,sham:!mD,forced:Lj},{structuredClone:function(o){var e=uj(arguments.length,1)>1&&!ij(arguments[1])?uD(arguments[1]):void 0,n=e?e.transfer:void 0,r;return n!==void 0&&(r=new JC,Aj(n,r)),kn(o,r)}})});var SD=L((ofe,bD)=>{s();BP();zM();GM();HM();oL();rL();RL();qL();FL();vD();var Bj=ch();bD.exports=Bj.structuredClone});var CD=L((rfe,wD)=>{s();var qj=SD();wD.exports=qj});var UN=L((s1e,XN)=>{s();var AY="Expected a function",HN=NaN,BY="[object Symbol]",qY=/^\s+|\s+$/g,WY=/^[-+]0x[0-9a-f]+$/i,FY=/^0b[01]+$/i,zY=/^0o[0-7]+$/i,VY=parseInt,GY=typeof window=="object"&&window&&window.Object===Object&&window,HY=typeof self=="object"&&self&&self.Object===Object&&self,KY=GY||HY||Function("return this")(),XY=Object.prototype,UY=XY.toString,jY=Math.max,$Y=Math.min,Lx=function(){return KY.Date.now()};function YY(t,o,e){var n,r,i,a,c,l,u=0,d=!1,p=!1,m=!0;if(typeof t!="function")throw new TypeError(AY);o=KN(o)||0,Dx(e)&&(d=!!e.leading,p="maxWait"in e,i=p?jY(KN(e.maxWait)||0,o):i,m="trailing"in e?!!e.trailing:m);function f(D){var E=n,T=r;return n=r=void 0,u=D,a=t.apply(T,E),a}function h(D){return u=D,c=setTimeout(C,o),d?f(D):a}function y(D){var E=D-l,T=D-u,q=o-E;return p?$Y(q,i-T):q}function w(D){var E=D-l,T=D-u;return l===void 0||E>=o||E<0||p&&T>=i}function C(){var D=Lx();if(w(D))return k(D);c=setTimeout(C,y(D))}function k(D){return c=void 0,m&&n?f(D):(n=r=void 0,a)}function I(){c!==void 0&&clearTimeout(c),u=0,n=l=r=c=void 0}function P(){return c===void 0?a:k(Lx())}function R(){var D=Lx(),E=w(D);if(n=arguments,r=this,l=D,E){if(c===void 0)return h(l);if(p)return c=setTimeout(C,o),f(l)}return c===void 0&&(c=setTimeout(C,o)),a}return R.cancel=I,R.flush=P,R}function Dx(t){var o=typeof t;return!!t&&(o=="object"||o=="function")}function ZY(t){return!!t&&typeof t=="object"}function QY(t){return typeof t=="symbol"||ZY(t)&&UY.call(t)==BY}function KN(t){if(typeof t=="number")return t;if(QY(t))return HN;if(Dx(t)){var o=typeof t.valueOf=="function"?t.valueOf():t;t=Dx(o)?o+"":o}if(typeof t!="string")return t===0?t:+t;t=t.replace(qY,"");var e=FY.test(t);return e||zY.test(t)?VY(t.slice(2),e?2:8):WY.test(t)?HN:+t}XN.exports=YY});var $N=L((l1e,jN)=>{s();jN.exports=function(){if(this)return this;Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0});try{return __global__}finally{delete Object.prototype.__global__}}()});var YN=L((d1e,JY)=>{JY.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",contributors:["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.34",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=4.0.0"},dependencies:{bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},config:{verbose:!1},scripts:{test:"tape test/unit/*.js",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"}});var QN=L((p1e,ZN)=>{s();ZN.exports=YN().version});var t6=L((f1e,e6)=>{s();var kl;if(typeof globalThis=="object")kl=globalThis;else try{kl=$N()}catch(t){}finally{if(!kl&&typeof window<"u"&&(kl=window),!kl)throw new Error("Could not determine global this")}var gm=kl.WebSocket||kl.MozWebSocket,eZ=QN();function JN(t,o){var e;return o?e=new gm(t,o):e=new gm(t),e}gm&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(t){Object.defineProperty(JN,t,{get:function(){return gm[t]}})});e6.exports={w3cwebsocket:gm?JN:null,version:eZ}});var $6=L(Vx=>{s();Object.defineProperty(Vx,"__esModule",{value:!0});var _Z=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},RZ="src/index.js",PZ=function(){function t(o,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}return function(o,e,n){return e&&t(o.prototype,e),n&&t(o,n),o}}(),U6=O(),EZ=MZ(U6),TZ=(H(),Af(zf));function MZ(t){return t&&t.__esModule?t:{default:t}}function LZ(t,o){var e={};for(var n in t)o.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function DZ(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function X6(t,o){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:t}function NZ(t,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(t,o):t.__proto__=o)}var j6=function(t){NZ(o,t);function o(){var e,n,r,i;DZ(this,o);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return i=(n=(r=X6(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(c))),r),r.state={width:1,height:1},r.measure=function(u){r.setState({width:u.nativeEvent.layout.width,height:u.nativeEvent.layout.height}),r.props.onLayout&&r.props.onLayout(u)},r.getAngle=function(){if(r.props.useAngle)return r.props.angle+"deg";var u=Math.atan2(r.state.width*(r.props.end.y-r.props.start.y),r.state.height*(r.props.end.x-r.props.start.x))+Math.PI/2;return u+"rad"},r.getColors=function(){return r.props.colors.map(function(u,d){var p=r.props.locations[d],m="";return p&&(m=" "+p*100+"%"),u+m}).join(",")},n),X6(r,i)}return PZ(o,[{key:"render",value:function(){var n=this.props,r=n.start,i=n.end,a=n.colors,c=n.locations,l=n.useAngle,u=n.angleCenter,d=n.angle,p=n.style,m=n.children,f=LZ(n,["start","end","colors","locations","useAngle","angleCenter","angle","style","children"]);return EZ.default.createElement(TZ.View,_Z({},f,{style:[p,{backgroundImage:"linear-gradient("+this.getAngle()+","+this.getColors()+")"}],onLayout:this.measure,__source:{fileName:RZ,lineNumber:76}}),m)}}]),o}(U6.PureComponent);j6.defaultProps={start:{x:.5,y:0},end:{x:.5,y:1},locations:[],colors:[],useAngle:!1,angle:0};Vx.default=j6});var $7=L((bLe,RQ)=>{RQ.exports="https://app.gitbook.com/public/app/assets/youtube.raw-KIFNDQS6.svg"});var Y7=L((SLe,PQ)=>{PQ.exports="https://app.gitbook.com/public/app/assets/soundcloud.raw-2NJLH377.svg"});var Z7=L((wLe,EQ)=>{EQ.exports="https://app.gitbook.com/public/app/assets/loom.raw-3KUBFJOQ.svg"});var Q7=L((CLe,TQ)=>{TQ.exports="https://app.gitbook.com/public/app/assets/github.raw-G362N2HA.svg"});var J7=L((xLe,MQ)=>{MQ.exports="https://app.gitbook.com/public/app/assets/github.dark.raw-A2MHFBQG.svg"});var e2=L((kLe,LQ)=>{LQ.exports="https://app.gitbook.com/public/app/assets/framer.raw-BZOKEAUJ.svg"});var t2=L((OLe,DQ)=>{DQ.exports="https://app.gitbook.com/public/app/assets/framer.dark.raw-HVTXI7EB.svg"});var o2=L((ILe,NQ)=>{NQ.exports="https://app.gitbook.com/public/app/assets/codepen.raw-PGSLYKJU.svg"});var n2=L((_Le,AQ)=>{AQ.exports="https://app.gitbook.com/public/app/assets/codepen.dark.raw-HNDMNQX3.svg"});var r2=L((RLe,BQ)=>{BQ.exports="https://app.gitbook.com/public/app/assets/dribbble.raw-KBB5DOUQ.svg"});var i2=L((PLe,qQ)=>{qQ.exports="https://app.gitbook.com/public/app/assets/trello.raw-5HIIOOAI.svg"});var a2=L((ELe,WQ)=>{WQ.exports="https://app.gitbook.com/public/app/assets/typeform.raw-74VPCTO6.svg"});var s2=L((TLe,FQ)=>{FQ.exports="https://app.gitbook.com/public/app/assets/typeform.dark.raw-47MGSH5W.svg"});var c2=L((MLe,zQ)=>{zQ.exports="https://app.gitbook.com/public/app/assets/google-docs.raw-I6UHVZFS.svg"});var l2=L((LLe,VQ)=>{VQ.exports="https://app.gitbook.com/public/app/assets/google-sheets.raw-IGZ6R7IJ.svg"});var u2=L((DLe,GQ)=>{GQ.exports="https://app.gitbook.com/public/app/assets/google-slides.raw-WGHORNC6.svg"});var d2=L((NLe,HQ)=>{HQ.exports="https://app.gitbook.com/public/app/assets/google-forms.raw-7C25TP6G.svg"});var a9=L((eBe,YJ)=>{YJ.exports={"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}});var l9=L((tBe,c9)=>{"use strict";s();var Dk=a9();c9.exports=ea;ea.message=Dk;ea.code=ZJ(Dk);ea.codes=QJ(Dk);ea.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};ea.empty={204:!0,205:!0,304:!0};ea.retry={502:!0,503:!0,504:!0};function ZJ(t){var o={};return Object.keys(t).forEach(function(n){var r=t[n],i=Number(n);o[r.toLowerCase()]=i}),o}function QJ(t){return Object.keys(t).map(function(e){return Number(e)})}function JJ(t){var o=t.toLowerCase();if(!Object.prototype.hasOwnProperty.call(ea.code,o))throw new Error('invalid status message: "'+t+'"');return ea.code[o]}function s9(t){if(!Object.prototype.hasOwnProperty.call(ea.message,t))throw new Error("invalid status code: "+t);return ea.message[t]}function ea(t){if(typeof t=="number")return s9(t);if(typeof t!="string")throw new TypeError("code must be a number or string");var o=parseInt(t,10);return isNaN(o)?JJ(t):s9(o)}});var T9=L((zv,E9)=>{s();(function(t,o){typeof define=="function"&&define.amd?define(o):typeof zv=="object"&&typeof zv.nodeName!="string"?E9.exports=o():t.RangeFix=o()})(zv,function(){var t,o={};o.isBroken=function(){var r,i,a,c,l,u,d,p;return t===void 0&&(i=document.createElement("p"),a=document.createElement("span"),c=document.createTextNode("aa"),l=document.createTextNode("aa"),u=document.createElement("img"),u.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="),d=document.createRange(),t={},i.appendChild(c),i.appendChild(a),a.appendChild(u),a.appendChild(l),document.body.appendChild(i),d.setStart(c,1),d.setEnd(a,0),t.getClientRects=t.getBoundingClientRect=d.getClientRects().length>1,t.getClientRects||(d.setEnd(l,1),t.getClientRects=t.getBoundingClientRect=d.getClientRects().length===2),t.getBoundingClientRect||(d.setEnd(d.startContainer,d.startOffset),r=d.getBoundingClientRect(),t.getBoundingClientRect=r.top===0&&r.left===0),document.body.removeChild(i),p=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")(),t.ieZoom=!!p&&p<=10),t};function e(r){var i;return!r||screen.deviceXDPI===screen.logicalXDPI?r:"length"in r?Array.prototype.map.call(r,e):(i=screen.deviceXDPI/screen.logicalXDPI,{top:r.top/i,bottom:r.bottom/i,left:r.left/i,right:r.right/i,width:r.width/i,height:r.height/i})}function n(r,i){var a,c=0,l=1024;if(l>=i.length)return Array.prototype.push.apply(r,i);for(;c<i.length;)a=Array.prototype.push.apply(r,Array.prototype.slice.call(i,c,c+l)),c+=l;return a}return o.getClientRects=function(r){var i,a,c,l,u,d=this.isBroken();if(d.ieZoom)return e(r.getClientRects());if(!d.getClientRects)return r.getClientRects();i=[],c=[],a=r.endContainer,l=r.endOffset,u=document.createRange();function p(m){for(var f=0;m=m.previousSibling;)f++;return f}for(;a!==r.commonAncestorContainer;)u.setStart(a,0),u.setEnd(a,l),n(c,u.getClientRects()),l=p(a),a=a.parentNode;return u=r.cloneRange(),u.setEnd(a,l),n(i,u.getClientRects()),n(i,c),i},o.getBoundingClientRect=function(r){var i,a,c,l,u,d,p=this.getClientRects(r);if(p.length===0)return null;if(u=r.getBoundingClientRect(),d=this.isBroken(),d.ieZoom)return e(u);if(!d.getBoundingClientRect)return u;if(u.width===0&&u.height===0)return p[0];for(i=0,a=p.length;i<a;i++)l=p[i],c?(c.left=Math.min(c.left,l.left),c.top=Math.min(c.top,l.top),c.right=Math.max(c.right,l.right),c.bottom=Math.max(c.bottom,l.bottom)):c={left:l.left,top:l.top,right:l.right,bottom:l.bottom};return c&&(c.width=c.right-c.left,c.height=c.bottom-c.top),c},o})});var kB=L((XQe,ane)=>{ane.exports="https://app.gitbook.com/public/app/assets/default-page-cover-K4LPTE6Y.png"});var uq=L((Jut,lq)=>{"use strict";s();var $re="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";lq.exports=$re});var fq=L((tdt,mq)=>{"use strict";s();var Yre=uq();function dq(){}function pq(){}pq.resetWarningCache=dq;mq.exports=function(){function t(n,r,i,a,c,l){if(l!==Yre){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function o(){return t}var e={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:o,element:t,elementType:t,instanceOf:o,node:t,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:pq,resetWarningCache:dq};return e.PropTypes=e,e}});var hq=L((idt,gq)=>{s();gq.exports=fq()();var ndt,rdt});var xq=L(BO=>{"use strict";s();Object.defineProperty(BO,"__esModule",{value:!0});var NO=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},Zre=function(){function t(o,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}return function(o,e,n){return e&&t(o.prototype,e),n&&t(o,n),o}}(),Sq=O(),mf=wq(Sq),Qre=hq(),Xo=wq(Qre);function wq(t){return t&&t.__esModule?t:{default:t}}function Jre(t,o){var e={};for(var n in t)o.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function eie(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function tie(t,o){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:t}function oie(t,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(t,o):t.__proto__=o)}var yq={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},nie=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],rie=function(o){return nie.forEach(function(e){return delete o[e]}),o},vq=function(o,e){e.style.fontSize=o.fontSize,e.style.fontFamily=o.fontFamily,e.style.fontWeight=o.fontWeight,e.style.fontStyle=o.fontStyle,e.style.letterSpacing=o.letterSpacing,e.style.textTransform=o.textTransform},Cq=typeof window<"u"&&window.navigator?/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent):!1,bq=function(){return Cq?"_"+Math.random().toString(36).substr(2,12):void 0},AO=function(t){oie(o,t);function o(e){eie(this,o);var n=tie(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return n.inputRef=function(r){n.input=r,typeof n.props.inputRef=="function"&&n.props.inputRef(r)},n.placeHolderSizerRef=function(r){n.placeHolderSizer=r},n.sizerRef=function(r){n.sizer=r},n.state={inputWidth:e.minWidth,inputId:e.id||bq()},n}return Zre(o,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"UNSAFE_componentWillReceiveProps",value:function(n){var r=n.id;r!==this.props.id&&this.setState({inputId:r||bq()})}},{key:"componentDidUpdate",value:function(n,r){r.inputWidth!==this.state.inputWidth&&typeof this.props.onAutosize=="function"&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(!(!this.mounted||!window.getComputedStyle)){var n=this.input&&window.getComputedStyle(this.input);n&&(vq(n,this.sizer),this.placeHolderSizer&&vq(n,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(!(!this.mounted||!this.sizer||typeof this.sizer.scrollWidth>"u")){var n=void 0;this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?n=Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:n=this.sizer.scrollWidth+2;var r=this.props.type==="number"&&this.props.extraWidth===void 0?16:parseInt(this.props.extraWidth)||0;n+=r,n<this.props.minWidth&&(n=this.props.minWidth),n!==this.state.inputWidth&&this.setState({inputWidth:n})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var n=this.props.injectStyles;return Cq&&n?mf.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var n=[this.props.defaultValue,this.props.value,""].reduce(function(c,l){return c!=null?c:l}),r=NO({},this.props.style);r.display||(r.display="inline-block");var i=NO({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),a=Jre(this.props,[]);return rie(a),a.className=this.props.inputClassName,a.id=this.state.inputId,a.style=i,mf.default.createElement("div",{className:this.props.className,style:r},this.renderStyles(),mf.default.createElement("input",NO({},a,{ref:this.inputRef})),mf.default.createElement("div",{ref:this.sizerRef,style:yq},n),this.props.placeholder?mf.default.createElement("div",{ref:this.placeHolderSizerRef,style:yq},this.props.placeholder):null)}}]),o}(Sq.Component);AO.propTypes={className:Xo.default.string,defaultValue:Xo.default.any,extraWidth:Xo.default.oneOfType([Xo.default.number,Xo.default.string]),id:Xo.default.string,injectStyles:Xo.default.bool,inputClassName:Xo.default.string,inputRef:Xo.default.func,inputStyle:Xo.default.object,minWidth:Xo.default.oneOfType([Xo.default.number,Xo.default.string]),onAutosize:Xo.default.func,onChange:Xo.default.func,placeholder:Xo.default.string,placeholderIsMinWidth:Xo.default.bool,style:Xo.default.object,value:Xo.default.any};AO.defaultProps={minWidth:1,injectStyles:!0};BO.default=AO});var qW=L(C1=>{"use strict";s();Object.defineProperty(C1,"__esModule",{value:!0});var bae={justifyContent:"center",alignItems:"center",overflow:"hidden",backgroundColor:"transparent"};C1.default={container:bae}});var x1=L(Qd=>{"use strict";s();Object.defineProperty(Qd,"__esModule",{value:!0});Qd.ImageZoomState=Qd.ImageZoomProps=void 0;var Sae=function(){function t(){this.cropWidth=100,this.cropHeight=100,this.imageWidth=100,this.imageHeight=100,this.panToMove=!0,this.pinchToZoom=!0,this.enableDoubleClickZoom=!0,this.clickDistance=10,this.maxOverflow=100,this.longPressTime=800,this.doubleClickInterval=175,this.style={},this.swipeDownThreshold=230,this.enableSwipeDown=!1,this.enableCenterFocus=!0,this.useHardwareTextureAndroid=!0,this.minScale=.6,this.maxScale=10,this.useNativeDriver=!1,this.onClick=function(){},this.onDoubleClick=function(){},this.onLongPress=function(){},this.horizontalOuterRangeOffset=function(){},this.onDragLeft=function(){},this.responderRelease=function(){},this.onMove=function(){},this.layoutChange=function(){},this.onSwipeDown=function(){},this.onStartShouldSetPanResponder=function(){return!0},this.onPanResponderTerminationRequest=function(){return!1}}return t}();Qd.ImageZoomProps=Sae;var wae=function(){function t(){this.centerX=.5,this.centerY=.5}return t}();Qd.ImageZoomState=wae});var FW=L(ou=>{"use strict";s();var Cae=ou&&ou.__extends||function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},t(o,e)};return function(o,e){t(o,e);function n(){this.constructor=o}o.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),If=ou&&ou.__assign||function(){return If=Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++){o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},If.apply(this,arguments)};Object.defineProperty(ou,"__esModule",{value:!0});var hS=O(),Qt=(H(),Af(zf)),xae=qW(),WW=x1(),kae=function(t){Cae(o,t);function o(){var e=t!==null&&t.apply(this,arguments)||this;return e.state=new WW.ImageZoomState,e.lastPositionX=null,e.positionX=0,e.animatedPositionX=new Qt.Animated.Value(0),e.lastPositionY=null,e.positionY=0,e.animatedPositionY=new Qt.Animated.Value(0),e.scale=1,e.animatedScale=new Qt.Animated.Value(1),e.zoomLastDistance=null,e.zoomCurrentDistance=0,e.lastTouchStartTime=0,e.horizontalWholeOuterCounter=0,e.swipeDownOffset=0,e.horizontalWholeCounter=0,e.verticalWholeCounter=0,e.centerDiffX=0,e.centerDiffY=0,e.lastClickTime=0,e.doubleClickX=0,e.doubleClickY=0,e.isDoubleClick=!1,e.isLongPress=!1,e.isHorizontalWrap=!1,e.imagePanResponder=Qt.PanResponder.create({onStartShouldSetPanResponder:e.props.onStartShouldSetPanResponder,onPanResponderTerminationRequest:e.props.onPanResponderTerminationRequest,onMoveShouldSetPanResponder:e.props.onMoveShouldSetPanResponder,onPanResponderGrant:function(n){if(e.lastPositionX=null,e.lastPositionY=null,e.zoomLastDistance=null,e.horizontalWholeCounter=0,e.verticalWholeCounter=0,e.lastTouchStartTime=new Date().getTime(),e.isDoubleClick=!1,e.isLongPress=!1,e.isHorizontalWrap=!1,e.singleClickTimeout&&clearTimeout(e.singleClickTimeout),n.nativeEvent.changedTouches.length>1){var r=(n.nativeEvent.changedTouches[0].pageX+n.nativeEvent.changedTouches[1].pageX)/2;e.centerDiffX=r-e.props.cropWidth/2;var i=(n.nativeEvent.changedTouches[0].pageY+n.nativeEvent.changedTouches[1].pageY)/2;e.centerDiffY=i-e.props.cropHeight/2}e.longPressTimeout&&clearTimeout(e.longPressTimeout);var a=n.nativeEvent,c=a.locationX,l=a.locationY,u=a.pageX,d=a.pageY;if(e.longPressTimeout=setTimeout(function(){e.isLongPress=!0,e.props.onLongPress&&e.props.onLongPress({locationX:c,locationY:l,pageX:u,pageY:d})},e.props.longPressTime),n.nativeEvent.changedTouches.length<=1)if(new Date().getTime()-e.lastClickTime<(e.props.doubleClickInterval||0)){if(e.lastClickTime=0,e.doubleClickX=n.nativeEvent.changedTouches[0].pageX,e.doubleClickY=n.nativeEvent.changedTouches[0].pageY,e.props.onDoubleClick&&e.props.onDoubleClick({locationX:n.nativeEvent.changedTouches[0].locationX,locationY:n.nativeEvent.changedTouches[0].locationY,pageX:e.doubleClickX,pageY:e.doubleClickY}),clearTimeout(e.longPressTimeout),e.isDoubleClick=!0,e.props.enableDoubleClickZoom){if(e.scale>1||e.scale<1)e.scale=1,e.positionX=0,e.positionY=0;else{var p=e.scale;e.scale=2;var m=e.scale-p;e.positionX=(e.props.cropWidth/2-e.doubleClickX)*m/e.scale,e.positionY=(e.props.cropHeight/2-e.doubleClickY)*m/e.scale}e.imageDidMove("centerOn"),Qt.Animated.parallel([Qt.Animated.timing(e.animatedScale,{toValue:e.scale,duration:100,useNativeDriver:!!e.props.useNativeDriver}),Qt.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}),Qt.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver})]).start()}}else e.lastClickTime=new Date().getTime()},onPanResponderMove:function(n,r){if(!e.isDoubleClick){if(n.nativeEvent.changedTouches.length<=1){var i=r.dx-(e.lastPositionX||0);e.lastPositionX===null&&(i=0);var a=r.dy-(e.lastPositionY||0);if(e.lastPositionY===null&&(a=0),e.lastPositionX=r.dx,e.lastPositionY=r.dy,e.horizontalWholeCounter+=i,e.verticalWholeCounter+=a,(Math.abs(e.horizontalWholeCounter)>5||Math.abs(e.verticalWholeCounter)>5)&&clearTimeout(e.longPressTimeout),e.props.panToMove){if(e.swipeDownOffset===0){if(Math.abs(i)>Math.abs(a)&&(e.isHorizontalWrap=!0),e.props.imageWidth*e.scale>e.props.cropWidth){e.horizontalWholeOuterCounter>0?i<0?e.horizontalWholeOuterCounter>Math.abs(i)?(e.horizontalWholeOuterCounter+=i,i=0):(i+=e.horizontalWholeOuterCounter,e.horizontalWholeOuterCounter=0,e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(0)):e.horizontalWholeOuterCounter+=i:e.horizontalWholeOuterCounter<0&&(i>0?Math.abs(e.horizontalWholeOuterCounter)>i?(e.horizontalWholeOuterCounter+=i,i=0):(i+=e.horizontalWholeOuterCounter,e.horizontalWholeOuterCounter=0,e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(0)):e.horizontalWholeOuterCounter+=i),e.positionX+=i/e.scale;var c=(e.props.imageWidth*e.scale-e.props.cropWidth)/2/e.scale;e.positionX<-c?(e.positionX=-c,e.horizontalWholeOuterCounter+=-1/1e10):e.positionX>c&&(e.positionX=c,e.horizontalWholeOuterCounter+=1/1e10),e.animatedPositionX.setValue(e.positionX)}else e.horizontalWholeOuterCounter+=i;e.horizontalWholeOuterCounter>(e.props.maxOverflow||0)?e.horizontalWholeOuterCounter=e.props.maxOverflow||0:e.horizontalWholeOuterCounter<-(e.props.maxOverflow||0)&&(e.horizontalWholeOuterCounter=-(e.props.maxOverflow||0)),e.horizontalWholeOuterCounter!==0&&e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(e.horizontalWholeOuterCounter)}e.props.imageHeight*e.scale>e.props.cropHeight?(e.positionY+=a/e.scale,e.animatedPositionY.setValue(e.positionY)):e.props.enableSwipeDown&&!e.isHorizontalWrap&&(e.swipeDownOffset+=a,e.swipeDownOffset>0&&(e.positionY+=a/e.scale,e.animatedPositionY.setValue(e.positionY),e.scale=e.scale-a/1e3,e.animatedScale.setValue(e.scale)))}}else if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),e.props.pinchToZoom){var l=void 0,u=void 0;n.nativeEvent.changedTouches[0].locationX>n.nativeEvent.changedTouches[1].locationX?(l=n.nativeEvent.changedTouches[1].pageX,u=n.nativeEvent.changedTouches[0].pageX):(l=n.nativeEvent.changedTouches[0].pageX,u=n.nativeEvent.changedTouches[1].pageX);var d=void 0,p=void 0;n.nativeEvent.changedTouches[0].locationY>n.nativeEvent.changedTouches[1].locationY?(d=n.nativeEvent.changedTouches[1].pageY,p=n.nativeEvent.changedTouches[0].pageY):(d=n.nativeEvent.changedTouches[0].pageY,p=n.nativeEvent.changedTouches[1].pageY);var m=u-l,f=p-d,h=Math.sqrt(m*m+f*f);if(e.zoomCurrentDistance=Number(h.toFixed(1)),e.zoomLastDistance!==null){var y=(e.zoomCurrentDistance-e.zoomLastDistance)/200,w=e.scale+y;w<(e.props.minScale||0)&&(w=e.props.minScale||0),w>(e.props.maxScale||0)&&(w=e.props.maxScale||0);var C=e.scale;e.scale=w,e.animatedScale.setValue(e.scale);var k=e.scale-C;e.positionX-=e.centerDiffX*k/e.scale,e.positionY-=e.centerDiffY*k/e.scale,e.animatedPositionX.setValue(e.positionX),e.animatedPositionY.setValue(e.positionY)}e.zoomLastDistance=e.zoomCurrentDistance}e.imageDidMove("onPanResponderMove")}},onPanResponderRelease:function(n,r){if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),!e.isDoubleClick&&!e.isLongPress){var i=Math.sqrt(r.dx*r.dx+r.dy*r.dy),a=n.nativeEvent,c=a.locationX,l=a.locationY,u=a.pageX,d=a.pageY;n.nativeEvent.changedTouches.length===1&&i<(e.props.clickDistance||0)?e.singleClickTimeout=setTimeout(function(){e.props.onClick&&e.props.onClick({locationX:c,locationY:l,pageX:u,pageY:d})},e.props.doubleClickInterval):(e.props.responderRelease&&e.props.responderRelease(r.vx,e.scale),e.panResponderReleaseResolve())}},onPanResponderTerminate:function(){}}),e.resetScale=function(){e.positionX=0,e.positionY=0,e.scale=1,e.animatedScale.setValue(1)},e.panResponderReleaseResolve=function(){if(e.props.enableSwipeDown&&e.props.swipeDownThreshold&&e.swipeDownOffset>e.props.swipeDownThreshold){e.props.onSwipeDown&&e.props.onSwipeDown();return}if(e.props.enableCenterFocus&&e.scale<1&&(e.scale=1,Qt.Animated.timing(e.animatedScale,{toValue:e.scale,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.props.imageWidth*e.scale<=e.props.cropWidth&&(e.positionX=0,Qt.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.props.imageHeight*e.scale<=e.props.cropHeight&&(e.positionY=0,Qt.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.props.imageHeight*e.scale>e.props.cropHeight){var n=(e.props.imageHeight*e.scale-e.props.cropHeight)/2/e.scale;e.positionY<-n?e.positionY=-n:e.positionY>n&&(e.positionY=n),Qt.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()}if(e.props.imageWidth*e.scale>e.props.cropWidth){var r=(e.props.imageWidth*e.scale-e.props.cropWidth)/2/e.scale;e.positionX<-r?e.positionX=-r:e.positionX>r&&(e.positionX=r),Qt.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()}e.props.enableCenterFocus&&e.scale===1&&(e.positionX=0,e.positionY=0,Qt.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start(),Qt.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.horizontalWholeOuterCounter=0,e.swipeDownOffset=0,e.imageDidMove("onPanResponderRelease")},e}return o.prototype.componentDidMount=function(){this.props.centerOn&&this.centerOn(this.props.centerOn)},o.prototype.componentDidUpdate=function(e){(this.props.centerOn&&!e.centerOn||this.props.centerOn&&e.centerOn&&this.didCenterOnChange(e.centerOn,this.props.centerOn))&&this.centerOn(this.props.centerOn)},o.prototype.imageDidMove=function(e){this.props.onMove&&this.props.onMove({type:e,positionX:this.positionX,positionY:this.positionY,scale:this.scale,zoomCurrentDistance:this.zoomCurrentDistance})},o.prototype.didCenterOnChange=function(e,n){return e.x!==n.x||e.y!==n.y||e.scale!==n.scale},o.prototype.centerOn=function(e){var n=this;this.positionX=e.x,this.positionY=e.y,this.scale=e.scale;var r=e.duration||300;Qt.Animated.parallel([Qt.Animated.timing(this.animatedScale,{toValue:this.scale,duration:r,useNativeDriver:!!this.props.useNativeDriver}),Qt.Animated.timing(this.animatedPositionX,{toValue:this.positionX,duration:r,useNativeDriver:!!this.props.useNativeDriver}),Qt.Animated.timing(this.animatedPositionY,{toValue:this.positionY,duration:r,useNativeDriver:!!this.props.useNativeDriver})]).start(function(){n.imageDidMove("centerOn")})},o.prototype.handleLayout=function(e){this.props.layoutChange&&this.props.layoutChange(e)},o.prototype.reset=function(){this.scale=1,this.animatedScale.setValue(this.scale),this.positionX=0,this.animatedPositionX.setValue(this.positionX),this.positionY=0,this.animatedPositionY.setValue(this.positionY)},o.prototype.render=function(){var e={transform:[{scale:this.animatedScale},{translateX:this.animatedPositionX},{translateY:this.animatedPositionY}]},n=Qt.StyleSheet.flatten(this.props.style);return hS.createElement(Qt.View,{style:If(If(If({},xae.default.container),n),{width:this.props.cropWidth,height:this.props.cropHeight}),...this.imagePanResponder.panHandlers},hS.createElement(Qt.Animated.View,{style:e,renderToHardwareTextureAndroid:this.props.useHardwareTextureAndroid},hS.createElement(Qt.View,{onLayout:this.handleLayout.bind(this),style:{width:this.props.imageWidth,height:this.props.imageHeight}},this.props.children)))},o.defaultProps=new WW.ImageZoomProps,o}(hS.Component);ou.default=kae});var zW=L(Qc=>{"use strict";s();var Oae=Qc&&Qc.__createBinding||(Object.create?function(t,o,e,n){n===void 0&&(n=e),Object.defineProperty(t,n,{enumerable:!0,get:function(){return o[e]}})}:function(t,o,e,n){n===void 0&&(n=e),t[n]=o[e]}),Iae=Qc&&Qc.__exportStar||function(t,o){for(var e in t)e!=="default"&&!o.hasOwnProperty(e)&&Oae(o,t,e)};Object.defineProperty(Qc,"__esModule",{value:!0});var _ae=FW();Qc.default=_ae.default;Iae(x1(),Qc)});var k1=L(yS=>{"use strict";s();Object.defineProperty(yS,"__esModule",{value:!0});yS.default=function(t,o,e){return{modalContainer:{backgroundColor:e,justifyContent:"center",alignItems:"center",overflow:"hidden"},watchOrigin:{position:"absolute",width:t,bottom:20,justifyContent:"center",alignItems:"center"},watchOriginTouchable:{paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5,borderRadius:30,borderColor:"white",borderWidth:.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},watchOriginText:{color:"white",backgroundColor:"transparent"},imageStyle:{},container:{backgroundColor:e},moveBox:{flexDirection:"row",alignItems:"center"},menuContainer:{position:"absolute",width:t,height:o,left:0,bottom:0,zIndex:12},menuShadow:{position:"absolute",width:t,height:o,backgroundColor:"black",left:0,bottom:0,opacity:.2,zIndex:10},menuContent:{position:"absolute",width:t,left:0,bottom:0,zIndex:11},operateContainer:{justifyContent:"center",alignItems:"center",backgroundColor:"white",height:40,borderBottomColor:"#ccc",borderBottomWidth:1},operateText:{color:"#333"},loadingTouchable:{width:t,height:o},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},arrowLeftContainer:{position:"absolute",top:0,bottom:0,left:0,justifyContent:"center",zIndex:13},arrowRightContainer:{position:"absolute",top:0,bottom:0,right:0,justifyContent:"center",zIndex:13}}};yS.simpleStyle={count:{position:"absolute",left:0,right:0,top:38,zIndex:13,justifyContent:"center",alignItems:"center",backgroundColor:"transparent"},countText:{color:"white",fontSize:16,backgroundColor:"transparent",textShadowColor:"rgba(0, 0, 0, 0.3)",textShadowOffset:{width:0,height:.5},textShadowRadius:0}}});var _1=L(vS=>{"use strict";s();Object.defineProperty(vS,"__esModule",{value:!0});var O1=O(),I1=(H(),Af(zf)),VW=k1(),Rae=function(){function t(){this.show=!1,this.imageUrls=[],this.flipThreshold=80,this.maxOverflow=300,this.index=0,this.failImageSource=void 0,this.backgroundColor="black",this.footerContainerStyle={},this.menuContext={saveToLocal:"save to the album",cancel:"cancel"},this.saveToLocalByLongPress=!0,this.enableImageZoom=!0,this.style={},this.enableSwipeDown=!1,this.enablePreload=!1,this.pageAnimateTime=100,this.useNativeDriver=!1,this.onLongPress=function(){},this.onClick=function(){},this.onDoubleClick=function(){},this.onSave=function(){},this.onMove=function(){},this.renderHeader=function(){return null},this.renderFooter=function(){return null},this.renderIndicator=function(o,e){return O1.createElement(I1.View,{style:VW.simpleStyle.count},O1.createElement(I1.Text,{style:VW.simpleStyle.countText},o+"/"+e))},this.renderImage=function(o){return O1.createElement(I1.Image,o)},this.renderArrowLeft=function(){return null},this.renderArrowRight=function(){return null},this.onShowModal=function(){},this.onCancel=function(){},this.onSwipeDown=function(){},this.loadingRender=function(){return null},this.onSaveToCamera=function(){},this.onChange=function(){}}return t}();vS.Props=Rae;var Pae=function(){function t(){this.show=!1,this.currentShowIndex=0,this.prevIndexProp=0,this.imageLoaded=!1,this.imageSizes=[],this.isShowMenu=!1}return t}();vS.State=Pae});var KW=L(Ws=>{"use strict";s();var Eae=Ws&&Ws.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,e){o.__proto__=e}||function(o,e){for(var n in e)e.hasOwnProperty(n)&&(o[n]=e[n])};return function(o,e){t(o,e);function n(){this.constructor=o}o.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),nu=Ws&&Ws.__assign||Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++){o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},Tae=Ws&&Ws.__rest||function(t,o){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&o.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)o.indexOf(n[r])<0&&(e[n[r]]=t[n[r]]);return e};Object.defineProperty(Ws,"__esModule",{value:!0});var ct=O(),Ie=(H(),Af(zf)),GW=zW(),HW=k1(),R1=_1(),Mae=function(t){Eae(o,t);function o(){var e=t!==null&&t.apply(this,arguments)||this;return e.state=new R1.State,e.fadeAnim=new Ie.Animated.Value(0),e.standardPositionX=0,e.positionXNumber=0,e.positionX=new Ie.Animated.Value(0),e.width=0,e.height=0,e.styles=HW.default(0,0,"transparent"),e.hasLayout=!1,e.loadedIndex=new Map,e.handleLongPressWithIndex=new Map,e.imageRefs=[],e.resetImageByIndex=function(n){e.imageRefs[n]&&e.imageRefs[n].reset()},e.preloadImage=function(n){n<e.state.imageSizes.length&&e.loadImage(n+1)},e.handleHorizontalOuterRangeOffset=function(n){n===void 0&&(n=0),e.positionXNumber=e.standardPositionX+n,e.positionX.setValue(e.positionXNumber);var r=Ie.I18nManager.isRTL?-n:n;r<0?(e.state.currentShowIndex||0<e.props.imageUrls.length-1)&&e.loadImage((e.state.currentShowIndex||0)+1):r>0&&(e.state.currentShowIndex||0>0)&&e.loadImage((e.state.currentShowIndex||0)-1)},e.handleResponderRelease=function(n){n===void 0&&(n=0);var r=Ie.I18nManager.isRTL?-n:n,i=Ie.I18nManager.isRTL?e.positionXNumber-e.standardPositionX<-(e.props.flipThreshold||0):e.positionXNumber-e.standardPositionX>(e.props.flipThreshold||0),a=Ie.I18nManager.isRTL?e.positionXNumber-e.standardPositionX>(e.props.flipThreshold||0):e.positionXNumber-e.standardPositionX<-(e.props.flipThreshold||0);if(r>.7){e.goBack.call(e),(e.state.currentShowIndex||0>0)&&e.loadImage((e.state.currentShowIndex||0)-1);return}else if(r<-.7){e.goNext.call(e),(e.state.currentShowIndex||0<e.props.imageUrls.length-1)&&e.loadImage((e.state.currentShowIndex||0)+1);return}if(i)e.goBack.call(e);else if(a){e.goNext.call(e);return}else{e.resetPosition.call(e);return}},e.goBack=function(){if(e.state.currentShowIndex===0){e.resetPosition.call(e);return}e.positionXNumber=Ie.I18nManager.isRTL?e.standardPositionX-e.width:e.standardPositionX+e.width,e.standardPositionX=e.positionXNumber,Ie.Animated.timing(e.positionX,{toValue:e.positionXNumber,duration:e.props.pageAnimateTime,useNativeDriver:!!e.props.useNativeDriver}).start();var n=(e.state.currentShowIndex||0)-1;e.setState({currentShowIndex:n},function(){e.props.onChange&&e.props.onChange(e.state.currentShowIndex)})},e.goNext=function(){if(e.state.currentShowIndex===e.props.imageUrls.length-1){e.resetPosition.call(e);return}e.positionXNumber=Ie.I18nManager.isRTL?e.standardPositionX+e.width:e.standardPositionX-e.width,e.standardPositionX=e.positionXNumber,Ie.Animated.timing(e.positionX,{toValue:e.positionXNumber,duration:e.props.pageAnimateTime,useNativeDriver:!!e.props.useNativeDriver}).start();var n=(e.state.currentShowIndex||0)+1;e.setState({currentShowIndex:n},function(){e.props.onChange&&e.props.onChange(e.state.currentShowIndex)})},e.handleLongPress=function(n){e.props.saveToLocalByLongPress&&e.setState({isShowMenu:!0}),e.props.onLongPress&&e.props.onLongPress(n)},e.handleClick=function(){e.props.onClick&&e.props.onClick(e.handleCancel,e.state.currentShowIndex)},e.handleDoubleClick=function(){e.props.onDoubleClick&&e.props.onDoubleClick(e.handleCancel)},e.handleCancel=function(){e.hasLayout=!1,e.props.onCancel&&e.props.onCancel()},e.handleLayout=function(n){n.nativeEvent.layout.width!==e.width&&(e.hasLayout=!0,e.width=n.nativeEvent.layout.width,e.height=n.nativeEvent.layout.height,e.styles=HW.default(e.width,e.height,e.props.backgroundColor||"transparent"),e.forceUpdate(),e.jumpToCurrentImage())},e.saveToLocal=function(){e.props.onSave?e.props.onSave(e.props.imageUrls[e.state.currentShowIndex||0].url):(Ie.CameraRoll.saveToCameraRoll(e.props.imageUrls[e.state.currentShowIndex||0].url),e.props.onSaveToCamera(e.state.currentShowIndex)),e.setState({isShowMenu:!1})},e.handleLeaveMenu=function(){e.setState({isShowMenu:!1})},e.handleSwipeDown=function(){e.props.onSwipeDown&&e.props.onSwipeDown(),e.handleCancel()},e}return o.prototype.componentDidMount=function(){this.init(this.props)},o.getDerivedStateFromProps=function(e,n){return e.index!==n.prevIndexProp?{currentShowIndex:e.index,prevIndexProp:e.index}:null},o.prototype.componentDidUpdate=function(e,n){e.index!==this.props.index&&(this.loadImage(this.props.index||0),this.jumpToCurrentImage(),Ie.Animated.timing(this.fadeAnim,{toValue:1,duration:200,useNativeDriver:!!this.props.useNativeDriver}).start())},o.prototype.init=function(e){var n=this;if(e.imageUrls.length===0)return this.fadeAnim.setValue(0),this.setState(new R1.State);var r=[];e.imageUrls.forEach(function(i){r.push({width:i.width||0,height:i.height||0,status:"loading"})}),this.setState({currentShowIndex:e.index,prevIndexProp:e.index||0,imageSizes:r},function(){n.loadImage(e.index||0),n.jumpToCurrentImage(),Ie.Animated.timing(n.fadeAnim,{toValue:1,duration:200,useNativeDriver:!!e.useNativeDriver}).start()})},o.prototype.jumpToCurrentImage=function(){this.positionXNumber=this.width*(this.state.currentShowIndex||0)*(Ie.I18nManager.isRTL?1:-1),this.standardPositionX=this.positionXNumber,this.positionX.setValue(this.positionXNumber)},o.prototype.loadImage=function(e){var n=this;if(this.state.imageSizes[e]&&!this.loadedIndex.has(e)){this.loadedIndex.set(e,!0);var r=this.props.imageUrls[e],i=nu({},this.state.imageSizes[e]),a=function(){if(!(n.state.imageSizes[e]&&n.state.imageSizes[e].status!=="loading")){var u=n.state.imageSizes.slice();u[e]=i,n.setState({imageSizes:u})}};if(this.state.imageSizes[e].status!=="success"){if(this.state.imageSizes[e].width>0&&this.state.imageSizes[e].height>0){i.status="success",a();return}var c=!1,l=!1;if((!r.url||r.url.startsWith("file:"))&&(l=!0),r.width&&r.height){this.props.enablePreload&&l===!1&&Ie.Image.prefetch(r.url),i.width=r.width,i.height=r.height,i.status="success",a();return}Ie.Image.getSize(r.url,function(u,d){i.width=u,i.height=d,i.status="success",a()},function(){try{var u=Ie.Image.resolveAssetSource(r.props.source);i.width=u.width,i.height=u.height,i.status="success",a()}catch(d){i.status="fail",a()}})}}},o.prototype.resetPosition=function(){this.positionXNumber=this.standardPositionX,Ie.Animated.timing(this.positionX,{toValue:this.standardPositionX,duration:150,useNativeDriver:!!this.props.useNativeDriver}).start()},o.prototype.getContent=function(){var e=this,n=this.width,r=this.height,i=this.props.imageUrls.map(function(a,c){if((e.state.currentShowIndex||0)>c+1||(e.state.currentShowIndex||0)<c-1)return ct.createElement(Ie.View,{key:c,style:{width:n,height:r}});e.handleLongPressWithIndex.has(c)||e.handleLongPressWithIndex.set(c,e.handleLongPress.bind(e,a));var l=e.state.imageSizes[c]&&e.state.imageSizes[c].width,u=e.state.imageSizes[c]&&e.state.imageSizes[c].height,d=e.state.imageSizes[c];if(!d||!d.status)return ct.createElement(Ie.View,{key:c,style:{width:n,height:r}});if(l>n){var p=n/l;l*=p,u*=p}if(u>r){var m=r/u;l*=m,u*=m}var f=function(h){var y=h.children,w=Tae(h,["children"]);return ct.createElement(GW.default,{cropWidth:e.width,cropHeight:e.height,maxOverflow:e.props.maxOverflow,horizontalOuterRangeOffset:e.handleHorizontalOuterRangeOffset,responderRelease:e.handleResponderRelease,onMove:e.props.onMove,onLongPress:e.handleLongPressWithIndex.get(c),onClick:e.handleClick,onDoubleClick:e.handleDoubleClick,enableSwipeDown:e.props.enableSwipeDown,swipeDownThreshold:e.props.swipeDownThreshold,onSwipeDown:e.handleSwipeDown,pinchToZoom:e.props.enableImageZoom,enableDoubleClickZoom:e.props.enableImageZoom,doubleClickInterval:e.props.doubleClickInterval,...w},y)};switch(d.status){case"loading":return ct.createElement(f,{key:c,style:nu({},e.styles.modalContainer,e.styles.loadingContainer),imageWidth:n,imageHeight:r},ct.createElement(Ie.View,{style:e.styles.loadingContainer},e.props.loadingRender()));case"success":return a.props||(a.props={}),a.props.style||(a.props.style={}),a.props.style=nu({},e.styles.imageStyle,a.props.style,{width:l,height:u}),typeof a.props.source=="number"||(a.props.source||(a.props.source={}),a.props.source=nu({uri:a.url},a.props.source)),e.props.enablePreload&&e.preloadImage(e.state.currentShowIndex||0),ct.createElement(GW.default,{key:c,ref:function(h){return e.imageRefs[c]=h},cropWidth:e.width,cropHeight:e.height,maxOverflow:e.props.maxOverflow,horizontalOuterRangeOffset:e.handleHorizontalOuterRangeOffset,responderRelease:e.handleResponderRelease,onMove:e.props.onMove,onLongPress:e.handleLongPressWithIndex.get(c),onClick:e.handleClick,onDoubleClick:e.handleDoubleClick,imageWidth:l,imageHeight:u,enableSwipeDown:e.props.enableSwipeDown,swipeDownThreshold:e.props.swipeDownThreshold,onSwipeDown:e.handleSwipeDown,panToMove:!e.state.isShowMenu,pinchToZoom:e.props.enableImageZoom&&!e.state.isShowMenu,enableDoubleClickZoom:e.props.enableImageZoom&&!e.state.isShowMenu,doubleClickInterval:e.props.doubleClickInterval,minScale:e.props.minScale,maxScale:e.props.maxScale},e.props.renderImage(a.props));case"fail":return ct.createElement(f,{key:c,style:e.styles.modalContainer,imageWidth:e.props.failImageSource?e.props.failImageSource.width:n,imageHeight:e.props.failImageSource?e.props.failImageSource.height:r},e.props.failImageSource&&e.props.renderImage({source:{uri:e.props.failImageSource.url},style:{width:e.props.failImageSource.width,height:e.props.failImageSource.height}}))}});return ct.createElement(Ie.Animated.View,{style:{zIndex:9}},ct.createElement(Ie.Animated.View,{style:nu({},this.styles.container,{opacity:this.fadeAnim})},this.props.renderHeader(this.state.currentShowIndex),ct.createElement(Ie.View,{style:this.styles.arrowLeftContainer},ct.createElement(Ie.TouchableWithoutFeedback,{onPress:this.goBack},ct.createElement(Ie.View,null,this.props.renderArrowLeft()))),ct.createElement(Ie.View,{style:this.styles.arrowRightContainer},ct.createElement(Ie.TouchableWithoutFeedback,{onPress:this.goNext},ct.createElement(Ie.View,null,this.props.renderArrowRight()))),ct.createElement(Ie.Animated.View,{style:nu({},this.styles.moveBox,{transform:[{translateX:this.positionX}],width:this.width*this.props.imageUrls.length})},i),this.props.renderIndicator((this.state.currentShowIndex||0)+1,this.props.imageUrls.length),this.props.imageUrls[this.state.currentShowIndex||0]&&this.props.imageUrls[this.state.currentShowIndex||0].originSizeKb&&this.props.imageUrls[this.state.currentShowIndex||0].originUrl&&ct.createElement(Ie.View,{style:this.styles.watchOrigin},ct.createElement(Ie.TouchableOpacity,{style:this.styles.watchOriginTouchable},ct.createElement(Ie.Text,{style:this.styles.watchOriginText},"\u67E5\u770B\u539F\u56FE(2M)"))),ct.createElement(Ie.View,{style:[{bottom:0,position:"absolute",zIndex:9},this.props.footerContainerStyle]},this.props.renderFooter(this.state.currentShowIndex||0))))},o.prototype.getMenu=function(){return this.state.isShowMenu?this.props.menus?ct.createElement(Ie.View,{style:this.styles.menuContainer},this.props.menus({cancel:this.handleLeaveMenu,saveToLocal:this.saveToLocal})):ct.createElement(Ie.View,{style:this.styles.menuContainer},ct.createElement(Ie.View,{style:this.styles.menuShadow}),ct.createElement(Ie.View,{style:this.styles.menuContent},ct.createElement(Ie.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.saveToLocal,style:this.styles.operateContainer},ct.createElement(Ie.Text,{style:this.styles.operateText},this.props.menuContext.saveToLocal)),ct.createElement(Ie.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.handleLeaveMenu,style:this.styles.operateContainer},ct.createElement(Ie.Text,{style:this.styles.operateText},this.props.menuContext.cancel)))):null},o.prototype.render=function(){var e=null;return e=ct.createElement(Ie.View,null,this.getContent(),this.getMenu()),ct.createElement(Ie.View,{onLayout:this.handleLayout,style:nu({flex:1,overflow:"hidden"},this.props.style)},e)},o.defaultProps=new R1.Props,o}(ct.Component);Ws.default=Mae});var UW=L(_f=>{"use strict";s();Object.defineProperty(_f,"__esModule",{value:!0});var XW=KW();_f.ImageViewer=XW.default;var Lae=_1();_f.ImageViewerPropsDefine=Lae.Props;_f.default=XW.default});s();s();(function(){"use strict";var t="ListFormat"in Intl;function o(j,ie){if(!(j instanceof ie))throw new TypeError("Cannot call a class as a function")}function e(j,ie){for(var ee=0;ee<ie.length;ee++){var ne=ie[ee];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(j,ne.key,ne)}}function n(j,ie,ee){return ie&&e(j.prototype,ie),ee&&e(j,ee),j}var r=["conjunction","disjunction","unit"],i=["long","short","narrow"],a=["lookup","best fit"];function c(j){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(ee){return typeof ee}:c=function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},c(j)}function l(j){return typeof Symbol=="function"&&c(Symbol.iterator)==="symbol"?l=function(ee){return c(ee)}:l=function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":c(ee)},l(j)}function u(j){if(j==null)throw new TypeError("Argument ".concat(j," cannot be converted to an Object"));return typeof j=="boolean"?new Boolean(j):typeof j=="number"?new Number(j):typeof j=="string"?new String(j):l(j)==="symbol"?new Object(j):j}var d;function p(j){d=j}function m(){return d}function f(){if(d==null)throw new ReferenceError("Could not determine locale: No default locale has been configured");return d}var h=new WeakMap,y={relevantExtensionKeys:[],localeData:{},availableLocales:[]};function w(j,ie,ee){var ne=h.get(j);ne==null&&(ne=Object.create(null),h.set(j,ne)),ne[ie]=ee}function C(j,ie){var ee=h.get(j);if(ee==null)throw new ReferenceError("No internal slots has been allocated for the given instance of ListFormat");return ee[ie]}function k(j,ie){var ee=h.get(j);return ee!=null&&ie in ee}var I=/-u(?:-[0-9a-z]{2,8})+/gi;function P(j){return j.replace(I,"")}function R(j,ie){for(var ee=ie;;){if(j.includes(ee))return ee;var ne=ee.lastIndexOf("-");if(ne===-1)return;ne>=2&&ee.charAt(ne-2)==="-"&&(ne-=2),ee=ee.slice(0,ne)}}function D(j,ie){var ee=[],ne=!0,ve=!1,He=void 0;try{for(var Ht=ie[Symbol.iterator](),ut;!(ne=(ut=Ht.next()).done);ne=!0){var St=ut.value,xt=P(St),Jt=R(j,xt);Jt!==void 0&&ee.push(St)}}catch(Hn){ve=!0,He=Hn}finally{try{!ne&&Ht.return!=null&&Ht.return()}finally{if(ve)throw He}}return ee}function E(j,ie){return D(j,ie)}function T(j){return typeof j=="string"||l(j)==="symbol"}function q(j,ie){if(l(j)!=="object")throw new TypeError("Given argument ".concat(j," must be of type Object"));if(!T(ie))throw new TypeError("Given argument ".concat(ie," must be a PropertyKey"));return j[ie]}function F(j){return!!j}function U(j){return j+""}function $(j,ie,ee,ne,ve){var He=q(j,ie);if(He!==void 0){if(ee!=="boolean"&&ee!=="string")throw new TypeError("Expected type ".concat(ee," to be 'boolean' or 'string"));if(ee==="boolean"&&(He=F(He)),ee==="string"&&(He=U(He)),ne!==void 0&&!ne.includes(He))throw new RangeError("Value ".concat(He," out of range for options property ").concat(ie));return He}else return ve}function X(j,ie,ee){var ne;return ee!==void 0?(ee=u(ee),ne=$(ee,"localeMatcher","string",a,"best fit")):ne="best fit",ne==="best fit"?E(j,ie):D(j,ie)}function oe(j){var ie=j.availableLocales,ee=j.requestedLocales,ne=Object.create(null),ve=!0,He=!1,Ht=void 0;try{for(var ut=ee[Symbol.iterator](),St;!(ve=(St=ut.next()).done);ve=!0){var xt=St.value,Jt=P(xt),Hn=R(ie,Jt);if(Hn!==void 0){if(ne.locale=Hn,xt!==Jt){var fr=xt.match(I);ne.extension=fr==null?"":fr[0]}return ne}}}catch(rl){He=!0,Ht=rl}finally{try{!ve&&ut.return!=null&&ut.return()}finally{if(He)throw Ht}}var gr=f();return ne.locale=gr,ne}function we(j){return oe(j)}function Ee(j,ie,ee,ne,ve){var He=ee.localeMatcher,Ht=He==="lookup"?oe({availableLocales:j,requestedLocales:ie}):we({availableLocales:j,requestedLocales:ie}),ut=Ht.locale,St=Object.create(null);St.dataLocale=ut;var xt="-u";if(xt.length>2){var Jt=String.prototype.indexOf.call(ut,"-x-");if(Jt===-1)ut="".concat(ut).concat(xt);else{var Hn=ut.slice(0,Jt),fr=ut.slice(Jt);ut="".concat(Hn).concat(xt).concat(fr)}ut=Intl.getCanonicalLocales(ut)[0]}return St.locale=ut,St}function me(j){if(Array.isArray(j)){for(var ie=0,ee=new Array(j.length);ie<j.length;ie++)ee[ie]=j[ie];return ee}}function We(j){if(Symbol.iterator in Object(j)||Object.prototype.toString.call(j)==="[object Arguments]")return Array.from(j)}function mt(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function $o(j){return me(j)||We(j)||mt()}function Vn(j){if(j===void 0)return[];var ie=$o(j);if(ie.some(function(ee){return typeof ee!="string"}))throw new TypeError("All List items must be strings");return ie}function lt(j){return Object.prototype.toString.call(j)==="[object Object]"}function Gn(j){return Array.isArray(j)||lt(j)}function Yo(j,ie){for(var ee=[],ne=String.prototype.indexOf.call(j,"{",0),ve=0,He=j.length;j[ne]!==void 0;){var Ht=String.prototype.indexOf.call(j,"}",ne);if(Ht<=ne)throw new TypeError("Expected endIndex: ".concat(Ht," to be greater than beginIndex: ").concat(ne));if(ne>ve){var ut=j.slice(ve,ne);ee.push({type:"literal",value:ut})}var St=j.slice(ne+1,Ht);if(ie[Number(St)]==null)throw new TypeError("Expected placeables to have a part for PropertyKey: ".concat(St));var xt=ie[Number(St)];if(Gn(xt.value)){var Jt=!0,Hn=!1,fr=void 0;try{for(var gr=xt.value[Symbol.iterator](),rl;!(Jt=(rl=gr.next()).done);Jt=!0){var Nf=rl.value;ee.push(Nf)}}catch(zS){Hn=!0,fr=zS}finally{try{!Jt&&gr.return!=null&&gr.return()}finally{if(Hn)throw fr}}}else ee.push(xt);ve=Ht+1,ne=String.prototype.indexOf.call(j,"{",ve)}if(ve<He){var FS=j.slice(ve,He);ee.push({type:"literal",value:FS})}return ee}function Gt(j,ie){var ee,ne=ie.length;if(ne===0)return[];if(ne===2){ee=C(j,"templatePair");var ve={type:"element",value:ie[0]},He={type:"element",value:ie[1]},Ht={0:ve,1:He};return Yo(ee,Ht)}for(var ut={type:"element",value:ie[ne-1]},St=[ut],xt=ne-2;xt>=0;){xt===0?ee=C(j,"templateStart"):xt<ne-2?ee=C(j,"templateMiddle"):ee=C(j,"templateEnd");var Jt={type:"element",value:ie[xt]},Hn={type:"element",value:St},fr={0:Jt,1:Hn};St=Yo(ee,fr),xt--}return St}function nl(j,ie){var ee=Gt(j,ie),ne="",ve=!0,He=!1,Ht=void 0;try{for(var ut=ee[Symbol.iterator](),St;!(ve=(St=ut.next()).done);ve=!0){var xt=St.value;ne+=xt.value}}catch(Jt){He=!0,Ht=Jt}finally{try{!ve&&ut.return!=null&&ut.return()}finally{if(He)throw Ht}}return ne}function Hs(j,ie){return Gt(j,ie)}var nn=function(){function j(){o(this,j);var ie=arguments[0],ee=arguments[1];if((this instanceof j?this.constructor:void 0)===void 0)throw new TypeError("Constructor Intl.ListFormat requires 'new'");var ne=Intl.getCanonicalLocales(ie);ee=ee===void 0?Object.create(null):u(ee);var ve=Object.create(null),He=$(ee,"localeMatcher","string",a,"best fit");ve.localeMatcher=He;var Ht=$(ee,"type","string",r,"conjunction");w(this,"type",Ht);var ut=$(ee,"style","string",i,"long");w(this,"style",ut);var St=y.localeData,xt=Ee(y.availableLocales,ne,ve),Jt=xt.dataLocale,Hn=St[Jt],fr=Hn.formats[Ht],gr=fr[ut];w(this,"templatePair",gr.Pair),w(this,"templateStart",gr.Start),w(this,"templateMiddle",gr.Middle),w(this,"templateEnd",gr.End),w(this,"locale",xt.locale),w(this,"initializedListFormat",this)}return n(j,[{key:"format",value:function(ee){var ne=this;if(!(ne instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));if(!k(ne,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));var ve=Vn(ee);return nl(ne,ve)}},{key:"formatToParts",value:function(ee){var ne=this;if(!(ne instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));if(!k(ne,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));var ve=Vn(ee);return Hs(ne,ve)}},{key:"resolvedOptions",value:function(){var ee=this;if(!(ee instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));if(!k(ee,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));var ne=C(this,"locale"),ve=C(this,"type"),He=C(this,"style");return{locale:ne,type:ve,style:He}}}],[{key:"supportedLocalesOf",value:function(ee){var ne=arguments[1],ve=y.availableLocales,He=Intl.getCanonicalLocales(ee);return X(ve,He,ne)}},{key:"__addLocaleData",value:function(ee){var ne=ee.data,ve=ee.locale,He=m();He==null&&p(ve),y.localeData[ve]=ne,y.availableLocales.includes(ve)||y.availableLocales.push(ve)}}]),j}();Object.defineProperty(nn.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,value:"Intl.ListFormat",configurable:!0});function ci(){if(typeof Intl>"u")throw new TypeError("Could not define Intl.ListFormat: Expected 'Intl' to exist. Remember to include polyfill for Intl.getCanonicalLocales before applying this polyfill");Intl.ListFormat=nn}t||ci()})();s();"__addLocaleData"in Intl.ListFormat&&Intl.ListFormat.__addLocaleData({locale:"en",data:{formats:{conjunction:{long:{Pair:"{0} and {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, and {1}"},short:{Pair:"{0} & {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, & {1}"},narrow:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"}},disjunction:{long:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},short:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},narrow:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"}},unit:{long:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},short:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},narrow:{Pair:"{0} {1}",Start:"{0} {1}",Middle:"{0} {1}",End:"{0} {1}"}}}}});H();s();s();function TP(){return`https://${fa.services.content.host}`}s();function MP(t,o){let e=[],n=0;for(;n<t.length;)e.push(t.slice(n,n+o)),n+=o;return e}function LP(t){let o=t.reduce((r,i)=>r+i.length,0),e=new Uint8Array(o),n=0;return t.forEach(r=>{e.set(r,n),n+=r.length}),e}s();function DP(t){return{type:"link",id:ba(),edits:{},...t}}s();var Lp=100;var hw=200;function NP(t){return t.replace(/(\r\n|\r|\n)/g," ")}function ih(t){return NP(t).trim().slice(0,Lp).trim()||"Untitled"}function AP(t){return NP(t).trim().slice(0,hw).trim()}function L4(t){return BI()(["docs","editorial","landing"]).includes(t)}function Au(t){var o;return typeof((o=t.cover)==null?void 0:o.yPos)=="number"}function Bu(t){return t!=null&&t.layout?typeof t.layout=="string"&&L4(t.layout)?t.layout:"custom":"docs"}function qu(t){let o=Bu(t),e={docs:{cover:!0,coverSize:"full",title:!0,description:!0,tableOfContents:!0,outline:!0,pagination:!0},editorial:{cover:!0,coverSize:"full",title:!0,description:!0,tableOfContents:!1,outline:!0,pagination:!0},landing:{cover:!0,coverSize:"full",title:!0,description:!0,tableOfContents:!1,outline:!1,pagination:!0}};switch(o){case"docs":return e.docs;case"editorial":return e.editorial;case"landing":return e.landing;case"custom":return typeof(t==null?void 0:t.layout)=="object"?t.layout:e.docs;default:Fe(o)}}s();var xD=x(CD());function kD(t,o){let{pageId:e,rename:n=!1}=o;return{...(0,xD.default)(t),id:e,title:n?ih(`Copy of ${t.title}`):t.title,git:void 0,pages:t.type==="link"?void 0:[]}}s();var Wj=dt("hive:revisions:diff");function nx(t,o){let e=[];return o.forEach(n=>{let r=t[n];if(!r){Wj.warning(`Couldn't find page ${n} although it is referenced. This may indicate a bad page tree normalization.`);return}e.push({renderKey:n,page:r,pages:r.type==="link"?[]:nx(t,r.pages)})}),e}s();function OD(t,o){return{edits:f_([o]),...t,id:t.id||ba()}}s();function ID(t,o,e,n){if(e.blobId)return new URL(`/content/${o}/blobs/${e.blobId}/${e.name}`,t).toString();if(e.downloadURL)return n?n(e.downloadURL):e.downloadURL;throw new Error("File does not have a download URL")}s();s();function pc(t,o,e={}){let n;if(e.into){let r=A.getIn(t,["pages",e.into]);if(!r||!Su(r))throw new Error(`Cannot insert page into ${e.into}`);n=A.get(r,"pages")}else n=A.getIn(t,["rootPages"]);if(!n)throw new Error(`Cannot insert page into ${e.into}`);e.at!==void 0?A.insert(n,e.at,[o.id]):A.push(n,[o.id]),A.setIn(t,["pages",o.id],Qn(t)?wa(o):o)}function _D(t,o,e){let n=Sn(t,e),r=n?A.get(n,"pages"):A.get(t,"rootPages"),i=A.findIndex(r,c=>c===e);if(i<0)return{at:i};let a=n?A.get(n,"id"):void 0;return o==="after"?{into:a,at:i+1}:{into:a,at:i}}function RD(t,o,e){let n=_D(t,"before",e);if(!(n.at===void 0||(n==null?void 0:n.at)<0))return pc(t,o,n)}function $h(t,o,e){let n=_D(t,"after",e);if(!(n.at===void 0||(n==null?void 0:n.at)<0))return pc(t,o,n)}s();function Zi(t,o,e){let n=A.getIn(t,["pages",o]);if(n)if(typeof e=="function"){e(n);return}else Object.entries(e).forEach(([r,i])=>{A.set(n,r,Qn(t)?wa(i):i)})}function PD(t,o,e){Zi(t,o,n=>{if(!wp(n))return;let r=qu(Jn(n));A.set(n,"layout",{...r,...e})})}function ED(t,o,e){Zi(t,o,{title:ih(e)})}function TD(t,o,e){Zi(t,o,n=>{wp(n)&&A.set(n,"description",AP(e))})}function rx(t,o){let{originalPageId:e,parentPageId:n}=o,r=o.newPageId||ba(),i=A.getIn(t,["pages",e]);if(!i)return;let a=kD(Qn(i)?Jn(i):i,{pageId:r,rename:!n});n?pc(t,a,{into:n}):$h(t,a,e);let c;if(Su(i)){let l=A.get(i,"pages");c=A.map(l,u=>{let d=ba();return rx(t,{originalPageId:u,parentPageId:a.id,newPageId:d}),d})}return Zi(t,a.id,{pages:c}),r}s();s();s();function mc(t,o){let e=b_(t,o),n=[];return e.forEach(r=>{n.push(r),A.get(r,"type")!=="link"&&n.push(...mc(t,A.get(r,"id")))}),n}function MD(t,o,e){return A.getIn(t,["pages",e])?wu(t,e).some(i=>A.get(i,"id")===o):!1}function sm(t,o,e={}){let n=A.getIn(t,["pages",o]);if(!n)return;let r=Sn(t,o);if(e.deleteEmptyGroupParent&&r&&A.get(r,"type")==="group"&&A.get(r,"pages").length===1)return sm(t,A.get(r,"id"));let i=[A.get(n,"id")];A.get(n,"type")!=="link"&&mc(t,o).forEach(u=>{i.push(A.get(u,"id"))}),[...A.entries(A.get(t,"pages"))].some(([,l])=>wp(l)&&!i.includes(A.get(l,"id")))&&(A.delArrayValue(r?A.get(r,"pages"):A.get(t,"rootPages"),o),i.forEach(l=>{A.del(A.get(t,"pages"),l);let u=A.get(t,"conflicts");u&&A.getIn(u,["pages",l])&&A.delIn(u,["pages",l])}))}function Fj(t,o,e){if(o===e)return!1;let n=A.getIn(t,["pages",o]),r=A.getIn(t,["pages",e]);if(!n||!r||v_(r)||nw(n))return!1;let i=wu(t,e);return!(A.findIndex(i,a=>A.get(a,"id")===o)>=0)}function Yh(t,o,e,n={}){let r=A.getIn(t,["pages",o]),i=e?A.getIn(t,["pages",e]):void 0;if(i&&!Su(i))throw new Error("Cannot move page under a link");if(!r||e&&!Fj(t,o,e))return;let a=A.get(t,"rootPages"),c=i?A.get(i,"pages"):a,l=typeof n.at=="number"?n.at:c.length,u=Sn(t,o),d=u?A.get(u,"pages"):a,p=A.findIndex(d,f=>f===o),m=u?A.get(u,"id")===e:!e;l===p&&m||(p>=0&&(A.delArrayIndex(d,p,1),m&&(l=p<=l?l-1:l)),A.insert(c,l,[o]),n.deleteEmptyGroupParent&&u&&nw(u)&&A.get(u,"pages").length===0&&sm(t,A.get(u,"id")))}function LD(t,o,e){let n=Sn(t,e),r=n?A.get(n,"pages"):A.get(t,"rootPages"),i=A.findIndex(r,a=>a===e);return{at:o==="after"?i+1:i,parentId:n?A.get(n,"id"):void 0}}function DD(t,o,e){let{at:n,parentId:r}=LD(t,"before",e);n<0||Yh(t,o,r,{at:n})}function ND(t,o,e){let{at:n,parentId:r}=LD(t,"after",e);n<0||Yh(t,o,r,{at:n})}s();function AD(t,o){if(A.getIn(t,["files",o.id]))throw new Error("File with same ID already exists in revision");let n=A.get(t,"files");A.set(n,o.id,o)}function BD(t,o){A.delIn(t,["files",o])}function qD(t,o,e){let n=A.getIn(t,["files",o]);if(!n)throw new Error("File doesn't exist in revision");Object.entries(e).forEach(([r,i])=>{A.set(n,r,Qn(t)?wa(i):i)})}s();var fc=dt("normalizeRevision");function FD(t){let o=A.get(t,"id"),e=A.get(t,"contentId"),n=A.get(t,"pages"),r=A.get(t,"rootPages"),i=A.get(t,"conflicts"),a=A.values(A.get(t,"parents")),c=new Set(A.keys(n)),l;if(a.length>3)throw new Error(`Revision ${e}/${o} has more than 3 parents`);if(a.includes(o)){let f=a.filter(h=>h!==o);if(f.length===0)throw new Error(`Revision ${e}/${o} has no more parents after removing itself as parent`);A.set(t,"parents",f),fc.warning(`${e}/${o}: updated parents to remove itself as parent. New parents:`,f)}let u=A.get(t,"customFields");u?WD(u):A.set(t,"customFields",{});let d=f=>{let h=[];if(f.forEach(y=>{p(y)&&h.push(y)}),h.length!==f.length)return h},p=f=>{if(!c.has(f))return!1;c.delete(f);let h=A.get(n,f);if(!h)return!1;let y=A.get(h,"customFields");if(y&&WD(y),A.get(h,"type")==="link")return zj(e,o,f,h),!0;let w=h;l===void 0&&A.get(h,"type")==="document"&&(l=A.get(h,"id"));let C=d(A.get(w,"pages"));return C&&(A.set(w,"pages",C),fc.warning(`${e}/${o}: updated children for page ${f}. New children pages:`,C)),!0},m=d(r);if(m&&(A.set(t,"rootPages",m),fc.warning(`${e}/${o}: normalized rootPages. New root pages:`,m)),c.size>0){let f=Array.from(c);A.push(r,f),fc.warning(`${e}/${o}: made pages with invalid parent into rootPages. Pages:`,f)}if(!l){let f=h_();pc(t,f),fc.warning(`${e}/${o}: created empty page document ${f.id} as none were found. `)}if(i!==void 0){let f=A.get(i,"pages"),h=A.keys(f),y=h.reduce((w,C)=>{let k=A.get(f,C),I=A.get(n,C);return(k===!1||k==="deleted-in-base")&&!I||I&&A.get(I,"type")==="link"?w.add(C):w},new Set);y.size>0&&(y.size===h.length?(A.del(t,"conflicts"),fc.warning(`${e}/${o}: normalized conflicts. All were invalid and have been removed.`)):(y.forEach(w=>{A.del(f,w)}),fc.warning(`${e}/${o}: normalized conflicts. New conflicts:`,i)))}}function WD(t){for(let[o,e]of A.entries(t)){let n=A.get(e,"value");typeof n!="string"&&typeof n!="number"&&typeof n!="boolean"&&A.del(t,o)}}function zj(t,o,e,n){let r=A.get(n,"target");(typeof r!="object"||typeof A.get(r,"kind")!="string")&&(fc.warning(`${t}/${o}: normalized invalid link ${e}, with target ${JSON.stringify(Jn(r))}`),A.set(n,"type","document"),A.set(n,"pages",[]),A.del(n,"target"))}s();function zD(t){return A.get(t,"conflicts")!==void 0}function Vj(t,o,e){if(!zD(t))return;let n=A.getIn(t,["conflicts","pages"]);n&&A.has(n,o)&&A.set(n,o,e),Gj(t)}function Gj(t){if(!zD(t))return;let o=A.getIn(t,["conflicts","pages"]);if(o){for(let[,e]of A.entries(o))if(e!==!1)return;A.del(t,"conflicts")}}function VD(t,o){Vj(t,o,!1)}s();function GD(t,o,e=void 0){Zi(t,o,n=>{if(A.get(n,"type")!=="document")return;let i={ref:e,yPos:0};A.set(n,"cover",Qn(t)?wa(i):i)})}function HD(t,o){Zi(t,o,e=>{A.get(e,"type")==="document"&&A.del(e,"cover")})}function KD(t,o,e){Zi(t,o,n=>{if(A.get(n,"type")!=="document")return;let i=A.get(n,"cover");i&&A.set(i,"yPos",e)})}s();function XD(t,o="Page",e=!1){let n=A.get(t,"pages"),i=A.values(n).map(l=>A.get(l,"title")),a=new Set(i);if(!e&&!a.has(o))return o;let c=l=>{let u=` ${l}`,d=`${o.slice(0,Lp-u.length)}${u}`;return a.has(d)?c(l+1):d};return c(1)}s();function UD(t){A.get(t,"customFields")||A.set(t,"customFields",{})}function jD(t,o){UD(t),YD(t,o)}function $D(t,o){UD(t),YD(t,o)}function YD(t,o){Object.entries(o).forEach(([e,n])=>{A.getIn(t,["customFields",e])?A.setIn(t,["customFields",e,"value"],n.value):A.setIn(t,["customFields",e],Qn(t)?wa(n):n)})}s();function ZD(t,o){let e=A.get(t,"edits");A.set(t,"edits",bp(e,Array.isArray(o)?o:[o]))}s();function QD(t,o,e){let n=A.getIn(t,["pages",o,"edits"]);if(!n)return;let r=(()=>Array.isArray(e)?bp(n,e):typeof e=="string"?bp(n,[e]):g_(n,e))();A.setIn(t,["pages",o,"edits"],r)}s();var JD=x(QI());function eN(t,o){let e=ix(t),r=A.values(e).find(i=>A.get(i,"integration")===o.integration&&A.get(i,"entityId")===o.entityId);r?A.set(r,"environments",(0,JD.default)([...A.values(A.get(r,"environments")),...o.environments])):A.push(e,[o])}function tN(t,o){let e=ix(t),r=A.values(e).find(i=>A.get(i,"integration")===o.integration&&A.get(i,"entityId")===o.entityId);r&&A.set(r,"environments",o.environments)}function oN(t,o){let e=ix(t),r=A.values(e).findIndex(i=>A.get(i,"integration")===o.integration&&A.get(i,"entityId")===o.entityId);r!==-1&&A.delArrayIndex(e,r,1)}function ix(t){let o=A.get(t,"entities");return o||(A.set(t,"entities",[]),o=A.get(t,"entities")),o}s();function Zh(t){return t.getMap("data")}s();var nN=pi(t=>({id:t.get("id"),type:t.get("type"),contentId:t.get("contentId"),conflicts:Jn(t.get("conflicts")),parents:t.get("parents").toArray(),mergedFrom:t.get("mergedFrom"),rolledBackBy:t.get("rolledBackBy"),git:Jn(t.get("git")),rootPages:t.get("rootPages").toArray(),pages:Hj(t.get("pages")),files:Kj(t.get("files")),edits:Jn(t.get("edits")),customFields:Jn(t.get("customFields")),entities:Jn(t.get("entities"))})),Hj=pi(t=>{let o={};return t.forEach((e,n)=>{o[n]=Qn(e)?rN(e):Jn(e)}),o}),Kj=pi(t=>{let o={};return t.forEach((e,n)=>{o[n]=Qn(e)?rN(e):Jn(e)}),o}),rN=pi(t=>Jn(t));s();var iN={insertPage:pc,insertPageAfter:$h,insertPageBefore:RD,removePage:sm,updatePage:Zi,updatePageLayout:PD,movePage:Yh,movePageAfter:ND,movePageBefore:DD,addPageCover:GD,removePageCover:HD,movePageCover:KD,renamePage:ED,setPageDescription:TD,duplicatePage:rx,resolveConflict:VD,insertFile:AD,removeFile:BD,updateFile:qD,getPageParent:Sn,getUniquePageTitle:XD,updateRevisionCustomFields:jD,updatePageCustomFields:$D,markRevisionAsEdited:ZD,markPageAsEdited:QD,addEntity:eN,updateEntity:tN,deleteEntity:oN};function aN(t){let o={revision:t};for(let e in iN)o[e]=(...n)=>iN[e](t,...n);return o}s();s();s();var Oo=x(_4()),ke=Oo.Reader,Qi=Oo.Writer,B=Oo.util,J=Oo.roots.default||(Oo.roots.default={}),Fge=J.PromptInitMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.index=0,t.prototype.count=0,t.prototype.stateVector=B.newBuffer([]),t.prototype.version=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Qi.create()),n.uint32(8).int32(e.id),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&n.uint32(16).int32(e.index),e.count!=null&&Object.hasOwnProperty.call(e,"count")&&n.uint32(24).int32(e.count),n.uint32(34).bytes(e.stateVector),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&n.uint32(40).int32(e.version),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ke||(e=ke.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.PromptInitMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.index=e.int32();break}case 3:{i.count=e.int32();break}case 4:{i.stateVector=e.bytes();break}case 5:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("stateVector"))throw B.ProtocolError("missing required 'stateVector'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ke||(e=new ke(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!B.isInteger(e.id))return"id: integer expected";if(e.index!=null&&e.hasOwnProperty("index")&&!B.isInteger(e.index))return"index: integer expected";if(e.count!=null&&e.hasOwnProperty("count")&&!B.isInteger(e.count))return"count: integer expected";if(!(e.stateVector&&typeof e.stateVector.length=="number"||B.isString(e.stateVector)))return"stateVector: buffer expected";if(e.version!=null&&e.hasOwnProperty("version"))switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},t.fromObject=function(e){if(e instanceof J.PromptInitMessage)return e;let n=new J.PromptInitMessage;switch(e.id!=null&&(n.id=e.id|0),e.index!=null&&(n.index=e.index|0),e.count!=null&&(n.count=e.count|0),e.stateVector!=null&&(typeof e.stateVector=="string"?B.base64.decode(e.stateVector,n.stateVector=B.newBuffer(B.base64.length(e.stateVector)),0):e.stateVector.length>=0&&(n.stateVector=e.stateVector)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.index=0,r.count=0,n.bytes===String?r.stateVector="":(r.stateVector=[],n.bytes!==Array&&(r.stateVector=B.newBuffer(r.stateVector))),r.version=n.enums===String?"UNSPECIFIED":0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.index!=null&&e.hasOwnProperty("index")&&(r.index=e.index),e.count!=null&&e.hasOwnProperty("count")&&(r.count=e.count),e.stateVector!=null&&e.hasOwnProperty("stateVector")&&(r.stateVector=n.bytes===String?B.base64.encode(e.stateVector,0,e.stateVector.length):n.bytes===Array?Array.prototype.slice.call(e.stateVector):e.stateVector),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?J.UpdateFormatVersion[e.version]===void 0?e.version:J.UpdateFormatVersion[e.version]:e.version),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Oo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/PromptInitMessage"},t})(),zge=J.InitMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.index=0,t.prototype.count=0,t.prototype.update=B.newBuffer([]),t.prototype.version=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Qi.create()),n.uint32(8).int32(e.id),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&n.uint32(16).int32(e.index),e.count!=null&&Object.hasOwnProperty.call(e,"count")&&n.uint32(24).int32(e.count),n.uint32(34).bytes(e.update),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&n.uint32(40).int32(e.version),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ke||(e=ke.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.InitMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.index=e.int32();break}case 3:{i.count=e.int32();break}case 4:{i.update=e.bytes();break}case 5:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("update"))throw B.ProtocolError("missing required 'update'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ke||(e=new ke(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!B.isInteger(e.id))return"id: integer expected";if(e.index!=null&&e.hasOwnProperty("index")&&!B.isInteger(e.index))return"index: integer expected";if(e.count!=null&&e.hasOwnProperty("count")&&!B.isInteger(e.count))return"count: integer expected";if(!(e.update&&typeof e.update.length=="number"||B.isString(e.update)))return"update: buffer expected";if(e.version!=null&&e.hasOwnProperty("version"))switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},t.fromObject=function(e){if(e instanceof J.InitMessage)return e;let n=new J.InitMessage;switch(e.id!=null&&(n.id=e.id|0),e.index!=null&&(n.index=e.index|0),e.count!=null&&(n.count=e.count|0),e.update!=null&&(typeof e.update=="string"?B.base64.decode(e.update,n.update=B.newBuffer(B.base64.length(e.update)),0):e.update.length>=0&&(n.update=e.update)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.index=0,r.count=0,n.bytes===String?r.update="":(r.update=[],n.bytes!==Array&&(r.update=B.newBuffer(r.update))),r.version=n.enums===String?"UNSPECIFIED":0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.index!=null&&e.hasOwnProperty("index")&&(r.index=e.index),e.count!=null&&e.hasOwnProperty("count")&&(r.count=e.count),e.update!=null&&e.hasOwnProperty("update")&&(r.update=n.bytes===String?B.base64.encode(e.update,0,e.update.length):n.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?J.UpdateFormatVersion[e.version]===void 0?e.version:J.UpdateFormatVersion[e.version]:e.version),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Oo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/InitMessage"},t})(),Vge=J.UpdateMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.index=0,t.prototype.count=0,t.prototype.update=B.newBuffer([]),t.prototype.version=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Qi.create()),n.uint32(8).int32(e.id),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&n.uint32(16).int32(e.index),e.count!=null&&Object.hasOwnProperty.call(e,"count")&&n.uint32(24).int32(e.count),n.uint32(34).bytes(e.update),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&n.uint32(40).int32(e.version),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ke||(e=ke.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.UpdateMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.index=e.int32();break}case 3:{i.count=e.int32();break}case 4:{i.update=e.bytes();break}case 5:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("update"))throw B.ProtocolError("missing required 'update'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ke||(e=new ke(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!B.isInteger(e.id))return"id: integer expected";if(e.index!=null&&e.hasOwnProperty("index")&&!B.isInteger(e.index))return"index: integer expected";if(e.count!=null&&e.hasOwnProperty("count")&&!B.isInteger(e.count))return"count: integer expected";if(!(e.update&&typeof e.update.length=="number"||B.isString(e.update)))return"update: buffer expected";if(e.version!=null&&e.hasOwnProperty("version"))switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},t.fromObject=function(e){if(e instanceof J.UpdateMessage)return e;let n=new J.UpdateMessage;switch(e.id!=null&&(n.id=e.id|0),e.index!=null&&(n.index=e.index|0),e.count!=null&&(n.count=e.count|0),e.update!=null&&(typeof e.update=="string"?B.base64.decode(e.update,n.update=B.newBuffer(B.base64.length(e.update)),0):e.update.length>=0&&(n.update=e.update)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.index=0,r.count=0,n.bytes===String?r.update="":(r.update=[],n.bytes!==Array&&(r.update=B.newBuffer(r.update))),r.version=n.enums===String?"UNSPECIFIED":0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.index!=null&&e.hasOwnProperty("index")&&(r.index=e.index),e.count!=null&&e.hasOwnProperty("count")&&(r.count=e.count),e.update!=null&&e.hasOwnProperty("update")&&(r.update=n.bytes===String?B.base64.encode(e.update,0,e.update.length):n.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?J.UpdateFormatVersion[e.version]===void 0?e.version:J.UpdateFormatVersion[e.version]:e.version),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Oo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/UpdateMessage"},t})(),Xj=J.StoredUpdate=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.update=B.newBuffer([]),t.prototype.version=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Qi.create()),n.uint32(18).bytes(e.update),n.uint32(24).int32(e.version),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ke||(e=ke.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.StoredUpdate;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 2:{i.update=e.bytes();break}case 3:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("update"))throw B.ProtocolError("missing required 'update'",{instance:i});if(!i.hasOwnProperty("version"))throw B.ProtocolError("missing required 'version'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ke||(e=new ke(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!(e.update&&typeof e.update.length=="number"||B.isString(e.update)))return"update: buffer expected";switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},t.fromObject=function(e){if(e instanceof J.StoredUpdate)return e;let n=new J.StoredUpdate;switch(e.update!=null&&(typeof e.update=="string"?B.base64.decode(e.update,n.update=B.newBuffer(B.base64.length(e.update)),0):e.update.length>=0&&(n.update=e.update)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(n.bytes===String?r.update="":(r.update=[],n.bytes!==Array&&(r.update=B.newBuffer(r.update))),r.version=n.enums===String?"UNSPECIFIED":0),e.update!=null&&e.hasOwnProperty("update")&&(r.update=n.bytes===String?B.base64.encode(e.update,0,e.update.length):n.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?J.UpdateFormatVersion[e.version]===void 0?e.version:J.UpdateFormatVersion[e.version]:e.version),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Oo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/StoredUpdate"},t})(),Gge=J.UpdatePresenceMessage=(()=>{function t(o){if(this.data={},this.positions={},o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.data=B.emptyObject,t.prototype.positions=B.emptyObject,t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=Qi.create()),n.uint32(8).int32(e.id),e.data!=null&&Object.hasOwnProperty.call(e,"data"))for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.uint32(18).fork().uint32(10).string(r[i]).uint32(18).string(e.data[r[i]]).ldelim();if(e.positions!=null&&Object.hasOwnProperty.call(e,"positions"))for(let r=Object.keys(e.positions),i=0;i<r.length;++i)n.uint32(26).fork().uint32(10).string(r[i]).uint32(18).bytes(e.positions[r[i]]).ldelim();return n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ke||(e=ke.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.UpdatePresenceMessage,a,c;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.id=e.int32();break}case 2:{i.data===B.emptyObject&&(i.data={});let u=e.uint32()+e.pos;for(a="",c="";e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=e.string();break;default:e.skipType(d&7);break}}i.data[a]=c;break}case 3:{i.positions===B.emptyObject&&(i.positions={});let u=e.uint32()+e.pos;for(a="",c=[];e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=e.bytes();break;default:e.skipType(d&7);break}}i.positions[a]=c;break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ke||(e=new ke(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!B.isInteger(e.id))return"id: integer expected";if(e.data!=null&&e.hasOwnProperty("data")){if(!B.isObject(e.data))return"data: object expected";let n=Object.keys(e.data);for(let r=0;r<n.length;++r)if(!B.isString(e.data[n[r]]))return"data: string{k:string} expected"}if(e.positions!=null&&e.hasOwnProperty("positions")){if(!B.isObject(e.positions))return"positions: object expected";let n=Object.keys(e.positions);for(let r=0;r<n.length;++r)if(!(e.positions[n[r]]&&typeof e.positions[n[r]].length=="number"||B.isString(e.positions[n[r]])))return"positions: buffer{k:string} expected"}return null},t.fromObject=function(e){if(e instanceof J.UpdatePresenceMessage)return e;let n=new J.UpdatePresenceMessage;if(e.id!=null&&(n.id=e.id|0),e.data){if(typeof e.data!="object")throw TypeError(".UpdatePresenceMessage.data: object expected");n.data={};for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.data[r[i]]=String(e.data[r[i]])}if(e.positions){if(typeof e.positions!="object")throw TypeError(".UpdatePresenceMessage.positions: object expected");n.positions={};for(let r=Object.keys(e.positions),i=0;i<r.length;++i)typeof e.positions[r[i]]=="string"?B.base64.decode(e.positions[r[i]],n.positions[r[i]]=B.newBuffer(B.base64.length(e.positions[r[i]])),0):e.positions[r[i]].length>=0&&(n.positions[r[i]]=e.positions[r[i]])}return n},t.toObject=function(e,n){n||(n={});let r={};(n.objects||n.defaults)&&(r.data={},r.positions={}),n.defaults&&(r.id=0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id);let i;if(e.data&&(i=Object.keys(e.data)).length){r.data={};for(let a=0;a<i.length;++a)r.data[i[a]]=e.data[i[a]]}if(e.positions&&(i=Object.keys(e.positions)).length){r.positions={};for(let a=0;a<i.length;++a)r.positions[i[a]]=n.bytes===String?B.base64.encode(e.positions[i[a]],0,e.positions[i[a]].length):n.bytes===Array?Array.prototype.slice.call(e.positions[i[a]]):e.positions[i[a]]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Oo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/UpdatePresenceMessage"},t})(),Hge=J.AckMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.message=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Qi.create()),n.uint32(8).int32(e.id),n.uint32(16).int32(e.message),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ke||(e=ke.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.AckMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.message=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("message"))throw B.ProtocolError("missing required 'message'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ke||(e=new ke(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":B.isInteger(e.id)?B.isInteger(e.message)?null:"message: integer expected":"id: integer expected"},t.fromObject=function(e){if(e instanceof J.AckMessage)return e;let n=new J.AckMessage;return e.id!=null&&(n.id=e.id|0),e.message!=null&&(n.message=e.message|0),n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.message=0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.message!=null&&e.hasOwnProperty("message")&&(r.message=e.message),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Oo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/AckMessage"},t})(),Kge=J.BroadcastPresencesMessage=(()=>{function t(o){if(this.presences={},o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.presences=B.emptyObject,t.prototype.selfClientId="",t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=Qi.create()),n.uint32(8).int32(e.id),e.presences!=null&&Object.hasOwnProperty.call(e,"presences"))for(let r=Object.keys(e.presences),i=0;i<r.length;++i)n.uint32(18).fork().uint32(10).string(r[i]),J.Presence.encode(e.presences[r[i]],n.uint32(18).fork()).ldelim().ldelim();return n.uint32(26).string(e.selfClientId),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ke||(e=ke.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.BroadcastPresencesMessage,a,c;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.id=e.int32();break}case 2:{i.presences===B.emptyObject&&(i.presences={});let u=e.uint32()+e.pos;for(a="",c=null;e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=J.Presence.decode(e,e.uint32());break;default:e.skipType(d&7);break}}i.presences[a]=c;break}case 3:{i.selfClientId=e.string();break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("selfClientId"))throw B.ProtocolError("missing required 'selfClientId'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ke||(e=new ke(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!B.isInteger(e.id))return"id: integer expected";if(e.presences!=null&&e.hasOwnProperty("presences")){if(!B.isObject(e.presences))return"presences: object expected";let n=Object.keys(e.presences);for(let r=0;r<n.length;++r){let i=J.Presence.verify(e.presences[n[r]]);if(i)return"presences."+i}}return B.isString(e.selfClientId)?null:"selfClientId: string expected"},t.fromObject=function(e){if(e instanceof J.BroadcastPresencesMessage)return e;let n=new J.BroadcastPresencesMessage;if(e.id!=null&&(n.id=e.id|0),e.presences){if(typeof e.presences!="object")throw TypeError(".BroadcastPresencesMessage.presences: object expected");n.presences={};for(let r=Object.keys(e.presences),i=0;i<r.length;++i){if(typeof e.presences[r[i]]!="object")throw TypeError(".BroadcastPresencesMessage.presences: object expected");n.presences[r[i]]=J.Presence.fromObject(e.presences[r[i]])}}return e.selfClientId!=null&&(n.selfClientId=String(e.selfClientId)),n},t.toObject=function(e,n){n||(n={});let r={};(n.objects||n.defaults)&&(r.presences={}),n.defaults&&(r.id=0,r.selfClientId=""),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id);let i;if(e.presences&&(i=Object.keys(e.presences)).length){r.presences={};for(let a=0;a<i.length;++a)r.presences[i[a]]=J.Presence.toObject(e.presences[i[a]],n)}return e.selfClientId!=null&&e.hasOwnProperty("selfClientId")&&(r.selfClientId=e.selfClientId),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Oo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/BroadcastPresencesMessage"},t})(),Xge=J.BroadcastOperationMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.operation=null,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Qi.create()),n.uint32(8).int32(e.id),J.ContentOperation.encode(e.operation,n.uint32(18).fork()).ldelim(),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ke||(e=ke.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.BroadcastOperationMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.operation=J.ContentOperation.decode(e,e.uint32());break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("operation"))throw B.ProtocolError("missing required 'operation'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ke||(e=new ke(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!B.isInteger(e.id))return"id: integer expected";{let n=J.ContentOperation.verify(e.operation);if(n)return"operation."+n}return null},t.fromObject=function(e){if(e instanceof J.BroadcastOperationMessage)return e;let n=new J.BroadcastOperationMessage;if(e.id!=null&&(n.id=e.id|0),e.operation!=null){if(typeof e.operation!="object")throw TypeError(".BroadcastOperationMessage.operation: object expected");n.operation=J.ContentOperation.fromObject(e.operation)}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.operation=null),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.operation!=null&&e.hasOwnProperty("operation")&&(r.operation=J.ContentOperation.toObject(e.operation,n)),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Oo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/BroadcastOperationMessage"},t})(),Sl=J.Message=(()=>{function t(e){if(e)for(let n=Object.keys(e),r=0;r<n.length;++r)e[n[r]]!=null&&(this[n[r]]=e[n[r]])}t.prototype.promptInit=null,t.prototype.init=null,t.prototype.update=null,t.prototype.updatePresence=null,t.prototype.broadcastPresences=null,t.prototype.broadcastOperation=null,t.prototype.ack=null;let o;return Object.defineProperty(t.prototype,"message",{get:B.oneOfGetter(o=["promptInit","init","update","updatePresence","broadcastPresences","broadcastOperation","ack"]),set:B.oneOfSetter(o)}),t.create=function(n){return new t(n)},t.encode=function(n,r){return r||(r=Qi.create()),n.promptInit!=null&&Object.hasOwnProperty.call(n,"promptInit")&&J.PromptInitMessage.encode(n.promptInit,r.uint32(10).fork()).ldelim(),n.init!=null&&Object.hasOwnProperty.call(n,"init")&&J.InitMessage.encode(n.init,r.uint32(18).fork()).ldelim(),n.update!=null&&Object.hasOwnProperty.call(n,"update")&&J.UpdateMessage.encode(n.update,r.uint32(26).fork()).ldelim(),n.updatePresence!=null&&Object.hasOwnProperty.call(n,"updatePresence")&&J.UpdatePresenceMessage.encode(n.updatePresence,r.uint32(34).fork()).ldelim(),n.broadcastPresences!=null&&Object.hasOwnProperty.call(n,"broadcastPresences")&&J.BroadcastPresencesMessage.encode(n.broadcastPresences,r.uint32(42).fork()).ldelim(),n.broadcastOperation!=null&&Object.hasOwnProperty.call(n,"broadcastOperation")&&J.BroadcastOperationMessage.encode(n.broadcastOperation,r.uint32(50).fork()).ldelim(),n.ack!=null&&Object.hasOwnProperty.call(n,"ack")&&J.AckMessage.encode(n.ack,r.uint32(58).fork()).ldelim(),r},t.encodeDelimited=function(n,r){return this.encode(n,r).ldelim()},t.decode=function(n,r){n instanceof ke||(n=ke.create(n));let i=r===void 0?n.len:n.pos+r,a=new J.Message;for(;n.pos<i;){let c=n.uint32();switch(c>>>3){case 1:{a.promptInit=J.PromptInitMessage.decode(n,n.uint32());break}case 2:{a.init=J.InitMessage.decode(n,n.uint32());break}case 3:{a.update=J.UpdateMessage.decode(n,n.uint32());break}case 4:{a.updatePresence=J.UpdatePresenceMessage.decode(n,n.uint32());break}case 5:{a.broadcastPresences=J.BroadcastPresencesMessage.decode(n,n.uint32());break}case 6:{a.broadcastOperation=J.BroadcastOperationMessage.decode(n,n.uint32());break}case 7:{a.ack=J.AckMessage.decode(n,n.uint32());break}default:n.skipType(c&7);break}}return a},t.decodeDelimited=function(n){return n instanceof ke||(n=new ke(n)),this.decode(n,n.uint32())},t.verify=function(n){if(typeof n!="object"||n===null)return"object expected";let r={};if(n.promptInit!=null&&n.hasOwnProperty("promptInit")){r.message=1;{let i=J.PromptInitMessage.verify(n.promptInit);if(i)return"promptInit."+i}}if(n.init!=null&&n.hasOwnProperty("init")){if(r.message===1)return"message: multiple values";r.message=1;{let i=J.InitMessage.verify(n.init);if(i)return"init."+i}}if(n.update!=null&&n.hasOwnProperty("update")){if(r.message===1)return"message: multiple values";r.message=1;{let i=J.UpdateMessage.verify(n.update);if(i)return"update."+i}}if(n.updatePresence!=null&&n.hasOwnProperty("updatePresence")){if(r.message===1)return"message: multiple values";r.message=1;{let i=J.UpdatePresenceMessage.verify(n.updatePresence);if(i)return"updatePresence."+i}}if(n.broadcastPresences!=null&&n.hasOwnProperty("broadcastPresences")){if(r.message===1)return"message: multiple values";r.message=1;{let i=J.BroadcastPresencesMessage.verify(n.broadcastPresences);if(i)return"broadcastPresences."+i}}if(n.broadcastOperation!=null&&n.hasOwnProperty("broadcastOperation")){if(r.message===1)return"message: multiple values";r.message=1;{let i=J.BroadcastOperationMessage.verify(n.broadcastOperation);if(i)return"broadcastOperation."+i}}if(n.ack!=null&&n.hasOwnProperty("ack")){if(r.message===1)return"message: multiple values";r.message=1;{let i=J.AckMessage.verify(n.ack);if(i)return"ack."+i}}return null},t.fromObject=function(n){if(n instanceof J.Message)return n;let r=new J.Message;if(n.promptInit!=null){if(typeof n.promptInit!="object")throw TypeError(".Message.promptInit: object expected");r.promptInit=J.PromptInitMessage.fromObject(n.promptInit)}if(n.init!=null){if(typeof n.init!="object")throw TypeError(".Message.init: object expected");r.init=J.InitMessage.fromObject(n.init)}if(n.update!=null){if(typeof n.update!="object")throw TypeError(".Message.update: object expected");r.update=J.UpdateMessage.fromObject(n.update)}if(n.updatePresence!=null){if(typeof n.updatePresence!="object")throw TypeError(".Message.updatePresence: object expected");r.updatePresence=J.UpdatePresenceMessage.fromObject(n.updatePresence)}if(n.broadcastPresences!=null){if(typeof n.broadcastPresences!="object")throw TypeError(".Message.broadcastPresences: object expected");r.broadcastPresences=J.BroadcastPresencesMessage.fromObject(n.broadcastPresences)}if(n.broadcastOperation!=null){if(typeof n.broadcastOperation!="object")throw TypeError(".Message.broadcastOperation: object expected");r.broadcastOperation=J.BroadcastOperationMessage.fromObject(n.broadcastOperation)}if(n.ack!=null){if(typeof n.ack!="object")throw TypeError(".Message.ack: object expected");r.ack=J.AckMessage.fromObject(n.ack)}return r},t.toObject=function(n,r){r||(r={});let i={};return n.promptInit!=null&&n.hasOwnProperty("promptInit")&&(i.promptInit=J.PromptInitMessage.toObject(n.promptInit,r),r.oneofs&&(i.message="promptInit")),n.init!=null&&n.hasOwnProperty("init")&&(i.init=J.InitMessage.toObject(n.init,r),r.oneofs&&(i.message="init")),n.update!=null&&n.hasOwnProperty("update")&&(i.update=J.UpdateMessage.toObject(n.update,r),r.oneofs&&(i.message="update")),n.updatePresence!=null&&n.hasOwnProperty("updatePresence")&&(i.updatePresence=J.UpdatePresenceMessage.toObject(n.updatePresence,r),r.oneofs&&(i.message="updatePresence")),n.broadcastPresences!=null&&n.hasOwnProperty("broadcastPresences")&&(i.broadcastPresences=J.BroadcastPresencesMessage.toObject(n.broadcastPresences,r),r.oneofs&&(i.message="broadcastPresences")),n.broadcastOperation!=null&&n.hasOwnProperty("broadcastOperation")&&(i.broadcastOperation=J.BroadcastOperationMessage.toObject(n.broadcastOperation,r),r.oneofs&&(i.message="broadcastOperation")),n.ack!=null&&n.hasOwnProperty("ack")&&(i.ack=J.AckMessage.toObject(n.ack,r),r.oneofs&&(i.message="ack")),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Oo.util.toJSONOptions)},t.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/Message"},t})(),Uge=J.Presence=(()=>{function t(o){if(this.data={},this.positions={},o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.data=B.emptyObject,t.prototype.joinTimestamp=B.Long?B.Long.fromBits(0,0,!1):0,t.prototype.updateTimestamp=B.Long?B.Long.fromBits(0,0,!1):0,t.prototype.clientId="",t.prototype.positions=B.emptyObject,t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=Qi.create()),e.data!=null&&Object.hasOwnProperty.call(e,"data"))for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.uint32(10).fork().uint32(10).string(r[i]).uint32(18).string(e.data[r[i]]).ldelim();if(n.uint32(16).int64(e.joinTimestamp),n.uint32(24).int64(e.updateTimestamp),n.uint32(34).string(e.clientId),e.positions!=null&&Object.hasOwnProperty.call(e,"positions"))for(let r=Object.keys(e.positions),i=0;i<r.length;++i)n.uint32(42).fork().uint32(10).string(r[i]).uint32(18).bytes(e.positions[r[i]]).ldelim();return n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ke||(e=ke.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.Presence,a,c;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.data===B.emptyObject&&(i.data={});let u=e.uint32()+e.pos;for(a="",c="";e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=e.string();break;default:e.skipType(d&7);break}}i.data[a]=c;break}case 2:{i.joinTimestamp=e.int64();break}case 3:{i.updateTimestamp=e.int64();break}case 4:{i.clientId=e.string();break}case 5:{i.positions===B.emptyObject&&(i.positions={});let u=e.uint32()+e.pos;for(a="",c=[];e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=e.bytes();break;default:e.skipType(d&7);break}}i.positions[a]=c;break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("joinTimestamp"))throw B.ProtocolError("missing required 'joinTimestamp'",{instance:i});if(!i.hasOwnProperty("updateTimestamp"))throw B.ProtocolError("missing required 'updateTimestamp'",{instance:i});if(!i.hasOwnProperty("clientId"))throw B.ProtocolError("missing required 'clientId'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ke||(e=new ke(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.data!=null&&e.hasOwnProperty("data")){if(!B.isObject(e.data))return"data: object expected";let n=Object.keys(e.data);for(let r=0;r<n.length;++r)if(!B.isString(e.data[n[r]]))return"data: string{k:string} expected"}if(!B.isInteger(e.joinTimestamp)&&!(e.joinTimestamp&&B.isInteger(e.joinTimestamp.low)&&B.isInteger(e.joinTimestamp.high)))return"joinTimestamp: integer|Long expected";if(!B.isInteger(e.updateTimestamp)&&!(e.updateTimestamp&&B.isInteger(e.updateTimestamp.low)&&B.isInteger(e.updateTimestamp.high)))return"updateTimestamp: integer|Long expected";if(!B.isString(e.clientId))return"clientId: string expected";if(e.positions!=null&&e.hasOwnProperty("positions")){if(!B.isObject(e.positions))return"positions: object expected";let n=Object.keys(e.positions);for(let r=0;r<n.length;++r)if(!(e.positions[n[r]]&&typeof e.positions[n[r]].length=="number"||B.isString(e.positions[n[r]])))return"positions: buffer{k:string} expected"}return null},t.fromObject=function(e){if(e instanceof J.Presence)return e;let n=new J.Presence;if(e.data){if(typeof e.data!="object")throw TypeError(".Presence.data: object expected");n.data={};for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.data[r[i]]=String(e.data[r[i]])}if(e.joinTimestamp!=null&&(B.Long?(n.joinTimestamp=B.Long.fromValue(e.joinTimestamp)).unsigned=!1:typeof e.joinTimestamp=="string"?n.joinTimestamp=parseInt(e.joinTimestamp,10):typeof e.joinTimestamp=="number"?n.joinTimestamp=e.joinTimestamp:typeof e.joinTimestamp=="object"&&(n.joinTimestamp=new B.LongBits(e.joinTimestamp.low>>>0,e.joinTimestamp.high>>>0).toNumber())),e.updateTimestamp!=null&&(B.Long?(n.updateTimestamp=B.Long.fromValue(e.updateTimestamp)).unsigned=!1:typeof e.updateTimestamp=="string"?n.updateTimestamp=parseInt(e.updateTimestamp,10):typeof e.updateTimestamp=="number"?n.updateTimestamp=e.updateTimestamp:typeof e.updateTimestamp=="object"&&(n.updateTimestamp=new B.LongBits(e.updateTimestamp.low>>>0,e.updateTimestamp.high>>>0).toNumber())),e.clientId!=null&&(n.clientId=String(e.clientId)),e.positions){if(typeof e.positions!="object")throw TypeError(".Presence.positions: object expected");n.positions={};for(let r=Object.keys(e.positions),i=0;i<r.length;++i)typeof e.positions[r[i]]=="string"?B.base64.decode(e.positions[r[i]],n.positions[r[i]]=B.newBuffer(B.base64.length(e.positions[r[i]])),0):e.positions[r[i]].length>=0&&(n.positions[r[i]]=e.positions[r[i]])}return n},t.toObject=function(e,n){n||(n={});let r={};if((n.objects||n.defaults)&&(r.data={},r.positions={}),n.defaults){if(B.Long){let a=new B.Long(0,0,!1);r.joinTimestamp=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.joinTimestamp=n.longs===String?"0":0;if(B.Long){let a=new B.Long(0,0,!1);r.updateTimestamp=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.updateTimestamp=n.longs===String?"0":0;r.clientId=""}let i;if(e.data&&(i=Object.keys(e.data)).length){r.data={};for(let a=0;a<i.length;++a)r.data[i[a]]=e.data[i[a]]}if(e.joinTimestamp!=null&&e.hasOwnProperty("joinTimestamp")&&(typeof e.joinTimestamp=="number"?r.joinTimestamp=n.longs===String?String(e.joinTimestamp):e.joinTimestamp:r.joinTimestamp=n.longs===String?B.Long.prototype.toString.call(e.joinTimestamp):n.longs===Number?new B.LongBits(e.joinTimestamp.low>>>0,e.joinTimestamp.high>>>0).toNumber():e.joinTimestamp),e.updateTimestamp!=null&&e.hasOwnProperty("updateTimestamp")&&(typeof e.updateTimestamp=="number"?r.updateTimestamp=n.longs===String?String(e.updateTimestamp):e.updateTimestamp:r.updateTimestamp=n.longs===String?B.Long.prototype.toString.call(e.updateTimestamp):n.longs===Number?new B.LongBits(e.updateTimestamp.low>>>0,e.updateTimestamp.high>>>0).toNumber():e.updateTimestamp),e.clientId!=null&&e.hasOwnProperty("clientId")&&(r.clientId=e.clientId),e.positions&&(i=Object.keys(e.positions)).length){r.positions={};for(let a=0;a<i.length;++a)r.positions[i[a]]=n.bytes===String?B.base64.encode(e.positions[i[a]],0,e.positions[i[a]].length):n.bytes===Array?Array.prototype.slice.call(e.positions[i[a]]):e.positions[i[a]]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Oo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/Presence"},t})(),jge=J.ContentOperation=(()=>{function t(o){if(this.payload={},o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id="",t.prototype.status=0,t.prototype.createdAt=B.Long?B.Long.fromBits(0,0,!1):0,t.prototype.updatedAt=B.Long?B.Long.fromBits(0,0,!1):0,t.prototype.updateId=0,t.prototype.expireAfter=0,t.prototype.cursor=0,t.prototype.target=0,t.prototype.payload=B.emptyObject,t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=Qi.create()),n.uint32(10).string(e.id),n.uint32(16).int32(e.status),n.uint32(24).int64(e.createdAt),n.uint32(32).int64(e.updatedAt),n.uint32(40).int32(e.updateId),n.uint32(48).int32(e.expireAfter),n.uint32(56).int32(e.cursor),n.uint32(64).int32(e.target),e.payload!=null&&Object.hasOwnProperty.call(e,"payload"))for(let r=Object.keys(e.payload),i=0;i<r.length;++i)n.uint32(74).fork().uint32(10).string(r[i]).uint32(18).string(e.payload[r[i]]).ldelim();return n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ke||(e=ke.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.ContentOperation,a,c;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.id=e.string();break}case 2:{i.status=e.int32();break}case 3:{i.createdAt=e.int64();break}case 4:{i.updatedAt=e.int64();break}case 5:{i.updateId=e.int32();break}case 6:{i.expireAfter=e.int32();break}case 7:{i.cursor=e.int32();break}case 8:{i.target=e.int32();break}case 9:{i.payload===B.emptyObject&&(i.payload={});let u=e.uint32()+e.pos;for(a="",c="";e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:c=e.string();break;default:e.skipType(d&7);break}}i.payload[a]=c;break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("status"))throw B.ProtocolError("missing required 'status'",{instance:i});if(!i.hasOwnProperty("createdAt"))throw B.ProtocolError("missing required 'createdAt'",{instance:i});if(!i.hasOwnProperty("updatedAt"))throw B.ProtocolError("missing required 'updatedAt'",{instance:i});if(!i.hasOwnProperty("updateId"))throw B.ProtocolError("missing required 'updateId'",{instance:i});if(!i.hasOwnProperty("expireAfter"))throw B.ProtocolError("missing required 'expireAfter'",{instance:i});if(!i.hasOwnProperty("cursor"))throw B.ProtocolError("missing required 'cursor'",{instance:i});if(!i.hasOwnProperty("target"))throw B.ProtocolError("missing required 'target'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ke||(e=new ke(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!B.isString(e.id))return"id: string expected";switch(e.status){default:return"status: enum value expected";case 0:case 1:case 2:case 3:break}if(!B.isInteger(e.createdAt)&&!(e.createdAt&&B.isInteger(e.createdAt.low)&&B.isInteger(e.createdAt.high)))return"createdAt: integer|Long expected";if(!B.isInteger(e.updatedAt)&&!(e.updatedAt&&B.isInteger(e.updatedAt.low)&&B.isInteger(e.updatedAt.high)))return"updatedAt: integer|Long expected";if(!B.isInteger(e.updateId))return"updateId: integer expected";if(!B.isInteger(e.expireAfter))return"expireAfter: integer expected";if(!B.isInteger(e.cursor))return"cursor: integer expected";if(!B.isInteger(e.target))return"target: integer expected";if(e.payload!=null&&e.hasOwnProperty("payload")){if(!B.isObject(e.payload))return"payload: object expected";let n=Object.keys(e.payload);for(let r=0;r<n.length;++r)if(!B.isString(e.payload[n[r]]))return"payload: string{k:string} expected"}return null},t.fromObject=function(e){if(e instanceof J.ContentOperation)return e;let n=new J.ContentOperation;switch(e.id!=null&&(n.id=String(e.id)),e.status){default:if(typeof e.status=="number"){n.status=e.status;break}break;case"STARTING":case 0:n.status=0;break;case"RUNNING":case 1:n.status=1;break;case"SUCCESS":case 2:n.status=2;break;case"ERROR":case 3:n.status=3;break}if(e.createdAt!=null&&(B.Long?(n.createdAt=B.Long.fromValue(e.createdAt)).unsigned=!1:typeof e.createdAt=="string"?n.createdAt=parseInt(e.createdAt,10):typeof e.createdAt=="number"?n.createdAt=e.createdAt:typeof e.createdAt=="object"&&(n.createdAt=new B.LongBits(e.createdAt.low>>>0,e.createdAt.high>>>0).toNumber())),e.updatedAt!=null&&(B.Long?(n.updatedAt=B.Long.fromValue(e.updatedAt)).unsigned=!1:typeof e.updatedAt=="string"?n.updatedAt=parseInt(e.updatedAt,10):typeof e.updatedAt=="number"?n.updatedAt=e.updatedAt:typeof e.updatedAt=="object"&&(n.updatedAt=new B.LongBits(e.updatedAt.low>>>0,e.updatedAt.high>>>0).toNumber())),e.updateId!=null&&(n.updateId=e.updateId|0),e.expireAfter!=null&&(n.expireAfter=e.expireAfter|0),e.cursor!=null&&(n.cursor=e.cursor|0),e.target!=null&&(n.target=e.target|0),e.payload){if(typeof e.payload!="object")throw TypeError(".ContentOperation.payload: object expected");n.payload={};for(let r=Object.keys(e.payload),i=0;i<r.length;++i)n.payload[r[i]]=String(e.payload[r[i]])}return n},t.toObject=function(e,n){n||(n={});let r={};if((n.objects||n.defaults)&&(r.payload={}),n.defaults){if(r.id="",r.status=n.enums===String?"STARTING":0,B.Long){let a=new B.Long(0,0,!1);r.createdAt=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.createdAt=n.longs===String?"0":0;if(B.Long){let a=new B.Long(0,0,!1);r.updatedAt=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.updatedAt=n.longs===String?"0":0;r.updateId=0,r.expireAfter=0,r.cursor=0,r.target=0}e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.status!=null&&e.hasOwnProperty("status")&&(r.status=n.enums===String?J.ContentOperationStatus[e.status]===void 0?e.status:J.ContentOperationStatus[e.status]:e.status),e.createdAt!=null&&e.hasOwnProperty("createdAt")&&(typeof e.createdAt=="number"?r.createdAt=n.longs===String?String(e.createdAt):e.createdAt:r.createdAt=n.longs===String?B.Long.prototype.toString.call(e.createdAt):n.longs===Number?new B.LongBits(e.createdAt.low>>>0,e.createdAt.high>>>0).toNumber():e.createdAt),e.updatedAt!=null&&e.hasOwnProperty("updatedAt")&&(typeof e.updatedAt=="number"?r.updatedAt=n.longs===String?String(e.updatedAt):e.updatedAt:r.updatedAt=n.longs===String?B.Long.prototype.toString.call(e.updatedAt):n.longs===Number?new B.LongBits(e.updatedAt.low>>>0,e.updatedAt.high>>>0).toNumber():e.updatedAt),e.updateId!=null&&e.hasOwnProperty("updateId")&&(r.updateId=e.updateId),e.expireAfter!=null&&e.hasOwnProperty("expireAfter")&&(r.expireAfter=e.expireAfter),e.cursor!=null&&e.hasOwnProperty("cursor")&&(r.cursor=e.cursor),e.target!=null&&e.hasOwnProperty("target")&&(r.target=e.target);let i;if(e.payload&&(i=Object.keys(e.payload)).length){r.payload={};for(let a=0;a<i.length;++a)r.payload[i[a]]=e.payload[i[a]]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Oo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/ContentOperation"},t})(),$ge=J.ContentOperationStatus=(()=>{let t={},o=Object.create(t);return o[t[0]="STARTING"]=0,o[t[1]="RUNNING"]=1,o[t[2]="SUCCESS"]=2,o[t[3]="ERROR"]=3,o})(),Ss=J.UpdateFormatVersion=(()=>{let t={},o=Object.create(t);return o[t[0]="UNSPECIFIED"]=0,o[t[1]="V1"]=1,o[t[2]="V2"]=2,o})();var Uj=.9*1024*1024;function sN(t,o=0){let e=o;return{newMessageID:()=>(e+=1,e),write:n=>{if(n.init){let r=n.init;sx(r.update,(i,a,c)=>{t(Qh({init:{...r,index:a,count:c,update:i}}),r.id)})}else if(n.update){let r=n.update;sx(r.update,(i,a,c)=>{t(Qh({update:{...r,index:a,count:c,update:i}}),r.id)})}else if(n.promptInit){let r=n.promptInit;sx(r.stateVector,(i,a,c)=>{t(Qh({promptInit:{...r,index:a,count:c,stateVector:i}}),r.id)})}else t(Qh(n),n[Object.keys(n)[0]].id)}}}function Qh(t){let o=Sl.verify(t);if(o)throw new Error(`ProtoBufObject message is not valid: ${o}`);let e=Sl.create(t);return Sl.encode(e).finish()}function sx(t,o){MP(t,Uj).forEach((n,r,i)=>{o(n,r,i.length)})}s();function cN(t){let o=new Map,e=(n,r)=>{if(!n.id||n.index===void 0||n.count===void 0)return r(n);let i=o.get(n.id)||[];if(i.push(n),o.set(n.id,i),i.length===n.count){let a=LP(i.sort((l,u)=>(l.index||0)-(u.index||0)).map(l=>"update"in l?l.update:l.stateVector)),c=r({...n,..."update"in n?{update:a}:{stateVector:a}});return o.delete(n.id),c}};return n=>jj(n,{promptInit:r=>e(r,i=>t.promptInit(i)),init:r=>e(r,i=>t.init(i)),update:r=>e(r,i=>t.update(i)),updatePresence:t.updatePresence,broadcastOperation:t.broadcastOperation,broadcastPresences:t.broadcastPresences,ack:t.ack})}function jj(t,o){let e=Sl.decode(t),n=Sl.toObject(e);if(n.promptInit)return o.promptInit(n.promptInit);if(n.init)return o.init(n.init);if(n.update)return o.update(n.update);if(n.updatePresence)return o.updatePresence(n.updatePresence);if(n.broadcastOperation)return o.broadcastOperation(n.broadcastOperation);if(n.broadcastPresences)return o.broadcastPresences(n.broadcastPresences);if(n.ack)return o.ack(n.ack)}s();var ihe=dt("datasync:storage");function cx(t,o,e,n){switch(o){case null:case void 0:case Ss.UNSPECIFIED:case Ss.V1:{let r=Array.isArray(e)?m_(e):e;a_(t,r,n);break}case Ss.V2:{let r=Array.isArray(e)?pg(e):e;i_(t,r,n);break}default:Fe(o)}}s();var uN=pi(t=>Ks.create({key:t.getAttribute("key"),nodes:Jh(t),data:lx(t.getAttribute("data"))})),Jh=pi(t=>ha.create(t.toArray().map(o=>{if(o instanceof vr)return dN(o);if(o instanceof Pt)return $j(o);throw new Error(`Unknown node type: ${o}`)}))),$j=pi(t=>{let e=t.toDelta().map(n=>NI.create({text:n.insert,marks:Yj(n.attributes||{})}));return Zf.create({key:t.getAttribute("key"),leaves:ha.create(e)})}),dN=pi(t=>{let o=t.getAttribute("key");switch(t.nodeName){case"block":{let e=t;return Xt.create({key:o,type:e.getAttribute("type"),isVoid:e.getAttribute("isVoid"),data:lx(e.getAttribute("data")),nodes:Jh(t),fragments:lN(e.getAttribute("fragments"))})}case"inline":{let e=t;return dp.create({key:o,type:e.getAttribute("type"),isVoid:e.getAttribute("isVoid"),data:lx(e.getAttribute("data")),nodes:Jh(t),fragments:lN(e.getAttribute("fragments"))})}case"fragment":{let e=t;return AI.create({key:o,type:e.getAttribute("type"),fragment:e.getAttribute("fragment"),nodes:Jh(t)})}default:throw new Error(`Unknown object type: ${t.nodeName}`)}}),lN=pi(t=>LI.create(t.toArray().map(o=>{if(!(o instanceof vr))throw new Error(`Unknown node type: ${o}`);let e=dN(o);return[e.fragmentKey,e]})));function Yj(t){return jf.create(Object.keys(t).map(o=>DI.create({type:o,data:t[o]})))}var lx=pi(t=>pu.create(t.toJSON()));s();function wl(t){let o=t.object;switch(o){case"block":return Qj(t);case"inline":return Jj(t);case"text":return t$(t);default:throw new Error(`Unknown node type: ${o}`)}}function Zj(t){return t.toArray().map(o=>wl(o))}function ux(t,o){t.delete(0,t.length),t.insert(0,Zj(o))}function Qj(t,o=new vr(t.object)){return o.setAttribute("key",t.key),o.setAttribute("isVoid",t.isVoid),o.setAttribute("type",t.type),mN(o,t.data),ux(o,t.nodes),pN(o,t.fragments),o}function Jj(t,o=new vr(t.object)){return o.setAttribute("key",t.key),o.setAttribute("isVoid",t.isVoid),o.setAttribute("type",t.type),mN(o,t.data),ux(o,t.nodes),pN(o,t.fragments),o}function e$(t,o=new ow){return o.delete(0,o.length),t.forEach(e=>{o.push([dx(e)])}),o}function pN(t,o){let e=t.getAttribute("fragments");e||(e=new ow,t.setAttribute("fragments",e)),e$(o,e)}function dx(t,o=new vr(t.object)){return o.setAttribute("key",t.key),t.type&&o.setAttribute("type",t.type),t.fragment&&o.setAttribute("fragment",t.fragment),ux(o,t.nodes),o}function t$(t,o=new Pt){let e=0;return o.setAttribute("key",t.key),o.delete(0,o.length),t.leaves.forEach(n=>{o.insert(e,n.text,ey(n.marks)),e+=n.text.length}),o}function ey(t){if(t.size===0)return{};let o={};return t.forEach(e=>{o[e.type]=e.data.toObject()}),o}function mN(t,o){let e=t.getAttribute("data");e||(e=new Sa,t.setAttribute("data",e)),px(o,e)}function px(t,o=new Sa){return o.clear(),t.forEach((e,n)=>{o.set(n,Zu(e))}),o}function Zu(t){if(t==null||typeof t=="number"||typeof t=="string"||typeof t=="boolean")return t;if(Array.isArray(t)){let o=new yp;return t.forEach(e=>{o.push([Zu(e)])}),o}else{let o=new Sa;return Object.keys(t).forEach(e=>{o.set(e,Zu(t[e]))}),o}}s();s();function In(t,o){let e=t;for(let n=0;n<o.length;n++){let r=o[n];if(e instanceof Pt)throw new Error("Invalid path, expected a node with descendants");if(r<e.length)e=e.get(r);else{let i=e.getAttribute("fragments");i&&(e=i.get(r-e.length))}if(!e)throw new Error("Invalid path, expected a node")}return e}function Cl(t,o){let e=o.slice(0,-1),n=In(t,e);if(n instanceof Pt)throw new Error("Invalid path, expected a node with descendants");let r=o[o.length-1];return{parent:n,index:r}}function cm(t,o){let e=t;for(let n=0;n<o.length;n++){let r=o[n],i=e,a=i.get(r);if(a===void 0){let[c,l]=o$(o.slice(n+1));return i.set(r,c),l}else{if(!(a instanceof Sa))throw new Error(`Invalid data path (${o.slice(0,n+1).join(".")}), expected a map`);e=a}}return e}function o$(t){let o=new Sa,e=o;for(let n=0;n<t.length;n++){let r=new Sa;e.set(t[n],r),e=r}return[o,e]}function mx(t,o){t.operations.forEach(([e,n,r])=>{n$(o,e,n.document,r.document)})}function n$(t,o,e,n){switch(o.type){case"insert_text":r$(t,e,o);break;case"remove_text":i$(t,e,o);break;case"add_mark":a$(t,o);break;case"remove_mark":s$(t,o);break;case"remove_node":c$(t,o);break;case"insert_node":l$(t,o);break;case"set_node":m$(t,o);break;case"move_node":u$(t,e,n,o);break;case"split_node":d$(t,e,o);break;case"merge_node":p$(t,e,o);break;case"insert_fragment":f$(t,o);break;case"remove_fragment":g$(t,o);break;case"set_data":h$(t,o);break;case"remove_data":y$(t,o);break;case"insert_array_data":v$(t,o);break;case"remove_array_data":b$(t,o);break;case"set_selection":break;default:throw new Error(`Unsupported operation type: ${o.type}`)}}function r$(t,o,e){let n=In(t,[...e.path]);if(!(n instanceof Pt))throw new Error("Invalid operation path, expected a text node");n.insert(e.offset,e.text,ey(e.marks))}function i$(t,o,e){let n=In(t,[...e.path]);if(!(n instanceof Pt))throw new Error("Invalid operation path, expected a text node");n.delete(e.offset,e.text.length)}function a$(t,o){let e=In(t,[...o.path]);if(!(e instanceof Pt))throw new Error("Invalid operation path, expected a text node");e.format(o.offset,o.length,ey(jf.create([o.mark])))}function s$(t,o){let e=In(t,[...o.path]);if(!(e instanceof Pt))throw new Error("Invalid operation path, expected a text node");e.format(o.offset,o.length,{[o.mark.type]:null})}function c$(t,o){let{parent:e,index:n}=Cl(t,[...o.path]);e.delete(n)}function l$(t,o){let{parent:e,index:n}=Cl(t,[...o.path]);e.insert(n,[wl(o.node)])}function u$(t,o,e,n){let{parent:r,index:i}=Cl(t,[...n.path]),{parent:a,index:c}=Cl(t,[...n.newPath]),l=e.assertPath(n.path),u=o.assertNode(l.key),d=wl(u);r.delete(i),a.insert(c,[d])}function d$(t,o,e){let{parent:n,index:r}=Cl(t,[...e.path]),i=o.assertNode(n.getAttribute("key"));if(i.object==="text")throw new Error("Invalid operation path, expected a node with descendants for split_node");let a=i.nodes.get(r);if(!a)throw new Error("Node not found in parent nodes");let c=i.nodes.get(r+1);if(!c)throw new Error("New node not found in parent nodes");n.delete(r),n.insert(r,[wl(a),wl(c)])}function p$(t,o,e){let{parent:n,index:r}=Cl(t,[...e.path]),i=o.assertNode(n.getAttribute("key"));if(i.object==="text")throw new Error("Invalid operation path, expected a node with descendants for merge_node");let a=i.nodes.get(r-1);if(!a)throw new Error("Merged node not found in parent nodes");n.delete(r-1,2),n.insert(r-1,[wl(a)])}function m$(t,o){let e=In(t,[...o.path]);if(typeof o.properties!="string"){if("key"in o.properties&&o.properties.key!==void 0&&e.setAttribute("key",o.properties.key),"type"in o.properties&&o.properties.type!==void 0&&e.setAttribute("type",o.properties.type),"isVoid"in o.properties&&o.properties.isVoid!==void 0){if(e instanceof Pt)throw new Error("Should not set isVoid on a text");e.setAttribute("isVoid",o.properties.isVoid)}if("data"in o.properties&&o.properties.data!==void 0){if(e instanceof Pt)throw new Error("Should not set data on a text");px(pu.create(o.properties.data),e.getAttribute("data"))}}}function f$(t,o){let e=In(t,[...o.path]);if(e instanceof Pt)throw new Error("Expect a fragment node");let n=e,r=o.fragmentPath[o.fragmentPath.length-1]-1,i=dx(o.node);n.getAttribute("fragments").insert(r,[i])}function g$(t,o){let e=In(t,[...o.path]);if(e instanceof Pt)throw new Error("Expect a fragment node");let n=e,r=o.fragmentPath[o.fragmentPath.length-1]-1;n.getAttribute("fragments").delete(r)}function h$(t,o){let e=In(t,[...o.path]);if(e instanceof Pt)throw new Error("Should not set data on a text");let n=Zu(o.data),r=cm(e.getAttribute("data"),o.dataPath.slice(0,-1)),i=o.dataPath[o.dataPath.length-1];r.set(i,n)}function y$(t,o){let e=In(t,[...o.path]);if(e instanceof Pt)throw new Error("Should not set data on a text");let n=cm(e.getAttribute("data"),o.dataPath.slice(0,-1)),r=o.dataPath[o.dataPath.length-1];n.delete(r)}function v$(t,o){let e=In(t,[...o.path]);if(e instanceof Pt)throw new Error("Should not set data on a text");let n=cm(e.getAttribute("data"),o.dataPath.slice(0,-1)),r=o.dataPath[o.dataPath.length-1],i=n.get(r);if(!i||!(i instanceof yp))return;let a=Zu(o.data);i.insert(o.dataIndex,[a])}function b$(t,o){let e=In(t,[...o.path]);if(e instanceof Pt)throw new Error("Should not set data on a text");let n=cm(e.getAttribute("data"),o.dataPath.slice(0,-1)),r=o.dataPath[o.dataPath.length-1],i=n.get(r);if(!i||!(i instanceof yp))return;let a;for(;a=i.toArray().findIndex(c=>c===o.data)!==-1;)i.delete(a)}s();function lm(t){return t.get("data",vr)}s();function hN(t,o,e){let n=lm(o);return up.isBlockRange(e)?{anchor:e.anchorBlock?gN(n,t,e.anchorBlock):void 0,focus:e.focusBlock?gN(n,t,e.focusBlock):void 0}:{anchor:e.anchorKey?fN(n,t,e.anchorKey,e.anchorOffset):void 0,focus:e.focusKey?fN(n,t,e.focusKey,e.focusOffset):void 0}}function yN(t,o){if(!(!o.anchor||!o.focus)){if(o.anchor.type instanceof Pt){if(!(o.focus.type instanceof Pt))return;let e=o.anchor.type.getAttribute("key"),n=o.focus.type.getAttribute("key");return ye.create({anchorKey:e,anchorOffset:o.anchor.index,focusKey:n,focusOffset:o.focus.index}).normalize(t)}if(o.anchor.type instanceof vr){if(!(o.focus.type instanceof vr))return;let e=o.anchor.type.getAttribute("key"),n=o.focus.type.getAttribute("key"),r=t.getDescendant(e),i=t.getDescendant(n);if(!r||!i||!r.isBlock()||!i.isBlock())return;let a=r.nodes.get(o.anchor.index),c=i.nodes.get(o.focus.index);return!a||!c?void 0:up.create({anchorBlock:a.key,focusBlock:c==null?void 0:c.key}).normalize(t)}}}function fN(t,o,e,n){let r=o.getPath(e);return r?{type:In(t,r),index:n,assoc:0}:void 0}function gN(t,o,e){let n=o.getPath(e);return n?{type:In(t,n.slice(0,-1)),index:n[n.length-1],assoc:0}:void 0}s();var S$=dt("hive-core:normalizeYDocument");function vN(t){let o=new Set,e=new Set;return bN(t,o,e),e.size>0&&S$.warning(`Found ${e.size} duplicated keys in Y document. This is a bug in Hive.`),e.size}function bN(t,o,e){SN(t,o,e);let n=t.getAttribute("fragments");n&&w$(n,o,e)}function w$(t,o,e){SN(t,o,e)}function SN(t,o,e){let n=0;t.forEach((r,i)=>{let a=r.getAttribute("key");if(o.has(a)){e.add(a),n_(t),t.delete(i-n),n++;return}o.add(a),!(r instanceof Pt)&&bN(r,o,e)})}s();s();s();s();s();s();s();var sn=crypto;var Cs=new TextEncoder,Xr=new TextDecoder,gye=2**32;var wN=t=>{let o=atob(t),e=new Uint8Array(o.length);for(let n=0;n<o.length;n++)e[n]=o.charCodeAt(n);return e},gc=t=>{let o=t;o instanceof Uint8Array&&(o=Xr.decode(o)),o=o.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return wN(o)}catch(e){throw new TypeError("The input to be decoded is not correctly encoded.")}};s();s();s();var ty=class extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(o){var e;super(o),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(e=Error.captureStackTrace)===null||e===void 0||e.call(Error,this,this.constructor)}};var kr=class extends ty{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}};s();s();var oy=sn.getRandomValues.bind(sn);s();s();s();s();s();s();s();s();s();function R$(t){return typeof t=="object"&&t!==null}function rr(t){if(!R$(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let o=t;for(;Object.getPrototypeOf(o)!==null;)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(t)===o}s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();var V$=Symbol();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();s();var hx=gc;s();function yx(t){if(typeof t!="string")throw new kr("JWTs must use Compact JWS serialization, JWT must be a string");let{1:o,length:e}=t.split(".");if(e===5)throw new kr("Only JWTs using Compact JWS serialization can be decoded");if(e!==3)throw new kr("Invalid JWT");if(!o)throw new kr("JWTs must contain a payload");let n;try{n=hx(o)}catch(i){throw new kr("Failed to parse the base64url encoded payload")}let r;try{r=JSON.parse(Xr.decode(n))}catch(i){throw new kr("Failed to parse the decoded payload as JSON")}if(!rr(r))throw new kr("Invalid JWT Claims Set");return r}s();s();s();s();function MN(t){let o=yx(t);return{expiration:o.exp?o.exp*1e3:Date.now()+6*60*60*1e3,payload:{userId:o.userId,content:o.content}}}s();s();function _s(t){return Array.isArray?Array.isArray(t):FN(t)==="[object Array]"}var nY=1/0;function rY(t){if(typeof t=="string")return t;let o=t+"";return o=="0"&&1/t==-nY?"-0":o}function iY(t){return t==null?"":rY(t)}function Is(t){return typeof t=="string"}function qN(t){return typeof t=="number"}function aY(t){return t===!0||t===!1||sY(t)&&FN(t)=="[object Boolean]"}function WN(t){return typeof t=="object"}function sY(t){return WN(t)&&t!==null}function Ur(t){return t!=null}function vx(t){return!t.trim().length}function FN(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}var cY="Incorrect 'index' type",lY=t=>`Invalid value for key ${t}`,uY=t=>`Pattern length exceeds max of ${t}.`,dY=t=>`Missing ${t} property in key`,pY=t=>`Property 'weight' in key '${t}' must be a positive integer`,LN=Object.prototype.hasOwnProperty,bx=class{constructor(o){this._keys=[],this._keyMap={};let e=0;o.forEach(n=>{let r=zN(n);e+=r.weight,this._keys.push(r),this._keyMap[r.id]=r,e+=r.weight}),this._keys.forEach(n=>{n.weight/=e})}get(o){return this._keyMap[o]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function zN(t){let o=null,e=null,n=null,r=1;if(Is(t)||_s(t))n=t,o=DN(t),e=Sx(t);else{if(!LN.call(t,"name"))throw new Error(dY("name"));let i=t.name;if(n=i,LN.call(t,"weight")&&(r=t.weight,r<=0))throw new Error(pY(i));o=DN(i),e=Sx(i)}return{path:o,id:e,weight:r,src:n}}function DN(t){return _s(t)?t:t.split(".")}function Sx(t){return _s(t)?t.join("."):t}function mY(t,o){let e=[],n=!1,r=(i,a,c)=>{if(Ur(i))if(!a[c])e.push(i);else{let l=a[c],u=i[l];if(!Ur(u))return;if(c===a.length-1&&(Is(u)||qN(u)||aY(u)))e.push(iY(u));else if(_s(u)){n=!0;for(let d=0,p=u.length;d<p;d+=1)r(u[d],a,c+1)}else a.length&&r(u,a,c+1)}};return r(t,Is(o)?o.split("."):o,0),n?e:e[0]}var fY={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},gY={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,o)=>t.score===o.score?t.idx<o.idx?-1:1:t.score<o.score?-1:1},hY={location:0,threshold:.6,distance:100},yY={useExtendedSearch:!1,getFn:mY,ignoreLocation:!1,ignoreFieldNorm:!1},Pe={...gY,...fY,...hY,...yY},vY=/[^ ]+/g;function bY(t=3){let o=new Map,e=Math.pow(10,t);return{get(n){let r=n.match(vY).length;if(o.has(r))return o.get(r);let i=1/Math.sqrt(r),a=parseFloat(Math.round(i*e)/e);return o.set(r,a),a},clear(){o.clear()}}}var mm=class{constructor({getFn:o=Pe.getFn}={}){this.norm=bY(3),this.getFn=o,this.isCreated=!1,this.setIndexRecords()}setSources(o=[]){this.docs=o}setIndexRecords(o=[]){this.records=o}setKeys(o=[]){this.keys=o,this._keysMap={},o.forEach((e,n)=>{this._keysMap[e.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Is(this.docs[0])?this.docs.forEach((o,e)=>{this._addString(o,e)}):this.docs.forEach((o,e)=>{this._addObject(o,e)}),this.norm.clear())}add(o){let e=this.size();Is(o)?this._addString(o,e):this._addObject(o,e)}removeAt(o){this.records.splice(o,1);for(let e=o,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(o,e){return o[this._keysMap[e]]}size(){return this.records.length}_addString(o,e){if(!Ur(o)||vx(o))return;let n={v:o,i:e,n:this.norm.get(o)};this.records.push(n)}_addObject(o,e){let n={i:e,$:{}};this.keys.forEach((r,i)=>{let a=this.getFn(o,r.path);if(Ur(a)){if(_s(a)){let c=[],l=[{nestedArrIndex:-1,value:a}];for(;l.length;){let{nestedArrIndex:u,value:d}=l.pop();if(Ur(d))if(Is(d)&&!vx(d)){let p={v:d,i:u,n:this.norm.get(d)};c.push(p)}else _s(d)&&d.forEach((p,m)=>{l.push({nestedArrIndex:m,value:p})})}n.$[i]=c}else if(!vx(a)){let c={v:a,n:this.norm.get(a)};n.$[i]=c}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}};function VN(t,o,{getFn:e=Pe.getFn}={}){let n=new mm({getFn:e});return n.setKeys(t.map(zN)),n.setSources(o),n.create(),n}function SY(t,{getFn:o=Pe.getFn}={}){let{keys:e,records:n}=t,r=new mm({getFn:o});return r.setKeys(e),r.setIndexRecords(n),r}function iy(t,{errors:o=0,currentLocation:e=0,expectedLocation:n=0,distance:r=Pe.distance,ignoreLocation:i=Pe.ignoreLocation}={}){let a=o/t.length;if(i)return a;let c=Math.abs(n-e);return r?a+c/r:c?1:a}function wY(t=[],o=Pe.minMatchCharLength){let e=[],n=-1,r=-1,i=0;for(let a=t.length;i<a;i+=1){let c=t[i];c&&n===-1?n=i:!c&&n!==-1&&(r=i-1,r-n+1>=o&&e.push([n,r]),n=-1)}return t[i-1]&&i-n>=o&&e.push([n,i-1]),e}var xl=32;function CY(t,o,e,{location:n=Pe.location,distance:r=Pe.distance,threshold:i=Pe.threshold,findAllMatches:a=Pe.findAllMatches,minMatchCharLength:c=Pe.minMatchCharLength,includeMatches:l=Pe.includeMatches,ignoreLocation:u=Pe.ignoreLocation}={}){if(o.length>xl)throw new Error(uY(xl));let d=o.length,p=t.length,m=Math.max(0,Math.min(n,p)),f=i,h=m,y=c>1||l,w=y?Array(p):[],C;for(;(C=t.indexOf(o,h))>-1;){let E=iy(o,{currentLocation:C,expectedLocation:m,distance:r,ignoreLocation:u});if(f=Math.min(E,f),h=C+d,y){let T=0;for(;T<d;)w[C+T]=1,T+=1}}h=-1;let k=[],I=1,P=d+p,R=1<<d-1;for(let E=0;E<d;E+=1){let T=0,q=P;for(;T<q;)iy(o,{errors:E,currentLocation:m+q,expectedLocation:m,distance:r,ignoreLocation:u})<=f?T=q:P=q,q=Math.floor((P-T)/2+T);P=q;let F=Math.max(1,m-q+1),U=a?p:Math.min(m+q,p)+d,$=Array(U+2);$[U+1]=(1<<E)-1;for(let oe=U;oe>=F;oe-=1){let we=oe-1,Ee=e[t.charAt(we)];if(y&&(w[we]=+!!Ee),$[oe]=($[oe+1]<<1|1)&Ee,E&&($[oe]|=(k[oe+1]|k[oe])<<1|1|k[oe+1]),$[oe]&R&&(I=iy(o,{errors:E,currentLocation:we,expectedLocation:m,distance:r,ignoreLocation:u}),I<=f)){if(f=I,h=we,h<=m)break;F=Math.max(1,2*m-h)}}if(iy(o,{errors:E+1,currentLocation:m,expectedLocation:m,distance:r,ignoreLocation:u})>f)break;k=$}let D={isMatch:h>=0,score:Math.max(.001,I)};if(y){let E=wY(w,c);E.length?l&&(D.indices=E):D.isMatch=!1}return D}function xY(t){let o={};for(let e=0,n=t.length;e<n;e+=1){let r=t.charAt(e);o[r]=(o[r]||0)|1<<n-e-1}return o}var ay=class{constructor(o,{location:e=Pe.location,threshold:n=Pe.threshold,distance:r=Pe.distance,includeMatches:i=Pe.includeMatches,findAllMatches:a=Pe.findAllMatches,minMatchCharLength:c=Pe.minMatchCharLength,isCaseSensitive:l=Pe.isCaseSensitive,ignoreLocation:u=Pe.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:r,includeMatches:i,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?o:o.toLowerCase(),this.chunks=[],!this.pattern.length)return;let d=(m,f)=>{this.chunks.push({pattern:m,alphabet:xY(m),startIndex:f})},p=this.pattern.length;if(p>xl){let m=0,f=p%xl,h=p-f;for(;m<h;)d(this.pattern.substr(m,xl),m),m+=xl;if(f){let y=p-xl;d(this.pattern.substr(y),y)}}else d(this.pattern,0)}searchIn(o){let{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(o=o.toLowerCase()),this.pattern===o){let h={isMatch:!0,score:0};return n&&(h.indices=[[0,o.length-1]]),h}let{location:r,distance:i,threshold:a,findAllMatches:c,minMatchCharLength:l,ignoreLocation:u}=this.options,d=[],p=0,m=!1;this.chunks.forEach(({pattern:h,alphabet:y,startIndex:w})=>{let{isMatch:C,score:k,indices:I}=CY(o,h,y,{location:r+w,distance:i,threshold:a,findAllMatches:c,minMatchCharLength:l,includeMatches:n,ignoreLocation:u});C&&(m=!0),p+=k,C&&I&&(d=[...d,...I])});let f={isMatch:m,score:m?p/this.chunks.length:1};return m&&n&&(f.indices=d),f}},Pa=class{constructor(o){this.pattern=o}static isMultiMatch(o){return NN(o,this.multiRegex)}static isSingleMatch(o){return NN(o,this.singleRegex)}search(){}};function NN(t,o){let e=t.match(o);return e?e[1]:null}var wx=class extends Pa{constructor(o){super(o)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(o){let e=o===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},Cx=class extends Pa{constructor(o){super(o)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(o){let n=o.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,o.length-1]}}},xx=class extends Pa{constructor(o){super(o)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(o){let e=o.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},kx=class extends Pa{constructor(o){super(o)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(o){let e=!o.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,o.length-1]}}},Ox=class extends Pa{constructor(o){super(o)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(o){let e=o.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[o.length-this.pattern.length,o.length-1]}}},Ix=class extends Pa{constructor(o){super(o)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(o){let e=!o.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,o.length-1]}}},sy=class extends Pa{constructor(o,{location:e=Pe.location,threshold:n=Pe.threshold,distance:r=Pe.distance,includeMatches:i=Pe.includeMatches,findAllMatches:a=Pe.findAllMatches,minMatchCharLength:c=Pe.minMatchCharLength,isCaseSensitive:l=Pe.isCaseSensitive,ignoreLocation:u=Pe.ignoreLocation}={}){super(o),this._bitapSearch=new ay(o,{location:e,threshold:n,distance:r,includeMatches:i,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(o){return this._bitapSearch.searchIn(o)}},cy=class extends Pa{constructor(o){super(o)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(o){let e=0,n,r=[],i=this.pattern.length;for(;(n=o.indexOf(this.pattern,e))>-1;)e=n+i,r.push([n,e-1]);let a=!!r.length;return{isMatch:a,score:a?0:1,indices:r}}},_x=[wx,cy,xx,kx,Ix,Ox,Cx,sy],AN=_x.length,kY=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/,OY="|";function IY(t,o={}){return t.split(OY).map(e=>{let n=e.trim().split(kY).filter(i=>i&&!!i.trim()),r=[];for(let i=0,a=n.length;i<a;i+=1){let c=n[i],l=!1,u=-1;for(;!l&&++u<AN;){let d=_x[u],p=d.isMultiMatch(c);p&&(r.push(new d(p,o)),l=!0)}if(!l)for(u=-1;++u<AN;){let d=_x[u],p=d.isSingleMatch(c);if(p){r.push(new d(p,o));break}}}return r})}var _Y=new Set([sy.type,cy.type]),Rx=class{constructor(o,{isCaseSensitive:e=Pe.isCaseSensitive,includeMatches:n=Pe.includeMatches,minMatchCharLength:r=Pe.minMatchCharLength,ignoreLocation:i=Pe.ignoreLocation,findAllMatches:a=Pe.findAllMatches,location:c=Pe.location,threshold:l=Pe.threshold,distance:u=Pe.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:r,findAllMatches:a,ignoreLocation:i,location:c,threshold:l,distance:u},this.pattern=e?o:o.toLowerCase(),this.query=IY(this.pattern,this.options)}static condition(o,e){return e.useExtendedSearch}searchIn(o){let e=this.query;if(!e)return{isMatch:!1,score:1};let{includeMatches:n,isCaseSensitive:r}=this.options;o=r?o:o.toLowerCase();let i=0,a=[],c=0;for(let l=0,u=e.length;l<u;l+=1){let d=e[l];a.length=0,i=0;for(let p=0,m=d.length;p<m;p+=1){let f=d[p],{isMatch:h,indices:y,score:w}=f.search(o);if(h){if(i+=1,c+=w,n){let C=f.constructor.type;_Y.has(C)?a=[...a,...y]:a.push(y)}}else{c=0,i=0,a.length=0;break}}if(i){let p={isMatch:!0,score:c/i};return n&&(p.indices=a),p}}return{isMatch:!1,score:1}}},Px=[];function RY(...t){Px.push(...t)}function Ex(t,o){for(let e=0,n=Px.length;e<n;e+=1){let r=Px[e];if(r.condition(t,o))return new r(t,o)}return new ay(t,o)}var fm={AND:"$and",OR:"$or"},Tx={PATH:"$path",PATTERN:"$val"},Mx=t=>!!(t[fm.AND]||t[fm.OR]),PY=t=>!!t[Tx.PATH],EY=t=>!_s(t)&&WN(t)&&!Mx(t),BN=t=>({[fm.AND]:Object.keys(t).map(o=>({[o]:t[o]}))});function GN(t,o,{auto:e=!0}={}){let n=r=>{let i=Object.keys(r),a=PY(r);if(!a&&i.length>1&&!Mx(r))return n(BN(r));if(EY(r)){let l=a?r[Tx.PATH]:i[0],u=a?r[Tx.PATTERN]:r[l];if(!Is(u))throw new Error(lY(l));let d={keyId:Sx(l),pattern:u};return e&&(d.searcher=Ex(u,o)),d}let c={children:[],operator:i[0]};return i.forEach(l=>{let u=r[l];_s(u)&&u.forEach(d=>{c.children.push(n(d))})}),c};return Mx(t)||(t=BN(t)),n(t)}function TY(t,{ignoreFieldNorm:o=Pe.ignoreFieldNorm}){t.forEach(e=>{let n=1;e.matches.forEach(({key:r,norm:i,score:a})=>{let c=r?r.weight:null;n*=Math.pow(a===0&&c?Number.EPSILON:a,(c||1)*(o?1:i))}),e.score=n})}function MY(t,o){let e=t.matches;o.matches=[],Ur(e)&&e.forEach(n=>{if(!Ur(n.indices)||!n.indices.length)return;let{indices:r,value:i}=n,a={indices:r,value:i};n.key&&(a.key=n.key.src),n.idx>-1&&(a.refIndex=n.idx),o.matches.push(a)})}function LY(t,o){o.score=t.score}function DY(t,o,{includeMatches:e=Pe.includeMatches,includeScore:n=Pe.includeScore}={}){let r=[];return e&&r.push(MY),n&&r.push(LY),t.map(i=>{let{idx:a}=i,c={item:o[a],refIndex:a};return r.length&&r.forEach(l=>{l(i,c)}),c})}var vc=class{constructor(o,e={},n){this.options={...Pe,...e},this.options.useExtendedSearch,this._keyStore=new bx(this.options.keys),this.setCollection(o,n)}setCollection(o,e){if(this._docs=o,e&&!(e instanceof mm))throw new Error(cY);this._myIndex=e||VN(this.options.keys,this._docs,{getFn:this.options.getFn})}add(o){Ur(o)&&(this._docs.push(o),this._myIndex.add(o))}remove(o=()=>!1){let e=[];for(let n=0,r=this._docs.length;n<r;n+=1){let i=this._docs[n];o(i,n)&&(this.removeAt(n),n-=1,r-=1,e.push(i))}return e}removeAt(o){this._docs.splice(o,1),this._myIndex.removeAt(o)}getIndex(){return this._myIndex}search(o,{limit:e=-1}={}){let{includeMatches:n,includeScore:r,shouldSort:i,sortFn:a,ignoreFieldNorm:c}=this.options,l=Is(o)?Is(this._docs[0])?this._searchStringList(o):this._searchObjectList(o):this._searchLogical(o);return TY(l,{ignoreFieldNorm:c}),i&&l.sort(a),qN(e)&&e>-1&&(l=l.slice(0,e)),DY(l,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(o){let e=Ex(o,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:i,i:a,n:c})=>{if(!Ur(i))return;let{isMatch:l,score:u,indices:d}=e.searchIn(i);l&&r.push({item:i,idx:a,matches:[{score:u,value:i,norm:c,indices:d}]})}),r}_searchLogical(o){let e=GN(o,this.options),n=(c,l,u)=>{if(!c.children){let{keyId:d,searcher:p}=c,m=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(l,d),searcher:p});return m&&m.length?[{idx:u,item:l,matches:m}]:[]}switch(c.operator){case fm.AND:{let d=[];for(let p=0,m=c.children.length;p<m;p+=1){let f=c.children[p],h=n(f,l,u);if(h.length)d.push(...h);else return[]}return d}case fm.OR:{let d=[];for(let p=0,m=c.children.length;p<m;p+=1){let f=c.children[p],h=n(f,l,u);if(h.length){d.push(...h);break}}return d}}},r=this._myIndex.records,i={},a=[];return r.forEach(({$:c,i:l})=>{if(Ur(c)){let u=n(e,c,l);u.length&&(i[l]||(i[l]={idx:l,item:c,matches:[]},a.push(i[l])),u.forEach(({matches:d})=>{i[l].matches.push(...d)}))}}),a}_searchObjectList(o){let e=Ex(o,this.options),{keys:n,records:r}=this._myIndex,i=[];return r.forEach(({$:a,i:c})=>{if(!Ur(a))return;let l=[];n.forEach((u,d)=>{l.push(...this._findMatches({key:u,value:a[d],searcher:e}))}),l.length&&i.push({idx:c,item:a,matches:l})}),i}_findMatches({key:o,value:e,searcher:n}){if(!Ur(e))return[];let r=[];if(_s(e))e.forEach(({v:i,i:a,n:c})=>{if(!Ur(i))return;let{isMatch:l,score:u,indices:d}=n.searchIn(i);l&&r.push({score:u,key:o,value:i,idx:a,norm:c,indices:d})});else{let{v:i,n:a}=e,{isMatch:c,score:l,indices:u}=n.searchIn(i);c&&r.push({score:l,key:o,value:i,norm:a,indices:u})}return r}};vc.version="6.4.6";vc.createIndex=VN;vc.parseIndex=SY;vc.config=Pe;vc.parseQuery=GN;RY(Rx);var Ju=vc;var NY=new Ju(vg,{shouldSort:!0,threshold:.4,distance:100,keys:[{name:"name",weight:.7},{name:"keywords",weight:.3}]});function ly(t){return NY.search(t).map(o=>o.item)}s();var hy=x(O());s();var r6=x(kp(),1),i6=x(UN(),1);s();var o6=x(kp(),1),n6=x(t6(),1);var Rs=dt("HiveSocket");var uy=class{constructor(o){this.state="closed";this.openBackoffDelay=1e3;this.pendingMessages=[];this.events=new o6.EventEmitter;this.getSocketURL=o}async open(){if(this.webSocket)throw new Error("WebSocket already opened");this.clearScheduledReconnection();let o=await this.getSocketURL();return new Promise((e,n)=>{Rs.info("Opening WebSocket:",o),this.webSocket=new n6.default.w3cwebsocket(o),this.setState("connecting");try{this.webSocket.binaryType="arraybuffer"}catch(r){}this.webSocket.onopen=()=>{Rs.warning("WebSocket opened"),this.setState("open"),this.sendPendingMessages(),e()},this.webSocket.onclose=r=>{let i=this.state;if(this.close("closed"),i==="connecting"){Rs.error("Websocket closed before initial connection",r),n(new Error("Websocket closed before initial connection"));return}i==="open"&&(Rs.warning("WebSocket unexpectedly closed, reconnecting:",r.code,r.reason),this.scheduleReconnection())},this.webSocket.onerror=r=>{let i=this.state;if(this.close("errored"),i==="connecting"){Rs.error("Websocket error with initial connection"),n(new Error("Websocket errored before being opened"));return}Rs.error("WebSocket error, reconnecting:",r),this.scheduleReconnection()},this.webSocket.onmessage=r=>{let i=r.data;i instanceof ArrayBuffer&&this.events.emit("message",new Uint8Array(i))}})}close(o="closed"){this.setState(o),this.openBackoffTimer&&(clearTimeout(this.openBackoffTimer),this.openBackoffTimer=void 0),this.webSocket&&(Rs.info("Closing WebSocket"),this.webSocket.close(),this.webSocket=void 0)}scheduleReconnection(){this.openBackoffTimer||(this.webSocket&&this.close(),Rs.info("Scheduling reconnection in",this.openBackoffDelay,"ms"),this.openBackoffTimer=setTimeout(()=>{this.open(),this.openBackoffDelay=Math.min(this.openBackoffDelay*2,3e4)},this.openBackoffDelay))}async forceScheduledReconnection(){if(!this.openBackoffTimer)throw new Error("No scheduled reconnection");await this.open()}clearScheduledReconnection(){this.openBackoffTimer&&(clearTimeout(this.openBackoffTimer),this.openBackoffTimer=void 0)}listen(o,e){return this.events.addListener(o,e),()=>{this.events.removeListener(o,e)}}send(o){if(this.state!=="open"||!this.webSocket){this.pendingMessages.push(o);return}this.webSocket.send(o)}sendPendingMessages(){let o=this.webSocket;this.state!=="open"||!o||(this.pendingMessages.forEach(e=>o.send(e)),this.pendingMessages=[])}setState(o){this.state!==o&&(Rs.info("socket changing state from",this.state,"to",o),this.state=o,this.events.emit("state",o))}};var Or=dt("hive:HiveDataSyncClient");var ed=class{constructor(o,e={}){this.state="closed";this.operation=null;this.clientId=null;this.socket=null;this.encoder=null;this.currentPresence=null;this.beforeTransactionPresence=null;this.pendingMessages=new Set;this.pendingMessagesResolves=[];this.destroyed=!1;this.events=new r6.EventEmitter;this.batchUpdates=[];let{YType:n=Sa,readOnly:r=!1}=e;if(typeof globalThis.window>"u")throw new Error("HiveDataSyncClient can only be used in the browser, or in node process when running tests");this.client=o,this.doc=new r_,this.presences=[],this.YType=n,this.readOnly=r;let i=this.doc.get("data",n);this.undoManager=new p_(i,{trackedOrigins:new Set(["local"])}),this.undoManager.on("stack-item-added",a=>{var c,l;a.stackItem.meta.set("positionsBefore",(c=this.beforeTransactionPresence)==null?void 0:c.positions),a.stackItem.meta.set("positions",(l=this.currentPresence)==null?void 0:l.positions)}),this.undoManager.on("stack-item-updated",a=>{var c;a.stackItem.meta.set("positions",(c=this.currentPresence)==null?void 0:c.positions)}),this.undoManager.on("stack-item-popped",a=>{let c=a.type==="undo"?this.undoManager.redoStack:this.undoManager.undoStack,l=c[c.length-1];l&&(l.meta.set("positions",a.stackItem.meta.get("positionsBefore")),l.meta.set("positionsBefore",a.stackItem.meta.get("positions")));let u=a.stackItem.meta.get("positionsBefore");u&&this.events.emit("restorePositions",u)}),this.doc.on("updateV2",(a,c)=>{c!=="remote"&&(this.dangerouslyPaused?this.dangerouslyPaused.push(a):this.batchUpdate(a)),Or.info("call update listeners"),this.events.emit("update",c)})}updateState(){let o="closed";if(this.socket)switch(this.socket.state){case"connecting":o="connecting";break;case"open":this.doc.isSynced?o="open":o="connecting";break;case"errored":o="errored";break}o!==this.state&&(this.state=o,this.events.emit("state",o))}get presence(){return this.currentPresence||null}get clock(){let o=this.doc.get("data",this.YType);return o_(o)}open(o,e,n,r={}){if(this.assertNotDestroyed(),this.socket)return this.socket.state==="errored"?Promise.reject(new Error("Connection failed to establish with the server")):this.doc.isSynced?void 0:this.doc.whenSynced;Or.info("opening datasync socket",e,n,r);let i=this.client.getSocket(o,e,n,r);this.socket=i;let a=()=>{this.doc.emit("sync",[!0]),Or.info("connection is ready"),this.updateState()},c=cN({promptInit:d=>{this.sendInit(d.stateVector)},init:({update:d,version:p})=>{cx(this.doc,p,d,"remote"),a()},update:({update:d,version:p})=>{cx(this.doc,p,d,"remote")},updatePresence:()=>{},broadcastOperation:d=>{this.operation={...d.operation,payload:d.operation.payload||{},createdAt:Number(d.operation.createdAt),updatedAt:Number(d.operation.updatedAt)},this.events.emit("operation",this.operation)},broadcastPresences:d=>{Or.info("received broadcast presences message");let p=this.clientId;this.clientId=d.selfClientId,p!==d.selfClientId&&(Or.info("client id changed to",d.selfClientId),this.events.emit("clientId",d.selfClientId)),this.presences=Object.values(d.presences||{}).map(m=>({clientId:m.clientId,joinTimestamp:Number(m.joinTimestamp),updateTimestamp:Number(m.updateTimestamp),data:m.data||{},positions:Object.fromEntries(Object.entries(m.positions||{}).map(([f,h])=>[f,d_(h)]))})).sort((m,f)=>m.joinTimestamp-f.joinTimestamp),this.events.emit("presences")},ack:d=>{this.ackMessage(d.message)}});this.encoder=sN((d,p)=>{this.pendingMessages.add(p),i.send(d)}),i.listen("state",d=>{this.updateState(),d==="open"?(this.sendPromptInit(),this.sendPresence()):this.doc.emit("sync",[!1])}),i.listen("message",d=>{c(d)});let l=new Ai(`hive:datasync:open:${e}`);l.setLabels(n),l.wrapPromise(i.open());let u=new Ai(`hive:datasync:sync:${e}`);return u.setLabels(n),u.wrapPromise(this.doc.whenSynced)}close(){if(this.assertNotDestroyed(),!this.socket){Or.info("closing datasync, but socket is already closed");return}Or.info("closing datasync socket"),this.socket.close(),this.socket=null,this.encoder=null}destroy(){var o;this.close(),(o=this.batchDebounceFlush)==null||o.cancel(),this.undoManager.destroy(),this.doc.destroy(),this.events.removeAllListeners(),this.destroyed=!0}listen(o,e){return this.assertNotDestroyed(),this.events.addListener(o,e),()=>{this.events.removeListener(o,e)}}waitForSync(){if(this.assertNotDestroyed(),this.pendingMessages.size!==0)return Or.info("waiting for sync, pending messages count is",this.pendingMessages.size),new Promise(o=>{this.pendingMessagesResolves.push(o)})}transact(o){return this.assertNotDestroyed(),Or.info("start transaction on document"),this.beforeTransactionPresence=this.currentPresence,this.doc.transact(()=>o(this.doc),"local")}setPresence(o){var e;this.assertNotDestroyed(),Or.info("set presence",o),this.currentPresence={data:o.data||((e=this.currentPresence)==null?void 0:e.data)||{},positions:Object.fromEntries(Object.entries(o.positions||{}).map(([n,r])=>r?[n,l_(r.type,r.index,r.assoc)]:null).filter(fe))},this.sendPresence()}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}stopCapturing(){this.undoManager.stopCapturing()}hasBatchingEnabled(){return!!this.batchDebounceFlush}hasBatchedUpdates(){return this.batchUpdates.length>0}resetBatchingInterval(o,e=o*5){var n;o?((n=this.batchDebounceFlush)==null||n.cancel(),this.batchDebounceFlush=(0,i6.default)(()=>{this.flushBatchUpdates()},o,{maxWait:e})):(this.flushBatchUpdates(),this.batchDebounceFlush=void 0)}disableBatching(){this.resetBatchingInterval(0)}flushBatchUpdates(){var n;if((n=this.batchDebounceFlush)==null||n.cancel(),this.batchUpdates.length===0)return;let o=this.batchUpdates;this.batchUpdates=[];let e=pg(o);this.sendUpdate(e)}sendPresence(){!this.encoder||!this.currentPresence||(Or.info("sending presence to server"),this.encoder.write({updatePresence:{id:this.encoder.newMessageID(),data:this.currentPresence.data,positions:Object.fromEntries(Object.entries(this.currentPresence.positions).map(([o,e])=>[o,u_(e)]))}}))}sendPromptInit(){this.encoder&&(Or.info("sending prompt to init to server"),this.encoder.write({promptInit:{id:this.encoder.newMessageID(),stateVector:c_(this.doc),version:Ss.V2}}))}sendInit(o){this.encoder&&(Or.info("sending init to server"),this.encoder.write({init:{id:this.encoder.newMessageID(),update:s_(this.doc,o),version:Ss.V2}}))}batchUpdate(o){if(!this.batchDebounceFlush){this.sendUpdate(o);return}this.batchUpdates.push(o),this.batchDebounceFlush()}sendUpdate(o){this.encoder&&(Or.info("sending update to server",o.byteLength),this.encoder.write({update:{id:this.encoder.newMessageID(),update:o,version:Ss.V2}}))}ackMessage(o){this.pendingMessages.delete(o),this.pendingMessages.size===0&&(this.pendingMessagesResolves.forEach(e=>e()),this.pendingMessagesResolves=[])}assertNotDestroyed(){if(this.destroyed)throw new Error("datasync is destroyed")}dangerouslyPauseSync(){throw new Error("dangerouslyPauseSync should only be used for testing")}async dangerouslyResumeSync(){throw new Error("dangerouslyPauseSync should only be used for testing")}};s();var a6=x(kp(),1);var ym,hm=class{constructor(o,e){this.events=new a6.default;Bf(this,ym,void 0);this.manager=o,this.contentId=e.contentId,this.branchId=e.branchId,this.dataSync=new ed(o.client),this._change=aN(Zh(this.dataSync.doc)),this.dataSync.listen("update",()=>{this.dataSync.doc.transact(()=>{FD(Zh(this.dataSync.doc))},"local"),il(this,ym,nN(Zh(this.dataSync.doc))),this.events.emit("update")})}get revision(){return uu(this,ym)}get presences(){return this.dataSync.presences}keepAlive(){return this.manager.keepAlive(this)}open(o={}){return this.dataSync.presence||this.dataSync.setPresence({data:o}),this.dataSync.open(this.contentId,"/branches/:branchId/datasync",{branchId:this.branchId},this.manager.clientId?{clientId:this.manager.clientId}:{})}close(){this.manager.close(this)}destroy(){this.dataSync.destroy()}waitForSync(){return this.dataSync.waitForSync()}listen(o,e){return o==="update"?(this.events.addListener(o,e),()=>{this.events.removeListener(o,e)}):this.dataSync.listen(o,e)}openPage(o){let e=this.dataSync.presence;this.manager.touch(this),e&&this.dataSync.setPresence({data:{...e.data,pageId:o}})}syncChange(o){return this.manager.touch(this),this.dataSync.transact(n=>o(this._change))}async change(o){let e=this.syncChange(o);return await this.waitForSync(),e}};ym=new WeakMap;s();var s6=x(kp(),1);var Ea,vm=class{constructor(o,e,n={}){this.events=new s6.EventEmitter;Bf(this,Ea,void 0);var r;this.manager=o,this.contentId=e.contentId,this.branchId=e.branchId,this.pageId=e.pageId,this.singleEditBatchingInterval=(r=n.singleEditBatchingInterval)!=null?r:1500,il(this,Ea,pp.create()),this.dataSync=new ed(o.client,{YType:vr}),this.dataSync.resetBatchingInterval(this.singleEditBatchingInterval),this.dataSync.listen("restorePositions",i=>{let a=this.createSelectionFromRelatives(this.value.document,i);a=a?a.normalize(this.value.document):ye.create(),uu(this,Ea).selection.isFocused&&(a=a.focus()),il(this,Ea,uu(this,Ea).merge({selection:a})),this.events.emit("value")}),this.dataSync.listen("update",i=>{i==="local"||this.createSlateValue(),this.events.emit("value")}),this.dataSync.listen("presences",()=>{this.dataSync.presences.length>0?this.dataSync.hasBatchingEnabled()&&this.dataSync.disableBatching():this.dataSync.hasBatchingEnabled()||this.dataSync.resetBatchingInterval(this.singleEditBatchingInterval),this.updateSelections()}),this.dataSync.listen("state",i=>{i==="open"&&this.updateSelections()})}get value(){return uu(this,Ea)}createSlateValue(){let o=lm(this.dataSync.doc);this.dataSync.doc.transact(()=>vN(o),"local");let e=uN(o);il(this,Ea,this.dataSync.doc.transact(()=>{let n=this.value.selection,r=JI[e.data.get("schemaType")||"document"],i=pp.create({document:e},{normalize:!1}).setSchema(r);if(i.document!==e)throw new Error("Document should not be modified by creation of Value");let a=i.change({save:!1}).normalize();a.value.document!==i.document&&(i=i.merge({document:a.value.document}),mx(a,o));let c=this.dataSync.presence?this.createSelectionFromRelatives(i.document,this.dataSync.presence.positions):void 0;return c&&(c=c.normalize(e)),c&&n.isFocused&&(c=c.focus()),i=i.merge({selection:c!=null?c:ye.create()}),i},"local"))}keepAlive(){return this.manager.keepAlive(this)}open(o={}){return this.dataSync.presence||this.dataSync.setPresence({data:o}),this.dataSync.open(this.contentId,"/branches/:branchId/pages/:pageId/document/datasync",{branchId:this.branchId,pageId:this.pageId},this.manager.clientId?{clientId:this.manager.clientId}:{})}close(){this.manager.close(this)}destroy(){this.dataSync.destroy()}waitForSync(){return this.dataSync.waitForSync()}listen(o,e){return this.events.addListener(o,e),()=>{this.events.removeListener(o,e)}}applyChange(o){var n;this.manager.touch(this);let e=this.value;if(il(this,Ea,o.value),e.document!==o.value.document?(this.dataSync.transact(r=>{mx(o,lm(r))}),this.updateSelections()):this.events.emit("value"),o.value.selection!==e.selection){let r=o.value.selection;this.dataSync.setPresence({data:{...((n=this.dataSync.presence)==null?void 0:n.data)||{}},positions:hN(o.value.document,this.dataSync.doc,r)})}o.value.selection.isBlurred&&this.dataSync.flushBatchUpdates()}async change(o){let e=this.value.change();return o(e),this.applyChange(e),this.waitForSync()}updateSelections(){this.dataSync.state!=="open"?this.selections=ha.create():this.selections=ha.create(this.dataSync.presences.map(o=>{let e=this.createSelectionFromRelatives(this.value.document,o.positions);return e?e.merge({data:pu.create({clientId:o.clientId,...o.data})}):null}).filter(fe)),this.events.emit("selections")}undo(){return this.dataSync.undo()}redo(){return this.dataSync.redo()}createSelectionFromRelatives(o,e){let n=this.dataSync.doc;return yN(o,{anchor:e.anchor&&tw(e.anchor,n)||void 0,focus:e.focus&&tw(e.focus,n)||void 0})}};Ea=new WeakMap;s();var dy=class{constructor(o){this.browserCache=j_("hive-tokens"),this.cache=er({getKey:e=>e,getValue:async e=>{let n=await o(e),r=Array.isArray(n)?n:[n],i={};if(r.forEach(a=>{let c=MN(a),l={token:a,metadata:c};Object.keys(c.payload.content).forEach(u=>{i[u]=l,e!==u&&this.cache.write(u,l)})}),!i[e])throw new Ni.Forbidden(`No authentication for content "${e}"`);return i[e]},ttl:e=>e.metadata.expiration-(Date.now()+5*60*1e3),effects:[this.browserCache.effect]})}async getParsedToken(o){return await this.cache.readAsync(o)}async getToken(o){let{token:e}=await this.getParsedToken(o);return e}async clearCache(){this.cache.clearAll(),await this.browserCache.clearCache()}};s();var c6=dt("hive:HiveDataSyncManager"),py=class{constructor(o,e={}){this.syncs=new Map;this.ids=new WeakMap;var n;this.client=o,this.ttl=(n=e.ttl)!=null?n:1e3*60*5}close(o){let e=this.ids.get(o);if(!e)throw new Error("Unknown sync client");let n=this.syncs.get(e);if(!n)throw new Error("Expected sync client to be registered");n.sync.destroy(),this.syncs.delete(e),this.ids.delete(o)}closeAll(){this.stopGarbageCollect(),[...this.syncs.values()].map(o=>o.sync.close()),this.syncs=new Map,this.ids=new WeakMap}touch(o){let e=this.ids.get(o);if(!e)return!1;let n=this.syncs.get(e);if(!n)throw new Error("Expected sync client to be registered");return n.activeAt=Date.now(),!0}keepAlive(o){this.touch(o);let e=setInterval(()=>{this.touch(o)||n()},this.ttl/2),n=()=>{e&&clearInterval(e),e=void 0};return n}branch(o,e,n){let r=this.getSync(`${o}/${e}`,()=>new hm(this,{contentId:o,branchId:e}),n);if(r&&!(r instanceof hm))throw new Error(`Expected HiveBranchRevision, got ${r.constructor.name}`);return r}pageDocument(o,e,n,r){let i=this.getSync(`${o}/${e}/${n}`,()=>new vm(this,{contentId:o,branchId:e,pageId:n},r),r);if(i&&!(i instanceof vm))throw new Error(`Expected HiveBranchDocument, got ${i.constructor.name}`);return i}getSync(o,e,n){let r=this.syncs.get(o);if(r)return r.sync;if((n==null?void 0:n.autoInit)===!1)return;let i=e();return this.syncs.set(o,{sync:i,activeAt:Date.now()}),this.ids.set(i,o),i.dataSync.listen("clientId",a=>{this.clientId=a}),c6.info(`initialize sync for "${o}"`),this.startGarbageCollect(),i}garbageCollect(){let o=Date.now();for(let[e,{sync:n,activeAt:r}]of this.syncs.entries())o-r>this.ttl&&(c6.info(`garbage collection "${e}", last active ${o-r}ms ago`),this.close(n));this.syncs.size===0&&this.stopGarbageCollect()}startGarbageCollect(){this.gcInterval||(this.gcInterval=setInterval(()=>this.garbageCollect(),this.ttl/2))}stopGarbageCollect(){this.gcInterval&&(clearInterval(this.gcInterval),this.gcInterval=void 0)}};s();var my=class{constructor(o){this.branchesCache=er({getValue:async o=>{try{return await this.client.getBranch(o.contentId,o.branchId)}catch(e){if(e.statusCode===404)return;throw e}}});this.revisionsCache=er({getValue:async o=>{try{return await this.client.getRevision(o.contentId,o.revisionId)}catch(e){if(e.statusCode===404)return;throw e}}});this.branchesHistoryCache=er({getValue:async o=>await this.client.getBranchHistory(o.contentId,o.branchId,{page:o.initialRevisionId,limit:o.size,...o.git!==void 0?{git:o.git}:{}})});this.documentsCache=er({getValue:async o=>{try{return await this.client.getDocument(o.contentId,o.documentId)}catch(e){if(e.statusCode===404)return;throw e}},toJS:o=>o!==void 0?WI(o):"undefined",fromJS:o=>o!=="undefined"?qI(o):void 0});this.client=o}getBranchHistory(o,e,n){return ku(this.branchesHistoryCache.readCacheState({contentId:o,branchId:e,initialRevisionId:n.page,size:n.limit,...n.git!==void 0?{git:n.git}:{}}))}getBranchRevision(o,e){let n=this.client.sync.branch(o,e,{autoInit:!1});return n?n.revision:kg(ku(this.branchesCache.readCacheState({contentId:o,branchId:e})),r=>{if(r)return this.getRevision(o,r.revision)})}getBranchPageDocument(o,e,n){let r=this.client.sync.pageDocument(o,e,n,{autoInit:!1});return r?r.value.document:kg(ku(this.branchesCache.readCacheState({contentId:o,branchId:e})),i=>{if(i)return kg(this.getRevision(o,i.revision),a=>{if(a){let c=a.pages[n];return(c==null?void 0:c.type)!=="document"?void 0:c.document?this.getDocument(o,c.document):bu(c.id).document}})})}getRevision(o,e){return ku(this.revisionsCache.readCacheState({contentId:o,revisionId:e}))}getDocument(o,e){return ku(this.documentsCache.readCacheState({contentId:o,documentId:e}))}toJSON(){return{documents:this.documentsCache.toJS(),revisions:this.revisionsCache.toJS(),branches:this.branchesCache.toJS()}}fromJSON(o){o.documents&&this.documentsCache.fromJS(o.documents),o.revisions&&this.revisionsCache.fromJS(o.revisions),o.branches&&this.branchesCache.fromJS(o.branches)}};s();s();var l6=x(kp(),1);var fy=class{constructor(o,e,n,r,i){this.id=void 0;this.state=null;this.events=new l6.default;this.client=o,this.contentId=e,this.path=n,this.pathParams=r,i&&(this.id=i)}async start(o={}){if(this.id)throw new Error("Operation already started");let n=await(await this.client.request(this.contentId,this.path,{path:this.pathParams},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)})).json();return this.setState(n),n}async update(o){if(!this.id)throw new Error("Operation not started or HiveContentOperation() is called without an existing operation ID");let n=await(await this.client.request(this.contentId,this.path,{path:this.pathParams},{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...o,id:this.id})})).json();return this.setState(n),n}async markAsSucceeded(){return this.update({status:2})}setState(o){this.id=o.id,this.state=o,this.events.emit("update",o)}listen(o){return this.events.on("update",o),()=>{this.events.off("update",o)}}};var tZ=dt("hive-client"),u6=typeof globalThis.window<"u"||!1,gy=class{constructor(o,e,n={}){this.isRunningAtEdge=u6;let r;this.getEndpoint=typeof o=="string"?()=>Promise.resolve(o):async()=>(r||(r=await o()),r),this.auth=new dy(e),this.store=new my(this),this.sync=new py(this),this.clientId=ba(),n.locationHint&&(this.isRunningAtEdge=n.locationHint)}close(){this.sync.closeAll()}async clearAuthCache(){await this.auth.clearCache(),this.close()}getSocket(o,e,n,r){if(!this.isRunningAtEdge||!u6)throw new Error("HiveClient#getSocket can only be called from the edge");let i=async()=>{let a=d6(o,e,n),c=await this.auth.getToken(o),l=await this.getEndpoint(),u=new URL(a,l);if(u.protocol=u.protocol.replace("http","ws"),r)for(let[d,p]of Object.entries(r))u.searchParams.set(d,p);return u.searchParams.set("authToken",c),u.toString()};return new uy(i)}async getBranch(o,e){return await(await this.request(o,"/branches/:branchId",{path:{branchId:e}})).json()}async getBranchRevision(o,e,n){return await(await this.request(o,"/branches/:branchId/save",{path:{branchId:e},query:n?{mask:n.join(",")}:{}},{method:"POST"})).json()}async saveBranch(o,e){return{revisionId:(await this.getBranchRevision(o,e,["id"])).id}}async getBranchHistory(o,e,n={}){let{limit:r=10,page:i,git:a,refresh:c}=n;return await(await this.request(o,"/branches/:branchId/history",{path:{branchId:e},query:{limit:r.toString(),...i?{page:i}:{},...a!==void 0?{git:`${a}`}:{},...c!==void 0?{refresh:`${c}`}:{}}})).json()}async getRevision(o,e,n){return await(await this.request(o,"/revisions/:revisionId",{path:{revisionId:e},query:n?{mask:n.join(",")}:{}})).json()}getRevisionInfo(o,e){return this.getRevision(o,e,t_)}async mergeBranch(o,e){if(!this.isRunningAtEdge)throw new Error("HiveClient#mergeBranch can only be called from the edge");return await(await this.request(o,"/branches/:branchId/merge",{path:{branchId:e}},{method:"POST"})).json()}async rollbackBranch(o,e,n){await this.request(o,"/branches/:branchId/rollback",{path:{branchId:e}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})}async updateBranch(o,e){return await(await this.request(o,"/branches/:branchId/update",{path:{branchId:e}},{method:"POST"})).json()}async checkoutBranch(o,e,n,r={}){return(await this.request(o,"/branches/:branchId/checkout",{path:{branchId:e}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",...oZ(r.operationId)},body:JSON.stringify(n)})).json()}async getDocument(o,e){let r=await(await this.request(o,"/documents/:documentId",{path:{documentId:e}},{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}})).arrayBuffer();return YS(new Uint8Array(r))}async getPageDocument(o,e,n){if(!this.isRunningAtEdge)throw new Error("HiveClient#getPageDocument can only be called from the edge");let i=await(await this.request(o,"/branches/:branchId/pages/:pageId/document",{path:{branchId:e,pageId:n}})).arrayBuffer();return YS(new Uint8Array(i))}async createDocument(o,e,n={}){return await(await this.request(o,"/documents",{query:n.documentId?{documentId:n.documentId}:{}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/octet-stream"},body:FI(n.skipNormalization?e:e_(e),{preserveKeys:!0})})).json()}async createRevision(o,e){return await(await this.request(o,"/revisions",{},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})).json()}getContentOperation(o,e,n,r){return new fy(this,o,e,n,r)}getBranchContentOperation(o,e,n){return this.getContentOperation(o,"/branches/:branchId/operation",{branchId:e},n)}async createFileBlob(o,e,n){let r=await this.request(o,"/blobs",{query:{name:e.name}},{method:"POST",headers:{Accept:"application/json","Content-Type":e.contentType},body:n}),{blobId:i}=await r.json();return{blobId:i,downloadURL:ID(await this.getEndpoint(),o,{blobId:i,name:e.name})}}async updateRevisionMetadata(o,e,n){return await(await this.request(o,"/revisions/:revisionId",{path:{revisionId:e}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})).json()}async duplicateContent(o,e){return(await this.request(o.contentId,"/branches/:branchId/duplicate",{path:{branchId:o.branchId}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({origin:e,page:o.pageId})})).json()}async triggerAlarm(o,e={force:!1}){o.pageId?await this.request(o.contentId,"/branches/:branchId/pages/:pageId/document/alarm",{path:{branchId:o.branchId,pageId:o.pageId},query:{force:String(e.force)}},{method:"POST"}):await this.request(o.contentId,"/branches/:branchId/alarm",{path:{branchId:o.branchId},query:{force:String(e.force)}},{method:"POST"})}async request(o,e,n,r={},i={}){let{retries:a=3}=i,{path:c={},query:l={}}=n,u=ba(),d=new Ai(`hive:request:${(r.method||"GET").toLowerCase()}:${e}`);return d.label("contentId",o),d.setLabels({requestId:u,clientId:this.clientId,locationHint:this.isRunningAtEdge,...n}),d.wrap(async()=>{let p=d6(o,e,c),m=await this.auth.getToken(o),f=await this.getEndpoint(),h=new URL(p,f);h.search=new URLSearchParams(l).toString();let y=new Headers(r.headers||{});y.set("Authorization",`Bearer ${m}`),y.set("X-Request-Id",u),y.set("X-Client-Id",this.clientId),typeof this.isRunningAtEdge=="string"&&y.set("X-Hive-Location-Hint",this.isRunningAtEdge);let w=await p6(()=>fetch(h.toString(),{...r,headers:y}),a),C=w.headers.get("cf-ray");if(d.label("rayId",C),!w.ok)try{let k="";try{k=(await w.clone().json()).error.message}catch(I){k=`Unexpected text response: ${await w.text()}`}throw Ni.fromStatusCode(w.status,k)}catch(k){throw k.statusCode?k:new Error(`Unexpected response with status code ${w.status}: ${k.message}`)}return w})}};function d6(t,o,e){for(let[n,r]of Object.entries(e))o=o.replace(`:${n}`,r);return`content/${t}${o}`}function oZ(t){return t?{"X-Content-Operation-Id":t}:{}}async function p6(t,o=3,e=500){if(o<=0)return t();try{let n=await t();if(n.status===504||n.status===503)throw Ni.fromStatusCode(n.status,n.statusText);return n}catch(n){if(tZ.error("retry because of error",n,{attemptsLeft:o,delay:e}),o>0)return await new Promise(r=>setTimeout(r,e)),p6(t,o-1,e*2);throw n}}function Nx(t){let{children:o}=t,e=hy.useMemo(()=>{if(t.client)return t.client;let n=new gy(t.endpoint,t.fetchContentAuthToken);return t.store&&n.store.fromJSON(t.store),n},[t.client,t.endpoint,t.fetchContentAuthToken,t.store]);return hy.createElement($_.Provider,{value:e},o)}s();var td=x(O());var nZ=td.createContext(null);function Yt(){return td.useContext(nZ)}s();var m6=x(O());function f6(t){let e=Ce().sync.pageDocument(t.branch.contentId,t.branch.branchId,t.pageId),n=e.open(t.presence);if(n)throw n;return m6.useEffect(()=>{let r=e.keepAlive();return()=>{e.dataSync.state==="open"&&e.dataSync.setPresence({positions:{}}),r()}},[e]),e}s();var bc=x(O());function g6(t){let o=bc.useMemo(()=>({getCurrentValue:()=>t.value,subscribe:a=>t.listen("value",a)}),[t]),e=bc.useMemo(()=>({getCurrentValue:()=>t.selections,subscribe:a=>t.listen("selections",a)}),[t]),n=bc.useSyncExternalStore(o.subscribe,o.getCurrentValue),r=bc.useSyncExternalStore(e.subscribe,e.getCurrentValue),i=bc.useCallback(a=>{t.applyChange(a)},[t]);return[n,r,i]}s();var yy=x(O());function h6(t){let o=t.dataSync,e=yy.useMemo(()=>({getCurrentValue:()=>o.presences,subscribe:n=>o.listen("presences",n)}),[o]);return yy.useSyncExternalStore(e.subscribe,e.getCurrentValue)}s();var y6=x(O());function v6(t){return y6.useMemo(()=>({onKeyDown(o,e){if(lw.isRedo(o))return t.redo(),o.preventDefault(),e;if(lw.isUndo(o))return t.undo(),o.preventDefault(),e}}),[t])}s();var Ax=x(O());function b6(t){let o=Ax.default.useMemo(()=>({getCurrentValue:()=>{if(t)return t.clock},subscribe:e=>t?t.listen("update",e):()=>{}}),[t]);return Ax.default.useSyncExternalStore(o.subscribe,o.getCurrentValue,()=>{})}s();function S6(t){let{r:o,g:e,b:n}=tR(t);return Math.sqrt(.299*(o*o)+.587*(e*e)+.114*(n*n))}function Ta(t){return S6(t)>150?"light":"dark"}function vy(t){let o=S6(t);return o>240?"lightest":o>215?"light":o>190?"semiLight":o>165?"medium":o>140?"semiDark":o>115?"dark":"darkest"}s();var od=x(O()),by=x(E4());function w6(t=2e3){let[o,e]=od.useState(!1),n=od.useRef(null);return od.useEffect(()=>(!o&&typeof window<"u"&&(n.current=setTimeout(()=>(0,by.unstable_runWithPriority)(by.unstable_IdlePriority,()=>e(!0)),t)),()=>{n.current&&clearTimeout(n.current)}),[]),o}s();var C6=x(O());function x6(){let t=C6.useRef();return Ou(()=>{t.current=window},[]),t}s();var nd=x(O());function k6(){let t=nd.useRef(new WeakMap);return nd.useCallback(o=>(t.current.has(o)||t.current.set(o,nd.createRef()),t.current.get(o)),[])}s();var O6=x(O());function Sy(t,o){let e=wo(t);O6.default.useEffect(()=>{let n=()=>e.current(),r=window.setTimeout(n,o);return()=>window.clearTimeout(r)},[o])}s();var bm=x(O());s();var I6=x(O());function wy(t,o=500){let e=I6.useRef(0);return n=>e.current&&Date.now()-e.current<o?(t(n),e.current=0,!0):(e.current=Date.now(),!1)}s();var _6=x(O());function R6(t,o){let{scope:e=document,exact:n=!1}=o||{},r=wo(t);_6.useEffect(()=>{if(!t)return;let i=a=>{var l;(n?a.target===e:e.contains(a.target))&&a.key==="Tab"&&(a.defaultPrevented||a.preventDefault(),(l=r.current)==null||l.call(r,a.shiftKey))};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[r,!!t,e,n])}function P6(t){let{anchor:o,children:e,wrapper:n,onClose:r,...i}=t,a=bm.useRef(null);return $s({...i,onClose:r},a),bm.createElement(xa,{ref:a,opened:i.opened,anchor:o,wrapper:n},bm.createElement(Lg.Provider,{value:r},e))}s();var Ma=x(O());H();function Cy(t,o={}){let e=Ma.createContext(null);function n(i){let{children:a,...c}=i,l=typeof t=="object"?t:t(i),[u,d]=Ma.useState(l),[p,m]=Ma.useState(!1),f=h=>{let{layout:y}=h.nativeEvent;(!u||o.width!==!1&&y.width!==u.width||o.height!==!1&&y.height!==u.height)&&(d(y),m(!0))};return Ma.createElement(e.Provider,{value:{ready:p,dimensions:u}},Ma.createElement(S,{...c,onLayout:f},a))}function r(){let i=Ma.useContext(e);if(!i||!i.dimensions)throw new Error("Dimensions not available");return[i.dimensions,i.ready]}return{View:n,useDimensions:r}}s();var Ol=x(O());H();s();var xy=x(O());H();var rZ=Z.createResponsiveComponent(Ke);function E6(t){let[,o]=_(sZ),{close:e}=Co(),n=Iu()==="mobile",r=t.closeable||n,i=()=>{t.onClose&&t.onClose(),e(t.id)},a=Zs({mount:iZ,unmount:aZ});return xy.createElement(S,{ref:a},xy.createElement(rZ,{mobileStyle:o.toastMobile,desktopStyle:o.toastDesktop,onPress:()=>{t.onOpen&&t.onOpen(),r&&i()}},xy.createElement(bi,{...t,onClose:r?i:void 0,style:o.alert,mainBackground:!0})))}var iZ={duration:Vi.TRANSITION_DURATION_SHORT,frames:{0:{opacity:0,transform:[{translateY:100}]},1:{opacity:1,transform:[{translateY:0}]}}},aZ={duration:Vi.TRANSITION_DURATION_SHORT,frames:{0:{opacity:1,transform:[{translateY:0}]},1:{opacity:0,transform:[{translateY:100}]}}},sZ=G.create({toastDesktop:{width:"auto",minWidth:420,maxWidth:720,marginBottom:g.small},toastMobile:{width:"100%",minWidth:0},alert:t=>({...t.shadows.pop,borderColor:t.colors.border.main})});function M6(t){let o=Kn(wR),e=Kn(SR),n=Ol.useRef(null),r=lZ[o];return Ol.createElement(br,{ref:n},Ol.createElement(Z.View,{style:[cZ.toaster],mobileStyle:r.mobile,desktopStyle:r.desktop},Ol.createElement(hR,null,e.map(i=>Ol.createElement(E6,{...i,key:i.id})))))}var cZ=Q.create({toaster:{position:"fixed",zIndex:200}}),lZ={"bottom-right":Q.create({desktop:{bottom:g.medium,right:g.medium},mobile:{bottom:g.medium,right:g.medium,left:g.medium}}),"bottom-right-with-bar":Q.create({desktop:{bottom:g.xxlarge,right:g.medium},mobile:{bottom:g.xxlarge+g.xlarge+g.medium,right:g.medium,left:g.medium}})};s();var jr=x(O());H();var uZ=K.createInteractiveComponent(Vr);function La(t){let{icon:o,title:e,subtitle:n,details:r,style:i,buttons:a=[],...c}=t,[,l]=_(W);return jr.createElement(ds,{style:[b.alignCenter,g.Padding.medium,i],...c},o?jr.createElement(dZ,{icon:o}):null,jr.createElement(S,{style:[b.flex1]},jr.createElement(S,{style:[b.directionRow,b.alignCenter]},jr.createElement(uZ.Child,{style:[l.Body,l.Medium,l.text],activeStyle:l.primary,descendantOf:ds.interactiveHandle},e),n?jr.createElement(Vr,{style:[l.Label,l.textMuted,g.Margin.mediumLeft]},n):null),r?jr.createElement(S,null,jr.createElement(V,{style:[l.Label,l.textMid]},r)):null),a.length>0?jr.createElement(S,{style:[b.directionRow,b.alignCenter,g.Margin.mediumLeft]},a.map((u,d)=>u?jr.createElement(S,{style:[g.Margin.smallLeft],key:d},u):null)):null)}function dZ(t){let{icon:o}=t,[,e]=_(W),n=K.useInteractiveComponent(o);return jr.createElement(S,{style:[g.Margin.mediumRight]},jr.createElement(n.Child,{size:M.S,style:[e.textMuted],hoverStyle:e.primary}))}s();async function L6(t){let o=()=>{let n=t;for(;n&&(n=n.parentElement,!(n===document.querySelector("body")||n!=null&&n.hasAttribute("data-virtualparent"))););return n},e;return new Promise(n=>{let r=o();if(!r||!r.firstChild)return;let i=()=>{e.disconnect(),n()},a=!1;e=new IntersectionObserver(l=>{let[u]=l;u.isIntersecting&&requestAnimationFrame(()=>{i(),a=!0})},{rootMargin:"-50% 0% -50% 0%"});let c=()=>{Vg(r,{scrollMode:"if-needed",block:"center",inline:"center",behavior:"smooth"}),setTimeout(()=>{a||c()},500)};c(),e.observe(r)})}s();var zx=x(O());s();var eo=x(O());H();s();var it=x(O());H();s();var Me=x(O());H();var D6=Me.forwardRef(function(o,e){let{command:n,query:r,active:i,executeCommand:a,onHoverIn:c}=o,[l,u]=_(W),[,d]=_(pZ),[p,m]=wn(!1),f=u.text,h=u.textMid,y=u.primary,w=l.colors.background.main;i&&(f=u.textStandout,h=u.textMid,w=l.colors.background.muted);let C=[u.Bold],k=Me.useCallback(()=>{let R=a(n);R instanceof Promise&&m(()=>R)},[n,a]),I=Me.useCallback(()=>c(n),[n,c]),P=K.useInteractiveState({onHoverIn:I});return Me.createElement(Sr,{ref:e,component:Ke,...P.events,onMouseDown:R=>{R.preventDefault()},onPress:k,backgroundColor:w,style:[b.directionRow,b.alignCenter,d.commandItem,g.Margin.smallHorizontal,g.Padding.xsmallVertical,g.Padding.smallHorizontal,{height:Bx(n)}],testID:n.testID},p?Me.createElement(S,{style:[g.Padding.mediumRight]},Me.createElement(Re,{size:"medium"})):n.icon?Me.createElement(S,{style:[g.Padding.mediumRight]},Me.createElement(Me.Suspense,{fallback:Me.createElement(S,{style:{width:M.ICON_M,height:M.ICON_M}})},Me.createElement(n.icon,{size:M.ICON_M,style:y}))):null,Me.createElement(S,{style:b.flex1},Me.createElement(S,{style:b.directionRow},Me.createElement(S,{style:b.flex1},n.title?Me.createElement(S,null,Me.createElement(V,{style:[u.Label,f,n.subtitle?u.Bold:u.Medium],numberOfLines:1},Me.createElement(Ug,{query:r,text:n.title,highlight:C}))):null,n.subtitle?Me.createElement(S,null,Me.createElement(V,{style:[u.Caption,h],numberOfLines:1},Me.createElement(Ug,{query:r,text:n.subtitle,highlight:C}))):null)),n.body?Me.createElement(S,{style:[d.commandBody,g.Padding.smallLeft,g.Margin.smallTop]},n.body.map((R,D)=>Me.createElement(S,{key:D},Me.createElement(V,{style:[u.Caption,u.textMid],numberOfLines:1},Me.createElement(Ug,{query:r,text:R,highlight:C}))))):null),n.label?Me.createElement(S,null,Me.createElement(kR,{size:"medium",kind:n.label.kind,icon:n.label.icon},n.label.title)):Me.createElement(Me.Fragment,null,n.descendant?Me.createElement(S,{style:[g.Padding.mediumLeft]},Me.createElement(v.ChevronRight,{size:M.ICON_S,style:[u.textMuted]})):null,n.type===1?Me.createElement(S,{style:[g.Padding.mediumLeft]},Me.createElement(ec,{value:n.selected,onValueChange:k,size:M.ICON_S})):null,n.type===0?Me.createElement(S,{style:[g.Padding.mediumLeft]},Me.createElement(Xg,{value:n.selected,onValueChange:k,size:M.ICON_S})):null,n.type===2?Me.createElement(S,{style:[g.Padding.mediumLeft]},Me.createElement(Kg,{value:n.enabled,onValueChange:()=>{}})):null))});function Bx(t){let o=0;return o+=2*g.small,o+=Math.max(t.title&&Ze.Label.lineHeight||0,t.icon?M.ICON_M:0,typeof t.selected=="boolean"||typeof t.enabled=="boolean"?M.ICON_S:0),t.subtitle&&(o+=Ze.Caption.lineHeight||0),t.body&&(o+=g.small,o+=t.body.length*(Ze.Caption.lineHeight||0)),o}var pZ=G.create({commandItem:t=>({borderRadius:t.radiuses.medium}),commandBody:t=>({borderLeftWidth:1,borderLeftColor:t.colors.border.mid})});s();function ky({getItemHeight:t,getItemSeparatorHeight:o=()=>0,getSectionSeparatorHeight:e=()=>0,getSectionHeaderHeight:n=()=>0,getSectionFooterHeight:r=()=>0,listHeaderHeight:i=0,stickySectionHeadersEnabled:a}){return(c,l)=>{let u=0,d=typeof i=="function"?i():i,p=0,m=c.length;for(let f=0;f<m&&(p<l||f===0);f++){let h=c[f],y=c[f].data,w=y.length,C=c[f-1],k=c[f+1],I={section:h,index:f},P=e({section:h,index:f,leadingItem:void 0,trailingItem:y[0],leadingSection:C,trailingSection:k});d+=u+P+(a&&f===1?n({section:c[0],index:0}):0),u=a&&f===0?0:n(I),f!==0&&p++;for(let R=0;R<w&&(p<l||f===0&&R===0);R++){d+=u;let D=y[R],E=R>0&&R<w-1?o({item:D,section:h,index:R,leadingItem:y[R-1],trailingItem:y[R+1],leadingSection:C,trailingSection:k}):0;u=t({item:D,section:h,index:R})+E,p++}if(p<l&&(d+=e({section:h,index:f,leadingItem:y[y.length-1],trailingItem:void 0,leadingSection:C,trailingSection:k})),p<l){let R=e({section:h,index:f,leadingItem:y[y.length-1],trailingItem:void 0,leadingSection:C,trailingSection:k});d+=u+R,u=r(I),p++}}return{index:l,length:u,offset:d}}}function N6(t){var q;let{computed:{listId:o,items:e,sections:n,areMoreLoading:r},withKeyboardInteractions:i,palette:a,setPalette:c,setTopPalette:l}=t,u=Iu(),d=it.useRef(null),p=k6(),m=it.useCallback(async F=>{let U=await GR(a,F);U?c(U):l(null)},[c,l]),f=it.useCallback(F=>{c(U=>{if(!U)return null;let $=p(F),X=HR(U,F,$);return X||(U.descendant?{...U,descendant:void 0}:U)})},[c,p]),h=it.useCallback(()=>{c(F=>F!=null&&F.parent?null:F)},[c]),y=it.useCallback(F=>{let U=-1;return{sectionIndex:n.findIndex(X=>(U=X.data.findIndex(oe=>oe.key===F),U>=0)),itemIndex:U,viewPosition:.5}},[n]),w=it.useCallback(F=>{var U;return(U=d.current)==null?void 0:U.scrollToLocation(y(F.key))},[y]),C=XR({active:i,items:e,onSelect:m,onOpen:f,onClose:h,scrollTo:w}),k=n.length>1,I=it.useCallback(F=>{C.hoverItem(F),f(F)},[C.hoverItem,f]),P=it.useMemo(()=>ky({getItemHeight:({item:F})=>Bx(F),getSectionSeparatorHeight:({section:F,leadingItem:U,leadingSection:$,trailingItem:X,trailingSection:oe})=>$&&!U&&!F.group.title?2*(g.small-1)+1:oe&&!X?M.S/4:0,getSectionHeaderHeight:({section:F})=>k&&F.group.title?M.S:0}),[k]),R=it.useMemo(()=>k?({section:F})=>F.group.title?it.createElement(fZ,{group:F.group}):null:void 0,[k]),D=it.useCallback(F=>it.createElement(gZ,{...F}),[]),E=it.useCallback(({item:F})=>{var U;return it.createElement(D6,{ref:p(F),active:u==="desktop"&&F.key===((U=C.cursor.current)==null?void 0:U.key),command:F,query:a.query.text,executeCommand:m,onHoverIn:I})},[m,p,(q=C.cursor.current)==null?void 0:q.key,I,u,a.query.text]),T=r;if(!T&&e.length===0){let F=a.placeholder||(Pp(a)?null:"No items found");return F?it.createElement(mZ,{placeholder:F}):null}return it.createElement(S,{style:[b.flex1]},it.createElement(Wf,{key:o,ref:d,sections:n,extraData:C.cursor,getItemLayout:P,renderItem:E,SectionSeparatorComponent:D,renderSectionHeader:R,contentContainerStyle:[g.Padding.smallVertical],ListFooterComponent:T?it.createElement(S,{style:[b.directionRow,b.justifyContentCenter,g.Padding.medium]},it.createElement(Re,{size:"large"})):null}))}function mZ(t){let{placeholder:o}=t,[,e]=_(W);return it.createElement(S,{style:[g.Padding.smallHorizontal,g.Padding.mediumVertical]},it.createElement(S,{style:[g.Padding.mediumHorizontal]},it.createElement(V,{style:[e.Caption,e.textMuted]},o)))}function fZ(t){let{group:o}=t,[,e]=_(W);return it.createElement(S,{style:[hZ.paletteGroupHeader,b.directionRow,b.alignCenter,g.Padding.smallHorizontal]},it.createElement(S,{style:[g.Padding.smallHorizontal]},it.createElement(V,{style:[e.GroupTitle,e.textMuted]},o.title)))}function gZ(t){let{leadingSection:o,section:e,leadingItem:n,trailingSection:r,trailingItem:i}=t,[,a]=_(yZ);return o&&!n&&!e.group.title?it.createElement(S,{style:a.paletteDividerUntitled}):(r&&!i&&(S,a.paletteDividerFooter),null)}var hZ=Q.create({paletteGroupHeader:{height:M.S}}),yZ=G.create({paletteDividerUntitled:(t,o)=>({marginTop:g.small-1,marginBottom:g.small-1,borderTopColor:o.color==="light"?t.colors.border.mid:t.colors.sidebar.itemBorder,borderTopWidth:1}),paletteDividerFooter:{height:M.S/4}});s();var rd=x(O());H();function A6(t){let{error:o}=t,[,e]=_(W);return console.error(o),rd.createElement(S,{style:[b.directionRow,b.alignCenter,g.Padding.smallVertical,g.Padding.mediumHorizontal]},rd.createElement(S,{style:[g.Padding.mediumRight,g.Padding.xsmallTop]},rd.createElement(v.Warning,{size:M.ICON_S,style:e.danger})),rd.createElement(S,{style:[b.flex1,b.directionRow,b.alignCenter]},rd.createElement(V,{style:[e.danger,e.Label]},ga(o))))}s();var Ir=x(O());H();var B6=Ir.forwardRef(function(o,e){let{palette:n,setPalette:r,withItems:i,placement:a}=o,[,c]=_(vZ),[l,u]=_(W),[d,p]=js(n.query.text,[n]),m=h=>{p(h),r(y=>!n||!y?n:tc({...y,descendant:void 0},h))},f=h=>{(h.nativeEvent.key==="Escape"||h.nativeEvent.key==="Backspace"&&n.query.text.length===0)&&r(null)};return Ir.createElement(S,{style:i&&c.paletteInputWrapperWithBottomBorder},Ir.createElement(S,{style:[b.directionRow,b.alignCenter]},n.parent&&a==="right"?Ir.createElement(S,{style:[g.Padding.smallLeft]},Ir.createElement(v.ChevronLeft,{size:M.ICON_M,style:u.textMuted})):null,Ir.createElement(S,{style:[b.flex1,b.directionRow,b.alignCenter,c.paletteInput,g.Margin.small]},Ir.createElement(S,{style:[b.flex1]},Ir.createElement(li,{ref:e,value:d,placeholder:n.search,placeholderTextColor:l.colors.text.muted,onChangeText:m,onKeyPress:f,style:[u.Caption,u.text,g.Padding.mediumHorizontal,g.Padding.smallVertical]})),Ir.createElement(Z.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[g.Margin.smallHorizontal]},Ir.createElement(z,{icon:v.X,size:"large",onPress:()=>r(null)}))),n.parent&&a==="left"?Ir.createElement(S,{style:[g.Padding.smallRight]},Ir.createElement(v.ChevronRight,{size:M.ICON_M,style:u.textMuted})):null))}),vZ=G.create({paletteInputWrapperWithBottomBorder:(t,o)=>({borderBottomColor:o.color==="light"?t.colors.border.mid:t.colors.sidebar.itemBorder,borderBottomWidth:1}),paletteInput:t=>({backgroundColor:t.colors.background.muted,borderRadius:t.radiuses.large})});s();var id=x(O());function q6(t){let[o,e]=id.useState(!1),n=Op(()=>new WeakMap),r=id.useRef(null);return id.useMemo(()=>{let i=[],a=[],c;t.groups.forEach(d=>{let p;try{p=bZ(t,d)}catch(m){c=m;return}if(p instanceof Promise){let m=n.current.get(d);m&&i.push(m),a.push(p)}else p&&(n.current.set(d,p),i.push(p))});let l=i.filter(d=>d.data.length>0).sort((d,p)=>d.priority>p.priority?-1:d.priority<p.priority?1:0),u=l.reduce((d,p)=>(d.push(...p.data),d),[]);if(a.length>0){e(!0);let d=r.current=Promise.all(a);d.then(()=>{d===r.current&&(e(!1),r.current=null)}).catch(p=>Hf(new Error(p)))}return{listId:Date.now(),items:u,sections:l,areMoreLoading:o,error:c}},[t.groups,t.query,o,n])}function bZ(t,o){try{let e=typeof o.commands=="function"?o.commands(t):o.commands,n=typeof o.commands!="function"||o.commands.length===0,r=o.priority||5;if(n){let i=SZ(t.query.text,e);r=i.reduce((a,c)=>typeof c.score<"u"?Math.max((1-c.score)*10,a):a,r),e=i.map(a=>a.item)}return{group:o,priority:r,data:e}}catch(e){if(e instanceof Promise)return e;throw e}}function SZ(t,o){return t?new Ju(o,{threshold:.3,location:0,distance:100,shouldSort:!0,includeScore:!0,minMatchCharLength:1,isCaseSensitive:!1,keys:["title","keywords"]}).search(t):o.map(n=>({item:n,score:void 0}))}s();var Fx=x(Yf()),Ry=x(O());var qx=204,Oy=246,Wx=384,wZ=630,Iy=180,_y=355;function W6(t,o,e){let n=Ry.useMemo(()=>xZ(o,e),[o.position,!!o.parent,e]),r=Ry.useCallback(l=>CZ(l,o.position),[o.position]),[i,a,c]=cR(t,r,n);return[i,a,c]}function CZ(t,o){let e,n=(o==null?void 0:o.width)||"medium";switch(n){case"small":e={width:qx,maxWidth:qx,minWidth:qx,minHeight:0,height:Iy,maxHeight:_y};break;case"medium":e={width:Oy,maxWidth:Oy,minWidth:Oy,minHeight:0,height:Iy,maxHeight:_y};break;case"large":e={width:Wx,maxWidth:Wx,minWidth:Wx,minHeight:0,height:Iy,maxHeight:_y};break;case"anchor":let r=Math.max(Oy,t.width),i=(0,Fx.default)(t.width,r,wZ);e={width:(0,Fx.default)(t.width,r,i),maxWidth:i,minWidth:r,minHeight:0,height:Iy,maxHeight:_y};break;default:Fe(n)}return e}function xZ(t,o){var n,r;let e={cover:(n=t.position)==null?void 0:n.cover,spacingWithAnchor:g.small};return t.parent?(e.offset={top:-g.small},e.spacingWithAnchor=g.medium,e.allowedPlacements=o==="left"?["left","right"]:["right","left"]):((r=t.position)==null?void 0:r.width)==="anchor"&&(e.allowedPlacements=["bottom","top"]),e}var kZ=Z.createResponsiveComponent(Sr);function F6(t){let{paletteState:{palette:o},setPaletteState:e}=t,n=eo.useRef(null),[,r]=_(V6),i=()=>e(null),a=Zs(Vi.fade),c=sR("OUTSIDE_CLICK");return $s({opened:!0,closeOnEsc:!Pp(o),closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,onClose:i},n),aR(),eo.createElement(br,{ref:n},eo.createElement(go,{onPressIn:()=>{c&&i()}},eo.createElement(S,{ref:a,style:[r.paletteBackdrop]},eo.createElement(z6,{...t,setTopPaletteState:e}))))}function z6(t){let{paletteState:{palette:o,anchorRef:e},setPaletteState:n,setTopPaletteState:r,parentPlacement:i}=t,[a,c]=W6(e,o,i),l=Zs(Vi.slideToL[c]);return eo.createElement(eo.Fragment,null,eo.createElement(OZ,{ref:l,palette:o,setPalette:p=>{n(m=>{if(!m)return null;let f=typeof p=="function"?p(m.palette):p;return f?{...m,palette:f}:null})},setTopPalette:p=>{r(m=>{if(!m)return null;let f=typeof p=="function"?p(m.palette):p;return f?{...m,palette:f}:null})},positionStyle:a,placement:c}),o.descendant?eo.createElement(z6,{paletteState:o.descendant,setTopPaletteState:r,setPaletteState:p=>{n(m=>m?{...m,palette:{...m.palette,descendant:(typeof p=="function"?p(m.palette.descendant||null):p)||void 0}}:null)},parentPlacement:c}):null)}var OZ=eo.forwardRef(function(o,e){let{palette:n,setPalette:r,setTopPalette:i,positionStyle:a,placement:c}=o,l=eo.useRef(null),[u,d]=_(V6),p=q6(n),m=!n.descendant;return eo.useEffect(()=>{if(n.descendant)return;let f=l.current;f&&(document.activeElement===f||(f.select(),f.focus()))},[n]),eo.createElement(go,{onPress:f=>f.preventDefault()},eo.createElement(kZ,{ref:e,backgroundColor:u.colors.background.main,style:[d.palette],mobileStyle:d.paletteMobile,desktopStyle:[d.paletteInline,a],onStartShouldSetResponder:()=>!0},Pp(n)?eo.createElement(B6,{ref:l,palette:n,setPalette:r,withItems:p.items.length>0,placement:c}):null,p.error?eo.createElement(A6,{error:p.error}):eo.createElement(N6,{computed:p,palette:n,withKeyboardInteractions:m,setPalette:r,setTopPalette:i})))}),V6=G.create({paletteBackdrop:t=>({flexDirection:"row",alignItems:"flex-start",justifyContent:"center",position:"fixed",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",zIndex:100,backgroundColor:"transparent"}),palette:t=>({borderRadius:t.radiuses.xlarge,borderColor:t.colors.border.main,borderWidth:1,overflow:"hidden",...t.shadows.pop}),paletteMobile:{position:"absolute",marginTop:0,top:g.small,left:g.small,right:g.small,maxHeight:440,width:"auto",maxWidth:"100%",minWidth:"auto"},paletteInline:{position:"absolute"}});function G6(t){let[o,e]=Xn(VR);return zx.createElement(fR,null,o?zx.createElement(F6,{paletteState:o,setPaletteState:e}):null)}s();var H6=x(O());var IZ=[pl["1f44d"],pl["1f389"],pl["1f604"],pl["1f602"],pl["1f44f"],pl["1f44e"]];function ad(t,o={}){let{withSearch:e=!0,max:n=5}=o;return ce({search:e?"Select an emoji\u2026":void 0,groups:[{key:"emojis",commands:r=>(r.query.text?ly(r.query.text):IZ).slice(0,n).map(a=>({key:a.code,title:a.shortname,icon:c=>H6.createElement(Bo,{...c,code:a.code}),trigger:()=>t(a.code)}))}]})}s();var Sc=x(O());H();var Ps=Sc.forwardRef(function(o,e){let{displayMode:n="inline",value:r,style:i,placeholder:a,readOnly:c,onChangeText:l,...u}=o,[d]=_(),p=!c&&l,m=Sc.useMemo(()=>p&&n==="inline"?Hg(r||a||"",Q.flatten([i])):0,[n,r,a,i,p]);if(!p){let f=Sc.createElement(V,{style:[i],selectable:!0},r);return n==="inline"?f:Sc.createElement(S,{style:K6.inputModeBlock},f)}return Sc.createElement(li,{ref:e,placeholderTextColor:d.colors.text.muted,...u,value:r,onChangeText:l,placeholder:a,style:[i,n==="inline"?{width:m}:K6.inputModeBlock]})}),K6=Q.create({inputModeBlock:{width:"100%"}});s();var Py=[{key:"blue",color:Y.primary.base,title:"Blue"},{key:"purple",color:Y.violet.base,title:"Purple"},{key:"orange",color:Y.orange.base,title:"Orange"},{key:"red",color:Y.scarlet.base,title:"Red"},{key:"yellow",color:Y.YELLOW,title:"Yellow"},{key:"green",color:Y.green.base,title:"Green"}],Ey=[{key:"blue",color:Y.primary.xlight,title:"Blue"},{key:"purple",color:Y.violet.xlight,title:"Purple"},{key:"orange",color:Y.orange.xlight,title:"Orange"},{key:"red",color:Y.scarlet.xlight,title:"Red"},{key:"yellow",color:Y.YELLOW_XXLIGHT,title:"Yellow"},{key:"green",color:Y.green.xlight,title:"Green"}],hEe=[Y.primary.light,Y.violet.light,Y.fuchsia.light,Y.scarlet.light,Y.orange.light,Y.green.light];s();var je=x(O());H();s();var Y6=9,Gx=vg.reduce((t,o)=>{let e=t.find(r=>r.key===o.category);if(!e)return console.warn("Unknown emoji category","emoji"),t;(!e.data.length||e.data[e.data.length-1].emojis.length===Y6)&&e.data.push({key:"",emojis:[]});let n=e.data[e.data.length-1];return n.key+=o.code,n.emojis.push(o),t},[{key:"people",title:"People",Icon:v.EmojiReaction,data:[]},{key:"nature",title:"Nature",Icon:v.RoleEditor,data:[]},{key:"food",title:"Food",Icon:v.Food,data:[]},{key:"activity",title:"Activity",Icon:v.Music,data:[]},{key:"travel",title:"Travel",Icon:v.EmojiBike,data:[]},{key:"objects",title:"Objects",Icon:v.EmojiWatch,data:[]},{key:"symbols",title:"Symbols",Icon:v.HeartOutlined,data:[]},{key:"flags",title:"Flags",Icon:v.EmojiFlag,data:[]}]);function Z6(t){let o=ly(t);return{key:"search",title:"Results",data:AZ(o,Y6),Icon:v.Search}}function AZ(t,o){let e=t.length;if(e===0)return[];let n=Math.ceil(e/o);return Array.from({length:n},(r,i)=>{let a=i*o,c=t.slice(a,a+o);return{key:c.map(l=>l.code).join("-"),emojis:c}})}function My(t){let{onPick:o,onRemove:e}=t,[n,r]=je.useState(""),[i,a]=je.useState(""),c=je.useRef(null);je.useEffect(()=>{let u=requestAnimationFrame(()=>{c.current&&c.current.focus()});return()=>{cancelAnimationFrame(u)}},[c]);let l=u=>{r(u),a(u)};return je.createElement(S,{style:Sm.emojiPicker},je.createElement(S,{style:[Sm.emojiPickerSearch,b.directionRow]},je.createElement(ao,{kind:"search",size:"medium",ref:c,icon:v.Search,placeholder:"Search",value:n,onChangeText:l,cleareable:!0,style:b.flex1}),e?je.createElement(z,{icon:v.Trashcan,onPress:e,title:"Remove Emoji",size:"medium",kind:"secondary",style:g.Margin.smallLeft}):null),je.createElement(WZ,{query:i,onPick:o}))}var BZ=ky({getItemHeight:()=>Ty,getSectionHeaderHeight:()=>Q6,stickySectionHeadersEnabled:!0}),qZ=({section:t})=>je.createElement(FZ,{category:t}),WZ=je.memo(function(o){let{query:e,onPick:n}=o,r=je.useRef(null),i=e?[Z6(e)]:Gx,a=l=>{r.current&&r.current.scrollToLocation({sectionIndex:l,itemIndex:0})},c=je.useCallback(({item:l})=>je.createElement(zZ,{row:l,onPick:n}),[n]);return je.createElement(je.Fragment,null,!e&&je.createElement(S,{style:Sm.emojiPickerCategories},Gx.map((l,u)=>je.createElement(z,{key:l.key,icon:l.Icon,onPress:()=>{a(u)}}))),je.createElement(Wf,{ref:r,sections:i,stickySectionHeadersEnabled:!0,renderItem:c,renderSectionHeader:qZ,getItemLayout:BZ}))}),FZ=je.memo(function(o){let{category:e}=o,[,n]=_(J6),[,r]=_(W);return je.createElement(S,{style:[n.emojiCategoryHeader]},je.createElement(V,{style:[r.GroupTitle,r.text]},e.title))},(t,o)=>t.category.title===o.category.title),zZ=je.memo(function(o){let{row:e,onPick:n}=o;return je.createElement(S,{style:Sm.emojiRow},e.emojis.map(r=>je.createElement(VZ,{key:r.code,code:r.code,onPick:n})))},(t,o)=>t.row.key===o.row.key&&t.onPick===o.onPick),VZ=je.memo(function(o){let{code:e,onPick:n}=o,[,r]=_(J6);return je.createElement(K.TouchableOpacity,{onPress:()=>n(e),style:[Sm.emojiItem],activeStyle:r.emojiItemHovered},je.createElement(Bo,{code:e,size:24}))}),Ty=40,Q6=26,J6=G.create({emojiCategoryHeader:t=>({height:Q6,backgroundColor:t.colors.background.main,paddingLeft:g.medium,paddingRight:g.medium,paddingTop:g.small,paddingBottom:g.small}),emojiItemHovered:t=>({backgroundColor:t.colors.itemHover})}),Sm=Q.create({emojiPicker:{display:"flex",width:376,height:314},emojiPickerSearch:{padding:g.small},emojiPickerCategories:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:g.small,paddingBottom:0,paddingTop:0},emojiRow:{display:"flex",flexDirection:"row",paddingLeft:g.small,paddingRight:g.small},emojiItem:{width:Ty,height:Ty,borderRadius:Ty,display:"flex",alignItems:"center",justifyContent:"center",outlineStyle:"none"}});s();var wm=x(O());s();var Es=JSON.parse('{"container":"container_UPXwU","darkestParentBackground":"darkestParentBackground_8TVPV","darkParentBackground":"darkParentBackground_ziFwB","semiDarkParentBackground":"semiDarkParentBackground_wgu6B","mediumParentBackground":"mediumParentBackground_BIBSL","semiLightParentBackground":"semiLightParentBackground_Yx9Vw","lightParentBackground":"lightParentBackground_INb4a","lightestParentBackground":"lightestParentBackground_FL4je","toggle":"toggle_siihR","toggleLightMode":"toggleLightMode_-FLG4","toggleDarkMode":"toggleDarkMode_uS4t3","toggleSwitch":"toggleSwitch_NtUzX","toggleButton":"toggleButton_ePBfn","toggleIcon":"toggleIcon_-vIfn"}');function e7(t){let{onValueChange:o,value:e=!1,backgroundColor:n,mode:r="switch",accesibilityLabel:i="Switch to dark mode"}=t,a=()=>{o()},c=r==="switch"?e?v.ThemeDark.CSS:v.ThemeLight.CSS:e?v.ThemeLight.CSS:v.ThemeDark.CSS,l=vy(n);return r==="switch"?wm.default.createElement(te,{as:"button",type:"button",role:"switch","aria-label":i,"aria-checked":e,onClick:a,style:[Es.container,Es[`${l}ParentBackground`]]},wm.default.createElement(te,{style:[Es.toggle,Es.toggleSwitch,N.backgroundColor.main,N.margin.xsmall,e?Es.toggleDarkMode:Es.toggleLightMode]},wm.default.createElement(c,{style:[Es.toggleIcon,N.padding.xsmall]}))):wm.default.createElement(io,{label:i,role:"switch",iconOnly:!0,leadingIcon:c,rounded:!0,style:Es.toggleButton,kind:"muted",onClick:a,"aria-checked":e,"aria-label":i,preventFocusOnPress:!0})}s();s();s();function Cm(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var It=x(O(),1);s();var wc=x(O(),1);var KZ=wc.default.createContext(null);KZ.displayName="PressResponderContext";var xm=null,XZ=new Set,t7=!1,Il=!1,Hx=!1;function Kx(t,o){for(let e of XZ)e(t,o)}function UZ(t){return!(t.metaKey||!Y_()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function o7(t){Il=!0,UZ(t)&&(xm="keyboard",Kx("keyboard",t))}function sd(t){xm="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Il=!0,Kx("pointer",t))}function jZ(t){Z_(t)&&(Il=!0,xm="virtual")}function $Z(t){t.target===window||t.target===document||(!Il&&!Hx&&(xm="virtual",Kx("virtual",t)),Il=!1,Hx=!1)}function YZ(){Il=!1,Hx=!0}function n7(){if(typeof window>"u"||t7)return;let t=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){Il=!0,t.apply(this,arguments)},document.addEventListener("keydown",o7,!0),document.addEventListener("keyup",o7,!0),document.addEventListener("click",jZ,!0),window.addEventListener("focus",$Z,!0),window.addEventListener("blur",YZ,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",sd,!0),document.addEventListener("pointermove",sd,!0),document.addEventListener("pointerup",sd,!0)):(document.addEventListener("mousedown",sd,!0),document.addEventListener("mousemove",sd,!0),document.addEventListener("mouseup",sd,!0)),t7=!0}typeof document<"u"&&(document.readyState!=="loading"?n7():document.addEventListener("DOMContentLoaded",n7));function r7(){return xm}function ZZ(t){if(r7()==="virtual"){let o=document.activeElement;uw(()=>{document.activeElement===o&&document.contains(t)&&Og(t)})}else Og(t)}function QZ(t){if(!(t instanceof HTMLElement)&&!(t instanceof SVGElement))return!1;let{display:o,visibility:e}=t.style,n=o!=="none"&&e!=="hidden"&&e!=="collapse";if(n){let{getComputedStyle:r}=t.ownerDocument.defaultView,{display:i,visibility:a}=r(t);n=i!=="none"&&a!=="hidden"&&a!=="collapse"}return n}function JZ(t,o){return!t.hasAttribute("hidden")&&(t.nodeName==="DETAILS"&&o&&o.nodeName!=="SUMMARY"?t.hasAttribute("open"):!0)}function i7(t,o){return t.nodeName!=="#comment"&&QZ(t)&&JZ(t,o)&&(!t.parentElement||i7(t.parentElement,t))}var Xx=It.default.createContext(null),At=null;function a7(t){let{children:o,contain:e,restoreFocus:n,autoFocus:r}=t,i=(0,It.useRef)(),a=(0,It.useRef)(),c=(0,It.useRef)([]),{parentNode:l}=(0,It.useContext)(Xx)||{},u=(0,It.useMemo)(()=>new Om({scopeRef:c}),[c]);us(()=>{let m=l||co.root;if(co.getTreeNode(m.scopeRef)&&At&&!Dy(At,m.scopeRef)){let f=co.getTreeNode(At);f&&(m=f)}m.addChild(u),co.addNode(u)},[u,l]),us(()=>{let m=co.getTreeNode(c);m.contain=e},[e]),us(()=>{let m=i.current.nextSibling,f=[];for(;m&&m!==a.current;)f.push(m),m=m.nextSibling;c.current=f},[o]),iQ(c,n,e),nQ(c,e),sQ(c,n,e),rQ(c,r),(0,It.useEffect)(()=>{if(c){let m=document.activeElement,f=null;if(_n(m,c.current)){for(let h of co.traverse())_n(m,h.scopeRef.current)&&(f=h);f===co.getTreeNode(c)&&(At=f.scopeRef)}return()=>{let h=co.getTreeNode(c).parent.scopeRef;(c===At||Dy(c,At))&&(!h||co.getTreeNode(h))&&(At=h),co.removeTreeNode(c)}}},[c]);let d=(0,It.useMemo)(()=>eQ(c),[]),p=(0,It.useMemo)(()=>({focusManager:d,parentNode:u}),[u,d]);return It.default.createElement(Xx.Provider,{value:p},It.default.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:i}),o,It.default.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:a}))}function s7(){var t;return(t=(0,It.useContext)(Xx))===null||t===void 0?void 0:t.focusManager}function eQ(t){return{focusNext(o={}){let e=t.current,{from:n,tabbable:r,wrap:i,accept:a}=o,c=n||document.activeElement,l=e[0].previousElementSibling,u=Cc(_l(e),{tabbable:r,accept:a},e);u.currentNode=_n(c,e)?c:l;let d=u.nextNode();return!d&&i&&(u.currentNode=l,d=u.nextNode()),d&&Ts(d,!0),d},focusPrevious(o={}){let e=t.current,{from:n,tabbable:r,wrap:i,accept:a}=o,c=n||document.activeElement,l=e[e.length-1].nextElementSibling,u=Cc(_l(e),{tabbable:r,accept:a},e);u.currentNode=_n(c,e)?c:l;let d=u.previousNode();return!d&&i&&(u.currentNode=l,d=u.previousNode()),d&&Ts(d,!0),d},focusFirst(o={}){let e=t.current,{tabbable:n,accept:r}=o,i=Cc(_l(e),{tabbable:n,accept:r},e);i.currentNode=e[0].previousElementSibling;let a=i.nextNode();return a&&Ts(a,!0),a},focusLast(o={}){let e=t.current,{tabbable:n,accept:r}=o,i=Cc(_l(e),{tabbable:n,accept:r},e);i.currentNode=e[e.length-1].nextElementSibling;let a=i.previousNode();return a&&Ts(a,!0),a}}}var jx=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],tQ=jx.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";jx.push('[tabindex]:not([tabindex="-1"]):not([disabled])');var oQ=jx.join(':not([hidden]):not([tabindex="-1"]),');function _l(t){return t[0].parentElement}function Ly(t){let o=co.getTreeNode(At);for(;o&&o.scopeRef!==t;){if(o.contain)return!1;o=o.parent}return!0}function nQ(t,o){let e=(0,It.useRef)(),n=(0,It.useRef)(null);us(()=>{let r=t.current;if(!o){n.current&&(cancelAnimationFrame(n.current),n.current=null);return}let i=l=>{if(l.key!=="Tab"||l.altKey||l.ctrlKey||l.metaKey||!Ly(t))return;let u=document.activeElement,d=t.current;if(!_n(u,d))return;let p=Cc(_l(d),{tabbable:!0},d);p.currentNode=u;let m=l.shiftKey?p.previousNode():p.nextNode();m||(p.currentNode=l.shiftKey?d[d.length-1].nextElementSibling:d[0].previousElementSibling,m=l.shiftKey?p.previousNode():p.nextNode()),l.preventDefault(),m&&Ts(m,!0)},a=l=>{(!At||Dy(At,t))&&_n(l.target,t.current)?(At=t,e.current=l.target):Ly(t)&&!Ux(l.target,t)?e.current?e.current.focus():At&&Ny(At.current):Ly(t)&&(e.current=l.target)},c=l=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{Ly(t)&&!Ux(document.activeElement,t)&&(At=t,document.body.contains(l.target)?(e.current=l.target,e.current.focus()):At&&Ny(At.current))})};return document.addEventListener("keydown",i,!1),document.addEventListener("focusin",a,!1),r.forEach(l=>l.addEventListener("focusin",a,!1)),r.forEach(l=>l.addEventListener("focusout",c,!1)),()=>{document.removeEventListener("keydown",i,!1),document.removeEventListener("focusin",a,!1),r.forEach(l=>l.removeEventListener("focusin",a,!1)),r.forEach(l=>l.removeEventListener("focusout",c,!1))}},[t,o]),(0,It.useEffect)(()=>()=>{n.current&&cancelAnimationFrame(n.current)},[n])}function c7(t){return Ux(t)}function _n(t,o){return o.some(e=>e.contains(t))}function Ux(t,o=null){if(t instanceof Element&&t.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:e}of co.traverse(co.getTreeNode(o)))if(_n(t,e.current))return!0;return!1}function Dy(t,o){var e;let n=(e=co.getTreeNode(o))===null||e===void 0?void 0:e.parent;for(;n;){if(n.scopeRef===t)return!0;n=n.parent}return!1}function Ts(t,o=!1){if(t!=null&&!o)try{ZZ(t)}catch(e){}else if(t!=null)try{t.focus()}catch(e){}}function Ny(t,o=!0){let e=t[0].previousElementSibling,n=Cc(_l(t),{tabbable:o},t);n.currentNode=e;let r=n.nextNode();o&&!r&&(n=Cc(_l(t),{tabbable:!1},t),n.currentNode=e,r=n.nextNode()),Ts(r)}function rQ(t,o){let e=It.default.useRef(o);(0,It.useEffect)(()=>{e.current&&(At=t,_n(document.activeElement,At.current)||Ny(t.current)),e.current=!1},[t])}function iQ(t,o,e){us(()=>{if(o||e)return;let n=t.current,r=i=>{let a=i.target;_n(a,t.current)?At=t:c7(a)||(At=null)};return document.addEventListener("focusin",r,!1),n.forEach(i=>i.addEventListener("focusin",r,!1)),()=>{document.removeEventListener("focusin",r,!1),n.forEach(i=>i.removeEventListener("focusin",r,!1))}},[t,o,e])}function aQ(t){let o=co.getTreeNode(At);for(;o&&o.scopeRef!==t;){if(o.nodeToRestore)return!1;o=o.parent}return(o==null?void 0:o.scopeRef)===t}function sQ(t,o,e){let n=(0,It.useRef)(typeof document<"u"?document.activeElement:null);us(()=>{let r=t.current;if(!o||e)return;let i=()=>{(!At||Dy(At,t))&&_n(document.activeElement,t.current)&&(At=t)};return document.addEventListener("focusin",i,!1),r.forEach(a=>a.addEventListener("focusin",i,!1)),()=>{document.removeEventListener("focusin",i,!1),r.forEach(a=>a.removeEventListener("focusin",i,!1))}},[t,e]),us(()=>{if(!o)return;co.getTreeNode(t).nodeToRestore=n.current;let r=i=>{if(i.key!=="Tab"||i.altKey||i.ctrlKey||i.metaKey)return;let a=document.activeElement;if(!_n(a,t.current))return;let c=co.getTreeNode(t).nodeToRestore,l=Cc(document.body,{tabbable:!0});l.currentNode=a;let u=i.shiftKey?l.previousNode():l.nextNode();if((!document.body.contains(c)||c===document.body)&&(c=null,co.getTreeNode(t).nodeToRestore=null),(!u||!_n(u,t.current))&&c){l.currentNode=c;do u=i.shiftKey?l.previousNode():l.nextNode();while(_n(u,t.current));i.preventDefault(),i.stopPropagation(),u?Ts(u,!0):c7(c)?Ts(c,!0):a.blur()}};return e||document.addEventListener("keydown",r,!0),()=>{e||document.removeEventListener("keydown",r,!0);let i=co.getTreeNode(t).nodeToRestore;if(o&&i&&(_n(document.activeElement,t.current)||document.activeElement===document.body&&aQ(t))){let a=co.clone();requestAnimationFrame(()=>{if(document.activeElement===document.body){let c=a.getTreeNode(t);for(;c;){if(c.nodeToRestore&&document.body.contains(c.nodeToRestore)){Ts(c.nodeToRestore);return}c=c.parent}for(c=a.getTreeNode(t);c;){if(c.scopeRef&&co.getTreeNode(c.scopeRef)){Ny(c.scopeRef.current,!0);return}c=c.parent}}})}}},[t,o,e])}function Cc(t,o,e){let n=o!=null&&o.tabbable?oQ:tQ,r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode(i){var a;return!(o==null||(a=o.from)===null||a===void 0)&&a.contains(i)?NodeFilter.FILTER_REJECT:i.matches(n)&&i7(i)&&(!e||_n(i,e))&&(!(o!=null&&o.accept)||o.accept(i))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return o!=null&&o.from&&(r.currentNode=o.from),r}var km=class{get size(){return this.fastMap.size}getTreeNode(o){return this.fastMap.get(o)}addTreeNode(o,e,n){let r=this.fastMap.get(e!=null?e:null),i=new Om({scopeRef:o});r.addChild(i),i.parent=r,this.fastMap.set(o,i),n&&(i.nodeToRestore=n)}addNode(o){this.fastMap.set(o.scopeRef,o)}removeTreeNode(o){if(o===null)return;let e=this.fastMap.get(o),n=e.parent;for(let i of this.traverse())i!==e&&e.nodeToRestore&&i.nodeToRestore&&e.scopeRef.current&&_n(i.nodeToRestore,e.scopeRef.current)&&(i.nodeToRestore=e.nodeToRestore);let r=e.children;n.removeChild(e),r.size>0&&r.forEach(i=>n.addChild(i)),this.fastMap.delete(e.scopeRef)}*traverse(o=this.root){if(o.scopeRef!=null&&(yield o),o.children.size>0)for(let e of o.children)yield*this.traverse(e)}clone(){let o=new km;for(let e of this.traverse())o.addTreeNode(e.scopeRef,e.parent.scopeRef,e.nodeToRestore);return o}constructor(){Cm(this,"fastMap",new Map),this.root=new Om({scopeRef:null}),this.fastMap.set(null,this.root)}},Om=class{addChild(o){this.children.add(o),o.parent=this}removeChild(o){this.children.delete(o),o.parent=void 0}constructor(o){Cm(this,"children",new Set),Cm(this,"contain",!1),this.scopeRef=o.scopeRef}},co=new km;var wi=x(O());s();var $x=JSON.parse('{"toolbar":"toolbar_hJES6","toolbarGroup":"toolbarGroup_mD69e"}');var l7=wi.default.forwardRef(function(o,e){let{disabled:n=!1,orientation:r="horizontal",children:i,onTabToExit:a}=o;return wi.default.createElement(te,{role:"toolbar",style:$x.toolbar,ref:e,"aria-orientation":r},wi.default.createElement(a7,{restoreFocus:!0},wi.default.createElement(cQ,{disabled:n,orientation:r,onTabToExit:a},i)))});function cQ(t){let{children:o,disabled:e,orientation:n,onTabToExit:r}=t,i=s7();return wi.default.createElement(wi.default.Fragment,null,wi.default.Children.map(o,a=>{var c,l,u;return a?typeof a=="object"?wi.default.cloneElement(a,{onKeyDown(d){var m;let p={ArrowLeft:()=>{n==="horizontal"&&(i.focusPrevious(),d.preventDefault())},ArrowRight:()=>{n==="horizontal"&&(i.focusNext(),d.preventDefault())},ArrowUp:()=>{n==="vertical"&&(i.focusPrevious(),d.preventDefault())},ArrowDown:()=>{n==="vertical"&&(i.focusNext(),d.preventDefault())},Home:()=>{i.focusFirst(),d.preventDefault()},End:()=>{i.focusLast(),d.preventDefault()},Tab:()=>{r==null||r(d.shiftKey),d.preventDefault()}};(m=p[d.key])==null||m.call(p)},kind:(l=(c=a.props)==null?void 0:c.kind)!=null?l:"menuitem",disabled:((u=a.props)==null?void 0:u.disabled)||e}):a:null}))}function Im(t){let{onKeyDown:o,label:e,disabled:n=!1,children:r}=t;return wi.default.createElement(te,{role:"group",as:"span",style:$x.toolbarGroup,"aria-label":e},wi.default.Children.map(r,i=>{var a;return i?wi.default.cloneElement(i,{onKeyDown:o,kind:(a=i.props.kind)!=null?a:"menuitem",disabled:i.props.disabled||n}):null}))}s();var cd=x(O());function u7(t){let{children:o,...e}=t;return cd.createElement(nR,null,cd.createElement(vR,null,cd.createElement(dR,null,cd.createElement(G6,{...e}),cd.createElement(M6,null),o)))}s();var ld=x(O());s();var xc=JSON.parse('{"buttonTabs":"buttonTabs_ihLP4","buttonTabsItem":"buttonTabsItem_9vRT7","buttonTabsItemActive":"buttonTabsItemActive_PnjM4","buttonTabsItemIcon":"buttonTabsItemIcon_wUvLo","buttonTabsItemText":"buttonTabsItemText_Oa-uN","buttonTabsSizeMedium":"buttonTabsSizeMedium_Cra41","buttonTabsItemDisabled":"buttonTabsItemDisabled_XW4rD"}');function d7(t){let{tabs:o,activeTab:e,onPress:n,size:r="medium"}=t;return ld.createElement(te,{style:[xc.buttonTabs,r==="medium"&&xc.buttonTabsSizeMedium]},o.map(i=>{let a=e===i.key,c=i.icon;return ld.createElement(vi,{key:i.key,tooltip:i.tooltip},(l,u)=>ld.createElement(xR,{ref:u,onPress:()=>{i.disabled||n(i.key)},style:[xc.buttonTabsItem,{[xc.buttonTabsItemActive]:a,[xc.buttonTabsItemDisabled]:i.disabled}],...l.domEvents},c?ld.createElement(c,{style:xc.buttonTabsItemIcon}):null,i.label?ld.createElement(Cn,{style:[xc.buttonTabsItemText]},i.label):null))}))}s();var _m=x(O());s();var Yx=JSON.parse('{"grabber":"grabber_p72PX","grabberIcon":"grabberIcon_ebrbU"}');var p7=_m.forwardRef(function(o,e){let{style:n,size:r="small"}=o;return _m.createElement(te,{ref:e,style:[n,Yx.grabber]},_m.createElement(v.GrabberVertical.CSS,{style:[Yx.grabberIcon,N.icons[r]]}))});s();var Ay=x(O());var m7=dt("auth"),Zx=K_(t=>{let{customToken:o,waitUserReady:e=!0}=t;if(typeof window>"u")throw new Error("initializeAuth should not be called during SSR");return!o&&!e?{customToken:o}:new Ai("auth.initialize").wrap(async()=>{var r;if(o)try{m7.info("authenticating with custom token before subscribing to auth"),await Vf.auth().signInWithCustomToken(o),await((r=Vf.auth().currentUser)==null?void 0:r.getIdToken(!0))}catch(i){m7.critical("Error during auth with custom token",i)}return e!==!1&&await new Promise((i,a)=>{let c=Vf.auth().onAuthStateChanged(()=>{c(),i()},a)}),{customToken:o}})});function f7(t){return Zx.readAsync(t)}function By(t){let{children:o}=t;if(typeof window<"u"){if(Zx.state==="unstarted")throw new Error("initializeAuth should have been called before useWaitFirebaseAuth");Zx.read({})}return Ay.createElement(Ay.Fragment,null,o)}s();s();s();function ud(){return ud=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},ud.apply(this,arguments)}var dd;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dd||(dd={}));var g7=function(t){return t};var h7="beforeunload";var lQ="popstate";function b7(t){t===void 0&&(t={});var o=t,e=o.window,n=e===void 0?document.defaultView:e,r=n.history;function i(){var E=n.location,T=E.pathname,q=E.search,F=E.hash,U=r.state||{};return[U.idx,g7({pathname:T,search:q,hash:F,state:U.usr||null,key:U.key||"default"})]}var a=null;function c(){if(a)f.call(a),a=null;else{var E=dd.Pop,T=i(),q=T[0],F=T[1];if(f.length){if(q!=null){var U=d-q;U&&(a={action:E,location:F,retry:function(){R(U*-1)}},R(U))}}else k(E)}}n.addEventListener(lQ,c);var l=dd.Pop,u=i(),d=u[0],p=u[1],m=v7(),f=v7();d==null&&(d=0,r.replaceState(ud({},r.state,{idx:d}),""));function h(E){return typeof E=="string"?E:Qx(E)}function y(E,T){return T===void 0&&(T=null),g7(ud({pathname:p.pathname,hash:"",search:""},typeof E=="string"?Jx(E):E,{state:T,key:uQ()}))}function w(E,T){return[{usr:E.state,key:E.key,idx:T},h(E)]}function C(E,T,q){return!f.length||(f.call({action:E,location:T,retry:q}),!1)}function k(E){l=E;var T=i();d=T[0],p=T[1],m.call({action:l,location:p})}function I(E,T){var q=dd.Push,F=y(E,T);function U(){I(E,T)}if(C(q,F,U)){var $=w(F,d+1),X=$[0],oe=$[1];try{r.pushState(X,"",oe)}catch(we){n.location.assign(oe)}k(q)}}function P(E,T){var q=dd.Replace,F=y(E,T);function U(){P(E,T)}if(C(q,F,U)){var $=w(F,d),X=$[0],oe=$[1];r.replaceState(X,"",oe),k(q)}}function R(E){r.go(E)}var D={get action(){return l},get location(){return p},createHref:h,push:I,replace:P,go:R,back:function(){R(-1)},forward:function(){R(1)},listen:function(T){return m.push(T)},block:function(T){var q=f.push(T);return f.length===1&&n.addEventListener(h7,y7),function(){q(),f.length||n.removeEventListener(h7,y7)}}};return D}function y7(t){t.preventDefault(),t.returnValue=""}function v7(){var t=[];return{get length(){return t.length},push:function(e){return t.push(e),function(){t=t.filter(function(n){return n!==e})}},call:function(e){t.forEach(function(n){return n&&n(e)})}}}function uQ(){return Math.random().toString(36).substr(2,8)}function Qx(t){var o=t.pathname,e=o===void 0?"/":o,n=t.search,r=n===void 0?"":n,i=t.hash,a=i===void 0?"":i;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function Jx(t){var o={};if(t){var e=t.indexOf("#");e>=0&&(o.hash=t.substr(e),t=t.substr(0,e));var n=t.indexOf("?");n>=0&&(o.search=t.substr(n),t=t.substr(0,n)),t&&(o.pathname=t)}return o}var ek=dt("history");function S7(){let t=b7(),o=[],e=!1,n=()=>{let i=o.shift();return i?(i(),!1):!0},r=i=>{e?o.push(i):i()};return{get location(){return t.location},listen:i=>t.listen(a=>{i({location:a.location,action:a.action})}),push:i=>{let{state:a,...c}=i;r(()=>{ek.info("push",c,a),t.push(c,a)})},replace:i=>{let{state:a,...c}=i;r(()=>{ek.info("replace",c,a),t.replace(c,a)})},go:i=>{r(()=>{ek.info("go",i),t.go(i)})},transaction:i=>{if(e)i();else{let a=t.listen(()=>{n()&&a()});e=!0,i(),e=!1,n()&&a()}}}}s();function C7(t){let{basename:o="",location:e="/",context:n}=t,r=(a,c)=>{n.action=c,n.location=dQ(o,w7(a)),n.url=Qx(n.location)};return{staticContext:n,location:pQ(o,w7(Jx(e))),push:a=>{r(a,"PUSH")},replace:a=>{r(a,"REPLACE")},go:()=>{},listen:()=>()=>{},transaction:a=>{a()}}}function x7(t){return t.charAt(0)==="/"?t:`/${t}`}function dQ(t,o){return t?{...o,pathname:x7(t)+o.pathname}:o}function pQ(t,o){if(!t||!o.pathname)return o;let e=x7(t);return o.pathname.indexOf(e)!==0?o:{...o,pathname:o.pathname.substr(e.length)}}function w7(t){let o={hash:"",search:"",pathname:"",...t,key:"",state:void 0};return o.search&&o.search.charAt(0)!=="?"&&(o.search=`?${o.search}`),o.hash&&o.hash.charAt(0)!=="#"&&(o.hash=`#${o.hash}`),o}s();var Rl=x(O()),k7=x(yR());function tk(t){let{history:o,children:e}=t,n=Rl.useMemo(()=>o||S7(),[o]),r=Rl.useMemo(()=>({getCurrentValue:()=>n.location,subscribe:a=>n.listen(a)}),[n]),i=(0,k7.useSubscription)(r);return Rl.createElement(rP.Provider,{value:n},Rl.createElement(iP.Provider,{value:i},e))}function O7(t){let{children:o,...e}=t,n=C7(e);return Rl.createElement(tk,{history:n},o)}s();var ok=x(O());function I7(t,o){var l,u;let{navigate:e}=xe(),n=_a(),r=C_(t),i=(0,ok.useCallback)(d=>e({screen:{sideSheet:{type:t,tab:d}}},{replace:!0}),[e,t]),a=(0,ok.useCallback)(()=>e({screen:{sideSheet:void 0}}),[e]),c=(l="sideSheet"in n.screen&&n.screen.sideSheet&&"tab"in n.screen.sideSheet&&n.screen.sideSheet.tab?n.screen.sideSheet.tab:o)!=null?l:r[0];return{opened:"sideSheet"in n.screen&&((u=n.screen.sideSheet)==null?void 0:u.type)===t,selectedTab:c,changeSelectedTab:i,close:a}}s();var mQ=Dt({key:"firestoreReacheable",default:!0,effects:[t=>{typeof window>"u"||fetch("https://firestore.googleapis.com/$discovery/rest").catch(()=>{t.setSelf(!1)})}]});function _7(){return Kn(mQ)}s();var fQ=(t,o)=>{gs.write(t,o,"cached")};function R7(t){return bI(o=>(o.listenToDocument(fQ),t(o)))}s();function gQ(t){var o;return t.themePreset?Y.PRIMARY:(o=t.primaryColor)!=null?o:Y.PRIMARY}function hQ(t,o,e){let n=Y.WHITE,r=Y.darkModeGreyScale.dark;switch(t){case"default":return o==="dark"?r:n;case"bold":return e;case"contrast":return o==="dark"?n:r;case"custom":return Y.fuchsia.light;default:Fe(t)}}function yQ(t,o,e){switch(t){case"default":case"contrast":return o;case"bold":case"custom":return Ta(e)==="light"?Y.lightModeText.base:Y.darkModeText.base;default:Fe(t)}}function P7(t){return CI(t.headerTheme,t.themeMode)==="none"}function vQ(t,o){var f;let{primaryColor:e,headerBackgroundColor:n,headerLinksColor:r}=((f=t.themeCustomizations)==null?void 0:f[o])||{},a=P7(t)?"default":Bi(t),c=gQ(t),l=e!=null?e:c,u=hQ(a,o,l),d=n!=null?n:u,p=yQ(a,l,d),m=r!=null?r:p;return{primaryColor:l,headerBackgroundColor:d,headerLinksColor:m}}function bQ(t,o){var i,a,c;let e=(i=o!=null?o:t.themeMode)!=null?i:cp,{headerLogoURL:n,footerLogoURL:r}=((a=t.themeCustomizations)==null?void 0:a[e])||{};return{headerLogoURL:n!=null?n:t.logoURL,footerLogoURL:r!=null?r:(c=t.footer)==null?void 0:c.logoURL}}function qy(t,o){var n;let e=(n=o!=null?o:t.themeMode)!=null?n:cp;return{...vQ(t,e),...bQ(t,e),headerDisabled:P7(t)}}s();var E7=x(O());var SQ=dt("app:events"),wQ=t=>(t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function CQ(){let t=document.cookie?document.cookie.split("; "):[],o={};for(let e=0;e<t.length;e++){let n=t[e].split("="),r=n.slice(1).join("=");try{let i=decodeURIComponent(n[0]);o[i]=wQ(r)}catch(i){SQ.warning(`Couldn't parse cookie ${t[e]}. Error: `,i)}}return o}function T7(t,o){return E7.useEffect(()=>{xQ(t,o)},[t.key,o]),null}async function xQ(t,o){if(!t.integrations||!o)return;let e=await H_(),n=CQ(),r=window.location.href,i=document.referrer,a=window.navigator.userAgent;(await rc()).analytics.trackViewInSpaceById(t.key,{pageId:o,visitor:{anonymousId:e,cookies:n,userAgent:a},url:r,referrer:i})}s();function M7(t,o){let e=o.type==="space"&&typeof o.changeRequest=="string"?o.changeRequest:void 0;return yP(t,e)}s();var L7=x(O());function Wy(t){let o=R_(t),[e]=Ra([o]);return L7.useEffect(()=>{!e&&t&&vI(o,{url:t})},[e,t]),[e||{url:t}]}s();var D7=x(O());function N7(t){let o=t?new URL(t).hostname:null,[e]=lP([o?B_(o):null]);return D7.useMemo(()=>{if(!e||!t)return;let n=xu(Sg(e),t);if(!n)return;let r=e.find(i=>i.name===n.integrationKey);if(r)return{integration:r,block:n.block}},[e,t])}s();var A7=x(O());var nk=Dt({key:"hoveredCommentNodeAtom",default:null}),k0e=sI({key:"newCommentValueAtom",default:()=>vu("","comment")});function B7(){let t=Di(nk);return A7.useMemo(()=>({highlight:(o,e={highlighting:!0,postButton:!0})=>{let n=o?Wi.getOriginalKey(o):null;t(r=>n?(r&&r.node===n&&r.postButton&&(e.postButton=r.postButton),{node:n,...e}):null)}}),[t])}s();var W7=x(O());var q7=Dt({key:"filesManagerAtom",default:null});function _t(){let t=Di(q7),o=lI();return W7.useMemo(()=>({prompt:e=>new Promise(n=>{t({options:e,onComplete:n})}),isOpen:()=>{let{isModified:e}=o(q7);return e}}),[t])}s();var F7=x(O());var rk=Dt({key:"mediaGalleryState",default:{medias:[],currentIndex:0}});function pd(){let t=Di(rk);return F7.useMemo(()=>({open:(o,e=0)=>{t({medias:o,currentIndex:e})}}),[t])}s();var Rm=Dt({key:"mobileToCOpenedAtom",default:!1});s();var Fy=x(O());function z7(t){var r,i;let o=Fy.useContext(Jo),e=o.preview||o.mode!=="public-content"||!((r=t==null?void 0:t.intercom)!=null&&r.enabled)||(i=t==null?void 0:t.intercom)==null?void 0:i.appID,n=w6();return zi(a=>{n&&e&&a.writeAsync({type:"script",src:`https://widget.intercom.io/widget/${e}`,onLoad:async()=>{window.Intercom&&window.Intercom("boot",{app_id:e})}})}),Fy.useEffect(()=>()=>{window.Intercom&&(window.Intercom("shutdown"),window.Intercom=void 0)},[]),null}s();var Pm=x(O());var ik=Pm.default.createContext(()=>({getCurrentValue:()=>[],subscribe:()=>()=>{}})),Pl=new Map;function V7(t){let{withComments:o,spaceKey:e,pageKey:n,changeRequestKey:r,children:i}=t,a={space:e,page:n,changeRequest:r||null},[c]=Ra([o?gI(w_(a),hI("resolved","==",null),yI("postedAt","asc")):null]);Pm.default.useEffect(()=>{let u=(c||[]).reduce((d,p)=>{var m;return p.node?{...d,[p.node]:[...(m=d[p.node])!=null?m:[],p]}:d},{});Pl.forEach((d,p)=>{var y;let m=(y=u[p])!=null?y:[],[f,h]=d||[[],[]];kQ(m,f)||(Pl.set(p,[m,h]),h.forEach(w=>w()))})},[c]);let l=Pm.default.useCallback(u=>({getCurrentValue:()=>{let d=Pl.get(u);return d?d[0]:[]},subscribe:d=>{let p=Pl.get(u),[m,f]=p||[[],[]];return Pl.set(u,[m,[...f,d]]),()=>{let h=Pl.get(u),[y,w]=h||[[],[]],C=w.filter(k=>k!==d);Pl.set(u,[y,C])}}}),[]);return Pm.default.createElement(ik.Provider,{value:l},i)}function kQ(t,o){return t.length!==o.length?!1:t.every(e=>{let n=o.find(r=>e.key===r.key);return n?OQ(e,n):!1})}function OQ(t,o){return!(t.key!==o.key||t.resolved!==o.resolved||KS(t.replies)!==KS(o.replies))}s();var ak=1024,G7=ak*1024;function Em(t){return t>G7?`${(t/G7).toFixed(0)}MB`:t>ak?`${(t/ak).toFixed(0)}KB`:`${t}B`}function H7(t){return Xs(t)?"Image":Cu(t)?"Code":t.contentType==="application/pdf"?"PDF":t.contentType.startsWith("text/")?"Text":"Binary"}s();var zy=x(O());function X7(t){var n,r,i;let o=(0,zy.useContext)(Jo);IQ(o,t),Op(()=>U7(o,t));let e=Op(()=>K7(o,t));(0,zy.useEffect)(()=>(e.current=K7(o,t),()=>{e.current&&window.gtag("config",e.current,{update:!0,groups:"not_tracking_views"})}),[(n=t==null?void 0:t.googleAnalytics)==null?void 0:n.enabled,(r=t==null?void 0:t.googleAnalytics)==null?void 0:r.trackingPrivateViews,(i=t==null?void 0:t.googleAnalytics)==null?void 0:i.trackingID,o])}function sk(t){var o;return!!((o=t.googleAnalytics)!=null&&o.enabled&&typeof t.googleAnalytics.trackingID=="string")}function IQ(t,o){zi(e=>{var n;ck(t,o)||e.writeSafe({type:"script",src:`https://www.googletagmanager.com/gtag/js?l=dataLayer&id=${(n=o==null?void 0:o.googleAnalytics)==null?void 0:n.trackingID}`})})}function U7(t,o){ck(t,o)||typeof window>"u"||window!=null&&window.gtag||(window.dataLayer=window.dataLayer||[],window.gtag=function(...e){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",o.googleAnalytics.trackingID))}function K7(t,o){var n;if(ck(t,o)||typeof window>"u")return;window!=null&&window.gtag||U7(t,o),window.gtag("config",o.googleAnalytics.trackingID,{send_page_view:!1,anonymize_ip:!0,groups:"tracking_views"});let e=xg()==="rejected";return window.gtag("consent","default",{ad_storage:e?"denied":"granted",analytics_storage:e?"denied":"granted"}),(n=o==null?void 0:o.googleAnalytics)==null?void 0:n.trackingID}function ck(t,o){var e;return!o||!o.googleAnalytics||!sk(o)||t.preview||t.mode!=="public-content"&&!((e=o==null?void 0:o.googleAnalytics)!=null&&e.trackingPrivateViews)}s();s();var st=x(O());H();s();var Mr=x(O());s();var md=x(O());H();function j7(t){let{node:o,editor:e}=t,{readOnly:n}=e,[,r]=_(_Q),i=()=>{e.change(a=>{a.unwrapInlineByKey(o.key)})};return md.createElement(xn,{preferredAlignment:"start",kind:"large"},md.createElement(S,{style:[r.annotationPopover,g.Padding.mediumHorizontal,g.Padding.mediumVertical]},md.createElement(tr,{fragment:va}),n?null:md.createElement(S,{style:[r.toolbar]},md.createElement(z,{size:"small",kind:"secondary",icon:v.Trashcan,title:"Remove annotation",onPress:i}))))}var _Q=G.create({annotationPopover:{maxHeight:300},toolbar:{position:"absolute",top:g.medium,right:g.medium}});s();var zo=x(O());s();var lk=JSON.parse('{"hitArea":"hitArea_oHT6S","buttonWrapper":"buttonWrapper_3J38G","hideTransition":"hideTransition_k0Mlc"}');s();function at(t,o,e=[]){return ce({groups:[...e,{key:"block",commands:[{key:"delete",title:"Delete",icon:v.Trashcan,trigger:()=>{t.change(n=>{if(Mo(n.value.selection))return n.deleteBlockRangeForward();n.removeNodeByKey(o).focus()})}}]}]})}s();var En=x(O());s();var p2=[{key:"youtube",title:"Youtube",icon:$7()},{key:"soundcloud",title:"Soundcloud",icon:Y7()},{key:"loom",title:"Loom",icon:Z7()},{key:"github",title:"GitHub Gist",icon:Q7(),iconDark:J7()},{key:"framer",title:"Framer",icon:e2(),iconDark:t2()},{key:"codepen",title:"Codepen",icon:o2(),iconDark:n2()},{key:"dribbble",title:"Dribbble",icon:r2()},{key:"trello",title:"Trello",icon:i2()},{key:"typeform",title:"Typeform",icon:a2(),iconDark:s2()},{key:"google-docs",title:"Google Docs",icon:c2()},{key:"google-sheets",title:"Google Sheets",icon:l2()},{key:"google-slides",title:"Google Slides",icon:u2()},{key:"google-form",title:"Google Forms",icon:d2()}];s();var Da=x(O());H();s();var Ms=x(O());var Ls=Cy(t=>t.isPDF?{width:793.92,height:1123.2}:{width:750,height:500},{height:!1}),uk={uploadFiles:()=>{throw new Error("uploadFiles is not implemented, it should be passed as a prop to the ContentEditor component")},updateFile:()=>{throw new Error("updateFile is not implemented, it should be passed as a prop to the ContentEditor component")},logAnalyticsEvent:()=>{},blockLayoutComponent:({children:t})=>Ms.createElement(Ms.Fragment,null,t),integrationBlocksContext:null,integrationBlocksRemote:bP(()=>{throw new Error("not implemented")}),integrationsBlocksSubscription:{getCurrentValue:()=>({}),subscribe:()=>()=>{}}},Ge=Ms.createContext(uk),Ci=Ms.createContext({sections:hu(),active:null,selected:null,setActive:()=>{}}),kc=Ms.createContext("left"),_r=Ms.createContext("root");function m2(t){let{onInsert:o,onClose:e}=t,{logAnalyticsEvent:n}=Da.useContext(Ge),[r,i]=Da.useState(""),a=ui(r),c=()=>{if(!a)return;let l=Uf(r);o(ag.createEmbedBlock(l)),n({type:"edit_page_document_insert_block",from:"embed",blockType:vn,embedHostname:new URL(l).hostname})};return Da.createElement(ko,{title:"Embed a URL",subtitle:"Insert a URL to embed a live preview. Works with YouTube, Google Drive, Vimeo, and more.",onClose:e,footer:Da.createElement(S,{style:[b.directionRow,b.justifyContentEnd]},Da.createElement(z,{kind:"secondary",onPress:e,style:g.Margin.smallRight},"Cancel"),Da.createElement(z,{kind:"primary",disabled:!a,onPress:c},"Insert"))},Da.createElement(ao,{autoFocus:!0,label:"URL",value:r,onChangeText:i,onSubmit:c,placeholder:"Paste a URL or type it",feedback:a||!r?{type:"none"}:{type:"danger"}}))}s();var vt=x(O());H();s();var Tm=x(O()),f2=Tm.default.createContext(null);function g2(t){let{value:o,children:e}=t,n=Tm.default.useMemo(()=>({space:o.space,page:o.page,..."changeRequest"in o&&o.changeRequest?{changeRequest:o.changeRequest}:{},..."revision"in o&&o.revision?{revision:o.revision}:{}}),[o.space,o.page,"changeRequest"in o?o.changeRequest:void 0,"revision"in o?o.revision:void 0]);return Tm.default.createElement(f2.Provider,{value:n},e)}function pt(){let t=Tm.default.useContext(f2);if(t===null)throw new Error("useContentReferenceContext expects a ContentReferenceContextProvider above it");return t}s();var pk=x(O());s();var Ji=er({getKey:t=>{let[,...o]=t;return cw(o)},getValue:async([t,o,e,n])=>{let r=[];return!o||!__(o,e)?[null,r,!1]:await Cp(async()=>[await I_(o,e,{hiveClient:t,firestoreReader:{getDocument:a=>(r.some(c=>Qa(c)===Qa(a))||r.push(a),gs.readAsync(a)),getCollection:a=>(r.some(c=>Qa(a)===Qa(c))||r.push(a),gs.readAsync(a))}}),r,!1],[null,r,!0])},toJS(t){return[t[0],t[1].map(XS),t[2]]},fromJS(t){return[t[0],t[1].map(US),t[2]]}}),Vy=er({getKey:t=>{let[,...o]=t;return cw(o)},getValue:async([t,o,e])=>{let n=[];return await Cp(async()=>[await hg(o,e,{hiveClient:t,firestoreReader:{getDocument:i=>(n.some(a=>Qa(a)===Qa(i))||n.push(i),gs.readAsync(i)),getCollection:i=>(n.some(a=>Qa(i)===Qa(a))||n.push(i),gs.readAsync(i))}}),n,!1],[null,n,!0])},toJS(t){return[t[0],t[1].map(XS),t[2]]},fromJS(t){return[t[0],t[1].map(US),t[2]]}});s();var Na=x(O());s();var h2=Fg("0dc87861cc2f97f4b8aa90517de6c6f7d7add292c36eff9ffb4a127ad3126faa",()=>import("https://app.gitbook.com/public/app/chunks/ShareModalBody.lazycomponent-PEIT4OF4.min.js"));function y2(t){let{content:o}=t,{selectedTab:e,changeSelectedTab:n,opened:r,close:i}=I7("share");return Na.createElement(Ot,null,r?Na.createElement(ko,{size:"xlarge",onClose:i},Na.createElement(Na.Suspense,{fallback:Na.createElement(UR,{sidebar:Na.createElement(Ao,{size:"large"})},Na.createElement(Ao,{size:"large"}))},Na.createElement(h2,{tab:e||kP(o),onChangeTab:n,...t}))):null)}s();var Gy=x(O());function Oc(){let{navigate:t,getNavigationURL:o,getNavigationLinkProps:e}=xe();return Gy.useMemo(()=>{let r=(l,u)=>{let d=ro(l,u);if(d!==null)return o({current:dk(d)})},i=(l,u)=>{let d=ro(l,u);if(d!==null)return e({current:dk(d)})},a=(l,u={})=>{let{replace:d=!1}=u;t({current:dk(l,u)},{replace:d})};return{getNavigationHref:r,getNavigationProps:i,navigateToPagePath:a,navigateToPage:(l,u,d)=>{let p=ro(l,u);p!==null&&a(p,d)}}},[t])}function dk(t,o={}){let{preserveSideSheet:e=!1,preserveComments:n=!0,sideSheet:r}=o;return i=>{var a;return{page:t,...!e&&!r?{sideSheet:void 0}:{},...r?{sideSheet:r}:{},comments:n&&i.type==="space"&&((a=i.sideSheet)==null?void 0:a.type)==="comments"?{...i.sideSheet,node:void 0}:void 0}}}function v2(t){let{to:o}=t;return Gy.createElement(Qg,{to:{screen:{page:o,sideSheet:void 0}}})}function Pn(t,o,e,n={}){let{document:r,...i}=o,{space:a}=o,{withSearch:c=!0,accept:l=["url","user","anchor","page","space","collection","file"],position:u}=n,d=[];return l.includes("url")&&d.push({key:"url",commands:p=>{let{text:m}=p.query;if(!m||!du(m))return[];let f=gg(m);if(f){let[h]=Vy.read([e,f,i]),[y]=Ji.read([e,h,i]);if(h&&y)return[{key:m,title:y.text,icon:v.ArrowUpRight,trigger:()=>{t(h)}}]}return[{key:m,title:`Link to "${m}"`,icon:v.Link,trigger:()=>{t({kind:"url",url:m})}}]}}),l.includes("anchor")&&r&&d.push({key:"anchors",commands:()=>S2(r,{},t)}),l.includes("page")&&o.space&&d.push(b2({spaceId:o.space,changeRequestId:"changeRequest"in o?o.changeRequest:void 0},e,t,{accept:l,withSearch:c,targetCurrentSpace:!0})),l.includes("space")&&d.push({key:"spaces",commands:p=>gl.read({query:p.query.text,types:["spaces"]}).map(f=>f.index!=="spaces"?null:{key:f.object.objectID,icon:({size:h})=>pk.createElement(rh,{space:f.object,size:h}),title:f.object.title,trigger:()=>{t({kind:"space",space:f.object.objectID})},descendant:l.includes("page")?()=>ce({search:c?"Select page\u2026":void 0,groups:[b2({spaceId:f.object.objectID,changeRequestId:void 0},e,t,{accept:l,withSearch:c,targetCurrentSpace:f.object.objectID===a})]}):void 0}).filter(fe)}),l.includes("collection")&&d.push({key:"collections",commands:p=>gl.read({query:p.query.text,types:["collections"]}).map(f=>f.index!=="collections"?null:{key:f.object.objectID,title:f.object.title,trigger:()=>{t({kind:"collection",collection:f.object.objectID})}}).filter(fe)}),l.includes("user")&&d.push({key:"users",commands:p=>gl.read({query:p.query.text,hitsPerPage:8,types:["users"]}).map(f=>f.index!=="users"?null:{key:f.object.objectID,icon:({size:h})=>pk.createElement(hl,{user:f.object,size:h}),title:f.object.displayName,subtitle:f.object.email,trigger:()=>{t({kind:"user",user:f.object.objectID})}}).filter(fe)}),ce({search:c?"Type url or reference\u2026":void 0,groups:d,position:u})}function KQ(t,o,e,n,r){return ce({search:"Select page or heading\u2026",groups:[{key:"page",commands:[{key:"pick",title:`Link to "${o.title}"`,icon:v.Page,trigger:()=>{n({kind:"page",page:o.id,space:r.targetCurrentSpace?void 0:t})}}]},{key:"anchors",commands:()=>XQ(t,o,e,{page:o.id,space:r.targetCurrentSpace?void 0:t},n)}]})}function b2(t,o,e,n){let{accept:r,withSearch:i,targetCurrentSpace:a}=n;return{key:"space",commands:()=>{let c=zr(o.store.getBranchRevision(t.spaceId,t.changeRequestId?mg(t.changeRequestId):dg));return c?Object.values(c.pages).filter(l=>l.type!=="link").map(l=>({key:l.id,title:l.title,subtitle:ro(c,l.id),icon:l.type==="group"?v.AddPageGroup:v.Page,trigger:()=>{e({kind:"page",page:l.id,space:a?void 0:t.spaceId})},descendant:r&&r.includes("anchor")&&l.type==="document"?()=>({...KQ(t.spaceId,l,o,e,{targetCurrentSpace:a}),...i?{}:{search:void 0}}):void 0})):[]}}}function XQ(t,o,e,n,r){if(!o.document)return[];let i=zr(e.store.getDocument(t,o.document));return i?S2(i,n,r):[]}function S2(t,o,e){return ug(t).filter(r=>!!r.anchor).map(r=>{let i=(()=>{switch(r.type){case Ve:return v.Heading1;case Xe:return v.Heading2;case rt:return v.Heading3;case Lo:return v.Swagger;case Wr:return v.BlockExpandable;case hr:case $n:return v.Tabs;case null:return v.Hash;default:Fe(r.type)}})();return{key:r.key,icon:i,title:r.title,trigger:()=>{e({kind:"anchor",anchor:r.anchor,...o})}}})}s();var gd=x(O());s();var El=x(O());H();function fd(t){let{file:o,size:e=M.ICON_M}=t,[,n]=_(jQ);return El.createElement(S,{style:[n.fileTileIcon,{width:e,height:e}]},o&&Xs(o)?El.createElement(Qo,{style:n.fileTilePreview,source:{uri:Hi(o.downloadURL,{width:e})},accessibilityLabel:o.name}):El.createElement(UQ,{file:o,size:e*.65}))}function UQ(t){let{file:o,...e}=t;return o?Cu(o)?El.createElement(v.Swagger,{...e}):El.createElement(v.Paperclip,{...e}):El.createElement(v.Trashcan,{...e})}var jQ=G.create({fileTileIcon:t=>({backgroundColor:t.colors.background.muted,color:t.colors.text.muted,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:M.RADIUS_M}),fileTilePreview:{width:"100%",height:"100%",resizeMode:"cover",borderRadius:M.RADIUS_M,objectFit:"contain"}});function mk(t){let{navigate:o,getNavigationURL:e}=xe(),n=Ce(),r=pt(),[i,a]=gd.useState(""),c=t.map(h=>[n,h,r,i]),l=Ji.readMultiple(c),u=Ji.readCacheUpdatesKey(c),d=uP(l.map(h=>h[1]).flat()),p=Yt(),m=b6(p==null?void 0:p.dataSync),f=typeof m<"u"?`${m}`:"";return gd.useEffect(()=>{a(`${d}${f}`)},[d,f]),gd.useMemo(()=>l.map(([h,y,w],C)=>{let k=t[C];return h?{title:h.text,icon:$Q(k,h),secondaryIcon:YQ(k),secondaryIconDescription:ZQ(k,h),href:typeof h.target=="string"?h.target:e({screen:h.target}),open:()=>{typeof h.target=="string"?$R(h.target):o({screen:h.target})},resolution:h}:{title:w?"Access denied":"Broken link",icon:void 0,href:"",open:()=>{}}}),[u,e,o])}function ot(t){return mk(t?[t]:[])[0]||{title:"Broken link",icon:null,href:"",open:()=>{}}}function $Q(t,o){var e,n,r,i;if(t.kind==="url")return v.ExternalLink;if((e=o.extra)!=null&&e.user)return Ct(hl,{user:o.extra.user});if((n=o.extra)!=null&&n.file)return Ct(fd,{file:o.extra.file});if((r=o.extra)!=null&&r.space)return Ct(rh,{space:o.extra.space});if((i=o.extra)!=null&&i.page&&o.extra.page.emoji)return Ct(Bo,{code:o.extra.page.emoji})}function YQ(t){switch(t.kind){case"user":return v.AtSign;case"anchor":return v.Hash;case"page":return v.Page;case"space":return v.Space;case"collection":return v.Collection;case"url":return v.ExternalLink}}function ZQ(t,o){switch(t.kind){case"user":return"User mention";case"anchor":return"Link to a page's anchor";case"page":return"Link to a page";case"space":return"Link to a space";case"collection":return"Link to a acollection";case"url":return"External URL"}}function Ky(t){let{label:o,labelDescription:e,value:n,onChangeValue:r,placeholder:i,accept:a,size:c="large",disabled:l=!1}=t,[u,d]=vt.useState(!1),[p,m]=vt.useState(!1),[f,h]=vt.useState(""),y=vt.useRef(null),w=vt.useRef(null),[,C]=_(JQ),k=de(y),I=Ce(),P=pt();vt.useEffect(()=>{if(!f||!u||u&&!p){k.close();return}k.opened?k.typeQuery(f):k.open(tc(Pn(E=>{r(E),m(!1),w.current&&w.current.blur()},P,I,{withSearch:!1,position:{width:"anchor"},accept:a}),f))},[f,u]),vt.useEffect(()=>{u&&w.current&&w.current.focus()},[u]);let R=E=>{h(E),m(!0)},D=()=>{f||(m(!1),r()),du(f)&&(r({kind:"url",url:f}),m(!1)),d(!1)};return vt.createElement(S,null,o?vt.createElement(S,{style:g.Margin.smallBottom},vt.createElement(Pu,null,o),e?vt.createElement(S,{style:g.Margin.xsmallTop},vt.createElement(Gg,null,e)):null):null,u||!n?vt.createElement(ao,{testID:"contentRef.input",ref:w,wrapperRef:y,size:c,value:f,onChangeText:R,onBlur:D,onFocus:()=>d(!0),placeholder:i,disabled:l}):vt.createElement(Ke,{testID:"contentRef.fakeInput",onPress:()=>d(!0),style:[C.input,FR[c],b.directionRow,b.alignCenter]},vt.createElement(vt.Suspense,{fallback:vt.createElement(Re,{size:"small"})},vt.createElement(QQ,{value:n,size:c}))))}function QQ(t){let{value:o,size:e}=t,[,n]=_(W),r=ot(o);return vt.createElement(S,{style:[b.flex1,b.directionRow,b.alignCenter]},r.icon?vt.createElement(S,{style:[g.Margin.smallRight]},vt.createElement(r.icon,{size:M.ICON_S,style:n.textMuted})):null,vt.createElement(S,{style:[b.flex1]},vt.createElement(Vr,{style:[WR[e],n.text],testID:"contentRef.resolvedTitle"},r.title)))}var JQ=G.create({input:t=>({backgroundColor:t.colors.background.main,borderWidth:1,borderColor:t.colors.border.main})});s();async function w2(t,o,e){let[n]=await Ji.readAsync([t,o,e]);return{uri:n==null?void 0:n.target}}function Xy(t){var n,r,i,a;let o=ot(t);if(!o.href)return null;let e=(r=(n=o.resolution)==null?void 0:n.extra)==null?void 0:r.file;return{uri:o.href,width:(i=e==null?void 0:e.dimensions)==null?void 0:i.width,height:(a=e==null?void 0:e.dimensions)==null?void 0:a.height}}s();function Ic(t,o){return{href:t.href,onPress:e=>{if(o&&o(e),e){if(e.isDefaultPrevented()||e.nativeEvent.metaKey||e.nativeEvent.ctrlKey)return;e.preventDefault()}t.open()}}}s();var fk=x(O());function C2(t){let{block:o,style:e,size:n=M.ICON_M}=t;return o.icon?fk.createElement(Qo,{source:{uri:Hi(o.icon,{width:n})},style:[{width:n,height:n,borderRadius:n/8}]}):fk.createElement(v.Integrations,{size:n,style:e})}s();s();var Rr=x(O());s();var wd=x(O());s();var Io=x(O());H();s();var Uy=x(O());H();function x2(t){let{description:o,readOnly:e,blockProps:n}=t,{node:r}=n;return!o||e&&"fragment"in o&&is(r.fragments.get(o.fragment))?null:Uy.createElement(S,{style:g.Margin.mediumTop},"text"in o?Uy.createElement(Eu,{markdown:o.text}):Uy.createElement(tr,{fragment:o.fragment}))}s();var Mm=x(O());H();s();var Tl={get:Y.primary.base,post:Y.green.base,put:Y.orange.base,options:Y.violet.base,head:Y.orange.base,delete:Y.scarlet.base,patch:Y.orange.base,connect:Y.orange.base,trace:Y.orange.base};var eJ=Z.createResponsiveComponent(Sr);function jy(t){let{readOnly:o,method:e,setMethod:n}=t,[,r]=_(W),[,i]=_(tJ),a=Mm.default.useRef(null),c=de(a),l=ce({groups:[{key:"methods",commands:Nu.map(p=>({key:p,title:p.toUpperCase(),trigger:()=>{n&&n(p)}}))}]}),u=()=>{c.open(l)},d=Mm.default.createElement(eJ,{style:i.badge,backgroundColor:Tl[e]||Y.orange.base,mobileStyle:[i.mobileMethodBadge],desktopStyle:[i.httpMethodBadge]},Mm.default.createElement(Z.Text,{desktopStyle:[r.GroupTitle,r.Bold],mobileStyle:[r.MobileCaption,r.Bold],style:[r.textInsideColor,r.Bold,r.Uppercase]},e));return o?d:Mm.default.createElement(Ke,{ref:a,onPress:u},d)}var tJ=G.create({badge:{width:"fit-content"},httpMethodBadge:{borderRadius:M.XS,height:M.XS,paddingHorizontal:g.small,justifyContent:"center"},mobileMethodBadge:{borderRadius:M.XXS,height:M.XXS,paddingHorizontal:g.small,justifyContent:"center"}});var k2=Z.createResponsiveComponent(K.View),oJ=Z.createResponsiveComponent(K.View.Child);function O2(t){let{readOnly:o,blockProps:e,baseUrl:n,summary:r,path:i,method:a,description:c,opened:l,setOpened:u}=t,{node:d,editor:p}=e,[,m]=_(W),f=Io.default.useRef(),h=Io.default.useRef(),y=Io.default.useRef();function w(){u(!l)}let C=K.useInteractiveComponent(l?v.ChevronDown:v.ChevronRight);return Io.default.createElement(S,{style:[b.directionColumn,b.flex1,g.Padding.smallBottom]},Io.default.createElement(Z.View,{style:[b.alignCenter,g.Padding.medium,b.wrap],mobileStyle:b.flex1,desktopStyle:b.directionRow},Io.default.createElement(K.TouchableOpacity,{style:g.Padding.mediumRight,onPress:w},Io.default.createElement(C.Child,{size:M.ICON_M,style:m.textMuted,activeStyle:m.primary})),Io.default.createElement(S,{style:[g.Margin.mediumRight]},Io.default.createElement(jy,{readOnly:o,method:a,setMethod:k=>{p.change(I=>{Te.setMethod(I,d.key,k)})}})),Io.default.createElement(k2,{style:[b.wrap],mobileStyle:[b.flex1]},Io.default.createElement(Gr,{ref:f,component:Ps,value:n,placeholder:"https://api.gitbook.com/v1",onChangeText:k=>{p.change(I=>{Te.setBaseUrl(I,d.key,k)})},style:[m.Label,m.textMuted,$y.breakWord],selectTextOnFocus:!0,readOnly:o,onSubmitEditing:()=>{h.current&&h.current.focus()}})),Io.default.createElement(k2,{style:[b.directionRow],mobileStyle:[$y.mobileEndpoint,g.Padding.xsmallTop]},Io.default.createElement(Gr,{ref:h,component:Ps,value:i,placeholder:"/users",onChangeText:k=>{p.change(I=>{Te.setPath(I,d.key,k)})},style:[m.Label,m.text,m.Bold,$y.breakWord],selectTextOnFocus:!0,readOnly:t.readOnly,onSubmitEditing:()=>{y.current&&y.current.focus()}}),Io.default.createElement(oJ,{style:[g.Margin.xsmallLeft,Qe.hidden],hoverStyle:[Qe.visible],mobileStyle:{display:"none"}},Io.default.createElement(Ng,{size:"xsmall",content:`${n}${i}`})))),Io.default.createElement(S,{style:$y.headerBody},Io.default.createElement(S,null,Io.default.createElement(Gr,{ref:y,component:Ps,value:r,placeholder:"Operation summary",onChangeText:k=>{p.change(I=>{Te.setSummary(I,d.key,k)})},style:[m.Heading3,m.text],readOnly:o,displayMode:"block",onSubmitEditing:()=>{p.change(k=>{if(l&&c&&"fragment"in c){let I=d.fragments.get(c.fragment);I&&k.collapseToStartOf(I)}else kt(k,d);k.focus()})}})),l?Io.default.createElement(x2,{readOnly:o,description:c,blockProps:e}):null))}var $y=Q.create({breakWord:{wordWrap:"anywhere"},mobileEndpoint:{paddingLeft:g.medium+M.ICON_M,flexBasis:"100%",flexGrow:1},headerBody:{paddingLeft:g.medium+M.ICON_M+g.medium}});s();var Km=x(O());H();s();var Lm=x(O());H();function I2(t){let{blockProps:o}=t,{editor:e,node:n}=o,r=Lm.useRef(null),i=de(r),a=ce({groups:[{key:"parameters",commands:gk.map(({location:l,title:u,description:d})=>({key:l,title:u,subtitle:d,trigger:()=>{e.change(p=>{Te.addParameter(p,n.key,l)})}}))}]}),c=()=>{i.open(a)};return Lm.createElement(S,null,Lm.createElement(z,{ref:r,title:"Add Parameter",icon:i.opened?v.X:v.Plus,kind:i.opened?"primary":"secondary",size:"small",rounded:!0,onPress:()=>c()}))}var gk=[{location:"path",title:"Path",description:"Params in the URL path"},{location:"query",title:"Query",description:"Params in the query string"},{location:"header",title:"Header",description:"Params sent in headers"},{location:"cookie",title:"Cookie",description:"Params set via cookie"},{location:"body",title:"Body",description:"Params passed in body"}];s();var Hm=x(O());H();s();var _o=x(O());H();s();var ln=x(O());s();var _2=x(O(),1),Yy=(0,_2.createContext)({dragDropManager:void 0});s();var gA=x(M4(),1);s();s();s();s();s();s();function _c(t){return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_c(t)}s();function hk(t,o){if(_c(t)!=="object"||t===null)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var n=e.call(t,o||"default");if(_c(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(t)}function yk(t){var o=hk(t,"string");return _c(o)==="symbol"?o:String(o)}function Zy(t,o,e){return o=yk(o),o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}function xi(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var R2=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),vk=function(){return Math.random().toString(36).substring(7).split("").join(".")},P2={INIT:"@@redux/INIT"+vk(),REPLACE:"@@redux/REPLACE"+vk(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+vk()}};function nJ(t){if(typeof t!="object"||t===null)return!1;for(var o=t;Object.getPrototypeOf(o)!==null;)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(t)===o}function bk(t,o,e){var n;if(typeof o=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(xi(0));if(typeof o=="function"&&typeof e>"u"&&(e=o,o=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(xi(1));return e(bk)(t,o)}if(typeof t!="function")throw new Error(xi(2));var r=t,i=o,a=[],c=a,l=!1;function u(){c===a&&(c=a.slice())}function d(){if(l)throw new Error(xi(3));return i}function p(y){if(typeof y!="function")throw new Error(xi(4));if(l)throw new Error(xi(5));var w=!0;return u(),c.push(y),function(){if(w){if(l)throw new Error(xi(6));w=!1,u();var k=c.indexOf(y);c.splice(k,1),a=null}}}function m(y){if(!nJ(y))throw new Error(xi(7));if(typeof y.type>"u")throw new Error(xi(8));if(l)throw new Error(xi(9));try{l=!0,i=r(i,y)}finally{l=!1}for(var w=a=c,C=0;C<w.length;C++){var k=w[C];k()}return y}function f(y){if(typeof y!="function")throw new Error(xi(10));r=y,m({type:P2.REPLACE})}function h(){var y,w=p;return y={subscribe:function(k){if(typeof k!="object"||k===null)throw new Error(xi(11));function I(){k.next&&k.next(d())}I();var P=w(I);return{unsubscribe:P}}},y[R2]=function(){return this},y}return m({type:P2.INIT}),n={dispatch:m,subscribe:p,getState:d,replaceReducer:f},n[R2]=h,n}s();s();s();s();function ue(t,o,...e){if(rJ()&&o===void 0)throw new Error("invariant requires an error message argument");if(!t){let n;if(o===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let r=0;n=new Error(o.replace(/%s/g,function(){return e[r++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function rJ(){return typeof process<"u"&&!0}s();function E2(t,o,e){return o.split(".").reduce((n,r)=>n&&n[r]?n[r]:e||null,t)}function T2(t,o){return t.filter(e=>e!==o)}function Qy(t){return typeof t=="object"}function M2(t,o){let e=new Map,n=i=>{e.set(i,e.has(i)?e.get(i)+1:1)};t.forEach(n),o.forEach(n);let r=[];return e.forEach((i,a)=>{i===1&&r.push(a)}),r}function L2(t,o){return t.filter(e=>o.indexOf(e)>-1)}s();s();var hd="dnd-core/INIT_COORDS",Rc="dnd-core/BEGIN_DRAG",yd="dnd-core/PUBLISH_DRAG_SOURCE",Pc="dnd-core/HOVER",Ec="dnd-core/DROP",Tc="dnd-core/END_DRAG";function Sk(t,o){return{type:hd,payload:{sourceClientOffset:o||null,clientOffset:t||null}}}var iJ={type:hd,payload:{clientOffset:null,sourceClientOffset:null}};function D2(t){return function(e=[],n={publishSource:!0}){let{publishSource:r=!0,clientOffset:i,getSourceClientOffset:a}=n,c=t.getMonitor(),l=t.getRegistry();t.dispatch(Sk(i)),aJ(e,c,l);let u=lJ(e,c);if(u==null){t.dispatch(iJ);return}let d=null;if(i){if(!a)throw new Error("getSourceClientOffset must be defined");sJ(a),d=a(u)}t.dispatch(Sk(i,d));let m=l.getSource(u).beginDrag(c,u);if(m==null)return;cJ(m),l.pinSource(u);let f=l.getSourceType(u);return{type:Rc,payload:{itemType:f,item:m,sourceId:u,clientOffset:i||null,sourceClientOffset:d||null,isSourcePublic:!!r}}}}function aJ(t,o,e){ue(!o.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){ue(e.getSource(n),"Expected sourceIds to be registered.")})}function sJ(t){ue(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function cJ(t){ue(Qy(t),"Item must be an object.")}function lJ(t,o){let e=null;for(let n=t.length-1;n>=0;n--)if(o.canDragSource(t[n])){e=t[n];break}return e}s();function uJ(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}function dJ(t){for(var o=1;o<arguments.length;o++){var e=arguments[o]!=null?arguments[o]:{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){uJ(t,r,e[r])})}return t}function N2(t){return function(e={}){let n=t.getMonitor(),r=t.getRegistry();pJ(n),gJ(n).forEach((a,c)=>{let l=mJ(a,c,r,n),u={type:Ec,payload:{dropResult:dJ({},e,l)}};t.dispatch(u)})}}function pJ(t){ue(t.isDragging(),"Cannot call drop while not dragging."),ue(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function mJ(t,o,e,n){let r=e.getTarget(t),i=r?r.drop(n,t):void 0;return fJ(i),typeof i>"u"&&(i=o===0?{}:n.getDropResult()),i}function fJ(t){ue(typeof t>"u"||Qy(t),"Drop result must either be an object or undefined.")}function gJ(t){let o=t.getTargetIds().filter(t.canDropOnTarget,t);return o.reverse(),o}s();function A2(t){return function(){let e=t.getMonitor(),n=t.getRegistry();hJ(e);let r=e.getSourceId();return r!=null&&(n.getSource(r,!0).endDrag(e,r),n.unpinSource()),{type:Tc}}}function hJ(t){ue(t.isDragging(),"Cannot call endDrag while not dragging.")}s();s();function Dm(t,o){return o===null?t===null:Array.isArray(t)?t.some(e=>e===o):t===o}function B2(t){return function(e,{clientOffset:n}={}){yJ(e);let r=e.slice(0),i=t.getMonitor(),a=t.getRegistry(),c=i.getItemType();return bJ(r,a,c),vJ(r,i,a),SJ(r,i,a),{type:Pc,payload:{targetIds:r,clientOffset:n||null}}}}function yJ(t){ue(Array.isArray(t),"Expected targetIds to be an array.")}function vJ(t,o,e){ue(o.isDragging(),"Cannot call hover while not dragging."),ue(!o.didDrop(),"Cannot call hover after drop.");for(let n=0;n<t.length;n++){let r=t[n];ue(t.lastIndexOf(r)===n,"Expected targetIds to be unique in the passed array.");let i=e.getTarget(r);ue(i,"Expected targetIds to be registered.")}}function bJ(t,o,e){for(let n=t.length-1;n>=0;n--){let r=t[n],i=o.getTargetType(r);Dm(i,e)||t.splice(n,1)}}function SJ(t,o,e){t.forEach(function(n){e.getTarget(n).hover(o,n)})}s();function q2(t){return function(){if(t.getMonitor().isDragging())return{type:yd}}}function W2(t){return{beginDrag:D2(t),publishDragSource:q2(t),hover:B2(t),drop:N2(t),endDrag:A2(t)}}var Jy=class{receiveBackend(o){this.backend=o}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){let o=this,{dispatch:e}=this.store;function n(i){return(...a)=>{let c=i.apply(o,a);typeof c<"u"&&e(c)}}let r=W2(this);return Object.keys(r).reduce((i,a)=>{let c=r[a];return i[a]=n(c),i},{})}dispatch(o){this.store.dispatch(o)}constructor(o,e){this.isSetUp=!1,this.handleRefCountChange=()=>{let n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=o,this.monitor=e,o.subscribe(this.handleRefCountChange)}};s();s();function wJ(t,o){return{x:t.x+o.x,y:t.y+o.y}}function F2(t,o){return{x:t.x-o.x,y:t.y-o.y}}function z2(t){let{clientOffset:o,initialClientOffset:e,initialSourceClientOffset:n}=t;return!o||!e||!n?null:F2(wJ(o,n),e)}function V2(t){let{clientOffset:o,initialClientOffset:e}=t;return!o||!e?null:F2(o,e)}s();var vd=[],ev=[];vd.__IS_NONE__=!0;ev.__IS_ALL__=!0;function G2(t,o){return t===vd?!1:t===ev||typeof o>"u"?!0:L2(o,t).length>0}var tv=class{subscribeToStateChange(o,e={}){let{handlerIds:n}=e;ue(typeof o=="function","listener must be a function."),ue(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let r=this.store.getState().stateId,i=()=>{let a=this.store.getState(),c=a.stateId;try{c===r||c===r+1&&!G2(a.dirtyHandlerIds,n)||o()}finally{r=c}};return this.store.subscribe(i)}subscribeToOffsetChange(o){ue(typeof o=="function","listener must be a function.");let e=this.store.getState().dragOffset,n=()=>{let r=this.store.getState().dragOffset;r!==e&&(e=r,o())};return this.store.subscribe(n)}canDragSource(o){if(!o)return!1;let e=this.registry.getSource(o);return ue(e,`Expected to find a valid source. sourceId=${o}`),this.isDragging()?!1:e.canDrag(this,o)}canDropOnTarget(o){if(!o)return!1;let e=this.registry.getTarget(o);if(ue(e,`Expected to find a valid target. targetId=${o}`),!this.isDragging()||this.didDrop())return!1;let n=this.registry.getTargetType(o),r=this.getItemType();return Dm(n,r)&&e.canDrop(this,o)}isDragging(){return!!this.getItemType()}isDraggingSource(o){if(!o)return!1;let e=this.registry.getSource(o,!0);if(ue(e,`Expected to find a valid source. sourceId=${o}`),!this.isDragging()||!this.isSourcePublic())return!1;let n=this.registry.getSourceType(o),r=this.getItemType();return n!==r?!1:e.isDragging(this,o)}isOverTarget(o,e={shallow:!1}){if(!o)return!1;let{shallow:n}=e;if(!this.isDragging())return!1;let r=this.registry.getTargetType(o),i=this.getItemType();if(i&&!Dm(r,i))return!1;let a=this.getTargetIds();if(!a.length)return!1;let c=a.indexOf(o);return n?c===a.length-1:c>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return z2(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return V2(this.store.getState().dragOffset)}constructor(o,e){this.store=o,this.registry=e}};s();s();s();s();s();var H2=typeof window<"u"?window:self,K2=H2.MutationObserver||H2.WebKitMutationObserver;function wk(t){return function(){let e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}function CJ(t){let o=1,e=new K2(t),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){o=-o,n.data=o}}var X2=typeof K2=="function"?CJ:wk;var ov=class{enqueueTask(o){let{queue:e,requestFlush:n}=this;e.length||(n(),this.flushing=!0),e[e.length]=o}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:o}=this;for(;this.index<o.length;){let e=this.index;if(this.index++,o[e].call(),this.index>this.capacity){for(let n=0,r=o.length-this.index;n<r;n++)o[n]=o[n+this.index];o.length-=this.index,this.index=0}}o.length=0,this.index=0,this.flushing=!1},this.registerPendingError=o=>{this.pendingErrors.push(o),this.requestErrorThrow()},this.requestFlush=X2(this.flush),this.requestErrorThrow=wk(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}};s();s();var nv=class{call(){try{this.task&&this.task()}catch(o){this.onError(o)}finally{this.task=null,this.release(this)}}constructor(o,e){this.onError=o,this.release=e,this.task=null}};var rv=class{create(o){let e=this.freeTasks,n=e.length?e.pop():new nv(this.onError,r=>e[e.length]=r);return n.task=o,n}constructor(o){this.onError=o,this.freeTasks=[]}};var U2=new ov,xJ=new rv(U2.registerPendingError);function j2(t){U2.enqueueTask(xJ.create(t))}s();s();var Nm="dnd-core/ADD_SOURCE",Am="dnd-core/ADD_TARGET",Bm="dnd-core/REMOVE_SOURCE",Ml="dnd-core/REMOVE_TARGET";function $2(t){return{type:Nm,payload:{sourceId:t}}}function Y2(t){return{type:Am,payload:{targetId:t}}}function Z2(t){return{type:Bm,payload:{sourceId:t}}}function Q2(t){return{type:Ml,payload:{targetId:t}}}s();function J2(t){ue(typeof t.canDrag=="function","Expected canDrag to be a function."),ue(typeof t.beginDrag=="function","Expected beginDrag to be a function."),ue(typeof t.endDrag=="function","Expected endDrag to be a function.")}function eA(t){ue(typeof t.canDrop=="function","Expected canDrop to be a function."),ue(typeof t.hover=="function","Expected hover to be a function."),ue(typeof t.drop=="function","Expected beginDrag to be a function.")}function iv(t,o){if(o&&Array.isArray(t)){t.forEach(e=>iv(e,!1));return}ue(typeof t=="string"||typeof t=="symbol",o?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}s();var $r;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})($r||($r={}));s();var kJ=0;function tA(){return kJ++}function OJ(t){let o=tA().toString();switch(t){case $r.SOURCE:return`S${o}`;case $r.TARGET:return`T${o}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function oA(t){switch(t[0]){case"S":return $r.SOURCE;case"T":return $r.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function nA(t,o){let e=t.entries(),n=!1;do{let{done:r,value:[,i]}=e.next();if(i===o)return!0;n=!!r}while(!n);return!1}var av=class{addSource(o,e){iv(o),J2(e);let n=this.addHandler($r.SOURCE,o,e);return this.store.dispatch($2(n)),n}addTarget(o,e){iv(o,!0),eA(e);let n=this.addHandler($r.TARGET,o,e);return this.store.dispatch(Y2(n)),n}containsHandler(o){return nA(this.dragSources,o)||nA(this.dropTargets,o)}getSource(o,e=!1){return ue(this.isSourceId(o),"Expected a valid source ID."),e&&o===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(o)}getTarget(o){return ue(this.isTargetId(o),"Expected a valid target ID."),this.dropTargets.get(o)}getSourceType(o){return ue(this.isSourceId(o),"Expected a valid source ID."),this.types.get(o)}getTargetType(o){return ue(this.isTargetId(o),"Expected a valid target ID."),this.types.get(o)}isSourceId(o){return oA(o)===$r.SOURCE}isTargetId(o){return oA(o)===$r.TARGET}removeSource(o){ue(this.getSource(o),"Expected an existing source."),this.store.dispatch(Z2(o)),j2(()=>{this.dragSources.delete(o),this.types.delete(o)})}removeTarget(o){ue(this.getTarget(o),"Expected an existing target."),this.store.dispatch(Q2(o)),this.dropTargets.delete(o),this.types.delete(o)}pinSource(o){let e=this.getSource(o);ue(e,"Expected an existing source."),this.pinnedSourceId=o,this.pinnedSource=e}unpinSource(){ue(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(o,e,n){let r=OJ(o);return this.types.set(r,e),o===$r.SOURCE?this.dragSources.set(r,n):o===$r.TARGET&&this.dropTargets.set(r,n),r}constructor(o){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=o}};s();s();s();var IJ=(t,o)=>t===o;function rA(t,o){return!t&&!o?!0:!t||!o?!1:t.x===o.x&&t.y===o.y}function iA(t,o,e=IJ){if(t.length!==o.length)return!1;for(let n=0;n<t.length;++n)if(!e(t[n],o[n]))return!1;return!0}function aA(t=vd,o){switch(o.type){case Pc:break;case Nm:case Am:case Ml:case Bm:return vd;case Rc:case yd:case Tc:case Ec:default:return ev}let{targetIds:e=[],prevTargetIds:n=[]}=o.payload,r=M2(e,n);if(!(r.length>0||!iA(e,n)))return vd;let a=n[n.length-1],c=e[e.length-1];return a!==c&&(a&&r.push(a),c&&r.push(c)),r}s();function _J(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}function RJ(t){for(var o=1;o<arguments.length;o++){var e=arguments[o]!=null?arguments[o]:{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){_J(t,r,e[r])})}return t}var sA={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function cA(t=sA,o){let{payload:e}=o;switch(o.type){case hd:case Rc:return{initialSourceClientOffset:e.sourceClientOffset,initialClientOffset:e.clientOffset,clientOffset:e.clientOffset};case Pc:return rA(t.clientOffset,e.clientOffset)?t:RJ({},t,{clientOffset:e.clientOffset});case Tc:case Ec:return sA;default:return t}}s();function PJ(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}function bd(t){for(var o=1;o<arguments.length;o++){var e=arguments[o]!=null?arguments[o]:{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){PJ(t,r,e[r])})}return t}var EJ={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function lA(t=EJ,o){let{payload:e}=o;switch(o.type){case Rc:return bd({},t,{itemType:e.itemType,item:e.item,sourceId:e.sourceId,isSourcePublic:e.isSourcePublic,dropResult:null,didDrop:!1});case yd:return bd({},t,{isSourcePublic:!0});case Pc:return bd({},t,{targetIds:e.targetIds});case Ml:return t.targetIds.indexOf(e.targetId)===-1?t:bd({},t,{targetIds:T2(t.targetIds,e.targetId)});case Ec:return bd({},t,{dropResult:e.dropResult,didDrop:!0,targetIds:[]});case Tc:return bd({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}s();function uA(t=0,o){switch(o.type){case Nm:case Am:return t+1;case Bm:case Ml:return t-1;default:return t}}s();function dA(t=0){return t+1}function TJ(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}function MJ(t){for(var o=1;o<arguments.length;o++){var e=arguments[o]!=null?arguments[o]:{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){TJ(t,r,e[r])})}return t}function pA(t={},o){return{dirtyHandlerIds:aA(t.dirtyHandlerIds,{type:o.type,payload:MJ({},o.payload,{prevTargetIds:E2(t,"dragOperation.targetIds",[])})}),dragOffset:cA(t.dragOffset,o),refCount:uA(t.refCount,o),dragOperation:lA(t.dragOperation,o),stateId:dA(t.stateId)}}function mA(t,o=void 0,e={},n=!1){let r=LJ(n),i=new tv(r,new av(r)),a=new Jy(r,i),c=t(a,o,e);return a.receiveBackend(c),a}function LJ(t){let o=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return bk(pA,t&&o&&o({name:"dnd-core",instanceId:"dnd-core"}))}var cv=x(O(),1);function DJ(t,o){if(t==null)return{};var e=NJ(t,o),n,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],!(o.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(e[n]=t[n])}return e}function NJ(t,o){if(t==null)return{};var e={},n=Object.keys(t),r,i;for(i=0;i<n.length;i++)r=n[i],!(o.indexOf(r)>=0)&&(e[r]=t[r]);return e}var fA=0,sv=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),hA=(0,cv.memo)(function(o){var{children:e}=o,n=DJ(o,["children"]);let[r,i]=AJ(n);return(0,cv.useEffect)(()=>{if(i){let a=yA();return++fA,()=>{--fA===0&&(a[sv]=null)}}},[]),(0,gA.jsx)(Yy.Provider,{value:r,children:e})});function AJ(t){if("manager"in t)return[{dragDropManager:t.manager},!1];let o=BJ(t.backend,t.context,t.options,t.debugMode),e=!t.context;return[o,e]}function BJ(t,o=yA(),e,n){let r=o;return r[sv]||(r[sv]={dragDropManager:mA(t,o,e,n)}),r[sv]}function yA(){return window}s();s();s();s();var vA=x(P4(),1),uv=x(O(),1);s();var lv=x(O(),1),Yr=typeof window<"u"?lv.useLayoutEffect:lv.useEffect;function bA(t,o,e){let[n,r]=(0,uv.useState)(()=>o(t)),i=(0,uv.useCallback)(()=>{let a=o(t);(0,vA.default)(n,a)||(r(a),e&&e())},[n,t,e]);return Yr(i),[n,i]}function SA(t,o,e){let[n,r]=bA(t,o,e);return Yr(function(){let a=t.getHandlerId();if(a!=null)return t.subscribeToStateChange(r,{handlerIds:[a]})},[t,r]),n}function dv(t,o,e){return SA(o,t||(()=>({})),()=>e.reconnect())}s();var wA=x(O(),1);function pv(t,o){let e=[...o||[]];return o==null&&typeof t!="function"&&e.push(t),(0,wA.useMemo)(()=>typeof t=="function"?t():t,e)}s();var Ck=x(O(),1);function CA(t){return(0,Ck.useMemo)(()=>t.hooks.dragSource(),[t])}function xA(t){return(0,Ck.useMemo)(()=>t.hooks.dragPreview(),[t])}s();var RA=x(O(),1);s();var xk=!1,kk=!1,mv=class{receiveHandlerId(o){this.sourceId=o}getHandlerId(){return this.sourceId}canDrag(){ue(!xk,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return xk=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{xk=!1}}isDragging(){if(!this.sourceId)return!1;ue(!kk,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return kk=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{kk=!1}}subscribeToStateChange(o,e){return this.internalMonitor.subscribeToStateChange(o,e)}isDraggingSource(o){return this.internalMonitor.isDraggingSource(o)}isOverTarget(o,e){return this.internalMonitor.isOverTarget(o,e)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(o){return this.internalMonitor.subscribeToOffsetChange(o)}canDragSource(o){return this.internalMonitor.canDragSource(o)}canDropOnTarget(o){return this.internalMonitor.canDropOnTarget(o)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(o){this.sourceId=null,this.internalMonitor=o.getMonitor()}};s();var Ok=!1,fv=class{receiveHandlerId(o){this.targetId=o}getHandlerId(){return this.targetId}subscribeToStateChange(o,e){return this.internalMonitor.subscribeToStateChange(o,e)}canDrop(){if(!this.targetId)return!1;ue(!Ok,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Ok=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Ok=!1}}isOver(o){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,o):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(o){this.targetId=null,this.internalMonitor=o.getMonitor()}};s();function kA(t,o,e){let n=e.getRegistry(),r=n.addTarget(t,o);return[r,()=>n.removeTarget(r)]}function OA(t,o,e){let n=e.getRegistry(),r=n.addSource(t,o);return[r,()=>n.removeSource(r)]}s();s();function qm(t,o,e,n){let r=e?e.call(n,t,o):void 0;if(r!==void 0)return!!r;if(t===o)return!0;if(typeof t!="object"||!t||typeof o!="object"||!o)return!1;let i=Object.keys(t),a=Object.keys(o);if(i.length!==a.length)return!1;let c=Object.prototype.hasOwnProperty.bind(o);for(let l=0;l<i.length;l++){let u=i[l];if(!c(u))return!1;let d=t[u],p=o[u];if(r=e?e.call(n,d,p,u):void 0,r===!1||r===void 0&&d!==p)return!1}return!0}s();function Wm(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}s();var Fm=x(O(),1);function qJ(t){if(typeof t.type=="string")return;let o=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${o} into a <div>, or turn it into a drag source or a drop target itself.`)}function WJ(t){return(o=null,e=null)=>{if(!(0,Fm.isValidElement)(o)){let i=o;return t(i,e),i}let n=o;return qJ(n),FJ(n,e?i=>t(i,e):t)}}function gv(t){let o={};return Object.keys(t).forEach(e=>{let n=t[e];if(e.endsWith("Ref"))o[e]=t[e];else{let r=WJ(n);o[e]=()=>r}}),o}function IA(t,o){typeof t=="function"?t(o):t.current=o}function FJ(t,o){let e=t.ref;return ue(typeof e!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),e?(0,Fm.cloneElement)(t,{ref:n=>{IA(e,n),IA(o,n)}}):(0,Fm.cloneElement)(t,{ref:o})}var hv=class{receiveHandlerId(o){this.handlerId!==o&&(this.handlerId=o,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(o){this.dragSourceOptionsInternal=o}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(o){this.dragPreviewOptionsInternal=o}reconnect(){let o=this.reconnectDragSource();this.reconnectDragPreview(o)}reconnectDragSource(){let o=this.dragSource,e=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return e&&this.disconnectDragSource(),this.handlerId?o?(e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=o,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,o,this.dragSourceOptions)),e):(this.lastConnectedDragSource=o,e):e}reconnectDragPreview(o=!1){let e=this.dragPreview,n=o||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!e){this.lastConnectedDragPreview=e;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=e,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,e,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!qm(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!qm(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(o){this.hooks=gv({dragSource:(e,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Wm(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Wm(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=o}};s();var yv=class{get connectTarget(){return this.dropTarget}reconnect(){let o=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();o&&this.disconnectDropTarget();let e=this.dropTarget;if(this.handlerId){if(!e){this.lastConnectedDropTarget=e;return}o&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=e,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,e,this.dropTargetOptions))}}receiveHandlerId(o){o!==this.handlerId&&(this.handlerId=o,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(o){this.dropTargetOptionsInternal=o}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!qm(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(o){this.hooks=gv({dropTarget:(e,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Wm(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=o}};s();var _A=x(O(),1);function ki(){let{dragDropManager:t}=(0,_A.useContext)(Yy);return ue(t!=null,"Expected drag drop context"),t}function PA(t,o){let e=ki(),n=(0,RA.useMemo)(()=>new hv(e.getBackend()),[e]);return Yr(()=>(n.dragSourceOptions=t||null,n.reconnect(),()=>n.disconnectDragSource()),[n,t]),Yr(()=>(n.dragPreviewOptions=o||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,o]),n}s();var EA=x(O(),1);function TA(){let t=ki();return(0,EA.useMemo)(()=>new mv(t),[t])}s();s();var bv=x(O(),1);s();var vv=class{beginDrag(){let o=this.spec,e=this.monitor,n=null;return typeof o.item=="object"?n=o.item:typeof o.item=="function"?n=o.item(e):n={},n!=null?n:null}canDrag(){let o=this.spec,e=this.monitor;return typeof o.canDrag=="boolean"?o.canDrag:typeof o.canDrag=="function"?o.canDrag(e):!0}isDragging(o,e){let n=this.spec,r=this.monitor,{isDragging:i}=n;return i?i(r):e===o.getSourceId()}endDrag(){let o=this.spec,e=this.monitor,n=this.connector,{end:r}=o;r&&r(e.getItem(),e),n.reconnect()}constructor(o,e,n){this.spec=o,this.monitor=e,this.connector=n}};function MA(t,o,e){let n=(0,bv.useMemo)(()=>new vv(t,o,e),[o,e]);return(0,bv.useEffect)(()=>{n.spec=t},[t]),n}s();var LA=x(O(),1);function DA(t){return(0,LA.useMemo)(()=>{let o=t.type;return ue(o!=null,"spec.type must be defined"),o},[t])}function NA(t,o,e){let n=ki(),r=MA(t,o,e),i=DA(t);Yr(function(){if(i!=null){let[c,l]=OA(i,r,n);return o.receiveHandlerId(c),e.receiveHandlerId(c),l}},[n,o,e,r,i])}function Mc(t,o){let e=pv(t,o);ue(!e.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");let n=TA(),r=PA(e.options,e.previewOptions);return NA(e,n,r),[dv(e.collect,n,r),CA(r),xA(r)]}s();s();var AA=x(O(),1);function BA(t){return(0,AA.useMemo)(()=>t.hooks.dropTarget(),[t])}s();var qA=x(O(),1);function WA(t){let o=ki(),e=(0,qA.useMemo)(()=>new yv(o.getBackend()),[o]);return Yr(()=>(e.dropTargetOptions=t||null,e.reconnect(),()=>e.disconnectDropTarget()),[t]),e}s();var FA=x(O(),1);function zA(){let t=ki();return(0,FA.useMemo)(()=>new fv(t),[t])}s();s();var VA=x(O(),1);function GA(t){let{accept:o}=t;return(0,VA.useMemo)(()=>(ue(t.accept!=null,"accept must be defined"),Array.isArray(o)?o:[o]),[o])}s();var wv=x(O(),1);s();var Sv=class{canDrop(){let o=this.spec,e=this.monitor;return o.canDrop?o.canDrop(e.getItem(),e):!0}hover(){let o=this.spec,e=this.monitor;o.hover&&o.hover(e.getItem(),e)}drop(){let o=this.spec,e=this.monitor;if(o.drop)return o.drop(e.getItem(),e)}constructor(o,e){this.spec=o,this.monitor=e}};function HA(t,o){let e=(0,wv.useMemo)(()=>new Sv(t,o),[o]);return(0,wv.useEffect)(()=>{e.spec=t},[t]),e}function KA(t,o,e){let n=ki(),r=HA(t,o),i=GA(t);Yr(function(){let[c,l]=kA(i,r,n);return o.receiveHandlerId(c),e.receiveHandlerId(c),l},[n,o,r,e,i.map(a=>a.toString()).join("|")])}function ir(t,o){let e=pv(t,o),n=zA(),r=WA(e.options);return KA(e,n,r),[dv(e.collect,n,r),BA(r)]}H();s();var JA=x(O());s();s();s();s();function Ik(t){let o=null;return()=>(o==null&&(o=t()),o)}function XA(t,o){return t.filter(e=>e!==o)}function UA(t,o){let e=new Set,n=i=>e.add(i);t.forEach(n),o.forEach(n);let r=[];return e.forEach(i=>r.push(i)),r}var Cv=class{enter(o){let e=this.entered.length,n=r=>this.isNodeInDocument(r)&&(!r.contains||r.contains(o));return this.entered=UA(this.entered.filter(n),[o]),e===0&&this.entered.length>0}leave(o){let e=this.entered.length;return this.entered=XA(this.entered.filter(this.isNodeInDocument),o),e>0&&this.entered.length===0}reset(){this.entered=[]}constructor(o){this.entered=[],this.isNodeInDocument=o}};s();s();var xv=class{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(o=>{Object.defineProperty(this.item,o,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${o}" until the drop event.`),null}})})}loadDataTransfer(o){if(o){let e={};Object.keys(this.config.exposeProperties).forEach(n=>{let r=this.config.exposeProperties[n];r!=null&&(e[n]={value:r(o,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,e)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(o,e){return e===o.getSourceId()}endDrag(){}constructor(o){this.config=o,this.item={},this.initializeExposedProperties()}};s();var zm={};nI(zm,{FILE:()=>_k,HTML:()=>Ek,TEXT:()=>Pk,URL:()=>Rk});s();var _k="__NATIVE_FILE__",Rk="__NATIVE_URL__",Pk="__NATIVE_TEXT__",Ek="__NATIVE_HTML__";s();function kv(t,o,e){let n=o.reduce((r,i)=>r||t.getData(i),"");return n!=null?n:e}var Ov={[_k]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[Ek]:{exposeProperties:{html:(t,o)=>kv(t,o,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Rk]:{exposeProperties:{urls:(t,o)=>kv(t,o,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[Pk]:{exposeProperties:{text:(t,o)=>kv(t,o,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function jA(t,o){let e=Ov[t];if(!e)throw new Error(`native type ${t} has no configuration`);let n=new xv(e);return n.loadDataTransfer(o),n}function Iv(t){if(!t)return null;let o=Array.prototype.slice.call(t.types||[]);return Object.keys(Ov).filter(e=>{let n=Ov[e];return n!=null&&n.matchesTypes?n.matchesTypes.some(r=>o.indexOf(r)>-1):!1})[0]||null}s();s();var $A=Ik(()=>/firefox/i.test(navigator.userAgent)),Tk=Ik(()=>!!window.safari);s();var Vm=class{interpolate(o){let{xs:e,ys:n,c1s:r,c2s:i,c3s:a}=this,c=e.length-1;if(o===e[c])return n[c];let l=0,u=a.length-1,d;for(;l<=u;){d=Math.floor(.5*(l+u));let f=e[d];if(f<o)l=d+1;else if(f>o)u=d-1;else return n[d]}c=Math.max(0,u);let p=o-e[c],m=p*p;return n[c]+r[c]*p+i[c]*m+a[c]*p*m}constructor(o,e){let{length:n}=o,r=[];for(let h=0;h<n;h++)r.push(h);r.sort((h,y)=>o[h]<o[y]?-1:1);let i=[],a=[],c=[],l,u;for(let h=0;h<n-1;h++)l=o[h+1]-o[h],u=e[h+1]-e[h],a.push(l),i.push(u),c.push(u/l);let d=[c[0]];for(let h=0;h<a.length-1;h++){let y=c[h],w=c[h+1];if(y*w<=0)d.push(0);else{l=a[h];let C=a[h+1],k=l+C;d.push(3*k/((k+C)/y+(k+l)/w))}}d.push(c[c.length-1]);let p=[],m=[],f;for(let h=0;h<d.length-1;h++){f=c[h];let y=d[h],w=1/a[h],C=y+d[h+1]-f-f;p.push((f-y-C)*w),m.push(C*w*w)}this.xs=o,this.ys=e,this.c1s=d,this.c2s=p,this.c3s=m}};var zJ=1;function Mk(t){let o=t.nodeType===zJ?t:t.parentElement;if(!o)return null;let{top:e,left:n}=o.getBoundingClientRect();return{x:n,y:e}}function Gm(t){return{x:t.clientX,y:t.clientY}}function VJ(t){var o;return t.nodeName==="IMG"&&($A()||!(!((o=document.documentElement)===null||o===void 0)&&o.contains(t)))}function GJ(t,o,e,n){let r=t?o.width:e,i=t?o.height:n;return Tk()&&t&&(i/=window.devicePixelRatio,r/=window.devicePixelRatio),{dragPreviewWidth:r,dragPreviewHeight:i}}function YA(t,o,e,n,r){let i=VJ(o),c=Mk(i?t:o),l={x:e.x-c.x,y:e.y-c.y},{offsetWidth:u,offsetHeight:d}=t,{anchorX:p,anchorY:m}=n,{dragPreviewWidth:f,dragPreviewHeight:h}=GJ(i,o,u,d),y=()=>{let D=new Vm([0,.5,1],[l.y,l.y/d*h,l.y+h-d]).interpolate(m);return Tk()&&i&&(D+=(window.devicePixelRatio-1)*h),D},w=()=>new Vm([0,.5,1],[l.x,l.x/u*f,l.x+f-u]).interpolate(p),{offsetX:C,offsetY:k}=r,I=C===0||C,P=k===0||k;return{x:I?C:w(),y:P?k:y()}}s();var _v=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var o;return!((o=this.globalContext)===null||o===void 0)&&o.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var o;return((o=this.optionsArgs)===null||o===void 0?void 0:o.rootElement)||this.window}constructor(o,e){this.ownerDocument=null,this.globalContext=o,this.optionsArgs=e}};function HJ(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}function ZA(t){for(var o=1;o<arguments.length;o++){var e=arguments[o]!=null?arguments[o]:{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.forEach(function(r){HJ(t,r,e[r])})}return t}var Rv=class{profile(){var o,e;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((o=this.dragStartSourceIds)===null||o===void 0?void 0:o.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){let o=this.rootElement;if(o!==void 0){if(o.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");o.__isReactDndBackendSetUp=!0,this.addEventListeners(o)}}teardown(){let o=this.rootElement;if(o!==void 0&&(o.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var e;(e=this.window)===null||e===void 0||e.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(o,e,n){return this.sourcePreviewNodeOptions.set(o,n),this.sourcePreviewNodes.set(o,e),()=>{this.sourcePreviewNodes.delete(o),this.sourcePreviewNodeOptions.delete(o)}}connectDragSource(o,e,n){this.sourceNodes.set(o,e),this.sourceNodeOptions.set(o,n);let r=a=>this.handleDragStart(a,o),i=a=>this.handleSelectStart(a);return e.setAttribute("draggable","true"),e.addEventListener("dragstart",r),e.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(o),this.sourceNodeOptions.delete(o),e.removeEventListener("dragstart",r),e.removeEventListener("selectstart",i),e.setAttribute("draggable","false")}}connectDropTarget(o,e){let n=a=>this.handleDragEnter(a,o),r=a=>this.handleDragOver(a,o),i=a=>this.handleDrop(a,o);return e.addEventListener("dragenter",n),e.addEventListener("dragover",r),e.addEventListener("drop",i),()=>{e.removeEventListener("dragenter",n),e.removeEventListener("dragover",r),e.removeEventListener("drop",i)}}addEventListeners(o){o.addEventListener&&(o.addEventListener("dragstart",this.handleTopDragStart),o.addEventListener("dragstart",this.handleTopDragStartCapture,!0),o.addEventListener("dragend",this.handleTopDragEndCapture,!0),o.addEventListener("dragenter",this.handleTopDragEnter),o.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),o.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),o.addEventListener("dragover",this.handleTopDragOver),o.addEventListener("dragover",this.handleTopDragOverCapture,!0),o.addEventListener("drop",this.handleTopDrop),o.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(o){o.removeEventListener&&(o.removeEventListener("dragstart",this.handleTopDragStart),o.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),o.removeEventListener("dragend",this.handleTopDragEndCapture,!0),o.removeEventListener("dragenter",this.handleTopDragEnter),o.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),o.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),o.removeEventListener("dragover",this.handleTopDragOver),o.removeEventListener("dragover",this.handleTopDragOverCapture,!0),o.removeEventListener("drop",this.handleTopDrop),o.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){let o=this.monitor.getSourceId(),e=this.sourceNodeOptions.get(o);return ZA({dropEffect:this.altKeyPressed?"copy":"move"},e||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){let o=this.monitor.getSourceId(),e=this.sourcePreviewNodeOptions.get(o);return ZA({anchorX:.5,anchorY:.5,captureDraggingState:!1},e||{})}isDraggingNativeItem(){let o=this.monitor.getItemType();return Object.keys(zm).some(e=>zm[e]===o)}beginDragNativeItem(o,e){this.clearCurrentDragSourceNode(),this.currentNativeSource=jA(o,e),this.currentNativeHandle=this.registry.addSource(o,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(o){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=o;let e=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},e)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var o;(o=this.window)===null||o===void 0||o.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(o,e){o.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(e))}handleDragEnter(o,e){this.dragEnterTargetIds.unshift(e)}handleDragOver(o,e){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(e)}handleDrop(o,e){this.dropTargetIds.unshift(e)}constructor(o,e,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=r=>{let i=this.sourceNodes.get(r);return i&&Mk(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=r=>!!(r&&this.document&&this.document.body&&this.document.body.contains(r)),this.endDragIfSourceWasRemovedFromDOM=()=>{let r=this.currentDragSourceNode;r==null||this.isNodeInDocument(r)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=r=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(r||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=r=>{if(r.defaultPrevented)return;let{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;let a=Gm(r);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:a});let{dataTransfer:c}=r,l=Iv(c);if(this.monitor.isDragging()){if(c&&typeof c.setDragImage=="function"){let d=this.monitor.getSourceId(),p=this.sourceNodes.get(d),m=this.sourcePreviewNodes.get(d)||p;if(m){let{anchorX:f,anchorY:h,offsetX:y,offsetY:w}=this.getCurrentSourcePreviewNodeOptions(),I=YA(p,m,a,{anchorX:f,anchorY:h},{offsetX:y,offsetY:w});c.setDragImage(m,I.x,I.y)}}try{c==null||c.setData("application/json",{})}catch(d){}this.setCurrentDragSourceNode(r.target);let{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(c&&!c.types&&(r.target&&!r.target.hasAttribute||!r.target.hasAttribute("draggable")))return;r.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=r=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(r.dataTransfer)}if(!this.enterLeaveCounter.enter(r.target)||this.monitor.isDragging())return;let{dataTransfer:c}=r,l=Iv(c);l&&this.beginDragNativeItem(l,c)},this.handleTopDragEnter=r=>{let{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=r.altKey,i.length>0&&this.actions.hover(i,{clientOffset:Gm(r)}),i.some(c=>this.monitor.canDropOnTarget(c))&&(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=r=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(r.dataTransfer)}},this.handleTopDragOver=r=>{let{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none");return}this.altKeyPressed=r.altKey,this.lastClientOffset=Gm(r),this.scheduleHover(i),(i||[]).some(c=>this.monitor.canDropOnTarget(c))?(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?r.preventDefault():(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=r=>{this.isDraggingNativeItem()&&r.preventDefault(),this.enterLeaveCounter.leave(r.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=r=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;r.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(r.dataTransfer)}else Iv(r.dataTransfer)&&r.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=r=>{let{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:Gm(r)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=r=>{let i=r.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(r.preventDefault(),i.dragDrop()))},this.options=new _v(e,n),this.actions=o.getActions(),this.monitor=o.getMonitor(),this.registry=o.getRegistry(),this.enterLeaveCounter=new Cv(this.isNodeInDocument)}};s();var Pv;function Lk(){return Pv||(Pv=new Image,Pv.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Pv}var QA=function(o,e,n){return new Rv(o,e,n)};function e9(t){return JA.createElement(hA,{backend:QA},t.children)}s();function t9(t){switch(t.type){case"space":return{kind:"space",space:t.id};case"collection":return{kind:"collection",collection:t.id};case"page":return{kind:"page",space:t.space,page:t.id};case"block":case"tab":case"swagger-response":case"swagger-parameter":throw new Error(`Invalid DND item "${t.type}"`);default:Fe(t)}}s();var o9=x(O());function Ba(t,o){let[e,n,r]=Mc(t,o);return(0,o9.useEffect)(()=>{r(Lk(),{captureDraggingState:!0})},[r]),[e,n,r]}var n9=K.createInteractiveHandle("swagger-row");function Ev(t){var F,U;let{dragItem:o,columns:e,isLast:n,children:r,palette:i,onDropBefore:a,onDropAfter:c,onInsertBefore:l,onInsertAfter:u,readOnly:d,opened:p,setOpened:m,node:f,ancestors:h}=t,[,y]=_(KJ),w=Sd({node:f,ancestors:h}),[{dragging:C},k]=Ba({type:o.type,item:o,canDrag:()=>!t.readOnly,collect:$=>({dragging:$.isDragging()})}),[I,P]=ir({accept:o.type,drop:($,X)=>{X.didDrop()||a($)},canDrop:$=>o.id!==$.id&&o.blockKey===$.blockKey,collect:$=>({highlighted:$.isOver()&&$.canDrop()})}),[R,D]=ir({accept:o.type,drop:($,X)=>{X.didDrop()||c($)},canDrop:$=>o.id!==$.id&&o.blockKey===$.blockKey,collect:$=>({highlighted:$.isOver()&&$.canDrop()})}),E=ln.useRef(null),T=hi(E,k),q=de(E);return ln.createElement(S,null,ln.createElement(S,null,ln.createElement(K.View,{handle:n9,style:[b.directionRow,b.alignCenter,g.Padding.largeRight,C?Qe.translucent:Qe.visible]},d?null:ln.createElement(Z.View,{style:[b.justifyContentCenter,(F=w.controlButtons)==null?void 0:F.position],mobileStyle:"hidden"},ln.createElement(K.View.Child,{descendantOf:n9,activeStyle:Qe.visible,inactiveStyle:q.opened?{}:Qe.hidden},ln.createElement(z,{ref:T,icon:v.GrabberVertical,size:(U=w.controlButtons)==null?void 0:U.size,rounded:!0,kind:"secondary",title:`Click for options.
Drag to move.`,onPress:()=>{q.open(i())}}))),ln.createElement(Z.View,{style:[b.flex1,b.directionRow],mobileStyle:[b.wrap,b.alignStart,g.Padding.smallVertical],desktopStyle:[b.alignStart,g.Padding.mediumVertical]},e.map(($,X)=>ln.createElement(Z.View,{key:X,style:[g.Padding.smallRight],desktopStyle:[$.desktopSize],mobileStyle:[y.columnResetWidth,$.mobileSize]},$.content))),r&&m?ln.createElement(S,{style:[g.Margin.mediumLeft]},ln.createElement(z,{icon:p?v.ChevronDown:v.ChevronRight,onPress:()=>m(!p)})):null),p?ln.createElement(S,null,r):null,n?null:ln.createElement(S,{style:y.borderLine})),d?null:ln.createElement(Rp,{ref:P,position:"top",dropHovered:I.highlighted,button:{kind:"secondary",icon:v.Plus,onPress:l}}),n&&!d?ln.createElement(Rp,{ref:D,position:"bottom",dropHovered:R.highlighted,button:{kind:"secondary",icon:v.Plus,onPress:u}}):null)}var KJ=G.create({borderLine:t=>({height:1,backgroundColor:t.colors.border.muted}),controlButtonWrapper:{position:"absolute",top:0,bottom:0,left:-M.BUTTON_S/2,width:M.BUTTON_S},columnResetWidth:{width:"auto"}});s();var Ll=x(O());H();function Tv(t){let{title:o,button:e,children:n}=t,[,r]=_(W);return Ll.createElement(S,{style:g.Margin.largeTop},Ll.createElement(S,{style:[b.directionRow,b.alignCenter,g.Padding.mediumBottom]},Ll.createElement(S,{style:b.flex1},Ll.createElement(V,{style:[r.Heading3,r.text]},o)),e?Ll.createElement(S,{style:g.Padding.smallHorizontal},e):null),Ll.createElement(S,null,n))}function Mv(t){let{readOnly:o,blockProps:e,parameter:n,isLast:r,beforeOrderIndex:i,afterOrderIndex:a}=t,{node:c,editor:l}=e,[,u]=_(W),d=_o.useRef(),p={id:n.key,type:"swagger-parameter",blockKey:c.key,previewLabel:"Move parameter"},{name:m="",type:f="",required:h,description:y,properties:w={},items:C}=n.value,[,k]=_(jJ),[I,P]=_o.useState(!1),R=Object.keys(w).length,D=R>0||!!C,E=c.fragments.get(n.key),T=X=>{l.change(oe=>{Te.setParameterName(oe,c.key,n.key,X)})},q=X=>{l.change(oe=>{Te.setParameterType(oe,c.key,n.key,X)})},F=X=>{l.change(oe=>{Te.setParameterRequired(oe,c.key,n.key,X)})},U=()=>{l.change(X=>{Te.removeParameter(X,c.key,n.key)})},$=f==="object"&&R>0?Object.entries(w).map(([X,oe],we)=>_o.createElement(Mv,{key:X,...t,isLast:we===R-1,parameter:{key:X,value:oe}})):f==="array"&&C?_o.createElement(Mv,{...t,isLast:!0,parameter:{key:"items",value:C}}):null;return _o.createElement(Ev,{...D?{opened:I,setOpened:P}:{},...e,readOnly:t.readOnly,dragItem:p,isLast:r,palette:()=>ce({groups:[{key:"edit-parameter",commands:[{key:"delete-parameter",title:"Delete",icon:v.Trashcan,trigger:U}]}]}),columns:[{content:o?_o.createElement(V,{selectable:!0,style:[u.Code,u.textMid]},m,h?_o.createElement(V,{style:[u.danger]},"*"):null):_o.createElement(Ps,{placeholder:"id",onChangeText:T,value:m,style:[u.Code,u.textMid],selectTextOnFocus:!0,displayMode:"block",onSubmitEditing:()=>{d.current&&d.current.focus()}}),desktopSize:k.parameterColumnNameDesktop,mobileSize:k.parameterColumnNameMobile},{content:_o.createElement(Ps,{ref:d,placeholder:"String",onChangeText:q,value:f,style:[u.Label,u.textMid],readOnly:o,selectTextOnFocus:!0,displayMode:"block",onSubmitEditing:()=>{l.change(X=>{E&&X.collapseToStartOf(E).focus()})}}),desktopSize:k.parameterColumnTypeDesktop,mobileSize:k.parameterColumnTypeMobile},{content:_o.createElement(_o.Fragment,null,y?_o.createElement(V,{style:[u.Label,u.textMid]},y):E?_o.createElement(_r.Provider,{value:"swaggerParameter"},_o.createElement(tr,{fragment:n.key})):null),desktopSize:b.flex1,mobileSize:!y&&(!E||E.isEmpty)?k.parameterDescriptionEmptyColumnMobile:null},o?null:{content:_o.createElement(jR,{value:h?"required":"optional",items:[{label:"Required",value:"required"},{label:"Optional",value:"optional"}],onValueChange:X=>F(X==="required")})}].filter(fe),onInsertBefore:()=>{l.change(X=>{Te.addParameter(X,c.key,n.value.in,{before:i,after:n.value.orderIndex})})},onDropBefore:X=>{l.change(oe=>{Te.moveParameter(oe,c.key,X.id,n.value.in,{before:i,after:n.value.orderIndex})})},onInsertAfter:()=>{l.change(X=>{Te.addParameter(X,c.key,n.value.in,{before:n.value.orderIndex,after:a})})},onDropAfter:X=>{l.change(oe=>{Te.moveParameter(oe,c.key,X.id,n.value.in,{after:a,before:n.value.orderIndex})})}},$&&_o.createElement(S,{style:[k.borderTop]},$))}var jJ=G.create({parameterColumnNameDesktop:{width:200},parameterColumnNameMobile:{flexGrow:1,flexShrink:1,flexBasis:"50%",marginBottom:g.small},parameterColumnTypeDesktop:{width:90},parameterColumnTypeMobile:{flexGrow:1,flexShrink:1,flexBasis:"50%"},parameterDescriptionEmptyColumnMobile:{display:"none"},borderTop:t=>({borderTopWidth:1,borderTopColor:t.colors.border.muted})});function r9(t){let{parametersGroup:o,location:e,isLast:n,...r}=t,[,i]=_(W),a=gk.find(({location:c})=>c===e);return Hm.createElement(S,{style:g.Margin.smallTop},Hm.createElement(S,null,Hm.createElement(V,{style:[i.Label,i.Bold,i.text]},a.title)),o.map((c,l)=>{let u=o[l-1],d=o[l+1],p=l===o.length-1;return Hm.createElement(Mv,{key:c.key,...r,parameter:c,isLast:p,beforeOrderIndex:u==null?void 0:u.value.orderIndex,afterOrderIndex:d==null?void 0:d.value.orderIndex})}))}function i9(t){let{parameters:o,readOnly:e,blockProps:n}=t,r=$J(o),i=Object.keys(r).length,a=Te.SORTED_PARAMETERS_LOCATIONS.filter(c=>!!r[c]);return Km.createElement(Tv,{title:"Parameters",button:t.readOnly?null:Km.createElement(I2,{blockProps:n})},a.length>0?a.map((c,l)=>{let u=r[c];return Km.createElement(r9,{key:c,readOnly:e,blockProps:n,location:c,parametersGroup:u,isLast:l===i-1})}):Km.createElement(V,null,"No parameters"))}function $J(t){return t.reduce((o,e)=>{let n=o[e.value.in]||[];return o[e.value.in]=[...n,e],o},{})}s();var Xm=x(O());H();s();var Lv=x(l9());var eee={2:Y.green.base,3:Y.primary.base,4:Y.orange.base,5:Y.scarlet.base},tee=Object.entries(Lv.message).map(([t,o])=>({code:t,message:o})),oee=new Ju(tee,{shouldSort:!0,threshold:.4,distance:100,keys:[{name:"code",weight:.6},{name:"message",weight:.4}]});function Nk(t){return eee[Math.floor(t/100)]||Y.lightModeGreyScale.dark}function nee(t){return oee.search(t).map(o=>o.item)}function Ak({code:t,message:o}){let e=o||Lv.message[t];return e?`${t}: ${e}`:`${t}`}function d9(t){let[o,e]=t.split(": ");return{code:Number(o),message:e}}var u9=[200,201,204,400,401,403,404,500].map(t=>{let o=String(t),e=Lv.message[o];return{code:o,message:e}});function Dv(t,o){let e={key:"responses",commands:r=>(r.query.text?nee(r.query.text):u9).slice(0,u9.length).map(a=>{let c=Ak(a);return{key:a.code,title:c,icon:Ct(v.Dot,{style:{color:Nk(parseInt(a.code,10))}}),trigger:()=>{t(c)}}})},n=o?[{key:"edit-response",commands:[{key:"delete-response",title:"Delete response",icon:v.Trashcan,trigger:()=>{o()}}]},e]:[e];return ce({search:"Type status code\u2026",groups:n})}function p9(t){let{blockProps:o}=t,{node:e,editor:n}=o,r=Xm.useRef(null),i=de(r),a=Dv(l=>{n.change(u=>{Te.addResponse(u,e.key,l)})}),c=()=>{i.open(a)};return Xm.createElement(S,null,Xm.createElement(z,{ref:r,title:"Add Response",icon:i.opened?v.X:v.Plus,kind:i.opened?"primary":"secondary",size:"small",rounded:!0,onPress:()=>c()}))}s();var un=x(O());H();s();var Ds=x(O());H();s();var Dl=x(O());function m9(t){let{examples:o}=t,e=Object.keys(o),n=Dl.useRef(null),r=de(n),[i,a]=Dl.useState(e[0]);return i?Dl.createElement(DR,{code:o[i],syntax:ree(i),showToolbar:r.opened,toolbar:e.length>1?Dl.createElement(z,{kind:"secondary",size:"small",ref:n,rightIcon:v.ChevronDown,onPress:()=>{r.open(ce({groups:[{key:"media-types",commands:e.map(c=>({key:c,title:c,trigger:()=>{a(c)}}))}]}))}},i):null}):null}function ree(t){return t.includes("json")?"js":t.includes("xml")?"xml":"js"}s();var Le=x(O());H();function f9(t){let[,o]=_(v9);return Le.createElement(ma,{style:[o.container],horizontal:!0},Le.createElement(Bk,{...t,isRoot:!0}))}function Bk(t){let{schema:o}=t;if(o.type){let e=o.description||o.title;switch(o.type){case"object":return Le.createElement(g9,{name:"",properties:o.properties,requiredProperties:o.required,description:e,...t});case"array":return Le.createElement(h9,{name:"",items:o.items,description:e,...t});default:return Le.createElement(y9,{name:"",type:o.type,description:e,...t})}}else return o.anyOf?Le.createElement(Nv,{type:"anyOf",options:o.anyOf}):o.oneOf?Le.createElement(Nv,{type:"oneOf",options:o.oneOf}):o.allOf?Le.createElement(Nv,{type:"allOf",options:o.allOf}):null}function g9(t){let{name:o,isRequired:e=!1,isRoot:n=!1,properties:r={},requiredProperties:i=[],description:a=""}=t,[c,l]=Le.useState(!1);return Le.createElement(Bv,{name:o,type:"object",expandable:{expanded:c,setExpanded:l},required:e,isRoot:n,description:a},c?Object.entries(r).map(([u,d])=>{switch(d.type){case"object":let p=d.anyOf||d.oneOf||d.allOf;return p?Le.createElement(Nv,{key:u,name:u,description:d.description||d.title,type:d.anyOf?"anyOf":d.oneOff?"oneOf":"allOf",options:p}):Le.createElement(g9,{key:u,name:u,properties:d.properties,requiredProperties:d.required,isRequired:i.includes(u),description:d.description});case"array":return Le.createElement(h9,{key:u,name:u,items:d.items,isRequired:i.includes(u),description:d.description});default:return Le.createElement(y9,{key:u,name:u,type:d.type,isRequired:i.includes(u),description:d.description})}}):null)}function h9(t){let{name:o,isRequired:e=!1,isRoot:n=!1,items:r={},description:i=""}=t,[a,c]=Le.useState(!1);return Le.createElement(Bv,{name:o,type:`array[${r.type||""}]`,expandable:{expanded:a,setExpanded:c},description:i,required:e,isRoot:n},a?Le.createElement(Bk,{schema:r}):null)}var Av=M.ICON_S;function Nv(t){let{name:o,type:e,options:n=[],isRoot:r=!1,description:i="",isRequired:a=!1}=t,[c,l]=Le.useState(!1);return Le.createElement(Bv,{type:o?e:"",name:o||e,expandable:{expanded:c,setExpanded:l},description:i,isRoot:r,required:a,specialKeyword:!0},c?n.map((u,d)=>Le.createElement(Bk,{key:d,schema:u})):null)}function y9(t){let{name:o,type:e,isRequired:n=!1,isRoot:r=!1,description:i=""}=t;return Le.createElement(Bv,{name:o,type:e,isRoot:r,required:n,description:i})}function Bv(t){let{name:o,type:e,description:n,required:r,isRoot:i,expandable:a,specialKeyword:c,children:l}=t,[,u]=_(W),[,d]=_(v9),p=[u.Body,u.Bold,u.text],m=[g.Margin.xsmallLeft];return Le.createElement(S,{style:[b.directionColumn,i?null:g.Margin.mediumTop]},Le.createElement(S,{style:[b.directionRow,b.alignCenter]},Le.createElement(Ke,{onPress:a?()=>a.setExpanded(f=>!f):void 0},a?a.expanded?Le.createElement(v.ChevronDown,{size:Av,style:[u.textMuted]}):Le.createElement(v.ChevronRight,{size:Av,style:[u.textMuted]}):Le.createElement(S,{style:[d.placeholderIconWidth,d.placeHolderIconHeight]})),Le.createElement(S,{style:[b.directionRow,m]},o?Le.createElement(S,{style:[g.Margin.mediumRight]},c?Le.createElement(V,{style:p},o):Le.createElement(V,{selectable:!0,style:p},o,r?Le.createElement(V,{style:[u.danger,d.textFontCode]},"*"):null)):null,e?Le.createElement(V,{style:[u.Body,u.primary,d.textFontCode]},e):null)),Le.createElement(S,{style:[b.directionRow]},Le.createElement(S,{style:d.placeholderIconWidth},a!=null&&a.expanded?Le.createElement(S,{style:d.verticalLine}):null),Le.createElement(S,{style:[b.directionColumn,m,g.Padding.mediumRight,d.descriptionWidth]},n?Le.createElement(S,{style:[g.Margin.xsmallTop]},Le.createElement(Eu,{markdown:n,kind:"secondary"})):null,l)))}var v9=G.create({container:t=>({backgroundColor:t.colors.background.muted,padding:g.medium,borderRadius:t.radiuses.medium}),textFontCode:{fontFamily:Ig},placeholderIconWidth:{width:Av},placeHolderIconHeight:{height:Av},verticalLine:t=>({width:1,height:"100%",backgroundColor:t.colors.border.main,marginHorizontal:"auto"}),descriptionWidth:{maxWidth:600}});function qv(t){let{examples:o,schema:e}=t,[n,r]=Ds.useState("example");return Ds.createElement(S,null,Ds.createElement(oc,null,Ds.createElement(oc.Tab,{active:n==="example",onPress:()=>r("example")},"Example"),e?Ds.createElement(oc.Tab,{active:n==="schema",onPress:()=>r("schema")},"Schema"):null),n==="example"?Ds.createElement(m9,{examples:o||{}}):null,n==="schema"&&e?Ds.createElement(f9,{schema:e}):null)}function S9(t){let{response:o,isLast:e,beforeOrderIndex:n,afterOrderIndex:r,blockProps:i}=t,{node:a,editor:c}=i,[,l]=_(W),[u,d]=un.useState(!1),p={id:o.key,type:"swagger-response",blockKey:a.key,previewLabel:"Move response"},{status:m,description:f}=o.value,h="Response description",{code:y}=d9(m),w=a.fragments.get(o.key),C=w?is(w):!1,k=o.value.examples||{},I=o.value.schema,P=!t.readOnly||w&&!C||Object.keys(k).length>0||typeof I<"u",R=D=>{c.change(E=>{Te.setResponseDescription(E,a.key,o.key,D)})};return un.createElement(Ev,{...i,readOnly:t.readOnly,dragItem:p,isLast:e,opened:u,setOpened:d,palette:()=>Dv(D=>{c.change(E=>{Te.setResponseStatus(E,a.key,o.key,D)})},()=>{c.change(D=>{Te.removeResponse(D,a.key,o.key)})}),columns:[{content:un.createElement(S,{style:[b.directionRow,b.alignCenter]},un.createElement(S,{style:[g.Margin.smallRight]},un.createElement(v.Dot,{style:{color:Nk(y)},size:M.ICON_M})),un.createElement(S,{style:b.flex1},un.createElement(V,{style:[l.Label,l.Bold,l.text]},m))),desktopSize:b9.responseColumnStatusDesktop,mobileSize:b9.responseColumnStatusMobile},{content:un.createElement(Gr,{component:Ps,placeholder:t.readOnly?void 0:h,onChangeText:R,value:f,style:[l.Label,l.textMid],readOnly:t.readOnly,displayMode:"block",onSubmitEditing:()=>{c.change(D=>{u&&w?D.collapseToStartOf(w):kt(D,a),D.focus()})}}),desktopSize:b.flex1}],onDropAfter:D=>{c.change(E=>{Te.moveResponse(E,a.key,D.id,{before:o.value.orderIndex,after:r})})},onDropBefore:D=>{c.change(E=>{Te.moveResponse(E,a.key,D.id,{before:n,after:o.value.orderIndex})})},onInsertBefore:()=>{c.change(D=>{Te.addResponse(D,a.key,parseInt(o.value.status,10)-1,{before:n,after:o.value.orderIndex})})},onInsertAfter:()=>{c.change(D=>{Te.addResponse(D,a.key,parseInt(o.value.status,10)+1,{before:o.value.orderIndex,after:r})})}},P?un.createElement(S,{style:[b.flex1,g.Margin.mediumVertical]},w?un.createElement(un.Fragment,null,un.createElement(_r.Provider,{value:"swaggerResponse"},un.createElement(tr,{fragment:o.key}))):un.createElement(qv,{examples:k,schema:I})):null)}var b9=Q.create({responseColumnStatusDesktop:{width:290},responseColumnStatusMobile:{flexBasis:"100%",flexGrow:1,flexShrink:0}});s();var Um=x(O());H();function w9(t){let{readOnly:o,responses:e,blockProps:n}=t;return Um.createElement(Tv,{title:"Responses",button:o?null:Um.createElement(p9,{blockProps:n})},Um.createElement(S,{style:e.length>0&&g.Padding.mediumBottom},e.map((r,i)=>{let a=e[i-1],c=e[i+1];return Um.createElement(S9,{key:r.key,...t,response:r,isLast:i===e.length-1,beforeOrderIndex:a==null?void 0:a.value.orderIndex,afterOrderIndex:c==null?void 0:c.value.orderIndex})})))}s();var Wo=x(O());H();s();s();s();var C9=Wg("429837f8b383ed2c4f85d02026ce73e42335b6233c1dc303af2b0f50fedfe256",()=>import("https://app.gitbook.com/public/app/chunks/parseSwaggerFile.lazy-P4DBNXVW.min.js"));var x9=C9;var Nl=er({getValue:async t=>{let o=(await x9.load()).default;return await o(t)},toJS:t=>aee(t),fromJS:t=>see(t)});function jm(t,o){if(!t)return null;o||(o={path:Object.keys(t.paths)[0],method:"get"},o.method=Object.keys(t.paths[o.path])[0]);let e=t.paths[o.path],n=e==null?void 0:e[o.method];if(!n)return null;let r=Object.keys(t.paths).indexOf(o.path),i=Nu.indexOf(o.method);return i=i>-1?i:Nu.length,{operation:n,path:o.path,httpMethod:o.method,index:r*Nu.length+i}}function aee(t){return JSON.parse(JSON.stringify(t,IP()))}function see(t){return JSON.parse(JSON.stringify(t),_P())}function $m(t){let{onClose:o,data:e,multi:n,buttonText:r,onSelect:i,onRequestChangeSource:a}=t,c=Ce();if(!("ref"in e))throw new Error("SwaggerConfigurationOperation used with a manual API block, only OpenAPI is supported");let l=pt(),[u]=Ji.read([c,e.ref,l]);if(typeof(u==null?void 0:u.target)!="string")throw new Error("SwaggerConfigurationOperation only handles refs with target as string");let{result:d}=Nl.readSafe(u.target),p=(d==null?void 0:d.paths)||{},m=Object.keys(p).reduce((k,I)=>{let P=p[I];return k.concat(Object.keys(P).map(R=>({path:I,method:R})))},[]),f=jm(d,e.method&&e.path?{method:e.method,path:e.path}:void 0),[h,y]=Wo.default.useState(f?{[f.index]:{path:f.path,method:f.httpMethod}}:{}),w=()=>{let k=Object.keys(h).map(Number).sort((I,P)=>I-P);i(k.map(I=>h[I])),o()},C=(k,I,P)=>{if(!n){y({[I]:k});return}if(P&&y({...h,[I]:k}),!P){let R={...h};delete R[I],y(R)}};return Wo.default.createElement(ko,{onClose:o,title:"Choose API operation",footer:Wo.default.createElement(S,{style:[b.directionRow,b.justifySpaceBetween]},Wo.default.createElement(S,{style:[b.directionRow,b.justifyContentStart]},Wo.default.createElement(z,{size:"large",kind:"secondary",onPress:()=>{a()}},"Change API source")),Wo.default.createElement(S,{style:[b.directionRow,b.flex1,b.justifyContentEnd]},Wo.default.createElement(z,{size:"large",kind:"primary",onPress:()=>{w()}},typeof r=="string"?r:r(Object.keys(h).length))))},Wo.default.createElement(qf,{data:m,renderItem:({item:k})=>{let I=jm(d,k);if(!I)return null;let P=!!h[I.index];return Wo.default.createElement(cee,{key:I.index,index:I.index,item:k,operation:I.operation,multi:n,selected:P,onSelect:C})}}))}function cee(t){let{item:o,selected:e,onSelect:n,operation:r,index:i,multi:a}=t,[,c]=_(W);return Wo.default.createElement(ps,{style:g.Padding.smallHorizontal,onPress:()=>n(o,i,a?!e:!0),layout:"wide",title:Wo.default.createElement(S,{style:[b.directionRow,b.flex1,b.alignCenter]},Wo.default.createElement(S,{style:[{minWidth:M.L},g.Margin.smallRight]},Wo.default.createElement(jy,{readOnly:!0,method:o.method})),Wo.default.createElement(S,{style:[b.flex1]},Wo.default.createElement(V,{style:[c.Code,c.text,lee.apiPath]},o.path),Wo.default.createElement(V,{style:[c.Caption,c.textMuted]},r==null?void 0:r.summary))),buttons:[a?Wo.default.createElement(ec,{value:e,onValueChange:l=>n(o,i,l)}):Wo.default.createElement(Xg,{value:e,onValueChange:()=>n(o,i,!0)})]})}var lee=Q.create({apiPath:{fontSize:_g.xsmall,wordWrap:"anywhere"}});function k9(t,o){let e=Js(),[n,r]=wd.useState(null),i=_t(),[a,c]=wd.useState(o),l=Oi(e,t),u=p=>{let f=e.value.document.assertBlock(p).data.toFrozenObject();return[{key:"swagger",commands:[{key:"pickSource",title:"Choose OpenAPI source\u2026",icon:v.Paperclip,trigger:()=>{i.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([h])=>{h&&(c({ref:h}),r("swagger"))})}},a&&"ref"in a?{key:"pickMethod",title:"Choose API operation",icon:v.Swagger,trigger:()=>{r("swagger")}}:null,{key:"defaultExpanded",icon:v.ChevronsVertical,type:2,enabled:!!f.expanded,title:"Expanded",trigger:()=>(e.change(h=>{f.expanded?h.setDataByKey(p,["expanded"],!1):h.setDataByKey(p,["expanded"],!0)}),at(e,p,u(p)))}].filter(fe)},...l?[l]:[]]};return[at(e,t,u(t)),wd.createElement(Ot,null,n==="swagger"?wd.createElement($m,{data:a,buttonText:"Update Block",onRequestChangeSource:()=>{r(null),i.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([p])=>{p&&c({ref:p}),r("swagger")})},onSelect:([p])=>{e.change(m=>{m.setNodeByKey(t,{data:{...a,method:p==null?void 0:p.method,path:p==null?void 0:p.path}})})},onClose:()=>r(null)}):null)]}s();var Fv=x(O());s();var Zr=x(O());H();function Wv(t){let{opened:o,setOpened:e,readOnly:n,parameters:r,header:i,requestBody:a,responses:c,blockProps:l,description:u}=t,[,d]=_(W);return Zr.default.createElement(Zr.default.Fragment,null,Zr.default.createElement(O2,{blockProps:l,readOnly:n,opened:o,setOpened:e,description:u.description,...i}),Zr.default.createElement(S,{style:uee.operationBody},o?Zr.default.createElement(Zr.default.Fragment,null,Zr.default.createElement(i9,{blockProps:l,readOnly:n,...r}),a?Zr.default.createElement(S,{style:g.Margin.largeTop},Zr.default.createElement(S,null,Zr.default.createElement(V,{style:[d.Label,d.Bold,d.text]},"Body")),Zr.default.createElement(qv,{examples:a.examples,schema:a.schema})):null,Zr.default.createElement(w9,{blockProps:l,readOnly:n,...c})):null))}var uee=Q.create({operationBody:{padding:g.medium,paddingLeft:g.medium+M.ICON_M+g.medium,paddingTop:0}});function O9(t){let{blockProps:o,data:e,opened:n,setOpened:r}=t,{editor:i}=o;if("ref"in e)throw new Error("trying to render a swagger block that is refering to a swagger file");let{readOnly:a}=i,{baseUrl:c,method:l,path:u,summary:d}=e,{parameters:p={},responses:m={}}=e,f=Fv.default.useMemo(()=>Te.defaultParameterSortedKeys(p).map(w=>({key:w,value:p[w]})),[p]),h=Fv.default.useMemo(()=>Te.defaultResponseSortedKeys(m).map(w=>({key:w,value:m[w]})),[m]);return Fv.default.createElement(Wv,{blockProps:o,readOnly:a,opened:n,setOpened:r,header:{baseUrl:c,method:l,summary:d,path:u},parameters:{parameters:f},description:{description:{fragment:"description"}},responses:{responses:h}})}s();var Lc=x(O());function I9(t){var w;let{blockProps:o,data:e,opened:n,setOpened:r,readOnly:i}=t;if(!("ref"in e))throw new Error("trying to render a swagger block that is not refering to a swagger file");let c=ot(e.ref).href,{result:l,error:u}=Nl.readSafe(c),d=jm(l,e.path&&e.method?{path:e.path,method:e.method}:void 0),{operation:p,path:m,httpMethod:f}=d||{operation:{parameters:[],responses:[],summary:"",description:""},httpMethod:"",path:""},h=Lc.default.useMemo(()=>p.parameters.sort(({in:C},{in:k})=>Te.SORTED_PARAMETERS_LOCATIONS.indexOf(C)<Te.SORTED_PARAMETERS_LOCATIONS.indexOf(k)?-1:1).reduce((C,k,I)=>{let P=C[I-1],R=jS(P?{before:P.value.orderIndex}:{});return C.push({key:GS(),value:{...k,orderIndex:R}}),C},[]),[p.parameters]),y=Lc.default.useMemo(()=>p.responses.sort(({status:C},{status:k})=>C<k?-1:1).reduce((C,k,I)=>{let P=C[I-1],R=jS(P?{before:P.value.orderIndex}:{});return C.push({key:GS(),value:{...k,status:Ak({code:k.status}),orderIndex:R}}),C},[]),[p.responses]);if(u)return i?Lc.default.createElement(Ym,null):Lc.default.createElement(bi,{kind:"danger",title:"Error while parsing the OpenAPI file.",details:ga(u)});if(!d){if(i)return Lc.default.createElement(Ym,null);let C=e.method&&e.path?`${(w=e.method)==null?void 0:w.toUpperCase()} "${e.path}"`:"";return Lc.default.createElement(bi,{kind:"danger",title:"Error while parsing the OpenAPI file.",details:`Could not find the operation ${C} in the OpenAPI file.`})}return Lc.default.createElement(Wv,{blockProps:o,readOnly:!0,opened:n,setOpened:r,header:{baseUrl:(l==null?void 0:l.baseUrl)||"",method:f,summary:p.summary||"",path:m},parameters:{parameters:h},requestBody:p.requestBody,responses:{responses:y},description:{description:p.description?{text:p.description}:void 0}})}function _9(t){let{node:o,isFocused:e,editor:n}=t,r=o.data.toFrozenObject(),[i,a]=k9(o.key,r),[c,l]=_(dee),{sections:u}=Rr.default.useContext(Ci),{current:d}=Tg(),p=u.get(o.key),m=tt(),[f,h]=Rr.default.useState(m||e||!!r.expanded);Rr.default.useEffect(()=>{d&&r.expanded&&h(!0)},[r.expanded]);let y=Rr.default.createElement(Sr,{style:[l.blockSwagger,f&&l.blockSwaggerOpened],backgroundColor:c.colors.background.main,nativeID:p},Rr.default.createElement(Rr.default.Suspense,{fallback:Rr.default.createElement(Ao,{size:"small"})},"ref"in r?Rr.default.createElement(I9,{readOnly:n==null?void 0:n.readOnly,blockProps:t,data:r,opened:f,setOpened:h}):Rr.default.createElement(O9,{blockProps:t,data:r,opened:f,setOpened:h})));return Rr.default.createElement(Rr.default.Fragment,null,a,Rr.default.createElement(be,{palette:i,...t},!("ref"in r)&&f?y:Rr.default.createElement(Bt,{...t},y)))}var dee=G.create({blockSwagger:t=>({borderRadius:t.radiuses.large,borderColor:t.colors.border.mid,borderWidth:1}),blockSwaggerOpened:t=>({...t.shadows.spread})});s();var R9=x(O());var pee=Dt({key:"lastSwaggerReference",default:{}});function P9(t){let[o,e]=Xn(pee),n=pt(),r=Ce(),i=n.space?zr(r.store.getBranchRevision(n.space,"changeRequest"in n&&n.changeRequest?mg(n.changeRequest):dg)):void 0,a=i?o[i.contentId]:null,c=R9.default.useCallback(d=>{i&&e({...o,[i.contentId]:d})},[i==null?void 0:i.contentId,e]);if((a==null?void 0:a.kind)==="url")return[a,c];if((a==null?void 0:a.kind)==="file"&&i!=null&&i.files[a.file])return[a,c];let l=Te.getProbableRef(t.value.document);if(l)return[l,c];let u=Object.values((i==null?void 0:i.files)||{}).filter(d=>Cu(d)).sort((d,p)=>{var h,y;let m=(h=vp(d.edits))==null?void 0:h.updatedAt;return(((y=vp(p.edits))==null?void 0:y.updatedAt)||0)-(m||0)});return[u.length?{kind:"file",file:u[0].id}:null,c]}s();var z9=x(O());s();s();var B9=x(T9()),Fo=x(O());H();s();var Er=x(O());s();var Zm=x(O());H();function D9(t){return ce({search:"Pick a color\u2026",groups:[{key:"text",title:"Color",commands:Py.map(o=>M9(t,o,!1))},{key:"background",title:"Background",commands:Ey.map(o=>M9(t,o,!0))}]})}function M9(t,o,e){let n=t.value.activeMarks.find(a=>a.type===mp),r=e?"background":"text",i=n&&n.data.get(r)===o.key;return{key:`${e?"background_":"foreground_"}${o.key}`,title:o.title,type:1,selected:!!i,icon:({size:a})=>e?Zm.createElement(L9,{size:a,backgroundColor:o.color,color:Y.BLACK}):Zm.createElement(L9,{size:a,backgroundColor:Y.WHITE,color:o.color}),trigger:()=>{t.change(a=>{n&&a.removeMark(n),i||a.addMark({type:mp,data:{background:"default",text:"default",...n?n.data.toObject():{},[r]:o.key}})})}}}function L9(t){let{size:o=M.ICON_S,color:e,backgroundColor:n}=t;return Zm.createElement(S,{style:[b.directionRow,b.alignCenter,b.justifyContentCenter,{width:o+2,height:o+2,borderRadius:M.RADIUS_M,backgroundColor:n}]},Zm.createElement(v.Type,{style:{color:e,fontSize:o*.9}}))}s();var Pr=({type:t,editor:o})=>()=>{o.change(e=>{e.toggleMark(t),e.focus()})},Al=({palette:t,editor:o,contentReferenceContext:e,isInLink:n,hiveClient:r,insertAtRange:i})=>()=>{if(n){o.change(c=>{c.unwrapInline({type:bn}).focus()});return}o.change(c=>{Gv(c)});let a=Pn(c=>{o.change(l=>{i?ul.insertContentReferenceAtRange(l,c,i):ul.insertContentReference(l,c)})},{...e,document:o.value.document},r);return t.open(a),a},Vv=({editor:t})=>()=>{t.change(o=>{ig.wrapWithAnnotation(o),o.focus()})};function N9(t){let{value:o,editor:e,palette:n}=t,r=Ce(),i=pt(),a=o.activeMarks.map(h=>h.type),{startBlock:c,document:l}=o;ze(c);let u=o.hasInline(bn),p=!(c.type===ya),m=()=>{e.change(h=>{Gv(h)}),n.open(D9(e))},f=()=>{e.change(h=>{h.removeAllMarks().focus()})};return Er.createElement(l7,{onTabToExit:()=>{e.change(h=>{h.focus()})}},p?Er.createElement(Im,null,ng(c)?null:Er.createElement(io,{leadingIcon:v.Bold.CSS,active:a.has(Yn),onPress:Pr({type:Yn,editor:e}),tooltipTitle:"*Bold*",tooltipBadge:Oa(Ue.EDITOR_BOLD),label:"Bold",iconOnly:!0,preventFocusOnPress:!0}),Er.createElement(io,{leadingIcon:v.Italic.CSS,active:a.has(Zn),onPress:Pr({type:Zn,editor:e}),tooltipTitle:"_Italic_",tooltipBadge:Oa(Ue.EDITOR_ITALIC),label:"Italic",iconOnly:!0,preventFocusOnPress:!0}),Er.createElement(io,{leadingIcon:v.Strikethrough.CSS,active:a.has(Fr),onPress:Pr({type:Fr,editor:e}),tooltipTitle:"~~Strikethrough~~",tooltipBadge:Oa(Ue.EDITOR_STRIKETHROUGH),label:"Strikethrough",iconOnly:!0,preventFocusOnPress:!0}),Er.createElement(io,{leadingIcon:v.Code.CSS,active:a.has(bo),onPress:Pr({type:bo,editor:e}),tooltipTitle:"`Code`",tooltipBadge:Oa(Ue.EDITOR_CODE),label:"Code",iconOnly:!0,preventFocusOnPress:!0})):null,Er.createElement(Im,null,as({document:l,block:c},bn)?Er.createElement(io,{leadingIcon:v.Link.CSS,onPress:Al({palette:n,editor:e,contentReferenceContext:i,isInLink:u,hiveClient:r}),active:u,tooltipTitle:"Link",tooltipBadge:Oa(Ue.EDITOR_LINK),label:"Link",iconOnly:!0,preventFocusOnPress:!0}):null,as({document:l,block:c},Jf)&&ig.isSelectionAnnotable(o)?Er.createElement(io,{leadingIcon:v.Annotation.CSS,onPress:Vv({editor:e}),active:u,tooltipTitle:"Annotate",tooltipBadge:Oa(Ue.EDITOR_ANNOTATION),label:"Annotate",iconOnly:!0,preventFocusOnPress:!0}):null),p?Er.createElement(Im,null,Er.createElement(io,{tooltipTitle:"Color",leadingIcon:v.Highlight.CSS,onPress:m,label:"Color",iconOnly:!0,preventFocusOnPress:!0})):null,Er.createElement(Im,{disabled:a.isEmpty()},Er.createElement(io,{leadingIcon:v.PublishStatusUnpublished.CSS,onPress:f,tooltipTitle:"Clear formatting",label:"Clear formatting",iconOnly:!0,preventFocusOnPress:!0})))}function q9(t){let{value:o,selection:e}=t,n=Js(),r=Ce(),i=pt(),[a,c]=Fo.useState(null),[l,u]=Fo.useState(!1),d=Fo.useRef(null),p=wo(a),m=Fo.useRef(null),f=Fo.useRef(null),h=de(d,{onClose:()=>{n.change(q=>{F9(q),q.focus()})}}),{width:y,height:w}=iI(),C=K.useInteractiveState(),k=!o.isInVoid,I=o.hasInline(bn),P=!ng(o.startBlock),R=!!k,D=R&&a,E=l&&e.isFocused&&e.isExpanded;Hr(k?{...P?{[Ue.EDITOR_BOLD]:Pr({type:Yn,editor:n})}:{},[Ue.EDITOR_ITALIC]:Pr({type:Zn,editor:n}),[Ue.EDITOR_CODE]:Pr({type:bo,editor:n}),[Ue.EDITOR_STRIKETHROUGH]:Pr({type:Fr,editor:n}),[Ue.EDITOR_LINK]:Al({palette:h,editor:n,contentReferenceContext:i,hiveClient:r,isInLink:I}),[Ue.EDITOR_ANNOTATION]:Vv({editor:n})}:{},"editor-selection-expanded",[e,i,P,n,I,k,h]),Hr(k?{...P?{[Ue.EDITOR_BOLD]:Pr({type:Yn,editor:n})}:{},[Ue.EDITOR_ITALIC]:Pr({type:Zn,editor:n}),[Ue.EDITOR_CODE]:Pr({type:bo,editor:n}),[Ue.EDITOR_STRIKETHROUGH]:Pr({type:Fr,editor:n})}:{},"editor-selection-collapsed",[e,P,n,k]),Fo.useEffect(()=>{!R||h.opened||(m.current=e,c(A9(n)))},[e]);let T=iR(200);return Fo.useEffect(()=>{if(!R)return;let q=()=>{h.opened||(p.current&&c(null),T(()=>{c(A9(n))}))};return window.addEventListener("scroll",q,!0),()=>{window.removeEventListener("scroll",q,!0)}},[h,R,p,T]),Fo.useLayoutEffect(()=>{var q;(q=f.current)==null||q.updatePosition()},[y,w]),Fo.useLayoutEffect(()=>{let q=setTimeout(()=>{u(e.isExpanded)},200);return()=>{u(!1),clearTimeout(q)}},[e.isExpanded]),D?Fo.createElement(br,null,Fo.createElement(S,{ref:d,pointerEvents:"none",style:[mee.formattingMenuWrapper,a],dataSet:{"hide-on-drag":!0}},E?Fo.createElement(xn,{ref:f,kind:"menu",preferredPlacement:"top",chromeless:!0},Fo.createElement(S,{style:[b.directionRow,g.Padding.xsmall],...C.events},Fo.createElement(N9,{value:o,editor:n,palette:h}))):null)):null}function A9(t){let o=window.getSelection();if(!o||o.rangeCount<1)return null;let e=o.getRangeAt(0),n=B9.default.getBoundingClientRect(e);if(!n)return null;let r=o.anchorNode;if(!r||!NR(t,r))return null;let i=r?W9(r):null,a=15,c={top:n.top+window.pageYOffset,left:n.left+window.scrollX,width:n.width,height:n.height};if(c.width<a&&(c.left-=(a-c.width)/2,c.width=a),i){let l=i.getBoundingClientRect();if(c.top<l.top||c.top+c.height>l.bottom)return null}return c}function W9(t){if(t instanceof HTMLElement){let o=getComputedStyle(t,null);if(o.getPropertyValue("overflow")==="auto"||o.getPropertyValue("overflow")==="scroll"||o.getPropertyValue("overflow-y")==="auto"||o.getPropertyValue("overflow-y")==="scroll")return t}return t.parentNode?W9(t.parentNode):null}var mee=Q.create({formattingMenuWrapper:{position:"absolute",zIndex:100,animationDelay:"250ms"}});function Hv(t){let{anchorRef:o,editor:e,range:n}=t,r=Ce(),i=_t(),a=pt(),c=de(o,{onClose:()=>{c.close(),!i.isOpen()&&e.change(l=>l.focus())}});return z9.default.useMemo(()=>[{key:"inline-image",title:"Inline image",icon:v.Image,trigger:()=>{e.change(l=>l.blur()),i.prompt({title:"Select image",accept:"images",acceptURL:!0}).then(l=>{e.change(u=>{if(Mo(u.value.selection))return u;let d=n!=null?n:u.value.textSelection;l.forEach(p=>{u.insertInlineAtRange(d,Do.createImageInline(p))}),u.focus()})})}},{key:"emoji",title:"Emoji",icon:v.EmojiReaction,trigger:()=>ad(l=>{e.change(u=>{if(Mo(u.value.selection))return u;let d=n!=null?n:u.value.textSelection;u.insertInlineAtRange(d,sg.createEmoji(l)).focus()})})},{key:"link",title:"Link",icon:v.Link,trigger:Al({hiveClient:r,palette:c,editor:e,contentReferenceContext:a,isInLink:!1,insertAtRange:n})},{key:"inline-math",title:"Math & TeX",icon:v.MathTeX,trigger:()=>{e.change(l=>{if(Mo(l.value.selection))return l;let u=n!=null?n:l.value.textSelection;l.insertInlineAtRange(u,dl.createMathInline()).focus()})}}],[n,e,e.value.selection,c,a,i,r])}function V9(t,o,e,n="replace",r){let[i,a]=En.useState(null),c=_t(),l=Lu(),{integrationsBlocksSubscription:u,logAnalyticsEvent:d}=En.useContext(Ge),p=u.getCurrentValue,m=fi(),[f,h]=P9(t),y=pt(),w=Ce(),C=Hv({anchorRef:r,editor:t}),k=En.useCallback(()=>{a(null)},[]),I=En.useCallback((E,T="end")=>{k(),Cd(t,e.key,E,n,T)},[k,t,e.key,n]),P=En.useCallback((E,T="end")=>{k();let q;E.forEach((F,U)=>{Cd(t,q||e.key,F,U===0?n:"after",T),q=F.key})},[k,t,o.key,e.key,n]),R=En.useCallback(E=>{let{blockType:T,...q}=E;d({type:"edit_page_document_insert_block",from:"palette",blockType:T,...q})},[d]),D=En.useMemo(()=>{let E=(T,q=()=>!0)=>Object.entries(T).map(([F,U])=>q(F)?U.map($=>({key:`${F}.${$.id}`,title:$.title,icon:Ct(C2,{block:$}),trigger:()=>{$.urlUnfurl&&$.urlUnfurl.length>0?a("embed"):(I(yu.createIntegrationBlock(F,$.id)),R({blockType:di,integration:F,integrationBlock:$.id}))}})):[]).flat();return ce({search:"Insert block\u2026",groups:[{key:"inline-controls",commands:n==="replace"&&e.isEmpty?C:[]},{key:"texts",commands:[De(o,ge)?{key:"paragraph",title:"Paragraph",icon:v.Paragraph,trigger:()=>{I(Xt.create({type:ge})),R({blockType:ge})}}:null].filter(fe)},{key:"headings",commands:[De(o,Ve)?{key:"heading_1",title:"Heading 1",icon:v.Heading1,keywords:["h1","Title 1","Header 1"],trigger:()=>{I(Xt.create({type:Ve})),R({blockType:Ve})}}:null,De(o,Xe)?{key:"heading_2",title:"Heading 2",icon:v.Heading2,keywords:["h2","Title 2","Header 2"],trigger:()=>{I(Xt.create({type:Xe})),R({blockType:Xe})}}:null,De(o,rt)?{key:"heading_3",title:"Heading 3",keywords:["h3","Title 3","Header 3"],icon:v.Heading3,trigger:()=>{I(Xt.create({type:rt})),R({blockType:rt})}}:null].filter(fe)},{key:"lists",commands:[De(o,yo)?{key:"list_ul",title:"Unordered list",keywords:["ul","Bullet list","Dot list"],icon:v.ListUnordered,trigger:()=>{I(ft.createList(yo)),R({blockType:yo})}}:null,De(o,Ut)?{key:"list_ol",title:"Ordered list",keywords:["ol","Numbered List"],icon:v.ListOrdered,trigger:()=>{I(ft.createList(Ut)),R({blockType:Ut})}}:null,De(o,vo)?{key:"list_tasks",title:"Task list",keywords:["Checkbox","Checklist","Tick","Todo list"],icon:v.ListTasks,trigger:()=>{I(ft.createList(vo)),R({blockType:vo})}}:null].filter(fe)},{key:"dividers",commands:[De(o,ts)?{key:"divider",title:"Divider",keywords:["Horizontal rule","Separator","Thematic break","hr"],icon:v.Divider,trigger:()=>{I(Xt.create({type:ts})),R({blockType:ts})}}:null].filter(fe)},{key:"panels",commands:[De(o,ho)?{key:"hint",title:"Hint",keywords:["Info","Alert","Callout"],icon:v.InfoCircle,trigger:()=>{I(YI.create()),R({blockType:ho})}}:null,De(o,jt)?{key:"quote",title:"Quote",keywords:["Blockquote","Citation"],icon:v.Quote,trigger:()=>{I(ZI.create()),R({blockType:jt})}}:null,De(o,Un)?{key:"code",title:"Code Block",keywords:["Syntax","Snippet"],icon:v.Code,trigger:()=>{I(no.createCodeBlock("// Some code")),R({blockType:Un})}}:null].filter(fe)},{key:"others",commands:[De(o,es)?{key:"files",title:"Insert files\u2026",keywords:["Assets","Upload"],icon:v.Files,trigger:()=>{c.prompt({title:"Select files"}).then(T=>{let q=T.map(F=>F.kind==="file"?cg.createFileBlock(F):null).filter(fe);P(q,"end"),R({blockType:es,files:q.length})})}}:null,De(o,jn)?{key:"images",title:"Insert images\u2026",keywords:["Photo","Picture","JPEG","jpg","png","GIF"],icon:v.Image,trigger:()=>{c.prompt({title:"Select images",accept:"images",acceptURL:!0}).then(T=>{I(Xt.create({type:jn,isVoid:!0,nodes:T.map(q=>Do.createImageBlock(q))})),R({blockType:jn,images:T.length})})}}:null,De(o,vn)?{key:"embed",title:"Embed a url\u2026",keywords:["music","video","audio","design","iframe"],icon:v.ExternalLink,trigger:()=>{a("embed")}}:null,De(o,yr)?{key:"table",title:"Table",keywords:["Spreadsheet"],icon:v.Table,trigger:()=>{I(re.createTable()),R({blockType:yr,tableView:"grid"})}}:null,De(o,yr)?{key:"table-cards",title:"Cards",keywords:["Grid"],icon:v.Cards,trigger:()=>{I(re.createTable({view:"cards"})),R({blockType:yr,tableView:"cards"})}}:null,De(o,$n)?{key:"tabs",title:"Tabs",icon:v.Tabs,trigger:()=>{I(Fi.createTabs(),"start"),R({blockType:$n})}}:null,De(o,Wr)?{key:"expandable",title:"Expandable",keywords:["collapsible","toggle"],icon:v.BlockExpandable,trigger:()=>{I(ss.createExpandableBlock(),(T,q)=>{T.collapseToStartOf(ss.getTitleFragment(q)).focus()}),R({blockType:Wr})}}:null,De(o,Ja)?{key:"drawing",title:"Drawing",keywords:["sketch","draw","excalidraw"],icon:v.EditDrawing,trigger:()=>{I(jI.createDrawingBlock()),R({blockType:Ja})}}:null,De(o,cl)?{key:"math",title:"Math & TeX",keywords:["Formula"],icon:v.MathTeX,trigger:()=>{I(dl.createMathBlock()),R({blockType:cl})}}:null,De(o,Lo)?{key:"api-method",title:"API Method",icon:v.Swagger,keywords:["api"],trigger:()=>{I(Te.createBlock()),R({blockType:Lo})}}:null,De(o,Lo)?{key:"swagger",title:"OpenAPI",icon:v.Swagger,keywords:["api","swagger"],trigger:()=>{f?a({ref:f}):c.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([T])=>{T&&(h(T),a({ref:T}))})}}:null,De(o,ns)?{key:"content-ref",title:"Page Link",icon:v.PageLink,keywords:["references"],trigger:()=>Pn(T=>{I(ul.createContentRefBlock(T)),R({blockType:ns,contentRefKind:T.kind})},y,w,{accept:["page","space","collection"]})}:null].filter(fe)},De(o,di)?{key:"integrations",commands:()=>{let T=p();return E(T)}}:null,De(o,di)?{key:"integrations",commands:()=>{let T=p(),[q]=th([A_()]),F=Sg(q);return E(F,U=>!T[U])}}:null,De(o,vn)?{key:"embeds",commands:p2.map(T=>({key:T.key,title:T.title,icon:({size:q})=>En.createElement(Qo,{source:{uri:(m.color==="dark"?T.iconDark:null)||T.icon},style:{width:q,height:q}}),trigger:()=>{a("embed")}}))}:null].filter(fe)})},[I,l.uid,y,t,m.color,p]);return[En.createElement(Ot,null,i==="embed"?En.createElement(m2,{onInsert:I,onClose:k}):i&&"ref"in i?En.createElement($m,{onClose:k,data:i,multi:!0,buttonText:E=>`Insert ${E} blocks`,onRequestChangeSource:()=>{a(null),c.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([E])=>{E&&a({ref:E})})},onSelect:E=>{R({blockType:Lo,swaggerOperations:E.map.length,swaggerSource:i.ref.kind}),P(E.map(T=>Te.createBlockWithRef(i.ref,T.path,T.method))),k()}}):null),D]}function Cd(t,o,e,n,r){t.change(i=>{let a=t.value.document.getParent(o);if(!a)return;let c=a.getChildIndex(o);if(c<0)return;if(n==="replace")e.object==="block"?i.replaceNodeByKey(o,e):i.replaceWithDocumentByKey(o,e);else{let u=n==="after"?c+1:c;e.object==="block"?i.insertNodeByKey(a.key,u,e):i.insertDocumentByKey(a.key,u,e)}let l=i.value.document.getNode(e.object==="block"?e.key:e.nodes.first().key);l&&(Kt(i.value.selection)?r==="start"?i.collapseToStartOf(l).focus():r==="end"?i.collapseToEndOf(l).focus():r(i,l):i.selectBlock(up.create({anchorBlock:l.key,focusBlock:l.key})))})}var Kv={insert:{label:"Insert block",title:`Click to add below
${Oa("alt")} + click to add above`},options:{label:"Block controls",title:`Click for options. ${Oa(Ue.EDITOR_MODIFIER_PALETTE)}
Drag to move.`}};function G9(t){let{optionsPalette:o,node:e,editor:n,parent:r,layout:i,dragHandleRef:a,isDragging:c,isFocused:l,isHovered:u}=t,d=pR(),p=zo.useRef(!1),[m,f]=zo.useState("replace"),h=zo.useRef(null),y=de(h),[w,C]=V9(n,r,e,m,h),k=zo.useRef(null),I=de(k,{onClose:()=>{n.change(oe=>{oe.focus()})}}),P=()=>{p.current=!!d.current,e.isEmpty&&p.current?y.open(C):I.open((typeof o=="function"?o():o)||at(n,e.key)),n.change(oe=>{e&&Kt(oe.value.selection)&&!oe.value.selection.hasEdgeIn(e)&&oe.collapseToStartOf(e),oe.blur()})},R=hi(k,a);Hr(l?{...e.isEmpty?{[Ue.EDITOR_PALETTE]:P}:{},[Ue.EDITOR_MODIFIER_PALETTE]:()=>i.withOptionsButton?I.open((typeof o=="function"?o():o)||at(n,e.key)):!1}:{},"editor-selection-collapsed",[l,I,o,n,e.isEmpty,e.key]);let D=u||I.opened||y.opened,[E,T]=zo.useState(!1),q=zo.useRef(null),F=i.withInsertButton,U=F?["fade","slide"]:["fade"],$=dw(N.animations,["distance-s","enter","right",...U],D),X=dw(N.animations,["distance-s","exit","right",...U],E&&!D);return zo.useEffect(()=>{var Ee,me;function oe(We){T(We.animationName.includes("Enter"))}function we(){T(!1)}return F&&((Ee=q.current)==null||Ee.addEventListener("animationend",oe),(me=q.current)==null||me.addEventListener("animationcancel",we)),()=>{var We,mt;(We=q.current)==null||We.removeEventListener("animationcancel",we),(mt=q.current)==null||mt.removeEventListener("animationend",oe)}},[F]),zo.createElement(te,{contentEditable:!1,style:[lk.hitArea],inlineStyle:i.hitArea.inlineStyle},w,zo.createElement(te,{ref:q,style:[lk.buttonWrapper,$,X,F?N.flex.justifyContentEnd:N.flex.justifyContentStart],inlineStyle:i.position},i.withInsertButton?zo.createElement(zo.Fragment,null,zo.createElement(io,{contentEditable:!1,kind:"muted",iconOnly:!0,leadingIcon:v.Plus.CSS,label:Kv.insert.label,preventFocusOnPress:!0,tooltipTitle:Kv.insert.title,onPressStart:oe=>f(oe.altKey?"before":"after"),onPress:oe=>{y.open(C)},onPressEnd:()=>f("replace"),size:i.size,style:pw,ref:h})):zo.createElement(te,{ref:h,id:"palette-ref--"}),i.withOptionsButton?zo.createElement(io,{contentEditable:!1,kind:"muted",ref:R,size:i.size,iconOnly:!0,label:Kv.options.label,leadingIcon:v.GrabberVertical.CSS,tooltipTitle:Kv.options.title,preventFocusOnPress:!0,tooltipDisabled:c,onPress:()=>P(),style:pw}):null))}s();var nt=x(O());H();s();var xd=x(O());H();s();H();var Bl={added:Y.green.base,deleted:Y.scarlet.base,modified:Y.primary.base},Xv=Q.create({added:{color:Bl.added},deleted:{color:Bl.deleted},modified:{color:Bl.modified}});function Uv(t){let{diff:o,style:e,size:n,highlighted:r}=t,[,i]=_(fee),a=K.useInteractiveState(),c=o.type==="added"?v.DiffAdded:o.type==="deleted"?v.DiffRemoved:v.DiffModified;return xd.createElement(he,{editable:!1,style:[e,Qm.avoidCalculatingBounds],...a.events,"data-hide-on-drag":!0},xd.createElement(vi,{tooltip:`This block has been ${o.type} in this change request`,preferredPlacement:"top"},(l,u)=>xd.createElement(K.TouchableOpacity,{ref:u,style:[Qm.diffContainer,r||a.hovered?Qm.diffContainerHighlighted:null],...l.events},xd.createElement(c,{style:[Qm.diffIcon,Xv[o.type]],size:n}),xd.createElement(he,{style:[Qm.diffLine,i.bodyColor]}))))}var Qm=Q.create({diffContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",opacity:.5,userSelect:"none"},diffContainerHighlighted:{opacity:1},diffIcon:{flexShrink:0},diffLine:{width:1,flexGrow:1,flexShrink:1,marginTop:g.xsmall},avoidCalculatingBounds:{width:0,overflow:"visible"}}),fee=G.create({bodyColor:(t,o)=>({backgroundColor:o.color==="dark"?Y.darkModeText.xdark:Y.lightModeText.xlight})});s();var H9=x(O());s();var jv=JSON.parse('{"halo":"halo_oiCij","ready":"ready_81z1f","show":"show_byjur"}');function qk(t){let{isSelected:o=!1,isBlockSelection:e=!1}=t;return H9.default.createElement(te,{style:[jv.halo,{[jv.ready]:e,[jv.show]:o}],as:"span",contentEditable:!1})}qk.displayName="BlockSelectionHalo";s();var Wk=4,Fk=g.medium,zk=4,Vk=g.xlarge+g.small,Gk=g.large,gee=-96,K9=gee+g.large,$v=K9+g.small,Jm={[jt]:-(Fk+Wk/2),[ho]:-(Vk+zk/2),[hr]:-Gk},Hk={[jt]:Jm[jt],[ho]:Jm[ho],[hr]:Jm[hr]},Kk=M.ICON_XS,ql=K9,X9=g.large+4,U9=g.large+8,j9=g.large+8,$9=28,Y9=32,Z9=34,Wl=g.small;s();var o8=x(O());H();s();s();var kd=g.medium;function hee(t,o){return o.nodes.find(e=>e.type===fu&&e.nodes.some(n=>n.key===t.key))||t}function Ii(t,o,e){let n=o.getChildIndex(e?hee(t,o).key:t.key),r=n===0,i=n===o.nodes.size-1,a=(()=>{switch(o.type){case ho:return{paddingTop:r?g.medium:g.xsmall,paddingBottom:i?g.medium:g.xsmall};case jt:return{paddingTop:g.xsmall,paddingBottom:g.xsmall};case Zo:{if(!rs.includes(t==null?void 0:t.type))return{paddingTop:0,paddingBottom:0};let l={paddingTop:g.small,paddingBottom:g.small};return r&&(l.paddingTop=0),i&&(l.paddingBottom=0),l}case os:return{paddingTop:g.medium,paddingBottom:g.medium}}return{}})();return{...(()=>{switch(t.type){case Ve:return{paddingTop:g.large,paddingBottom:g.small};case Xe:return{paddingTop:g.large,paddingBottom:g.small};case rt:return{paddingTop:g.large,paddingBottom:g.small};case ge:return{paddingTop:g.small,paddingBottom:g.small};case Ut:case yo:case vo:return{paddingTop:g.medium,paddingBottom:g.medium};case ho:return{paddingTop:g.medium,paddingBottom:g.medium};case Un:return{paddingTop:g.medium,paddingBottom:g.medium};case Zo:return{paddingTop:r?0:g.xsmall,paddingBottom:i?0:g.xsmall};default:return{paddingTop:kd,paddingBottom:kd}}})(),...a}}s();var Q9=x(Yf());H();var Dc=100,Yv=40,ef=800;function Zv(t,o,e=!1){if(!t.useNewSizing)return yee(t,o,e);let n=new Map,r=0;t.columns.forEach(d=>{var p;r+=((p=t.columnWidths)==null?void 0:p[d])||0});let i=Math.max(o-r,0),a=t.columns.length-Object.keys(t.columnWidths||{}).length,c=a===0?0:Math.floor(i/a),l=a===0?0:i-c*a,u=0;return t.columns.forEach(d=>{var y,w;let p=typeof((y=t.columnWidths)==null?void 0:y[d])>"u",m=((w=t.columnWidths)==null?void 0:w[d])||0,f=p?c:m;d===t.columns[t.columns.length-1]&&(f+=l),f=(0,Q9.default)(f,p?Dc:Yv,ef),u+=f;let h=new rn.Value(0);h.setOffset(f),n.set(d,{controller:h,animated:rn.diffClamp(h,e?0:p?Dc:Yv,ef),width:f})}),{widths:n,totalWidth:u}}function yee(t,o,e=!1){let i=new Map,a=0;t.columns.forEach(l=>{var d;let u=((d=t.columnWidths)==null?void 0:d[l])||200;a+=u,i.set(l,u)});let c=1;return(a<o||e)&&(c=o/a,a=o),i.forEach((l,u)=>{let d=new rn.Value(0);d.setOffset(l*c),i.set(u,{controller:d,animated:rn.diffClamp(d,e?0:150,ef),width:l*c})}),{widths:i,totalWidth:a}}function Fl(t,o,e){let{blockSpacing:n={paddingTop:0,paddingBottom:0},contentSize:r=750}=e||{};if((t==null?void 0:t.object)!=="block")throw new Error(`invalid node passed to "getBlockEstimatedHeight" ${t.object}#${t.type} with parent ${t.object}#${o?o.type:"no-parent"}`);switch(t.type){case yr:return n.paddingTop+n.paddingBottom+bee(t,r);case $n:return n.paddingTop+n.paddingBottom+Fl(t.nodes.first(),t);case ge:case Xe:case rt:case Ve:{let a=n.paddingTop+n.paddingBottom+tf(t.text,{lineHeight:sr(t),fontSize:Qv(t),contentWidth:r});return t.type===Ve&&o.object==="document"&&o.getChildIndex(t.key)!==0?a+g.medium+g.large+1:a}case ya:return tf(t.text,{lineHeight:sr(t),fontSize:Qv(t),contentWidth:r});case jn:case vn:case qi:case Lo:case Ja:case di:return n.paddingTop+n.paddingBottom+200;case cl:case es:case ns:return n.paddingTop+n.paddingBottom+100;case Wr:return n.paddingTop+n.paddingBottom+sr(t);case ts:return n.paddingTop+n.paddingBottom+1;default:let i=vee(t,r);return n.paddingTop+n.paddingBottom+t.nodes.reduce((a,c)=>{let l=Ii(c,t),u=c.object==="block"?Fl(c,t,{contentSize:i}):tf(c.text,{contentWidth:i});return a+u+l.paddingTop+l.paddingBottom},0)}}function vee(t,o){switch(t.type){case jt:return o-Fk-Wk;case ho:return o-Vk-zk;default:return o}}function sr(t){if(!t)return Ze.Body.lineHeight;switch(t.type){case Zo:return sr(t.nodes.first());case Ve:return Ze.Heading1.lineHeight;case Xe:return Ze.Heading2.lineHeight;case rt:return Ze.Heading3.lineHeight;case Un:return Ze.Code.lineHeight+2*g.small;case ya:return Ze.Code.lineHeight;case $n:return Ze.Label.lineHeight+2*g.small;case yr:return Ze.Label.lineHeight+2*g.small;case Wr:return g.medium*2+Ze.Heading3.lineHeight;case ts:return 1;case ge:default:return Ze.Body.lineHeight}}function Qv(t){if(!t)return Ze.Body.fontSize;switch(t.type){case Zo:return sr(t.nodes.first());case Ve:return Ze.Heading1.fontSize;case Xe:return Ze.Heading2.fontSize;case rt:return Ze.Heading3.fontSize;case ya:return Ze.Code.fontSize;case ge:default:return Ze.Body.fontSize}}function bee(t,o){let e=re.getTableData(t);switch(e.view.type){case"grid":{let{widths:n}=Zv(e.view,o,!1),r=wee(e,n),i=Object.keys(e.records).reduce((a,c,l)=>{let u=Xk(t,c,n);return a+u},0);return r+i}case"cards":{let n=Object.keys(e.records).length,r=e.view.cardSize==="large"?2:3,i=(750-r*g.medium)/r,a=See(t,e,i),c=Math.ceil(n/r);return c*a+(c-1)*g.medium}default:Fe(e.view)}}function Xk(t,o,e){if(!t)return 0;let n=re.getTableData(t),r=n.records[o];return n.view.columns.reduce((i,a)=>{let c=r.values[a],l=n.definition[a],u=e8(c,l,J9(l.id,e),t);return u>i?u:i},g.medium)}function See(t,o,e){let n=Object.values(o.records)[0];if(!n)return 0;let r=o.view.type==="cards"&&o.view.coverDefinition?135:0;return o.view.columns.reduce((i,a)=>{let c=n.values[a],l=o.definition[a],u=e8(c,l,e,t);return i+u},2*g.small+r)}function wee(t,o){return t.view.type!=="grid"||t.view.hideHeader?0:Object.keys(t.definition).reduce((e,n)=>{let r=J9(n,o),i=t.definition[n].title,a=tf(i,{contentWidth:r});return a>e?a:e},g.medium)}function J9(t,o){var n;return(((n=o.get(t))==null?void 0:n.width)||Dc)-g.medium*2}function e8(t,o,e,n){return(()=>{switch(o.type){case"text":let i=n.fragments.get(String(t));return i?i.nodes.reduce((u,d)=>u+Fl(d,n,{contentSize:e}),0):0;case"number":return tf(String(t),{contentWidth:e});case"files":case"users":let a=Array.isArray(t)?t.length:1,c=o.type==="files"?xee:Cee;return(a<=1?1:Math.max(1,Math.ceil(c*a/e)))*Ze.Body.lineHeight;case"checkbox":case"rating":case"select":default:return Ze.Body.lineHeight}})()+g.small*2+1}function tf(t,o){let{lineHeight:e=Ze.Body.lineHeight,contentWidth:n=750}=o||{},r=Uk(t,o),i=Math.max(1,Math.ceil(r/n));return e*i}function Uk(t="",o){let{fontSize:e=Ze.Body.fontSize}=o||{};return e*.5*t.length}var Cee=Uk("Steven Smithson")+g.large+g.small*2,xee=Uk("this_is_a_file_of_mine.json")+g.large+g.small*2;function Sd(t){let{ancestors:o,node:e,diff:n,isBlockSelection:r=!1}=t,i=o.last(),a=i.type,c=i.getChildIndex(e.key),l=c===0,u=c===i.nodes.size-1,d=e.data.get("fullWidth"),m=typeof d=="boolean"&&d===!0;return o8.default.useMemo(()=>{let f=i.object==="document",h=o.size===1||o.size===2&&Xt.isBlock(i)&&ft.isList(i),y=i.object==="document"&&Wi.isConflictKey(e.key),w=sr(e),C=Ii(e,i,typeof n=="boolean");y&&(C.paddingTop+=g.medium);let k=!y&&Ree(e,o),I=k?Pee(e,o):0,P=g.small;return{blockStyle:Mee(C.paddingTop,C.paddingBottom),diffLine:n?{style:{position:"absolute",left:Tee(e,o),top:(typeof n!="boolean"?C.paddingTop:0)+(w-Kk)/2,bottom:C.paddingBottom+g.small},size:Kk}:void 0,diffBefore:typeof n!="boolean"&&(n!=null&&n.deletedBlocksBefore)?{style:t8.diffDeletedBeforeLine,size:M.ICON_XS}:void 0,diffAfter:typeof n!="boolean"&&(n!=null&&n.deletedBlocksAfter)?{style:t8.diffDeletedAfterLine,size:M.ICON_XS}:void 0,controlButtons:kee({node:e,ancestors:o,lineHeight:w,blockSpacing:C,isTopLevelBlock:h,isBlockSelection:r}),rightGutterComponent:k?{size:k.buttonSize,style:{top:(w-k.height)/2,marginLeft:I+P},hitArea:{right:0,width:I+P,marginRight:-I-P,top:0,position:"absolute",height:"100%",paddingTop:C.paddingTop,paddingBottom:C.paddingBottom}}:void 0,renderMode:f?m?"full-width":"centered":"unstyled"}},[e.type,i.object,a,l,u,n,r,m])}var n8={shouldNodeComponentUpdate(t,o){if(t.node.object==="inline"||o.node.object==="inline")return null;let e=Ii(t.node,t.parent),n=Ii(o.node,o.parent);return e.paddingTop!==n.paddingTop||e.paddingBottom!==n.paddingBottom?!0:null}};function kee({node:t,ancestors:o,lineHeight:e,blockSpacing:n,isTopLevelBlock:r,isBlockSelection:i}){let a=_ee({isTopLevelBlock:r}),c=o.last(),l=Oee({node:t,isTopLevelBlock:r,isBlockSelection:i}),u=Iee({node:t,parent:c,isBlockSelection:i}),d=[l,u].reduce((y,w)=>w?y+a.width:y,0),p=Eee(t,o),m=p-d/2,f=d===0?0:r?p:m,h=e/2-a.height/2;return{size:a.size,position:{top:h},withInsertButton:l,withOptionsButton:u,hitArea:{inlineStyle:{width:Math.abs(f),paddingTop:n.paddingTop,paddingBottom:n.paddingBottom,paddingLeft:r?g.xsmall:0,paddingRight:r?g.xsmall:0,left:f}}}}function Oee({node:t,isBlockSelection:o,isTopLevelBlock:e}){return o||hr===t.type?!1:e}function Iee({node:t,parent:o,isBlockSelection:e}){return!(t.type===ge&&t.isEmpty||hr===t.type||!e&&rs.includes(t.type)||Xt.isBlock(o)&&o.type===Zo&&t.type!==jn)}function _ee({isTopLevelBlock:t}){return t?{size:"small",width:M.BUTTON_S,height:M.BUTTON_S}:{size:"xsmall",width:M.BUTTON_XS,height:M.BUTTON_XS}}function Ree(t,o){return hr===t.type||rs.includes(t.type)||[ho,Wr,jt].includes(t.type)?null:{buttonSize:"small",width:M.BUTTON_S,height:M.BUTTON_S}}function Pee(t,o){let e=o.last();return Xt.isBlock(e)&&[ho].includes(e.type)?24:Xt.isBlock(e)&&e.type===Wr?g.medium+1:0}function Eee(t,o){let e=o.last(),n=o.get(o.size-2);if(t.type===Zo){if(!n||(n==null?void 0:n.object)==="document")return $v;if(Xt.isBlock(n)&&n.type===Zo)switch(e==null?void 0:e.type){case yo:return-(g.small+6);case Ut:return-(g.small+8);case vo:return-(g.small+M.ICON_M/2);default:return $v}e=n,n=o.get(o.size-3)}return n&&Xt.isBlock(n)&&Hk[n.type]?Hk[n.type]:(Xt.isBlock(e)?Jm[e.type]:0)||$v}function Tee(t,o){let e=o.last(),n=o.get(o.size-2),r=o.some(l=>l.type===$n)?-g.large:0,i=o.some(l=>l.type===ho)?ql+10:0,a=o.some(l=>l.type===jt)?-20:0,c=o.filter(l=>rs.includes((l==null?void 0:l.type)||"")).size;if(c>0){let l=(r?r-2:0)+i+a+ql,u=c-1,d;switch(rs.includes((n==null?void 0:n.type)||"")?d=n==null?void 0:n.type:(d=e.type,u--),d){case yo:return l-X9-$9*u;case Ut:return l-U9-Y9*u;case vo:return l-j9-Z9*u;default:return ql}}return a+i+r+ql}var t8=Q.create({block:{paddingVertical:kd},defaultTopPadding:{paddingTop:kd},defaultBottomPadding:{paddingBottom:kd},insertionLine:{height:Wl,left:0,right:0},diffDeletedBeforeLine:{top:-Wl,left:ql},diffDeletedAfterLine:{bottom:-Wl,left:ql}});function Mee(t,o){let e={0:"none",[g.xsmall]:"xsmall",[g.small]:"small",[g.medium]:"medium",[g.large]:"large",[g.xlarge]:"xlarge",[g.xxlarge]:"xxlarge"},n=[N.padding.mediumVertical],r={},i=e[t],a=e[o];return i&&n.push(N.padding[`${i}Top`]),a&&n.push(N.padding[`${a}Bottom`]),!i&&t!==0&&(r.paddingTop=t),!a&&o!==0&&(r.paddingBottom=o),{inlineStyle:r,style:n}}s();var Od=x(O());var r8=Od.default.createContext({current:new Map});function i8(t){let{original:o,modified:e,children:n}=t,r=Od.default.useRef(new Map),i=Od.default.useMemo(()=>o?UI(o||Ks.create(),e):new Map,[o,e]);return r.current=i,Od.default.createElement(r8.Provider,{value:r},n)}function a8(t){let o=Od.default.useContext(r8);return o.current instanceof Map?o.current.get(t.key):o.current}s();var Ro=x(O());s();var _i=JSON.parse('{"conflicts":"conflicts_NH0YT","toolbarConnector":"toolbarConnector_rKw9X","conflictBase":"conflictBase_F-gkn","conflictHead":"conflictHead_qDgkT","verticalConnector":"verticalConnector_6gQQw","conflictBadge":"conflictBadge_rJISv","highlightContainer":"highlightContainer_T2jbl","highlight":"highlight_r-5El","main":"main_K0HuP","current":"current_-GeKS"}');function c8(t){let{node:o,editor:e,children:n}=t,{blockLayoutComponent:r}=Ro.useContext(Ge),i=Wi.hasBlockConflictFrom(o,"base"),a=Wi.hasBlockConflictFrom(o,"head");return!a&&!i?Ro.createElement(Ro.Fragment,null,n):Ro.createElement(te,{style:[_i.conflicts,N.flex.column]},i?Ro.createElement(r,{renderMode:"centered"},Ro.createElement(s8,{node:o,editor:e,style:[_i.conflictBase,N.margin.smallBottom,N.margin.mediumTop]})):null,Ro.createElement(te,{style:_i.highlightContainer},Ro.createElement(te,{style:[_i.highlight,{[_i.main]:i,[_i.current]:a}]}),i?Ro.createElement(te,{style:[_i.verticalConnector]}):null,n,a?Ro.createElement(te,{style:[_i.verticalConnector]},Ro.createElement(te,{style:[_i.conflictBadge]},Ro.createElement(xo,{kind:"secondary",icon:v.Conflict}))):null),a?Ro.createElement(r,{renderMode:"centered"},Ro.createElement(s8,{node:o,editor:e,style:[_i.conflictHead,N.margin.smallTop,N.margin.mediumBottom]})):null)}function s8(t){let{node:o,editor:e,style:n}=t,[,r]=_(W),i=()=>{e.change(a=>{Wi.pickConflict(a,o.key)})};return Ro.createElement(te,{contentEditable:!1,style:[_i.toolbarConnector,N.flex.row,n]},Wi.isConflictKeyFrom(o.key,"base")?Ro.createElement(z,{icon:Ct(v.Check,{style:[r.merge]}),rounded:!0,size:"small",kind:"secondary",style:[g.Margin.mediumRight],title:"Pick recent edits made on the main content",tooltipPreferredPlacement:"top",onPress:i},"Keep primary"):Ro.createElement(z,{icon:Ct(v.Check,{style:[r.primary]}),rounded:!0,size:"small",kind:"secondary",title:"Pick edits made on this change request",tooltipPreferredPlacement:"bottom",onPress:i},"Keep changed"))}var u8=Dt({key:"hoveredBlocks",default:[]}),Lee=cI({key:"isSelectedHoveredBlock",get:t=>({get:o})=>{let e=o(u8),n=e.length?e[e.length-1]:void 0;return!!n&&n===t}});function be(t){let{tag:o,contentProps:e={},commandIcon:n,commandIconAnimatedAngle:r,palette:i,...a}=t,{node:c,parent:l,ancestors:u,editor:d,attributes:p,isFocused:m,children:f,isSelectedBlock:h,isBlockSelection:y}=a,{readOnly:w}=d,C=a8(c),k=tt(),I=Di(u8),P=Kn(Lee(c.key)),{blockLayoutComponent:R,rightGutterComponent:D,logAnalyticsEvent:E,onBlockHover:T}=nt.useContext(Ge),q=Sd({node:c,ancestors:u,diff:C,isBlockSelection:y}),F=K.useInteractiveState({onHoverIn:()=>{rs.includes(c.type)||I(X=>[...X,c.key]),T==null||T(c.key)},onHoverOut:()=>{I(X=>X.filter(oe=>oe!==c.key)),T==null||T(null)}}),U=F.hovered&&P,$=nt.createElement(he,{"data-block-content":c.key,...e,style:[b.flex1,e.style]},w?null:nt.createElement(qk,{isBlockSelection:y,isSelected:h}),f);return w?nt.createElement(R,{node:c==null?void 0:c.key,renderMode:q.renderMode,interactive:F},nt.createElement(Ls.View,{isPDF:k},nt.createElement(te,{as:o,...p,...F.domEvents,style:[N.position.relative,N.flex.column,(l.object!=="block"||l.type!==fu)&&q.blockStyle.style],inlineStyle:q.blockStyle.inlineStyle},$,D&&q.rightGutterComponent?nt.createElement(he,{style:[q.rightGutterComponent.hitArea,Nc.hitArea]},nt.createElement(D,{nodeKey:c.key,visible:U,shortcutsActive:m,buttonSize:q.rightGutterComponent.size,style:q.rightGutterComponent.style,readOnly:w})):null))):nt.createElement(Nee,{key:c.key,interactive:F,layout:q,isPDF:k,isHovered:U,BlockLayoutComponent:R,RightGutterComponent:D,logAnalyticsEvent:E,diff:C,...t},$)}function Dee(t,o){if(!(o!=null&&o.current))return;let e=o.current.getBoundingClientRect(),n=.5*(e.bottom-e.top),r=t.getClientOffset();return r?r.y-e.top<n?"before":"after":void 0}function Nee(t){var Vn;let{tag:o,commandIcon:e,commandIconAnimatedAngle:n,palette:r,interactive:i,layout:a,isPDF:c,isHovered:l,BlockLayoutComponent:u,RightGutterComponent:d,logAnalyticsEvent:p,diff:m,...f}=t,{node:h,parent:y,editor:w,attributes:C,isFocused:k,children:I,isSelectedBlock:P,isBlockSelection:R}=f,{readOnly:D}=w,E=R&&w.value.selection.isExpanded,T=nt.useMemo(()=>E?{type:"block-range",item:{type:"block-range",id:h.key,previewLabel:"Move blocks"}}:{type:"block",item:{type:"block",id:h.key,blockType:h.type,previewLabel:"Move block"}},[E,h.key,h.type]),[{dragging:q},F]=Ba({...T,canDrag:()=>!D,collect:lt=>({dragging:lt.isDragging()||P&&lt.getItemType()==="block-range"})}),[U,$]=nt.useState(),X=nt.useRef(null),oe=y.nodes.last()===h,[we,Ee]=ir({accept:["block","block-range","page","space","collection"],drop:(lt,Gn)=>{Gn.didDrop()||w.change(Yo=>{if(lt.type==="block-range")Yo.moveBlockRangeSelectionTo(h.key,U==="after"?1:0),p({type:"edit_page_document_move_block_range",method:"dnd",rangeSize:Yo.value.blocks.size});else if(lt.type==="block"){U==="before"?Yo.moveBeforeNodeByKey(lt.id,h.key):Yo.moveAfterNodeByKey(lt.id,h.key);let Gt=w.value.document.getParent(lt.id);p({type:"edit_page_document_move_block",blockType:lt.blockType,method:"dnd",toParent:y.object==="block"?y.type:y.object,fromParent:(Gt==null?void 0:Gt.object)==="block"?Gt==null?void 0:Gt.type:Gt==null?void 0:Gt.object})}else{let Gt=ul.createContentRefBlock(t9(lt));U==="before"?Yo.insertNodeBeforeByKey(h.key,Gt):Yo.insertNodeAfterByKey(h.key,Gt)}})},canDrop:lt=>!(!De(y,lt.type==="block"?lt.blockType:ns)||lt.type==="block"&&lt.id===h.key||lt.type==="block-range"&&w.value.blocks.find(Gn=>Gn.key===h.key)),hover:(lt,Gn)=>{if(!Gn.canDrop())return;let Yo=Dee(Gn,X);U!==Yo&&$(Yo)},collect:lt=>({highlighted:lt.isOver({shallow:!0})&&lt.canDrop()})}),{rightGutter:me,controls:We,diff:mt}=Aee({isBlockSelection:R,isDragging:q,isSelectedBlock:P,readOnly:D,value:w.value}),$o=Ee(X);return nt.createElement(c8,{node:h,editor:w},nt.createElement(u,{node:h==null?void 0:h.key,renderMode:a.renderMode,interactive:i},nt.createElement(Ls.View,{isPDF:c},nt.createElement(te,{as:o,...C,style:[N.position.relative,N.flex.row,q&&N.opacity.translucent,a.blockStyle.style,qg,{[Bg]:we.highlighted&&(!oe||oe&&U==="before"),[_u]:we.highlighted&&oe&&U==="after"}],inlineStyle:a.blockStyle.inlineStyle,ref:$o},mt&&m&&a.diffLine&&m.type!=="unmodified"?nt.createElement(Uv,{diff:m,highlighted:l,...a.diffLine,style:[(Vn=a.diffLine)==null?void 0:Vn.style,Nc.noSelect]}):null,We&&a.controlButtons?nt.createElement(G9,{isDragging:q,dragHandleRef:F,isFocused:k,isHovered:l,optionsPalette:E?void 0:r,layout:a.controlButtons,node:h,editor:w,parent:y}):null,I,me&&d&&a.rightGutterComponent?nt.createElement(he,{style:[a.rightGutterComponent.hitArea,Nc.hitArea]},nt.createElement(d,{nodeKey:h.key,visible:l,shortcutsActive:k,buttonSize:a.rightGutterComponent.size,style:[a.rightGutterComponent.style,Nc.hideTransition],readOnly:D})):null,a.diffBefore?nt.createElement(l8,{style:a.diffBefore.style,size:a.diffBefore.size}):null,a.diffAfter?nt.createElement(l8,{style:a.diffAfter.style,size:a.diffAfter.size}):null))))}function l8(t){let{style:o,size:e}=t;return nt.createElement(he,{editable:!1,style:[o,Nc.avoidCalculatingBounds,Nc.diffRemoved,Nc.noSelect],"data-hide-on-drag":!0},nt.createElement(vi,{tooltip:"A block has been removed in this change request",preferredPlacement:"top"},(n,r)=>nt.createElement(K.TouchableOpacity,{ref:r,style:Nc.diffContainer,...n.events},nt.createElement(v.DiffRemoved,{size:e,style:[Xv.deleted]}))))}function Aee(t){let{isDragging:o,isBlockSelection:e,isSelectedBlock:n,readOnly:r,value:i}=t,{selection:a}=i;return nt.useMemo(()=>r?{controls:!1,diff:!1,rightGutter:!0}:e?{controls:n,diff:!0,rightGutter:!1}:{controls:!a.isExpanded,diff:!0,rightGutter:!a.isExpanded},[a.isExpanded,o,e,n,r])}var Nc=Q.create({diffContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",opacity:.5},diffRemoved:{paddingTop:(Wl*2-M.ICON_XS)/2,height:Wl*2,position:"absolute"},hideTransition:{transition:"opacity 0.2s ease-in-out"},hitArea:{position:"absolute",backgroundColor:"transparent"},avoidCalculatingBounds:{width:0,overflow:"visible"},noSelect:{userSelect:"none"}});s();var gt=x(O());s();var Jv=JSON.parse('{"placeholder":"placeholder_HCCie","instructions":"instructions_YvYKU","shortcuts":"shortcuts_v-WHU"}');var zl={instructions:{message:gt.createElement(gt.Fragment,null,"Type"," ",gt.createElement(ms,{style:[N.flex.inline],size:"medium",shortcut:Ue.EDITOR_PALETTE})," ","for commands"),embed:" or paste a link to embed content"},imagePrompt:{title:"Select images"},image:{label:"Insert image"},code:{label:"Insert code block",placeholder:"// Some code"},list:{label:"Insert unordered list"}};function d8(t){let{node:o,parent:e,editor:n,children:r,placeholder:i}=t,{selection:a}=n.value,c=ye.isTextRange(a)&&a.hasOnlyNodeFocused(o),l=_t(),{logAnalyticsEvent:u}=gt.useContext(Ge),d=De(e,vn),p=gt.useMemo(()=>[{key:"image",label:zl.image.label,icon:v.BlockImage.CSS,trigger(){l.prompt({title:zl.imagePrompt.title,accept:"images",acceptURL:!0}).then(m=>{m.length!==0&&(Cd(n,o.key,Xt.create({type:jn,isVoid:!0,nodes:m.map(f=>Do.createImageBlock(f))}),"replace","end"),u({type:"edit_page_document_insert_block",from:"quick-insert",blockType:jn,images:m.length}))})}},{key:"code",label:zl.code.label,icon:v.Code.CSS,trigger(){Cd(n,o.key,no.createCodeBlock(zl.code.placeholder),"replace","end"),u({type:"edit_page_document_insert_block",from:"quick-insert",blockType:Un})}},{key:"list-unordered",label:zl.list.label,icon:v.ListUnordered.CSS,trigger(){Cd(n,o.key,ft.createList(yo),"replace","end"),u({type:"edit_page_document_insert_block",from:"quick-insert",blockType:yo})}}],[n,o.key]);return gt.createElement(gt.Fragment,null,gt.createElement(be,{...t},gt.createElement(te,{as:"p",contentEditable:!1,style:[Jv.placeholder,N.text.base,N.text.body,N.textColor.muted,N.flex.row,N.flex.alignCenter,N.flex.justifySpaceBetween,c||i?N.opacity.visible:N.opacity.hidden]},c?gt.createElement(gt.Fragment,null,gt.createElement(Cn,{style:[Jv.instructions]},zl.instructions.message,d?zl.instructions.embed:""),(p==null?void 0:p.length)>0?gt.createElement(Bee,{blocks:p,editor:n,node:o}):null):gt.createElement(gt.Fragment,null,rg(e)?i:null)),r))}function Bee(t){var l;let{blocks:o,editor:e,node:n}=t,[r,i]=gt.useState(0),a=gt.useRef(r),c=gt.useRef(null);return R6(u=>{var d;!c.current||u||(d=c.current)==null||d.focus()},{scope:(l=e.elementRef)==null?void 0:l.current,exact:!0}),gt.useEffect(()=>{var u;(a==null?void 0:a.current)!==r&&((u=c.current)==null||u.focus(),a.current=r)},[r]),gt.useEffect(()=>()=>{var u;(u=c==null?void 0:c.current)==null||u.blur()},[]),gt.createElement(te,{as:"span",role:"toolbar","aria-orientation":"horizontal",style:[Jv.shortcuts,N.flex.row,N.flex.alignEnd]},o.map(({trigger:u,label:d,icon:p},m)=>gt.createElement(io,{ref:m===r?c:void 0,label:d,tooltipTitle:d,iconOnly:!0,leadingIcon:p,kind:"muted",size:"small",onPress:()=>u==null?void 0:u(),preventFocusOnPress:!0,tabIndex:m===r?0:-1,key:`${n.key}_${m}`,onKeyDown:f=>{var h,y;(f.key==="Tab"||f.key==="Escape")&&((y=(h=e.elementRef)==null?void 0:h.current)==null||y.focus(),f.preventDefault()),f.key==="ArrowLeft"&&(i(w=>Math.max(0,w-1)),f.preventDefault()),f.key==="ArrowRight"&&(i(w=>Math.min(o.length-1,w+1)),f.preventDefault())}})))}s();var p8=x(O());var qee=[Un,vn,di,jn,Lo,yr];function Oi(t,o){let{logAnalyticsEvent:e}=p8.useContext(Ge);if(!pP("FULL_WIDTH_BLOCKS"))return null;let r=t.value.document.assertBlock(o);if(!qee.includes(r.type))return null;let i=r.data.get("fullWidth");return{key:"layout-width",commands:[typeof i=="boolean"&&i===!0?{key:"default",title:"Default width",icon:v.DefaultWidth,trigger:()=>{t.change(l=>{l.setDataByKey(o,["fullWidth"],!1)}),e({type:"edit_page_document_edit_block_property",blockType:r.type,blockProperty:"layout",fromValue:"full",toValue:"default"})}}:{key:"full",title:"Full width",icon:v.FullWidth,trigger:()=>{t.change(l=>{l.setDataByKey(o,["fullWidth"],!0)}),e({type:"edit_page_document_edit_block_property",blockType:r.type,blockProperty:"layout",fromValue:"default",toValue:"full"})}}]}}s();var m8=x(O());function tb(t,o){return m8.useMemo(()=>Wee(t.value.document,o),[t,o])}function Wee(t,o){let e=t.getPath(o);return e?e[0]<Fee(t):!1}var eb=new WeakMap;function Fee(t){if(eb.has(t))return eb.get(t);let o=800,e=0;for(let n=0;n<t.nodes.size;n++){let r=t.nodes.get(n);if(!r)break;if(e+=Fl(r,t,{blockSpacing:{paddingTop:g.medium,paddingBottom:g.medium}}),e>o)return eb.set(t,n),n}return eb.set(t,t.nodes.size),t.nodes.size}s();var Id=x(O());H();var _d=Id.forwardRef(function(o,e){let{node:n,children:r,editor:i,isFocused:a,isSelected:c,attributes:l,onPress:u,style:d}=o,{readOnly:p}=i,m=K.useInteractiveState(),[,f]=_(zee);return p?u?Id.createElement(Ke,{style:[f.frameInlineVoid],onPress:u},r):Id.createElement(S,{style:[f.frameInlineVoid]},r):Id.createElement(Ke,{ref:e,...l,...m.events,style:[f.frameInlineVoid,m.hovered&&f.frameEditableHovered,c&&f.frameSelected,a&&f.frameFocused,d],onPress:h=>{i.change(y=>{Kt(y.value.selection)?y.collapseToStartOf(n).focus():y.selectText(ye.fromBlockRange(y.value.selection,y.value.document)).collapseToStartOf(n).focus()}),u&&u(h)}},r)}),zee=G.create({frameInlineVoid:t=>({borderWidth:2,borderColor:"transparent",borderRadius:t.radiuses.medium,textAlignVertical:"middle"}),frameEditableHovered:t=>({borderColor:t.colors.primary.muted}),frameSelected:t=>({borderColor:t.colors.primary.muted}),frameFocused:t=>({borderColor:t.colors.primary.main})});s();var Rt=x(O());H();s();var y8=x(Yf()),v8=x(O());s();var jk={BLUE:{light:"#0074D9",dark:"#0074D9"},AQUA:{light:"#7FDBFF",dark:"#7FDBFF"},TEAL:{light:"#39CCCC",dark:"#39CCCC"},OLIVE:{light:"#3D9970",dark:"#3D9970"},GREEN:{light:"#2ECC40",dark:"#2ECC40"},LIME:{light:"#01FF70",dark:"#01FF70"},YELLOW:{light:"#FFDC00",dark:"#FFDC00"},ORANGE:{light:"#FF851B",dark:"#FF851B"},RED:{light:"#FF4136",dark:"#FF4136"},MAROON:{light:"#85144b",dark:"#85144b"},FUCHSIA:{light:"#F012BE",dark:"#F012BE"},PURPLE:{light:"#B10DC9",dark:"#B10DC9"}},f8=Object.keys(jk).sort((t,o)=>Math.random()-.5),ob=new Map;function g8(t){if(ob.has(t))return ob.get(t);let o=f8[ob.size%f8.length];return ob.set(t,o),o}function qa(t){let o=fi(),[e]=_();return v8.useMemo(()=>{if(!t)return{base:e.colors.primary.main,faded:h8(e.colors.primary.main,.2)};let n=g8(t),r=jk[n][o.color];return{base:r,faded:h8(r,.2)}},[o.color,t,e.colors.primary.main])}function h8(t,o){let e=Math.round((0,y8.default)(o||1,0,1)*255);return t+e.toString(16).toUpperCase()}var Bt=Rt.forwardRef(function(o,e){let{onPress:n,onSelect:r=()=>{c.change(y=>{Kt(y.value.selection)&&y.collapseToStartOf(i).focus()})},node:i,children:a,editor:c,selections:l,isFocused:u,selectable:d=!0}=o,{readOnly:p}=c,m=i.getFirstText(),f=Rt.useMemo(()=>{if(u)return;let y=l.get(0);if(y)return y.data.get("clientId")},[l,u,m==null?void 0:m.key]),h=qa(f);return Rt.createElement($k,{ref:e,onPress:n,readOnly:p,selectable:d,selected:u||!!f,selectionColor:h.base,onSelect:r},a)}),$k=Rt.forwardRef(function(o,e){let{onPress:n,selected:r,readOnly:i=!1,selectable:a=!0,selectionColor:c,style:l,children:u,onSelect:d}=o,p=K.useInteractiveState({hoverDelayIn:50}),[m,f]=_(Vee);if(i)return Rt.createElement(Rt.Fragment,null,u);let h=C=>{C.stopPropagation(),d()},y=c||m.colors.primary.main,w=Rt.createElement(S,{ref:e,style:l},u,Rt.createElement(S,{style:[f.frameBorder,f.frameBorderRight,p.hovered&&f.frameBorderHovered,r&&[f.frameBorderRightSelected,{borderRightColor:y}]],pointerEvents:"none"}),Rt.createElement(S,{style:[f.frameBorder,f.frameBorderLeft,p.hovered&&f.frameBorderHovered,r&&[f.frameBorderLeftSelected,{borderLeftColor:y}]],pointerEvents:"none"}),Rt.createElement(S,{style:[f.frameBorder,f.frameBorderTop,p.hovered&&f.frameBorderHovered,r&&[f.frameBorderTopSelected,{borderTopColor:y}]],pointerEvents:"none"}),Rt.createElement(S,{style:[f.frameBorder,f.frameBorderBottom,p.hovered&&f.frameBorderHovered,r&&[f.frameBorderBottomSelected,{borderBottomColor:y}]],pointerEvents:"none"}),a?Rt.createElement(Rt.Fragment,null,Rt.createElement(go,{onPress:h},Rt.createElement(S,{...p.events,style:[f.hoverableFrameBorder,f.hoverableFrameBorderRight]})),Rt.createElement(go,{onPress:h},Rt.createElement(S,{...p.events,style:[f.hoverableFrameBorder,f.hoverableFrameBorderLeft]})),Rt.createElement(go,{onPress:h},Rt.createElement(S,{...p.events,style:[f.hoverableFrameBorder,f.hoverableFrameBorderTop]})),Rt.createElement(go,{onPress:h},Rt.createElement(S,{...p.events,style:[f.hoverableFrameBorder,f.hoverableFrameBorderBottom]}))):null);return n?Rt.createElement(Ke,{onPress:n},w):w}),nb=18,bt=8,Ac=4,rb=2,Vee=G.create({frameBorder:{position:"absolute"},hoverableFrameBorder:{position:"absolute",cursor:"pointer"},frameBorderHovered:t=>({backgroundColor:t.colors.primary.muted}),hoverableFrameBorderTop:{top:-bt/2,left:-bt/2,right:-bt/2,height:nb},frameBorderTop:{top:-bt/2,left:-bt/2,right:-bt/2,height:bt,borderTopLeftRadius:Ac,borderTopRightRadius:Ac},frameBorderTopSelected:t=>({backgroundColor:"transparent",borderTopColor:t.colors.primary.main,borderTopWidth:rb}),hoverableFrameBorderBottom:{bottom:-bt/2,left:-bt/2,right:-bt/2,height:nb},frameBorderBottom:{bottom:-bt/2,left:-bt/2,right:-bt/2,height:bt,borderBottomLeftRadius:Ac,borderBottomRightRadius:Ac},frameBorderBottomSelected:t=>({backgroundColor:"transparent",borderBottomColor:t.colors.primary.main,borderBottomWidth:rb}),hoverableFrameBorderLeft:{top:-bt/2,bottom:-bt/2,left:-bt/2,width:nb},frameBorderLeft:{top:-bt/2,bottom:-bt/2,left:-bt/2,width:bt,borderBottomLeftRadius:Ac,borderTopLeftRadius:Ac},frameBorderLeftSelected:t=>({backgroundColor:"transparent",borderLeftColor:t.colors.primary.main,borderLeftWidth:rb}),hoverableFrameBorderRight:{top:-bt/2,bottom:-bt/2,right:-bt/2,width:nb},frameBorderRight:{top:-bt/2,bottom:-bt/2,right:-bt/2,width:bt,borderTopRightRadius:Ac,borderBottomRightRadius:Ac},frameBorderRightSelected:t=>({backgroundColor:"transparent",borderRightColor:t.colors.primary.main,borderRightWidth:rb})});s();var ib=x(O());function ab(t,o){let[,e]=_(W),[,n]=_(Gee),{navigateToHash:r}=xe(),{sections:i,active:a,setActive:c}=ib.default.useContext(Ci),l=K.useInteractiveState(),u=i.get(t.key),d=()=>{u&&c(a!==u?u:null)},p=()=>{u&&(r(u,{scroll:!0}),d())},m={accessibilityRole:"presentation"};return{anchorElement:ib.default.createElement(K.Text,{href:`#${u}`,onPress:p,style:[n.anchorLink,g.Margin.smallLeft,a===u||l.focused||l.hovered?Qe.visible:Qe.hidden],inactiveStyle:e.textMuted,activeStyle:e.primary,accessibilityLabel:o.accessibilityLabel},ib.default.createElement(v.Hash,{size:o.anchorIconSize||M.ICON_S,...m})),anchoredBlockId:u,anchoredBlockInteractiveState:l,onAnchoredBlockPress:()=>{o.onBlockPress&&o.onBlockPress(),d()}}}var Gee=G.create({anchorLink:{display:"inline-flex",alignItems:"center"}});s();var S8=x(O());function w8(t){let{notify:o,notifyProgress:e,notifyOrUpdate:n,close:r}=Co(),{logAnalyticsEvent:i}=t;return S8.useMemo(()=>{function a(u){Hf(u),o({kind:"danger",title:"Error while pasting content",icon:v.Alert.CSS,details:ga(u,"Please try again or contact support if the problem persists.")})}function c(u){n({id:"upload-files",title:`Uploading ${u} file${u!==1?"s":""}\u2026`,details:"This might take a moment.",kind:"default",timeout:0,closeable:!1,icon:Re})}function l(u,d,p){let m=Ru(u),f=0,h=async(y,w)=>{var C;if(du(y))return{kind:"url",url:y};if(RI(y)){let k=await(await fetch(y)).blob(),I=(C=y.split(";")[0])==null?void 0:C.split("/")[1],P=(w==null?void 0:w.fileName)||`unknown.${I}`,R=new File([k],P);return f+=1,c(f),(await t.uploadFiles([R]))[0]}return null};if(m.type==="html"&&m.html!==null)return YR(m.html,{...mw,resolveFile:h}).then(({document:y})=>KI(y)&&m.text?fw(m.text).then(({document:w})=>({document:w,type:"text"})):{document:y,type:"html"}).then(({document:y,type:w})=>{p.change(k=>{k.insertDocument(y)}),r("upload-files");let C=b8(w==="html"?m.html:m.text,w);i(of(u,w,{document:y,sourceIncludes:C}))}).catch(y=>{a(y)}),!0;if(m.type==="text"&&m.text!==null)return fw(m.text,{...mw,resolveFile:h}).then(({document:y})=>{p.change(C=>{C.insertDocument(y)}),r("upload-files");let w=b8(m.text,"text");i(of(u,"text",{document:y,sourceIncludes:w}))}).catch(y=>{a(y)}),!0;if(m.type==="files"&&typeof m.files<"u"){if(!m.files||m.files.length===0)return;e(t.uploadFiles(m.files),{title:`Uploading ${m.files.length} files\u2026`,details:"This might take a moment.",kind:"default"}).then(y=>{if(!m.files)return;if(y.length===0){o({kind:"danger",title:"Some files failed to upload, please try again",icon:v.Alert.CSS});return}let w=m.files.every(C=>Xs(C));p.change(C=>{if(w){let k=Do.createImagesBlock(y),{startBlock:I}=C.value;if(De(I,k.type)){JS(C,Do.createImagesBlock(y));return}if(!HI.includes(I.type)){o({kind:"info",title:"Cannot insert an image here",icon:v.InfoCircle.CSS});return}y.reduce((R,D)=>R.insertInline(Do.createImageInline(D)),C);return}y.forEach(k=>{if(k.kind!=="file")return;let I=cg.createFileBlock(k);if(De(C.value.document.getParent(C.value.startBlock.key),I.type)){JS(C,I);return}o({kind:"info",title:"Cannot insert a file here",icon:v.InfoCircle.CSS})})}),i(of(u,"files",{uploadedFiles:y==null?void 0:y.length,sourceIncludes:["file"]}))}).catch(y=>{a(y)})}}return{onPaste:l,onDrop:l}},[o,e])}function b8(t,o){let e=[];switch(o){case"text":t.includes("![")&&e.push("image"),t.match(/\|\s*\:?---/)&&e.push("table");break;case"html":t.includes("<img")&&e.push("image"),t.includes("<table")&&e.push("table");break}return e}function of(t,o,{document:e=void 0,uploadedFiles:n=0,sourceIncludes:r=[]}={}){let i=t.clipboardData,a=new Set,c=0;return e&&e.forEachDescendant(l=>{c+=1,l.type&&a.add(l.type)}),{type:"edit_paste_content",paste:t.type,sourceTypes:[...(i==null?void 0:i.types)||[]],sourceIncludes:[...new Set(r)],transformType:o,transformSize:c,uploadedFiles:n,transformNodes:[...a]}}s();var Yk=x(mi());var C8={onKeyDown:Hee};function Hee(t,o){if((0,Yk.default)("enter",t)||(0,Yk.default)("shift+enter",t)){let{value:e}=o,{startBlock:n,startInline:r,startText:i}=e;if(r&&r.isVoid&&i){let a=e.document.getNextText(i.key);return a?(o.collapseToStartOf(a),o):void 0}if(n&&n.isVoid)return kt(o),o}}s();var Zk=x(O()),sb="selectionHighlighting",x8={renderMark:Kee};function Kee(t){let{mark:o}=t;switch(o.type){case sb:return Zk.createElement(Xee,{...t})}}function Xee(t){let{attributes:o,children:e}=t;return Zk.createElement("span",{...o,style:{backgroundColor:"Highlight",color:"HighlightText"}},e)}s();function F9(t){t.value.decorations.forEach(o=>{var e;(e=o.marks)!=null&&e.some(n=>n.type===sb)&&t.removeValueDecoration(o)})}function Gv(t,o=t.value.selection){ye.isTextRange(o)&&t.setValueDecoration(ye.create({anchorKey:o.anchorKey,anchorOffset:o.anchorOffset,focusKey:o.focusKey,focusOffset:o.focusOffset,marks:[{type:sb,data:{}}],isAtomic:!0}))}s();var k8={shouldNodeComponentUpdate:Uee};function Uee(t,o){let e=t.parent.nodes.size-1,n=t.parent.getChildIndex(t.node.key),r=o.parent.getChildIndex(t.node.key);return(n===e||r===e)&&r!==n?!0:null}s();var Rd=x(O());H();function Tr(t){let[,o]=_(jee),[,e]=_(W);return Rd.createElement(S,{style:[o.blockLoading,g.Padding.largeHorizontal,g.Padding.mediumVertical,b.directionRow,b.alignCenter]},Rd.createElement(S,null,Rd.createElement(Re,{size:"medium"})),Rd.createElement(S,{style:[g.Margin.mediumLeft]},Rd.createElement(V,{style:[e.Caption,e.textMid]},"Loading...")))}var jee=G.create({blockLoading:t=>({backgroundColor:t.colors.background.muted,borderRadius:t.radiuses.large})});s();var I8=x(O());s();var Ri=x(O());var O8={en:{something_wrong:"Something went wrong.",reload:"Reload",let_us_know:"Let us know what happened",we_have_been_notified:"Our team has been notified. If you'd like to help, you can describe what happened below.",search:"Search",search_ask:"Ask",search_placeholder:"Search content\u2026",search_placeholder_ask:"Ask a question\u2026",search_blankslate:"Type something to search",search_blankslate_ai:"We'll answer the question with an AI model trained on the content.",search_blankslate_recent_searches:"Recent searches",search_blankslate_recent_questions:"Recently asked",search_blankslate_recommended_questions:"You might be interested in",search_blankslate_query:'No results for "${1}"',search_answer_sources:"Answer based on ${1} sources",search_answer_copy:"Copy answer",search_answer_feedback_upvote:"Mark as useful",search_answer_feedback_downvote:"Mark as not relevant",search_answer_feedback_title:"Thanks for your feedback!",search_answer_feedback_details:"This will help us improve the answering engine.",search_answer_loading:"Analysing the content to answer your question\u2026",search_answer_loading_wait:"It might take a few more seconds.",search_answer_none_title:"No answer found for your question.",search_answer_none_details:"It can indicate that no content is relevant to your question or answer cannot be evaluated with enough confidence.",search_answer_error_title:"Unexpected error",search_answer_error_details:"Something went wrong. Please try again later.",search_goto_section:"Go to section",search_goto_page:"Go to page",page_not_found:"Page not found",back_to_home:"Back to front page",page_not_found_long:"Sorry, but the page you were looking for could not be found.",outline:"On this page",last_modified:"Last modified ${1}",was_it_helpful:"Was this page helpful?",poor_content:"Poor content",ok_content:"OK content",excellent_content:"Excellent content",powered_by:"Powered By ${1}",previous:"Previous",next:"Next",export_pdf:"Export as PDF",copy_link:"Copy link",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"Edit on ${1}",page_articles_section:"Here are the articles in this section:",main:"Main",cookie_policy:"cookie policy",cookie_prompt:"This site uses cookies to deliver its service and to analyse traffic. By browsing this site, you accept the ${1}.",cookies:"Cookies",reject_all:"Reject all",theme_change_appearance:"Change appearance",new_page:"New page",untitled_page:"Untitled page",page_description:"Page description (optional)",connection_lost:"Connection lost",network_troubleshooting:"Network troubleshooting",device_offline:"Your device might be offline, or GitBook might be experiencing issues.",missing_content_title:"Oops, something is missing.",missing_content_description:"We could not find the original source to display this content.",table_of_contents:"Table of contents",page_outline:"Page outline"},fr:{something_wrong:"Il y a eu un probl\xE8me.",reload:"Actualiser",let_us_know:"Dites-nous ce qui s'est pass\xE9",we_have_been_notified:"Notre \xE9quipe a \xE9t\xE9 inform\xE9e. Si vous souhaitez nous aider, vous pouvez d\xE9crire ce qui s'est pass\xE9 ci-dessous.",search:"Rechercher",search_ask:"Poser une question",search_placeholder:"Rechercher dans le contenu\u2026",search_placeholder_ask:"Poser une question\u2026",search_blankslate:"Tapez quelque chose pour rechercher",search_blankslate_ai:"Nous r\xE9pondrons \xE0 la question avec un mod\xE8le d'IA entra\xEEn\xE9 sur le contenu.",search_blankslate_recent_searches:"Recherches r\xE9centes",search_blankslate_recent_questions:"Questions r\xE9centes",search_blankslate_recommended_questions:"Vous pourriez \xEAtre int\xE9ress\xE9 par",search_blankslate_query:'Aucun r\xE9sultat pour "${1}"',search_answer_sources:"R\xE9ponse bas\xE9e sur ${1} sources",search_answer_copy:"Copier la r\xE9ponse",search_answer_feedback_upvote:"Marquer comme utile",search_answer_feedback_downvote:"Marquer comme non pertinent",search_answer_feedback_title:"Merci pour votre retour !",search_answer_feedback_details:"Cela nous aidera \xE0 am\xE9liorer le moteur de r\xE9ponse.",search_answer_loading:"Analyse du contenu pour r\xE9pondre \xE0 votre question\u2026",search_answer_loading_wait:"Cela peut prendre quelques secondes suppl\xE9mentaires.",search_answer_none_title:"Aucune r\xE9ponse trouv\xE9e pour votre question.",search_answer_none_details:"Cela peut indiquer qu'aucun contenu n'est pertinent pour votre question ou que la r\xE9ponse ne peut pas \xEAtre \xE9valu\xE9e avec suffisamment de confiance.",search_answer_error_title:"Erreur inattendue",search_answer_error_details:"Une erreur s'est produite. Veuillez r\xE9essayer plus tard.",search_goto_section:"Aller \xE0 la section",search_goto_page:"Aller \xE0 la page",page_not_found:"Page non trouv\xE9e",back_to_home:"Retour \xE0 la page d'accueil",page_not_found_long:"D\xE9sol\xE9, mais la page que vous cherchiez n'a pas pu \xEAtre trouv\xE9e.",outline:"Sommaire",last_modified:"Derni\xE8re mise \xE0 jour ${1}",was_it_helpful:"Cette page vous a t-elle aid\xE9e ?",poor_content:"Contenu m\xE9diocre",ok_content:"Contenu OK",excellent_content:"Contenu excellent",powered_by:"Propuls\xE9 par ${1}",previous:"Pr\xE9c\xE9dent",next:"Suivant",export_pdf:"Exporter en PDF",copy_link:"Copier le lien",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"\xC9diter sur ${1}",page_articles_section:"Voici les articles de cette section :",main:"Principale",cookie_policy:"politique en mati\xE8re de cookies",cookie_prompt:"Ce site utilise des cookies pour fournir son service et analyser le trafic. En naviguant sur ce site, vous acceptez le ${1}.",cookies:"Cookies",reject_all:"Rejeter tout",theme_change_appearance:"Changer l\u2019apparence",connection_lost:"Hors connexion",network_troubleshooting:"D\xE9pannage r\xE9seau",device_offline:"Votre appareil est hors-ligne, ou GitBook rencontre des probl\xE8mes.",missing_content_title:"Oups, il manque quelque chose.",missing_content_description:"Nous n'avons pas pu trouver la source d'origine pour afficher ce contenu.",table_of_contents:"Table des mati\xE8res",page_outline:"Sommaire de la page"},es:{something_wrong:"Algo sali\xF3 mal.",reload:"Recarga",let_us_know:"Cu\xE9ntanos lo que ha sucedido",we_have_been_notified:"Nuestro equipo ha sido notificado. Si quieres ayudar, puedes describir lo sucedido a continuaci\xF3n.",search:"Buscar",search_ask:"Hacer una pregunta",search_placeholder:"Buscar en el contenido\u2026",search_placeholder_ask:"Hacer una pregunta\u2026",search_blankslate:"Escribe algo para buscar",search_blankslate_ai:"Responderemos a la pregunta con un modelo de IA entrenado en el contenido.",search_blankslate_recent_searches:"B\xFAsquedas recientes",search_blankslate_recent_questions:"Preguntas recientes",search_blankslate_recommended_questions:"Quiz\xE1s te interese",search_blankslate_query:'No se encontraron resultados para "${1}"',search_answer_sources:"Respuesta basada en ${1} fuentes",search_answer_copy:"Copiar respuesta",search_answer_feedback_upvote:"Marcar como \xFAtil",search_answer_feedback_downvote:"Marcar como no relevante",search_answer_feedback_title:"\xA1Gracias por tu retroalimentaci\xF3n!",search_answer_feedback_details:"Esto nos ayudar\xE1 a mejorar el motor de respuesta.",search_answer_loading:"Analizando el contenido para responder tu pregunta\u2026",search_answer_loading_wait:"Esto puede tomar unos segundos m\xE1s.",search_answer_none_title:"No se encontr\xF3 respuesta para tu pregunta.",search_answer_none_details:"Esto puede indicar que no hay contenido relevante para tu pregunta o que la respuesta no se puede evaluar con suficiente confianza.",search_answer_error_title:"Error inesperado",search_answer_error_details:"Ha ocurrido un error. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",search_goto_section:"Ir a la secci\xF3n",search_goto_page:"Ir a la p\xE1gina",page_not_found:"P\xE1gina no encontrada",back_to_home:"Volver a la primera p\xE1gina",page_not_found_long:"Lo sentimos, pero no se ha podido encontrar la p\xE1gina que buscaba.",outline:"Esquema",last_modified:"\xDAltima actualizaci\xF3n ${1}",was_it_helpful:"\xBFTe ha sido \xFAtil esta p\xE1gina?",poor_content:"Contenido mediocre",ok_content:"Contenido OK",excellent_content:"Contenido excelente",powered_by:"Accionado por ${1}",previous:"Anterior",next:"Pr\xF3ximo",export_pdf:"Exportar como PDF",copy_link:"Copiar enlace",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"Editar en ${1}",page_articles_section:"Aqu\xED est\xE1n los art\xEDculos de esta secci\xF3n:",main:"Principal",cookie_policy:"pol\xEDtica de cookies",cookie_prompt:"Este sitio utiliza cookies para prestar su servicio y analizar el tr\xE1fico. Al navegar por este sitio, usted acepta la ${1}.",cookies:"Cookies",reject_all:"Rechazar todo",theme_change_appearance:"Cambiar apariencia",connection_lost:"Desconectado",network_troubleshooting:"Resoluci\xF3n de problemas de red",device_offline:"Su dispositivo puede estar desconectado, o GitBook esta experimentando problemas.",missing_content_title:"Ups, algo falta.",missing_content_description:"No pudimos encontrar la fuente original para mostrar este contenido.",table_of_contents:"Tabla de contenido",page_outline:"\xCDndice de p\xE1gina"},zh:{something_wrong:"\u51FA\u4E86\u70B9\u95EE\u9898\u3002",reload:"\u91CD\u88C5",let_us_know:"\u8BA9\u6211\u4EEC\u77E5\u9053\u53D1\u751F\u4E86\u4EC0\u4E48\u4E8B",we_have_been_notified:"\u6211\u4EEC\u7684\u56E2\u961F\u5DF2\u7ECF\u63A5\u5230\u901A\u77E5\u3002\u5982\u679C\u4F60\u60F3\u5E2E\u5FD9\uFF0C\u4F60\u53EF\u4EE5\u5728\u4E0B\u9762\u63CF\u8FF0\u53D1\u751F\u4E86\u4EC0\u4E48\u3002",search:"\u641C\u7D22",search_ask:"\u63D0\u95EE",search_placeholder:"\u641C\u7D22\u5185\u5BB9\u2026",search_placeholder_ask:"\u63D0\u95EE\u2026",search_blankslate:"\u8F93\u5165\u5173\u952E\u8BCD\u641C\u7D22",search_blankslate_ai:"\u6211\u4EEC\u5C06\u7528\u8BAD\u7EC3\u8FC7\u7684 AI \u6A21\u578B\u6765\u56DE\u7B54\u4F60\u7684\u95EE\u9898\u3002",search_blankslate_recent_searches:"\u6700\u8FD1\u641C\u7D22",search_blankslate_recent_questions:"\u6700\u8FD1\u63D0\u95EE",search_blankslate_recommended_questions:"\u4F60\u53EF\u80FD\u611F\u5174\u8DA3\u7684\u95EE\u9898",search_blankslate_query:'\u6CA1\u6709\u627E\u5230\u4E0E "${1}" \u76F8\u5173\u7684\u5185\u5BB9',search_answer_sources:"\u56DE\u7B54\u57FA\u4E8E ${1} \u6765\u6E90",search_answer_copy:"\u590D\u5236\u56DE\u7B54",search_answer_feedback_upvote:"\u6807\u8BB0\u4E3A\u6709\u7528",search_answer_feedback_downvote:"\u6807\u8BB0\u4E3A\u65E0\u7528",search_answer_feedback_title:"\u611F\u8C22\u60A8\u7684\u53CD\u9988\uFF01",search_answer_feedback_details:"\u8FD9\u5C06\u5E2E\u52A9\u6211\u4EEC\u6539\u8FDB\u56DE\u7B54\u5F15\u64CE\u3002",search_answer_loading:"\u6B63\u5728\u5206\u6790\u5185\u5BB9\u4EE5\u56DE\u7B54\u60A8\u7684\u95EE\u9898\u2026",search_answer_loading_wait:"\u8FD9\u53EF\u80FD\u9700\u8981\u51E0\u79D2\u949F\u3002",search_answer_none_title:"\u6CA1\u6709\u627E\u5230\u4E0E\u60A8\u7684\u95EE\u9898\u76F8\u5173\u7684\u56DE\u7B54\u3002",search_answer_none_details:"\u8FD9\u53EF\u80FD\u662F\u7531\u4E8E\u6CA1\u6709\u4E0E\u60A8\u7684\u95EE\u9898\u76F8\u5173\u7684\u5185\u5BB9\uFF0C\u6216\u8005\u56DE\u7B54\u4E0D\u80FD\u88AB\u5145\u5206\u4FE1\u4EFB\u3002",search_answer_error_title:"\u610F\u5916\u9519\u8BEF",search_answer_error_details:"\u53D1\u751F\u4E86\u4E00\u4E2A\u9519\u8BEF\u3002\u8BF7\u7A0D\u540E\u518D\u8BD5\u3002",search_goto_section:"\u8DF3\u8F6C\u5230\u7AE0\u8282",search_goto_page:"\u8DF3\u8F6C\u5230\u9875\u9762",page_not_found:"\u672A\u627E\u5230\u7F51\u9875",back_to_home:"\u8FD4\u56DE\u9996\u9875",page_not_found_long:"\u62B1\u6B49\uFF0C\u60A8\u8981\u627E\u7684\u9875\u9762\u65E0\u6CD5\u627E\u5230\u3002",outline:"\u5927\u7EB2",last_modified:"\u6700\u8FD1\u66F4\u65B0 ${1}",was_it_helpful:"\u6B64\u9875\u9762\u662F\u5426\u6709\u5E2E\u52A9\uFF1F",poor_content:"\u5185\u5BB9\u5DEE",ok_content:"\u597D\u7684\u5185\u5BB9",excellent_content:"\u4F18\u79C0\u7684\u5185\u5BB9",powered_by:"\u7531 ${1} \u63D0\u4F9B\u652F\u6301",previous:"\u4EE5\u524D",next:"\u4E0B\u4E00\u4E2A",export_pdf:"\u5BFC\u51FA\u4E3APDF",copy_link:"\u590D\u5236\u94FE\u63A5",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"\u5728 ${1} \u4E0A\u7F16\u8F91",page_articles_section:"\u4EE5\u4E0B\u662F\u672C\u8282\u4E2D\u7684\u6587\u7AE0\uFF1A",main:"\u4E3B\u8981",cookie_policy:"cookie\u653F\u7B56",cookie_prompt:"\u672C\u7F51\u7AD9\u4F7F\u7528cookies\u6765\u63D0\u4F9B\u670D\u52A1\u548C\u5206\u6790\u6D41\u91CF\u3002\u901A\u8FC7\u6D4F\u89C8\u672C\u7F51\u7AD9\uFF0C\u60A8\u63A5\u53D7\u6211\u4EEC\u7684${1}\u3002",cookies:"Cookies",reject_all:"\u62D2\u7EDD\u6240\u6709",theme_change_appearance:"\u6539\u53D8\u5916\u89C2",connection_lost:"\u8FDE\u63A5\u4E22\u5931",network_troubleshooting:"\u7F51\u7EDC\u6545\u969C\u6392\u9664",device_offline:"\u60A8\u7684\u8BBE\u5907\u53EF\u80FD\u5904\u4E8E\u79BB\u7EBF\u72B6\u6001\uFF0C\u6216\u8005 GitBook \u53EF\u80FD\u9047\u5230\u95EE\u9898\u3002",missing_content_title:"\u54CE\u5440\uFF0C\u6709\u4E9B\u4E1C\u897F\u4E22\u5931\u4E86\u3002",missing_content_description:"\u6211\u4EEC\u65E0\u6CD5\u627E\u5230\u539F\u59CB\u6765\u6E90\u4EE5\u663E\u793A\u6B64\u5185\u5BB9\u3002",table_of_contents:"\u76EE\u5F55",page_outline:"\u9875\u9762\u5927\u7EB2"},ja:{something_wrong:"\u4F55\u304B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002",reload:"\u30EA\u30ED\u30FC\u30C9",let_us_know:"\u4F55\u304C\u8D77\u3053\u3063\u305F\u306E\u304B\u3092\u6559\u3048\u3066\u304F\u3060\u3055\u3044",we_have_been_notified:"\u79C1\u305F\u3061\u306E\u30C1\u30FC\u30E0\u306F\u901A\u77E5\u3092\u53D7\u3051\u307E\u3057\u305F\u3002\u3054\u5354\u529B\u3044\u305F\u3060\u3051\u308B\u5834\u5408\u306F\u3001\u4F55\u304C\u8D77\u3053\u3063\u305F\u304B\u3092\u4EE5\u4E0B\u306B\u3054\u8A18\u5165\u304F\u3060\u3055\u3044\u3002",search:"\u691C\u7D22",search_ask:"\u8CEA\u554F\u3059\u308B",search_placeholder:"\u691C\u7D22\u2026",search_placeholder_ask:"\u8CEA\u554F\u2026",search_blankslate:"\u30AD\u30FC\u30EF\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u691C\u7D22",search_blankslate_ai:"\u8CEA\u554F\u306B\u5BFE\u3059\u308B\u56DE\u7B54\u306F\u3001AI\u30E2\u30C7\u30EB\u306B\u3088\u3063\u3066\u884C\u308F\u308C\u307E\u3059\u3002",search_blankslate_recent_searches:"\u6700\u8FD1\u306E\u691C\u7D22",search_blankslate_recent_questions:"\u6700\u8FD1\u306E\u8CEA\u554F",search_blankslate_recommended_questions:"\u304A\u3059\u3059\u3081\u306E\u8CEA\u554F",search_blankslate_query:'"${1}" \u306B\u95A2\u3059\u308B\u30B3\u30F3\u30C6\u30F3\u30C4\u306F\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F',search_answer_sources:"\u56DE\u7B54\u306F ${1} \u304B\u3089\u306E\u60C5\u5831\u3092\u5143\u306B\u3057\u3066\u3044\u307E\u3059",search_answer_copy:"\u56DE\u7B54\u3092\u30B3\u30D4\u30FC",search_answer_feedback_upvote:"\u5F79\u306B\u7ACB\u3063\u305F\u3068\u30DE\u30FC\u30AF",search_answer_feedback_downvote:"\u5F79\u306B\u7ACB\u305F\u306A\u304B\u3063\u305F\u3068\u30DE\u30FC\u30AF",search_answer_feedback_title:"\u30D5\u30A3\u30FC\u30C9\u30D0\u30C3\u30AF\u3042\u308A\u304C\u3068\u3046\u3054\u3056\u3044\u307E\u3059\uFF01",search_answer_feedback_details:"\u3053\u308C\u306B\u3088\u308A\u3001\u56DE\u7B54\u30A8\u30F3\u30B8\u30F3\u3092\u6539\u5584\u3067\u304D\u307E\u3059\u3002",search_answer_loading:"\u8CEA\u554F\u306B\u56DE\u7B54\u3059\u308B\u305F\u3081\u306B\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u5206\u6790\u3057\u3066\u3044\u307E\u3059\u2026",search_answer_loading_wait:"\u3053\u308C\u306B\u306F\u6570\u79D2\u304B\u304B\u308B\u5834\u5408\u304C\u3042\u308A\u307E\u3059\u3002",search_answer_none_title:"\u8CEA\u554F\u306B\u5BFE\u3059\u308B\u56DE\u7B54\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002",search_answer_none_details:"\u3053\u308C\u306F\u3001\u8CEA\u554F\u306B\u95A2\u9023\u3059\u308B\u30B3\u30F3\u30C6\u30F3\u30C4\u304C\u306A\u3044\u304B\u3001\u56DE\u7B54\u304C\u4FE1\u983C\u3067\u304D\u306A\u3044\u305F\u3081\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u3002",search_answer_error_title:"\u30A8\u30E9\u30FC",search_answer_error_details:"\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u5F8C\u3067\u3082\u3046\u4E00\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002",search_goto_section:"Go to section",search_goto_page:"Go to page",page_not_found:"\u30DA\u30FC\u30B8\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",back_to_home:"\u30D5\u30ED\u30F3\u30C8\u30DA\u30FC\u30B8\u306B\u623B\u308B",page_not_found_long:"\u7533\u3057\u8A33\u3042\u308A\u307E\u305B\u3093\u304C\u3001\u304A\u63A2\u3057\u306E\u30DA\u30FC\u30B8\u306F\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002",outline:"\u6982\u8981",last_modified:"\u6700\u7D42\u66F4\u65B0 ${1}",was_it_helpful:"\u3053\u306E\u30DA\u30FC\u30B8\u306F\u5F79\u306B\u7ACB\u3061\u307E\u3057\u305F\u304B\uFF1F",poor_content:"\u60AA\u3044\u5185\u5BB9",ok_content:"OK\u30B3\u30F3\u30C6\u30F3\u30C4",excellent_content:"\u512A\u308C\u305F\u5185\u5BB9",powered_by:"${1} \u4E0A\u3067\u52D5\u4F5C\u3057\u3066\u3044\u307E\u3059",previous:"\u524D",next:"\u6B21",export_pdf:"PDF\u306B\u51FA\u529B",copy_link:"\u30EA\u30F3\u30AF\u306E\u30B3\u30D4\u30FC",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"${1}\u3067\u7DE8\u96C6",page_articles_section:"\u3053\u306E\u30BB\u30AF\u30B7\u30E7\u30F3\u306E\u8A18\u4E8B\u306F\u6B21\u306E\u3068\u304A\u308A\u3067\u3059:",main:"\u4E00\u6B21",cookie_policy:"\u30AF\u30C3\u30AD\u30FC\u30DD\u30EA\u30B7\u30FC",cookie_prompt:"\u3053\u306E\u30B5\u30A4\u30C8\u3067\u306F\u3001\u30B5\u30FC\u30D3\u30B9\u306E\u63D0\u4F9B\u3084\u30C8\u30E9\u30D5\u30A3\u30C3\u30AF\u306E\u5206\u6790\u306E\u305F\u3081\u306B\u30AF\u30C3\u30AD\u30FC\u3092\u4F7F\u7528\u3057\u3066\u3044\u307E\u3059\u3002\u3053\u306E\u30B5\u30A4\u30C8\u3092\u95B2\u89A7\u3059\u308B\u3053\u3068\u3067\u3001\u304A\u5BA2\u69D8\u306F\u5F53\u793E\u306E${1}\u306B\u540C\u610F\u3057\u305F\u3053\u3068\u306B\u306A\u308A\u307E\u3059\u3002",cookies:"\u30AF\u30C3\u30AD\u30FC",reject_all:"\u5168\u3066\u3092\u62D2\u5426\u3059\u308B",theme_change_appearance:"\u5916\u89B3\u3092\u5909\u66F4\u3059\u308B",connection_lost:"\u63A5\u7D9A\u5207\u65AD",network_troubleshooting:"\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u306E\u30C8\u30E9\u30D6\u30EB\u30B7\u30E5\u30FC\u30C6\u30A3\u30F3\u30B0",device_offline:"\u30C7\u30D0\u30A4\u30B9\u304C\u30AA\u30D5\u30E9\u30A4\u30F3\u3067\u3042\u308B\u304B\u3001GitBook\u3067\u554F\u984C\u304C\u767A\u751F\u3057\u3066\u3044\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002",missing_content_title:"\u304A\u3063\u3068\u3001\u4F55\u304B\u304C\u5931\u308F\u308C\u3066\u3044\u307E\u3059\u3002",missing_content_description:"\u3053\u306E\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u8868\u793A\u3059\u308B\u305F\u3081\u306E\u5143\u306E\u30BD\u30FC\u30B9\u3092\u898B\u3064\u3051\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",table_of_contents:"\u76EE\u6B21",page_outline:"\u30DA\u30FC\u30B8\u6982\u8981"}};function le(){let{locale:t}=Ri.useContext(Jo),o=O8[t];return Ri.useCallback((e,...n)=>{let r=o[e]||O8.en[e],i=[],a=r;return n.forEach((c,l)=>{if(typeof c=="string")a=a.replace(`\${${l+1}}`,c);else{let[u,d]=a.split(`\${${l+1}}`);i.push(Ri.createElement(Ri.Fragment,{key:`string-${l}`},u)),i.push(Ri.createElement(Ri.Fragment,{key:`arg-${l}`},c)),a=d}}),i.length?Ri.createElement(Ri.Fragment,null,i,a):a},[t])}function Ym(){let t=le();return I8.createElement(bi,{kind:"default",title:t("missing_content_title"),details:t("missing_content_description")})}s();var cb=x(O());var $ee=K.createInteractiveComponent(yt),_8=cb.forwardRef(function(o,e){let{active:n=!1,children:r,onPress:i,style:a,...c}=o,[,l]=_(Yee);return cb.createElement($ee,{ref:e,...c,style:[a,n&&l.active],activeStyle:l.active,onMouseDown:u=>{u.preventDefault(),i()}},r)}),Yee=G.create({active:t=>({borderRadius:t.radiuses.medium,paddingHorizontal:g.xsmall,backgroundColor:"rgba(35, 131, 226, 0.14)",marginHorizontal:-g.xsmall,zIndex:-1,cursor:"pointer"})});function R8(t){let{editor:o,node:e,children:n,attributes:r,isFocused:i}=t,[,a]=_(Zee),{readOnly:c}=o,l=e.getFragmentByKey(va),{selection:u}=o.value,d=Kt(u)&&!!u.hasAnchorIn(l),p=i&&d,[m,f]=Mr.useState(!1),h=Kt(u)&&(m||p),y=Mr.useCallback(()=>{c||o.change(I=>{let P=e.getFragmentByKey(va);P&&(Kt(I.value.selection)?I.collapseToEndOf(P).focus():I.selectText(ye.fromBlockRange(I.value.selection,I.value.document)).collapseToEndOf(P).focus())})},[c,o,e.key]),w=Mr.useCallback(()=>{c||o.change(I=>{let P=I.value.document.getDescendant(e.key);if(P&&P.isInline()){let R=P.getFragmentByKey(va);R&&Kt(I.value.selection)&&I.value.selection.hasEdgeIn(R)&&I.collapseToEndOf(P)}})},[c,o,e.key]);Mr.useEffect(()=>{c||(h?y():w())},[h,c,y,w]),Mr.useEffect(()=>{c||!d&&m&&f(!1)},[d,m,c]);let C=()=>{y(),f(!0)},k=Mr.useCallback(()=>{f(!1)},[]);return Mr.createElement(Lg.Provider,{value:k},Mr.createElement(xa,{closeOnClick:!1,closeOnEsc:!0,closeOnScroll:!1,closeOnClickInNestedPortals:!1,closeOnOutsideClick:!0,opened:h,anchor:({ref:I})=>Mr.createElement(_8,{ref:I,style:a.annotationText,...r,onPress:C,active:h},n)},Mr.createElement(j7,{node:e,editor:o})))}var Zee=G.create({annotationText:t=>({textDecorationLine:"underline",textDecorationStyle:"dotted",textDecorationThickness:2,textDecorationColor:t.colors.text.muted})});s();var Qk=x(mi());var P8={onKeyDown:(t,o,e)=>{if(!Mo(o.value.selection)&&((0,Qk.default)("mod+enter",t)||(0,Qk.default)("esc",t))){let{value:n}=o,{startBlock:r,document:i}=n;if(!r)return;let a=i.getFragmentParent(r.key);if((a==null?void 0:a.object)!=="fragment"||a.type!==va)return;let c=i.getParent(a.key);return c?(o.collapseToEndOf(c),o):void 0}}};s();var Po=x(O());H();function E8(t){let{editor:o,node:e,children:n}=t,{readOnly:r}=o,i=e.data.toFrozenObject(),a=tt(),c=zg(i.syntax||"text"),l=typeof i.title=="string",u=Po.useRef(null),d=de(u),p=Po.useRef(null),m=de(p),f=(w,C)=>{o.change(k=>{k.insertDataByKey(e.key,["title"],w)})},h=()=>no.getCodeText(e),y=Jee(e.key);return Po.createElement(be,{...t,palette:y},Po.createElement(ER,{overflow:i.overflow||zI,lineNumbers:!!i.lineNumbers,header:l?Po.createElement(Qee,{title:i.title,isEditable:!r,onTitleChange:f}):null,showToolbar:d.opened||m.opened,translate:!1,toolbar:a?null:Po.createElement(Po.Fragment,null,r?null:Po.createElement(z,{ref:u,active:d.opened,kind:"secondary",size:"small",style:g.Margin.xsmallRight,rightIcon:v.ChevronDown,onPress:()=>{d.open(T8(o,e.key))}},c.title),Po.createElement(Ng,{kind:"secondary",size:"small",content:h}),r?null:Po.createElement(z,{ref:p,icon:v.MoreVertical,kind:"secondary",size:"small",style:g.Margin.xsmallLeft,title:"More options",onPress:()=>{m.open(y)}}))},n))}function Qee(t){let{title:o,isEditable:e,onTitleChange:n}=t,[r,i]=Po.useState(o),[a,c]=_(W);Po.useEffect(()=>{i(o)},[o]);let l=d=>{n(r||"",d)},u=[c.Body,c.textMuted];return Po.createElement(Ag,{style:[b.directionRow,b.alignCenter,g.Padding.mediumLeft]},e?Po.createElement(li,{value:r,placeholder:"Enter a filename",placeholderTextColor:a.colors.text.muted,onChangeText:d=>i(d),style:u,onBlur:l}):Po.createElement(V,{style:u},o))}function Jee(t){let o=Js(),e=Oi(o,t),n=r=>{let i=o.value.document.assertBlock(r),a=i.data.toFrozenObject(),c=typeof a.title=="string";return[{key:"code",commands:[{key:"syntax",title:"Set syntax\u2026",icon:v.Code,descendant:()=>T8(o,i.key)}]},{key:"code-options",commands:[{key:"with-line-numbers",icon:v.CodeLineNumbers,type:2,enabled:!!a.lineNumbers,title:"With line numbers",trigger:()=>(o.change(l=>{a.lineNumbers?l.removeDataPathByKey(i.key,["lineNumbers"]):l.setDataByKey(i.key,["lineNumbers"],!0)}),at(o,i.key,n(i.key)))},{key:"with-title",icon:v.CodeCaption,type:2,enabled:c,title:"With caption",trigger:()=>(o.change(l=>{c?l.removeDataPathByKey(i.key,["title"]):l.insertDataByKey(i.key,["title"],"")}),at(o,i.key,n(i.key)))},{key:"with-wrap",icon:v.CodeWrap,type:2,enabled:a.overflow==="wrap",title:"Wrap code",trigger:()=>(o.change(l=>{a.overflow==="wrap"?l.removeDataPathByKey(i.key,["overflow"]):l.setDataByKey(i.key,["overflow"],"wrap")}),at(o,i.key,n(i.key)))}]},...e?[e]:[]]};return at(o,t,n(t))}function T8(t,o){let e=t.value.document.assertBlock(o),n=e.data.get("syntax");return ce({search:"Select a syntax\u2026",groups:[{key:"syntaxes",commands:MR().map(r=>({type:1,key:r.key,selected:n===r.key,title:r.title,trigger:()=>{t.change(i=>{i.setDataByKey(e.key,["syntax"],r.key)})}}))}]})}s();var M8=x(O());function L8(t){let{node:o,parent:e,children:n,editor:r}=t,{diff:i,highlighted:a}=o.data.toFrozenObject(),c=()=>{r.change(l=>{l.setDataByKey(o.key,["highlighted"],!a)})};return M8.createElement(RR,{number:e.getChildIndex(o.key)+1,highlighting:i==="added"||i==="deleted"||i==="modified"?i:a?"highlighted":void 0,onPressGutter:r.readOnly?void 0:c},n)}s();var Vl=x(mi());var ete=(0,Vl.isKeyHotkey)("mod+a"),tte=(0,Vl.isKeyHotkey)("shift+tab"),ote=(0,Vl.isKeyHotkey)("tab"),nte=(0,Vl.isKeyHotkey)("mod+enter"),rte=(0,Vl.isKeyHotkey)("enter"),ite=(0,Vl.isKeyHotkey)("backspace"),D8={onKeyDown:ate,onPaste:ste};function ate(t,o,e){let{value:n}=o;if(Mo(n.selection))return;let r=no.getCurrentCode(n);if(r){if(ete(t))return cte(r,t,o,e);if(tte(t))return ute(r,t,o,e);if(ote(t))return lte(r,t,o,e);if(nte(t))return pte(r,t,o,e);if(rte(t))return dte(r,t,o,e);if(ite(t))return mte(r,t,o,e)}}function ste(t,o,e){let{value:n}=o;if(Mo(n.selection))return;let r=no.getCurrentCode(o.value),{endBlock:i}=n;if(!r||!i||!r.hasDescendant(i.key))return;let a=Ru(t),c;a.type==="fragment"&&a.fragment?c=a.fragment.getTexts().map(d=>d.text).join(`
`):c=a.text||"";let l=no.createCodeBlock(c).blockNodes,u=Ks.create({nodes:l});return o.insertDocument(u)}function cte(t,o,e,n){o.preventDefault();let r=t.getFirstText(),i=t.getLastText();if(!(!r||!i))return e.collapseToStartOf(r).extendToEndOf(i)}function lte(t,o,e,n){let{value:r}=e;o.preventDefault(),o.stopPropagation();let{isCollapsed:i}=r,a=no.getIndent(no.getCodeText(t));return i?e.insertText(a).focus():no.indentLines(e,a)}function ute(t,o,e,n){o.preventDefault(),o.stopPropagation();let r=no.getIndent(no.getCodeText(t));return no.dedentLines(e,r)}function dte(t,o,e,n){let{value:r}=e;if(!r.isCollapsed)return;o.preventDefault();let{startBlock:i}=r;if(!i)return;let a=i.text,c=no.getIndent(a,"");return e.splitBlock().insertText(c).focus()}function pte(t,o,e,n){let{value:r}=e;if(r.isCollapsed)return o.preventDefault(),kt(e,t),e}function mte(t,o,e,n){let{value:r}=e;if(r.isExpanded)return;let{startOffset:i,startText:a}=r,c=r.startBlock;if(!c)return;let l=no.getIndent(no.getCodeText(t));if(c.text.slice(0,i).endsWith(l))return o.preventDefault(),e.deleteBackward(l.length).focus();let d=i===0&&t.getFirstText()===a,p=t.nodes.size===1&&c.text.length===0;if(d&&p)return o.preventDefault(),e.setBlocks(ge,{normalize:!1}).unwrapNodeByKey(c.key)}s();var Wa=x(O());H();function lb(t){let{url:o,readOnly:e}=t,[n]=Wy(o),{data:r}=n,i=N7(e?null:o),a=i?Wa.createElement(fte,{...i}):null;if(!r)return Wa.createElement(Tr,null);if(r.type==="rich"&&r.html){let c=Wa.createElement("div",{dangerouslySetInnerHTML:{__html:r.html}});return a?Wa.createElement(S,null,c,Wa.createElement(S,{style:gte.overlayInstallButton},a)):c}return Wa.createElement(La,{href:o,title:r.title,details:r.site,icon:r.icon?Ct(Ca,{source:{uri:r.icon}}):void 0,onPress:c=>{c.preventDefault(),fs(o)},buttons:a?[a]:[]})}function fte(t){let{integration:o}=t,{navigate:e}=xe(),{logAnalyticsEvent:n}=Wa.useContext(Ge),r=i=>{i.stopPropagation(),i.preventDefault(),n({type:"edit_open_integration",integration:o.name,reason:"embed"}),e({overlay:{type:"integrations",integration:o.name}})};return Wa.createElement(z,{kind:"secondary",size:"medium",icon:Ct(Du,{integration:o}),title:`Install the ${o.title} integration to supercharge this block`,tooltipPreferredPlacement:"left",onPress:r},"Install ",o.title)}var gte=Q.create({overlayInstallButton:{position:"absolute",bottom:g.medium,right:g.medium}});s();var lo=x(O());s();var Bc=x(O());H();function qc(t){let{node:o,editor:e,isSelected:n}=t,{readOnly:r}=e,[,i]=_(W),a=K.useInteractiveState(),c=o.fragments.get(VI),l=c==null?void 0:c.isEmpty;return c?(n||a.hovered)&&!r||!l?Bc.createElement(S,{style:[N8.editableCaption,g.Padding.smallTop],...a.events},l?Bc.createElement(S,{style:[Q.absoluteFill,b.alignCenter,b.justifyContentCenter,g.Padding.smallTop]},Bc.createElement(V,{style:[i.Italic,i.Body,i.textMuted]},"Write a caption")):null,Bc.createElement(_r.Provider,{value:"caption"},Bc.createElement(kc.Provider,{value:"center"},Bc.createElement(tr,{fragment:"caption"})))):r?null:Bc.createElement(S,{style:[g.Padding.smallTop,N8.blankPlaceHolder],...a.events}):null}var N8=Q.create({editableCaption:{position:"relative",textAlign:"center"},blankPlaceHolder:{height:g.small+Rg.xsmall}});s();var en=x(O());s();var Wc=x(O());function ub(t){let{children:o}=t,[e,n]=Wc.useState(!1);return Wc.useEffect(()=>{n(!0)},[]),e?Wc.createElement(Wc.Fragment,null,o):null}s();var db=x(O());function A8(t){let{children:o,statusCode:e}=t,n=aP();return n.staticContext&&(n.staticContext.statusCode=e),db.createElement(db.Fragment,null,o)}var pb=en.forwardRef(function(o,e){let{data:n,readOnly:r,onDataChange:i}=o,{integrationBlocksRemote:a,integrationBlocksContext:c}=en.useContext(Ge),l=en.useRef(null);if(!c)throw new Error("Expected integration blocks context to be defined");let u={integrationId:n.integration,componentId:n.block,props:n.props,action:n.action,context:c},[d,p]=vP(async m=>{var f;return(f=l.current)==null?void 0:f.dispatchAction(m)});return en.useImperativeHandle(e,()=>({getPaletteGroups:()=>{let{result:m}=a.readCacheState(u);return m&&m.element.type==="block"?d(m.element):[]}})),en.createElement(en.Fragment,null,p,en.createElement(en.Suspense,{fallback:en.createElement(Tr,null)},en.createElement(ub,null,en.createElement(SP,{ref:l,mode:"block",remote:a,input:u,security:{firstPartyDomains:[fa.integrations.domain]},onPropsChange:m=>{r||i({...n,action:void 0,props:m})}}))))});function B8(t){let{node:o,editor:e}=t,{readOnly:n}=e,r=o.data.toFrozenObject(),{integrationsBlocksSubscription:i}=lo.useContext(Ge),a=lo.useSyncExternalStore(i.subscribe,i.getCurrentValue,()=>i.getCurrentValue()),c=lo.useMemo(()=>{let d=xu(a,r.url);return d?yu.createIntegrationBlockDataForLinkUnfurl(d.integrationKey,d.block.id,r.url):null},[a,r.url]),l=Oi(e,o.key),u=()=>at(e,o.key,l?[l]:[]);return c?lo.createElement(be,{palette:u,...t},lo.createElement(Bt,{...t},lo.createElement(lo.Suspense,{fallback:lo.createElement(Tr,null)},lo.createElement(pb,{data:c,readOnly:n,onDataChange:d=>{e.change(p=>{p.setNodeByKey(o.key,{type:di,data:d})})}})))):lo.createElement(be,{palette:u,...t},lo.createElement(Bt,{...t},lo.createElement(lo.Suspense,{fallback:lo.createElement(Tr,null)},lo.createElement(lb,{url:r.url,readOnly:n}))),lo.createElement(qc,{...t}))}s();var qt=x(O());s();var Pd=x(O());function q8(t){let{integrationName:o}=t,[{result:e}]=oh([bg(o)]);return e?Pd.createElement(hte,{integration:e}):Pd.createElement(bi,{kind:"default",title:`Integration ${o} no longer exist or has been unpublished.`})}function hte(t){let{integration:o}=t,e=Mg(No(Du,{integration:o},[o])),{navigate:n}=xe(),{logAnalyticsEvent:r}=Pd.useContext(Ge);return Pd.createElement(bi,{kind:"default",icon:e,title:`Integration ${o.title} is not configured. Install it to get started.`,actions:[{label:"Install",onPress:()=>{r({type:"edit_open_integration",integration:o.name,reason:"empty"}),n({overlay:{type:"integrations",integration:o.name}})}}]})}function W8(t){let{node:o,editor:e}=t,{readOnly:n}=e,r=qt.useRef(null),{integrationsBlocksSubscription:i}=qt.useContext(Ge),{navigate:a}=xe(),c=qt.useSyncExternalStore(i.subscribe,i.getCurrentValue,()=>i.getCurrentValue()),l=o.data.toFrozenObject(),u=Oi(e,o.key),d=()=>{var m;return at(e,o.key,[...((m=r==null?void 0:r.current)==null?void 0:m.getPaletteGroups())||[],{key:"integration",commands:()=>{let[{result:f}]=Mu([bg(l.integration)]);return f?[{key:"integration.settings",icon:Ct(Du,{integration:f}),title:`Configure ${f.title}`,trigger:()=>{a({overlay:{type:"integrations",integration:f.name}})}}]:[]}},...u?[u]:[]])};return qt.useMemo(()=>q_(c,l.integration,l.block),[c,l.integration,l.block])?qt.createElement(be,{...t,palette:d},qt.createElement(Bt,{...t},qt.createElement(qt.Suspense,{fallback:qt.createElement(Tr,null)},qt.createElement(pb,{ref:r,data:l,readOnly:n,onDataChange:m=>{e.change(f=>{f.setNodeByKey(o.key,{data:m})})}})))):qt.createElement(be,{...t,palette:d},qt.createElement(Bt,{...t},qt.createElement(qt.Suspense,{fallback:qt.createElement(Tr,null)},l.url?qt.createElement(lb,{url:l.url,readOnly:n}):n?qt.createElement(Ym,null):qt.createElement(q8,{integrationName:l.integration}))))}s();var mb=x(mi()),F8=x(O());function z8(t){return F8.useMemo(()=>({onKeyDown:(o,e)=>{let{value:n}=e;if(!n.isCollapsed||!(0,mb.default)("enter",o))return;let{startBlock:r,selection:i}=n;if(!ye.isTextRange(i)||!r||r.type!==ge||!i.isAtEndOf(r))return;let{text:a}=r;if(!ui(a))return;let c=n.document.getParent(r.key);if(!c||!De(c,vn))return;let l=Uf(a,{sortQueryParameters:!1}),u=yte(l,t);e.replaceNodeByKey(r.key,u).collapseToStartOf(u)}}),[t])}var V8={onKeyDown:(t,o,e)=>{if((0,mb.default)("enter",t)||(0,mb.default)("shift+enter",t)){let{value:n}=o,{startBlock:r,document:i}=n;if(!r||r.type!==ge)return;let a=i.getFragmentParent(r.key);if((a==null?void 0:a.object)!=="fragment")return;let c=i.getParent(a.key);if(!c||!c.isBlock()||![vn,qi,es,Ja].includes(c.type))return;let l=c.type===qi?i.getParent(c.key):c;return kt(o,l),o}}};function yte(t,o){let e=o(),n=xu(e,t);return n?yu.createIntegrationBlockForLinkUnfurl(n.integrationKey,n.block.id,t):ag.createEmbedBlock(t)}s();var Jk=x(O());s();var Ed=x(O());function G8(t){let{mark:o,node:e,offset:n,attributes:r,children:i,editor:a}=t,{value:c}=o.data.toObject(),l=Ed.useRef(null),u=wo(c),d=de(l);return Ed.useEffect(()=>{if(!d.opened&&a.value.isFocused){let p=m=>{a.change(f=>{let h=ye.create({anchorKey:e.key,anchorOffset:n,focusKey:e.key,focusOffset:n+u.current.length+1});f.insertInlineAtRange(h,sg.createEmoji(m)).focus()})};d.open(tc(ad(p,{withSearch:!1}),c))}else d.typeQuery(c);return()=>{d.close()}},[d,c]),Ed.createElement(yt,{ref:l,...r},i)}s();var nf=x(O());function H8(t){let{editor:o,node:e,parent:n}=t,r=nf.useRef(null),i=de(r),a=Qv(n.object==="block"?n:null),c=wy(()=>{i.open(ad(l=>{o.change(u=>{u.setNodeByKey(e.key,{data:{code:l}})})}))});return nf.createElement(_d,{ref:r,...t,onPress:o.readOnly?void 0:c},nf.createElement(Bo,{code:e.data.get("code"),size:a}))}var K8="emojiContext",vte=/(^|\s):(\w*)$/,X8={renderMark:Ste,renderNode:wte,decorateValue:bte};function bte(t){let{selection:o}=t,e=Cte(t),n=[];return ye.isTextRange(o)&&e!==null&&n.push(ye.create({anchorKey:o.startKey,anchorOffset:o.startOffset-e.length-1,focusKey:o.startKey,focusOffset:o.startOffset,marks:[{type:K8,data:{value:e}}],isAtomic:!0})),n}function Ste(t){let{mark:o}=t;switch(o.type){case K8:return Jk.createElement(G8,{...t})}}function wte(t){let{node:o}=t;switch(o.type){case fp:return Jk.createElement(H8,{...t})}}function Cte(t){if(!t.isCollapsed)return null;let{document:o,startText:e,startBlock:n,selection:r}=t;if(!ye.isTextRange(r)||!e||!n||!as({document:o,block:n},fp))return null;let{startOffset:i}=r,a=e.text.slice(0,i),c=vte.exec(a);return c==null?null:c[2]}s();var Et=x(O());H();function xte(t,o,e){for(let[n,r]of t.entries())if(r===e){let i=o.getNode(n);return i?{key:n,id:r,node:i}:null}}function U8(t){let o=K.useInteractiveState(),{node:e,isFocused:n,editor:r}=t,[,i]=_(kte),[,a]=_(W),{sections:c,selected:l}=Et.useContext(Ci),u=tt(),d=Et.useRef(""),[p,m]=Et.useState("unset");Et.useEffect(()=>{d.current="",m("unset")},[l]);let f=l&&c.get(e.key)===l,h=Et.useMemo(()=>!f&&!!xte(c,e,l),[f,c,e,l]);f&&(d.current=l);let{selection:y}=r.value,w=ye.isTextRange(y)&&y.hasEdgeIn(ss.getBodyFragment(e)),C=n&&ye.isTextRange(y)&&!y.hasFocusInFragmentOf(e),k=u||(p==="unset"?f||h||l===d.current:p==="expanded"),I=k?v.ChevronDown:v.ChevronRight,P=()=>{k&&w&&r.change(Ee=>{Ee.collapseToStartOf(ss.getTitleFragment(e))}),m(k?"collapsed":"expanded")},{anchoredBlockId:R,onAnchoredBlockPress:D,anchorElement:E,anchoredBlockInteractiveState:T}=ab(e,{accessibilityLabel:"Direct link to expandable block",onBlockPress:P}),q=Et.useId(),F={id:q,controls:{accessibilityRole:"button",accessibilityExpanded:k,accessibilityControls:`expandable-body-${q}`,accessibilityLabelledBy:`expandable-title-${q}`},chevron:{accessibilityRole:"presentation"},body:{accessibilityRole:"region",accessibilityLabelledBy:`expandable-title-${q}`}},U=e.fragments.get(os),$=U==null?void 0:U.nodes.first(),X=Ii($,U||e),oe=M.ICON_M,we=X.paddingTop+(sr($)-oe)/2;return Et.createElement(be,{...t},Et.createElement(Bt,{...t,isFocused:C},Et.createElement(S,{...o.events,style:[i.expandable,o.active&&i.expandableActive],nativeID:R},Et.createElement(S,{style:[b.directionRow,g.Padding.mediumRight],...T.events},Et.createElement(K.TouchableOpacity,{onPress:D,style:[g.Padding.mediumHorizontal,b.directionRow,b.justifyContentCenter,{paddingTop:we}],...F.controls},Et.createElement(I,{size:oe,style:[o.active?a.primary:a.textMuted],...F.chevron})),Et.createElement(S,{style:[b.flex1,{paddingTop:X.paddingTop,paddingBottom:k?g.small:X.paddingBottom}],nativeID:`expandable-title-${q}`},Et.createElement(_r.Provider,{value:"expandableTitle"},Et.createElement(tr,{fragment:os}))),Et.createElement(S,{style:{paddingTop:we}},E)),Et.createElement(S,{style:[i.expandableBody,!k&&i.hidden],nativeID:`expandable-body-${q}`,...F.body},Et.createElement(tr,{fragment:ll})))))}var kte=G.create({hidden:{visibility:"hidden",height:0,padding:0,overflow:"hidden"},expandable:t=>({breakInside:"avoid",borderWidth:1,borderColor:t.colors.border.main,borderRadius:t.radiuses.large}),expandableActive:t=>({borderColor:t.colors.primary.main}),expandableBody:{padding:g.medium,paddingLeft:g.medium+M.ICON_M+g.medium,paddingTop:0}});s();var eO=x(mi());var j8={onKeyDown:Ote};function Ote(t,o){if(!Mo(o.value.selection)){if((0,eO.default)("mod+enter",t))return _te(t,o);if((0,eO.default)("enter",t))return Ite(t,o)}}function Ite(t,o){var n;let e=ss.getCurrentExpandable(o.value);if(e&&((n=e.fragment)==null?void 0:n.type)===os)return o.collapseToStartOf(e.expandable.getFragmentByKey(ll)).focus()}function _te(t,o){let{value:e}=o,n=ss.getCurrentExpandable(o.value);if(!(!n||!e.isCollapsed))return t.preventDefault(),kt(o,n.expandable),o}s();var Y8=x(mi()),Z8=x(O());s();var fb=x(O());function $8(t){let{mark:o,node:e,offset:n,attributes:r,children:i,editor:a}=t,{value:c}=o.data.toObject(),l=fb.useRef(null),u=_t(),d=ye.create({anchorKey:e.key,anchorOffset:n,focusKey:e.key,focusOffset:n+1}),p=Hv({anchorRef:l,range:d,editor:a}),m=de(l,{onClose:()=>{m.close(),!u.isOpen()&&a.change(f=>f.focus())}});return Sy(()=>{!m.opened&&a.value.isFocused&&m.open(ce({groups:[{key:"inline-controls",commands:p.filter(f=>c.includes(f.key))}]}))},150),fb.createElement(yt,{ref:l,...r},i)}var Rte=[mu,fp,bn,Qf],Q8="inlineControlsContext",Pte=/(^|\s)\/$/,J8={renderMark:Tte,decorateValue:Ete,onKeyDown:(t,o,e)=>{if(e3(e.value)&&(0,Y8.default)("esc",t))return o}};function Ete(t){let{selection:o}=t,e=e3(t),n=[];return Kt(o)&&e!==null&&n.push(ye.create({anchorKey:o.startKey,anchorOffset:o.startOffset-1,focusKey:o.startKey,focusOffset:o.startOffset,marks:[{type:Q8,data:{value:e}}],isAtomic:!0})),n}function Tte(t){let{mark:o}=t;switch(o.type){case Q8:return Z8.createElement($8,{...t})}}function e3(t){if(!t.isCollapsed)return null;let{startText:o,startBlock:e,selection:n}=t;if(!Kt(n)||!o||!e)return null;let{startOffset:r}=n,i=o.text.slice(0,r);if(Pte.exec(i)==null)return null;let c=Rte.filter(l=>as({document:t.document,block:e},l));return c.length===0?null:c}s();var Fa=x(O());H();s();var dn=x(O());H();function t3(t){let{resolved:o,node:e,editor:n,children:r}=t,i=pt(),a=dn.useRef(null),c=dn.useRef(null),[l,u]=dn.useState(!1),[d,p]=dn.useState(!1),[,m]=_(o3),f=Ce(),h=l||d,y=K.useInteractiveState({hoverDelay:500,onHoverIn:()=>{u(!0)},onHoverOut:()=>{u(!1)}}),w=K.useInteractiveState({onHoverIn:()=>{p(!0)},onHoverOut:()=>{p(!1)}});$s({opened:h,closeOnClick:!1,closeOnScroll:!0,onClose:()=>{u(!1),p(!1)}},c);let C=de(a),k=()=>{n.change(P=>{P.unwrapInlineByKey(e.key)})},I=()=>{C.open(Pn(P=>{n.change(R=>{R.setDataByKey(e.key,["ref"],P)})},{...i,document:n.value.document},f))};return dn.createElement(xa,{ref:c,anchorRef:a,wrapper:yi,opened:h,updateOnScroll:!1,anchor:({ref:P})=>r(P,{...y.events,style:C.opened?m.linkBeingEdited:null})},dn.createElement(S,{style:[Q.absoluteFill],...w.events},dn.createElement(mR,{kind:"tooltip",preferredAlignment:"start"},dn.createElement(S,null,dn.createElement(Mte,{resolved:o,onPressEdit:I,onPressRemove:k})))))}function Mte(t){let{resolved:o,onPressEdit:e,onPressRemove:n}=t,r=o.icon||o.secondaryIcon,[,i]=_(o3);return dn.createElement(S,{style:[b.directionRow,b.alignCenter,g.Padding.xsmall]},dn.createElement(S,{style:[i.buttonWrapper,b.directionRow]},dn.createElement(z,{title:"Edit link",icon:r,size:"small",kind:"default_inverted",onPress:e,style:b.flex1},o.title)),dn.createElement(S,null,dn.createElement(z,{title:"Remove link",kind:"default_inverted",icon:v.Trashcan,size:"small",onPress:n})))}var o3=G.create({buttonWrapper:{maxWidth:200},linkBeingEdited:t=>({backgroundColor:t.colors.background.standout})});var Lte=K.createInteractiveComponent(yt);function r3(t){return Fa.createElement(Fa.Suspense,{fallback:Fa.createElement(i3,{...t,resolved:null})},Fa.createElement(Dte,{...t}))}function Dte(t){let{node:o}=t,{ref:e}=o.data.toFrozenObject(),n=ot(e);return Fa.createElement(i3,{...t,resolved:n})}var n3=K.createInteractiveHandle("link");function i3(t){let{node:o,attributes:e,children:n,resolved:r,editor:i}=t,{readOnly:a}=i,[,c]=_(W),l=(u,d={})=>Fa.createElement(K.TouchableOpacity,{ref:u,handle:n3,...r?Ic(r):{},...d,style:[Nte.wrapper,d.style]},Fa.createElement(Lte.Child,{...e,descendantOf:n3,hoverStyle:[c.primaryStandout,c.Underline],inactiveStyle:c.primary},n));return a||!r?l():Fa.createElement(t3,{resolved:r,editor:i,node:o},l)}var Nte=Q.create({wrapper:{display:"inline"}});s();var a3=x(O());function s3(t){let o=pt(),e=Ce(),{logAnalyticsEvent:n}=t;return a3.useMemo(()=>({onPaste:(r,i,a)=>{let c=Ru(r);if(!((c.type==="text"||c.type==="html")&&typeof c.text=="string"&&(ui(c.text)||_I(c.text))))return;let l=c.text,{value:u}=i;u.isCollapsed&&i.insertText(l).extend(-l.length);let d={kind:"url",url:l};i.wrapInline({type:bn,data:{ref:d}});let p=i.value.inlines.filter(f=>f.type===bn&&f.data.has("ref")&&yg(f.data.get("ref"),d)===!1);i.collapseToEnd();let m=gg(l);return m&&Cp(()=>hg(m,o,{hiveClient:e}),null).then(f=>{f&&a.change(h=>{p.forEach(y=>{let w=h.value.document.getByKey(y.key);w&&h.setDataByKey(w.key,["ref"],f)})})}),n(of(r,"link")),i}}),[o,e])}s();var hb=x(O());s();var c3=x(O());var gb=c3.createContext(Ut);function l3(t){let{node:o,children:e,attributes:n}=t;return hb.createElement(be,{...t},hb.createElement(he,{tag:o.type===Ut?"ol":"ul",...n},hb.createElement(gb.Provider,{value:o.type},e)))}s();var Pi=x(O());H();function u3(t){let{node:o,parent:e,children:n,editor:r}=t,{readOnly:i}=r,[,a]=_(W),c=Pi.useContext(gb),l=o.data.toFrozenObject(),u=c===yo,d=c===Ut,p=c===vo,m=Pi.useMemo(()=>at(r,o.key,[{key:"list",commands:[{key:"ul",type:1,title:"Unordered List",icon:v.ListUnordered,selected:e.type===yo,trigger:()=>{r.change(w=>{w.setNodeByKey(e.key,{type:yo})})}},{key:"ol",type:1,title:"Ordered List",icon:v.ListOrdered,selected:e.type===Ut,trigger:()=>{r.change(w=>{w.setNodeByKey(e.key,{type:Ut})})}},{key:"tasks",type:1,title:"Tasks List",icon:v.ListTasks,selected:e.type===vo,trigger:()=>{r.change(w=>{w.setNodeByKey(e.key,{type:vo})})}}]}]),[r,o.key,e.type]),f=w=>{r.change(C=>{ft.checkTaskItem(C,o.key,w)})},h=sr(o.nodes.first()),y=w=>w<10?g.medium:w<100?g.large:"auto";return Pi.createElement(be,{tag:"li",palette:m,contentProps:{style:rf.blockListItem},...t},p&&Pi.createElement(he,{editable:!1,style:[rf.blockListItemPrefix,{height:h}]},Pi.createElement(ec,{value:!!l.checked,onValueChange:f,readOnly:i,size:M.ICON_M})),u&&Pi.createElement(he,{editable:!1,style:[rf.blockListItemPrefix,{height:h}]},Pi.createElement(v.Dot,{size:12,style:a.text})),d&&Pi.createElement(yt,{editable:!1,style:[rf.blockListItemPrefix,{height:h,width:y(e.getChildIndex(o.key)+1)},a.Body,a.text]},Ate(e,o)),Pi.createElement(S,{style:rf.blockListItemContent},n))}function Ate(t,o){let e=t.data.toFrozenObject(),n=t.getChildIndex(o.key);return`${(e.start||1)+n}.`}var rf=Q.create({blockListItem:{position:"relative",display:"flex",flexDirection:"row"},blockListItemPrefix:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:g.small,marginRight:g.small},blockListItemContent:{flex:1}});s();var af=x(mi());var Bte=(0,af.isKeyHotkey)("tab"),qte=(0,af.isKeyHotkey)("shift+tab"),Wte=(0,af.isKeyHotkey)("enter"),Fte=(0,af.isKeyHotkey)("backspace"),d3={onKeyDown:Vte,shouldNodeComponentUpdate:zte};function zte(t,o){if(t.node.type===Zo){let{parent:e,node:n}=t,{parent:r,node:i}=o;if(e.object!=="block"||r.object!=="block")throw new Error("Parent of list-item must be a block");if(e.type===Ut&&e.getChildIndex(n.key)!==r.getChildIndex(i.key))return!0}return null}function Vte(t,o,e){if(Wte(t))return Gte(t,o,e);if(Bte(t)||qte(t))return Kte(t,o,e);if(Fte(t))return Hte(t,o,e)}function Gte(t,o,e){if(t.shiftKey)return;let{value:n}=o,r=ft.getCurrentItem(n);if(!r)return;if(t.preventDefault(),n.isExpanded&&o.delete(),r.isEmpty)return ft.getItemDepth(n)>1?ft.decreaseItemsDepth(o):ft.unwrapList(o);ft.splitListItem(o);let i=ft.getListForItem(o.value,r);if(i&&i.type===vo){let a=o.value.document.getNextSibling(r.key);return a?ft.checkTaskItem(o,a.key,!1):o}return o}function Hte(t,o,e){let{value:n}=o,{startOffset:r,selection:i}=n;if(!ye.isTextRange(i)||i.isExpanded||r>0)return;let a=ft.getCurrentItem(n);if(a&&i.isAtStartOf(a))return t.preventDefault(),ft.unwrapList(o)}function Kte(t,o,e){return t.shiftKey?(t.preventDefault(),ft.decreaseItemsDepth(o)):(t.preventDefault(),ft.increaseItemsDepth(o))}s();s();var m3=x(mi());function Xte(t){let{transform:o}=t,e=t.onHotkey?(0,m3.isKeyHotkey)(t.onHotkey):()=>!1,n=t.onInput?Ute(t.onInput):()=>!1,r=t.ignoreIn?p3(t.ignoreIn):null,i=t.onlyIn?p3(t.onlyIn):null;function a(p,m,f){if(!e(p))return;let h=u(m.value);if(h)return l(h,p,m,f),!0}function c(p,m,f){if(p.inputType!=="insertText"||!n(p))return;let h=u(m.value);if(h)return l(h,p,m,f),!0}function l(p,m,f,h){let{value:y}=f,{startOffset:w}=y,C=0;return d(p,w).forEach(I=>{f.moveOffsetsTo(I.start,I.end).delete(),C+=I.total}),w-=C,f.moveOffsetsTo(w,w),f.call(o,m,p,h),m.preventDefault(),!0}function u(p){if(p.isExpanded)return null;let{startBlock:m}=p;if(!m)return null;let{type:f}=m;if(i&&!i(f)||r&&r(f))return null;let{startText:h,startOffset:y}=p;ze(h);let{text:w}=h,C=null,k=null;return t.after&&(C=w.slice(y).match(t.after)),t.before&&(k=w.slice(0,y).match(t.before)),t.before&&t.after&&!k&&(C=null),t.before&&t.after&&!C&&(k=null),!k&&!C?null:(C&&(C[0]=C[0].replace(/\s+$/,"")),k&&(k[0]=k[0].replace(/^\s+/,"")),{before:k,after:C})}function d(p,m){let{before:f,after:h}=p,y=[],w=0;if(f){let C=f[0],k=0,I=0;f.slice(1,f.length).forEach(P=>{P!==void 0&&(I=C.indexOf(P,I),k=m-w+I-C.length,y.push({start:k,end:k+P.length,total:P.length}),w+=P.length,I+=P.length)})}if(h){let C=h[0],k=0,I=0;h.slice(1,h.length).forEach(P=>{P!==void 0&&(I=C.indexOf(P,I),k=m-w+I,y.push({start:k,end:k+P.length,total:0}),w+=P.length,I+=P.length)})}return y}return{onKeyDown:a,onBeforeInput:c}}function Ute(t){if(typeof t=="string")return o=>!!(o.data&&o.data===t);if(typeof t=="function")return t;if(t instanceof RegExp)return o=>!!(o.data&&o.data.match(t));throw new Error("Invalid onInput option")}function p3(t){if(Array.isArray(t))return o=>t.includes(o);if(typeof t=="string")return o=>o===t;if(typeof t=="function")return t;throw new Error("Invalid matcher type")}var Qr=Xte;var jte=Qr({onlyIn:[ge],onInput:"*",before:/\*\*[^*]+?\*$/,transform:(t,o,e)=>{if(Td(t.value,[Yn,bo])||yb(t.value))return t.insertText("*");let n=e.before[0].slice(2).slice(0,-1);return sf(t.value,n,[bo,Zn])?t.insertText("*"):t.deleteBackward(n.length+3).addMark(Yn).insertText(n).removeMark(Yn)}}),$te=Qr({onlyIn:[ge],onInput:"_",before:/\b_[^_]+?$/,transform:(t,o,e)=>{if(Td(t.value,[Zn,bo])||yb(t.value))return t.insertText("_");let n=e.before[0].slice(1);return sf(t.value,n,[Yn,bo])?t.insertText("_"):t.deleteBackward(n.length+1).addMark(Zn).insertText(n).removeMark(Zn)}}),Yte=Qr({onlyIn:[ge],onInput:"~",before:/\~\~[^*]+?\~$/,transform:(t,o,e)=>{if(Td(t.value,[Fr,bo])||yb(t.value))return t.insertText("~");let n=e.before[0].slice(2).slice(0,-1);return sf(t.value,n,[Fr,bo])?t.insertText("~"):t.deleteBackward(n.length+3).addMark(Fr).insertText(n).removeMark(Fr)}}),Zte=Qr({onlyIn:[ge],onInput:/`/,before:/`[^`]+?$/,transform:(t,o,e)=>{if(Td(t.value,bo))return t.insertText("`");let n=e.before[0].slice(1);return sf(t.value,n,[Yn,Zn])?t.insertText("`"):t.deleteBackward(n.length+1).addMark(bo).insertText(n).removeMark(bo)}}),Qte=Qr({onlyIn:[ge],onInput:"$",before:/\$\$[^*]+?\$$/,transform:(t,o,e)=>{if(Td(t.value,bo)||yb(t.value))return t.insertText("$");let n=e.before[0].slice(2).slice(0,-1);if(sf(t.value,n,[Yn,bo,Zn]))return t.insertText("$");t.deleteBackward(n.length+3);let r=dl.createMathInline(n);return t.insertInline(r),t}}),Jte=Qr({onlyIn:[ge],onHotkey:"enter",before:/^\$\$$/,transform:(t,o,e)=>{let n=dl.createMathBlock();return g3(t,n)}}),eoe=Qr({onlyIn:[ge],onInput:" ",before:/^(-|\*)$/,transform:t=>f3(t.value)?t:ft.wrapInList(t,yo)}),toe=Qr({onlyIn:ge,onInput:" ",before:/^(([1-9]{1}\d*)\.)$/,transform:(t,o,e)=>{if(f3(t.value))return t;let n=parseInt(e.before[1],10);return ft.wrapInList(t,Ut,n&&n!==1?{start:n}:{})}}),ooe=Qr({onlyIn:ge,onInput:"]",before:/^(\[[ xX])$/,transform:(t,o,e)=>{let n=ft.getCurrentList(t.value);if(n)t.setNodeByKey(n.key,{type:vo});else{if(!t.value.isEmpty)return t.insertText(`${e.before[0]}]`);t=ft.wrapInList(t,vo)}let r=ft.getCurrentItem(t.value),i=e.before[0][1]!==" ";return r?ft.checkTaskItem(t,r.key,i):t}}),noe=Qr({onlyIn:ge,onHotkey:"enter",before:/^(```\S*\s*)$/,transform:(t,o,e)=>{let[n]=e.before,r=n.replace(/^```/,"").trim(),i=zg(r),a=no.createCodeBlock("",{syntax:i.key});return g3(t,a)}}),roe=Qr({onlyIn:ge,onInput:" ",before:/^(>)$/,transform:(t,o,e)=>t.wrapBlock(jt)});function f3(t){let{startBlock:o,document:e}=t;if(!o)return!1;let n=e.getParent(o.key);return(n==null?void 0:n.type)===Zo}var ioe=[Ve,Xe,rt],aoe=Qr({onlyIn:ge,onInput:" ",before:/^(#{1,3})$/,transform:(t,o,e)=>{let[n]=e.before,r=n.length,i=ioe[r-1];return t.setBlocks({type:i})}});function Td(t,o){let e=typeof o=="string"?[o]:o;return t.marks.some(n=>e.includes(n.type))}function sf(t,o,e){let{startText:n,startOffset:r}=t;if(!n)return!1;let i=r-o.length,{leaf:a}=n.searchLeafAtOffset(i);return a?Td(a,e):!1}function yb(t){let{startText:o,startOffset:e}=t;if(!o)return!1;let n=o.text.slice(0,e);return!(!n||n.match(/^[^`]+$/))}function g3(t,o){let{startBlock:e}=t.value;if(e)return t.insertBlock(o).collapseToStartOf(o).removeNodeByKey(e.key)}var h3=[jte,$te,Yte,Zte,eoe,toe,ooe,aoe,Qte,Jte,noe,roe];s();var tO=x(O());s();var Ei=x(O());H();var vb={[ge]:M.ICON_S,[Ve]:M.ICON_XL,[Xe]:M.ICON_L,[rt]:M.ICON_S};function y3(t){let{node:o,attributes:e,isSelected:n,parent:r}=t,i=o.data.toFrozenObject();return Ei.createElement(Ei.Suspense,{fallback:Ei.createElement(soe,{selected:n,attributes:e,parentType:r.type})},Ei.createElement(coe,{reference:i.ref,selected:n,attributes:e,parentType:r.type}))}function soe(t){let{selected:o,attributes:e,parentType:n}=t,[,r]=_(v3),i=o?N.textColor.primaryStandout:N.text.base,a=vb[n||ge]||vb[ge];return Ei.createElement(S,{style:[r.mention,o&&r.mentionSelected],...e},Ei.createElement(Re,{size:a,style:i}))}function coe(t){let{reference:o,selected:e,attributes:n,parentType:r}=t,[,i]=_(v3),[,a]=_(W),c=K.useInteractiveState(),l=ot(o),u=vb[r||ge]||vb[ge],d=e?a.primaryStandout:a.text;return Ei.createElement(Ke,{...c.events,...Ic(l)},Ei.createElement(he,{tag:"span",style:[i.mention,c.hovered&&i.mentionHovered,e&&i.mentionSelected,b.directionRow,b.alignCenter],...n},l.secondaryIcon?Ei.createElement(l.secondaryIcon,{size:u,style:[d,i.mentionIcon]}):null,Ei.createElement(V,{style:[d,a.Bold]},l.title)))}var v3=G.create({mention:t=>({borderRadius:t.radiuses.medium,paddingHorizontal:g.xsmall/2}),mentionHovered:t=>({backgroundColor:t.colors.background.muted}),mentionSelected:t=>({backgroundColor:t.colors.primary.muted}),mentionIcon:{marginRight:g.xsmall/2}});s();var Fc=x(O());function b3(t){let{mark:o,node:e,offset:n,attributes:r,children:i,editor:a}=t,{value:c,symbol:l}=o.data.toObject(),u=Fc.useRef(null),d=wo(c),{logAnalyticsEvent:p}=Fc.useContext(Ge),m=pt(),f=de(u),h=Ce();return Sy(()=>{if(!f.opened&&a.value.isFocused){let y=w=>{a.change(C=>{let k=ye.create({anchorKey:e.key,anchorOffset:n,focusKey:e.key,focusOffset:n+d.current.length+1});C.insertInlineAtRange(k,{type:gp,data:{ref:w},isVoid:!0}).focus()}),p({type:"edit_page_document_insert_mention",kind:w.kind})};f.open(tc(Pn(y,{...m,document:a.value.document},h,{withSearch:!1,accept:l==="@"?["user"]:["url","anchor","page","space","collection","file"]}),c))}},150),Fc.useEffect(()=>{f.opened&&f.typeQuery(c)},[f,c]),Fc.createElement(yt,{ref:u,...r},i)}var S3="mentionContext",loe=/(^|\s)(@|#)(\w*)$/,w3={renderMark:poe,renderNode:doe,decorateValue:uoe};function uoe(t){let{selection:o}=t,e=moe(t),n=[];return ye.isTextRange(o)&&e!==null&&n.push(ye.create({anchorKey:o.startKey,anchorOffset:o.startOffset-e.value.length-1,focusKey:o.startKey,focusOffset:o.startOffset,marks:[{type:S3,data:{value:e.value,symbol:e.symbol}}],isAtomic:!0})),n}function doe(t){let{node:o}=t;switch(o.type){case gp:return tO.createElement(y3,{...t})}}function poe(t){let{mark:o}=t;switch(o.type){case S3:return tO.createElement(b3,{...t})}}function moe(t){if(!t.isCollapsed)return null;let{document:o,startText:e,startBlock:n,selection:r}=t;if(!ye.isTextRange(r)||!e||!n||!as({document:o,block:n},gp))return null;let{startOffset:i}=r,a=e.text.slice(0,i),c=loe.exec(a);return c?{symbol:c[2],value:c[3]}:null}s();var Ti=x(O());H();s();function bb(t,o,e=[]){return at(t,o,[{key:"types",commands:()=>{let n=t.value.document.assertBlock(o),r=t.value.document.getParent(o);if(!r)return[];let i=a=>{t.change(c=>{c.setNodeByKey(n.key,{type:a}).focus()})};return[{key:ge,title:"Paragraph",type:1,selected:n.type===ge,icon:v.Paragraph,trigger:()=>{i(ge)}},De(r,Ve)?{key:Ve,title:"Heading 1",type:1,selected:n.type===Ve,icon:v.Heading1,trigger:()=>{i(Ve)}}:null,De(r,Xe)?{key:Xe,title:"Heading 2",type:1,selected:n.type===Xe,icon:v.Heading2,trigger:()=>{i(Xe)}}:null,De(r,rt)?{key:rt,title:"Heading 3",type:1,selected:n.type===rt,icon:v.Heading3,trigger:()=>{i(rt)}}:null].filter(fe)}},...e])}function C3(t){let{editor:o,node:e,parent:n,children:r,attributes:i}=t,[,a]=_(W),[,c]=_(hoe),l=Ti.useContext(kc),u=Ti.useContext(_r),d=goe(n),p=[a.Body,a.text,c[l],c[u]],m=Ti.createElement(V,{selectable:!0,style:p},r),f=Ti.useMemo(()=>bb(o,e.key),[o,e.key]),h=hp(e);return foe(n)?!o.readOnly&&h?Ti.createElement(d8,{...t,placeholder:d},m):Ti.createElement(be,{...t,palette:f},m):Ti.createElement(he,{...i},!o.readOnly&&d&&h&&rg(n)?Ti.createElement(he,{editable:!1,pointerEvents:"none",style:[Q.absoluteFill]},Ti.createElement(V,{selectable:!0,style:[p,a.textMuted]},d)):null,m)}function foe(t){return t.type===QS||t.type===ZS||t.type===ll?!0:!(t.object==="fragment"||t.type===Zo)}function goe(t){return t.type===GI?"Parameter description (optional)":t.type===QS?"Response description (optional)":t.type===ZS?"Operation description (optional)":t.type===os?"Title":t.type===ll?"Expandable content":t.type===va?"Annotate this text":t.type===hr?"Tab content":""}var hoe=G.create({left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"},root:{},quote:t=>({color:t.colors.text.mid}),swaggerParameter:t=>({color:t.colors.text.mid,...Ze.Label}),swaggerResponse:t=>({color:t.colors.text.mid}),caption:t=>({...Ze.Caption,color:t.colors.text.muted}),expandableTitle:t=>({...Ze.Heading3,color:t.colors.text.main})});s();var cf=x(mi());var x3={onKeyDown:yoe};function yoe(t,o){if((0,cf.default)("enter",t)||(0,cf.default)("shift+enter",t))return voe(t,o);if((0,cf.default)("backspace",t))return k3(t,o)}function voe(t,o){let{value:e}=o;if(e.isExpanded)return;let{startBlock:n,startOffset:r,endOffset:i}=e;if(n&&!n.isVoid)if(n.type===ge){if((0,cf.default)("shift+enter",t))return o.insertText(`
`)}else{let a=n.text.length;if(r===0&&a===0)return k3(t,o);if(i===a)return t.preventDefault(),o.splitBlock().setBlocks({type:ge,data:{}})}}function k3(t,o){let{value:e}=o;if(e.isExpanded||e.startOffset>0)return;let{startBlock:n,startText:r}=e;if(!(!n||!(n.getFirstText()===r))){if(n.type===ge){let a=e.document.getParent(n.key);return a&&Te.isSwaggerFragment(a)&&a.getChildIndex(n.key)===0?o:void 0}if(!(n.type===yr||n.type===ya))return t.preventDefault(),n.isVoid?o.removeNodeByKey(n.key):o.setNodeByKey(n.key,{type:ge,isVoid:!1})}}s();var Sb=x(O());H();s();var zc=JSON.parse('{"quote":"quote_5I59h","hint":"hint_rnF2j","iconWrapper":"iconWrapper_NJPs7","icon":"icon_abDxV","info":"info_-xeCE","warning":"warning_5BM-F","danger":"danger_UUfHb","success":"success_3o6RV"}');function O3(t){let{children:o}=t;return Sb.default.createElement(be,{tag:"blockquote",...t,contentProps:{style:boe.blockQuote}},Sb.default.createElement(te,{style:[N.flex.column,zc.quote]},Sb.default.createElement(_r.Provider,{value:"quote"},o)))}var boe=Q.create({blockQuote:{position:"relative",width:"100%"}});s();var za=x(O());H();s();var lf={info:{title:"Info",cssIcon:v.InfoCircle.CSS,icon:v.InfoCircle},warning:{title:"Warning",cssIcon:v.Warning.CSS,icon:v.Warning},success:{title:"Success",cssIcon:v.CheckCircle.CSS,icon:v.CheckCircle},danger:{title:"Danger",cssIcon:v.Alert.CSS,icon:v.Alert}};s();function I3(t,o){let e=["info","warning","danger","success"];return at(t,o,[{key:"levels",commands:()=>{let n=t.value.document.assertBlock(o),r=n.data.get("style");return e.map(i=>({key:i,type:1,selected:r===i,title:lf[i].title,icon:lf[i].icon,trigger:()=>{t.change(a=>{a.setNodeByKey(n.key,{data:{style:i}})})}}))}}])}function _3(t){let{node:o,children:e,editor:n}=t,{readOnly:r}=n,i=o.data.toFrozenObject(),a=lf[i.style],c=()=>{let h=["info","warning","danger","success"],y=i.style===h[h.length-1]?h[0]:h[h.indexOf(i.style)+1];n.change(w=>w.setNodeByKey(o.key,{data:{style:y}}))},l=za.useMemo(()=>I3(n,o.key),[n,o.key]),u=o.nodes.first(),d=Ii(u,o),p=M.ICON_L,m=d.paddingTop+(sr(u)-p)/2,f=a.cssIcon;return za.createElement(be,{...t,palette:l,contentProps:{style:[Soe.blockHint]}},za.createElement(te,{style:[zc.hint,N.flex.row,zc[i.style]]},za.createElement(te,{style:[zc.iconWrapper,N.flex.row,N.flex.justifyContentCenter],inlineStyle:{paddingTop:m,"--icon-size":`${p}px`}},r?za.createElement(f,{style:zc.icon}):za.createElement(Ke,{onPress:c},za.createElement(f,{style:zc.icon}))),za.createElement(te,{style:[N.flex.column,N.flex.flex1]},e)))}var Soe=Q.create({blockHint:{position:"relative",width:"100%"}});s();var wb=x(mi());var P3={onKeyDown:koe},woe=(0,wb.isKeyHotkey)("backspace"),Coe=(0,wb.isKeyHotkey)("enter"),xoe=(0,wb.isKeyHotkey)("mod+enter");function koe(t,o,e){let{value:n}=o;if(!Mo(n.selection)){if(woe(t)&&n.isCollapsed)return Ooe(t,o);if(Coe(t))return Ioe(t,o);if(xoe(t))return _oe(t,o);if(t.key===">")return Roe(t,o)}}function Ooe(t,o){let{value:e}=o,{startOffset:n,selection:r}=e;if(!ye.isTextRange(r)||n>0)return;let i=oO(e);if(!i)return;let a=r.anchorKey?i.getClosestBlock(r.anchorKey):null;if(!(!a||!r.isAtStartOf(a))&&i.nodes.size===1)return t.preventDefault(),o.unwrapBlock(i.type)}function Ioe(t,o){let{value:e}=o,{startBlock:n,selection:r}=e;if(!ye.isTextRange(r))return;let i=oO(e);if(i&&!(n&&n.text.length!==0))return t.preventDefault(),o.unwrapBlock(i.type)}function _oe(t,o){let{value:e}=o,n=oO(e);if(n)return t.preventDefault(),kt(o,n),o}function Roe(t,o){let{value:e}=o,{selection:n}=e;if(ye.isTextRange(n)&&!(n.startOffset!==0||n.isCollapsed))return t.preventDefault(),o.wrapBlock(jt),o}function oO(t,o=null){let{document:e,selection:n}=t;if(!ye.isTextRange(n)||(o!=null||(o=t.startBlock),!o))return null;let r=e.getAncestors(o.key);if(!r)return null;let i=r.reverse().find(R3);return i&&R3(i)?i:null}function R3(t){return"type"in t&&(t.type===jt||t.type===ho)}s();var nO=x(O());s();var Jr=x(O());H();var Md=2,Poe=250;function E3(t){let{selection:o}=t,[e,n]=Jr.useState(!1),r={"data-cursor":!0},i=o.data.toFrozenObject(),a=qa(i.clientId),c={backgroundColor:a.base};return Jr.createElement(he,{tag:"span",editable:!1,...r,style:[Ld.cursor]},Jr.createElement(Ys,{wrapper:yi,onOpen:()=>n(!0),onClose:()=>n(!1),anchor:({ref:l,open:u,close:d})=>Jr.createElement(K.WithInteractiveState,{onHoverIn:u,onHoverOut:d},({events:p})=>Jr.createElement(S,{ref:l,...p,style:[Ld.carret,c]},Jr.createElement(S,{style:[Ld.carretTop,c]})))},Jr.createElement(S,{style:[Ld.bubble,e&&Ld.bubbleVisible]},Jr.createElement(S,{style:[Ld.bubbleContent,c,g.Padding.smallHorizontal]},Jr.createElement(gi,{theme:{color:Ta(a.base)}},Jr.createElement(Eoe,{userName:i.userDisplayName}))))))}function Eoe({userName:t}){let[,o]=_(W);return Jr.createElement(V,{numberOfLines:1,style:[o.Caption,o.text]},t)}var Ld=Q.create({cursor:{position:"absolute"},carret:{userSelect:"none",width:Md,top:3,height:"1.2em"},carretTop:{position:"absolute",top:-Md*3,left:-Md,borderRadius:100,width:Md*3,height:Md*3},bubble:{position:"absolute",left:-Md,top:"-1.2em",width:Poe,opacity:0,transition:`opacity ${Vi.TRANSITION_DURATION_LONG}ms ease`},bubbleVisible:{opacity:1},bubbleContent:{position:"absolute",borderRadius:M.RADIUS_M}});s();var T3=x(O());function M3(t){let{children:o,selection:e}=t,n=e.data.toFrozenObject(),r=qa(n.clientId);return T3.createElement(yt,{style:[{backgroundColor:r.faded}]},o)}s();var L3="focus",D3="range";var N3={renderSelection:Toe};function Toe(t){let{type:o}=t;switch(o){case L3:return nO.createElement(E3,{...t});case D3:return nO.createElement(M3,{...t})}}s();var Ye=x(O());s();var ta=x(O());function A3(t){let{editor:o,node:e}=t,n=Ce(),r=pt(),i=ta.useMemo(()=>at(o,e.key,[{key:"edit",commands:[{key:"edit_ref",title:"Edit link target",icon:v.PageLink,trigger:()=>Pn(a=>{o.change(c=>{c.setDataByKey(e.key,["ref"],a)})},r,n,{accept:["page","space","collection"]})}]}]),[o,e.key,r]);return ta.createElement(be,{...t,palette:i},ta.createElement(Bt,{...t},ta.createElement(ta.Suspense,{fallback:ta.createElement(La,{icon:Re,title:""})},ta.createElement(Moe,{contentRef:e.data.get("ref")}))))}function Moe(t){let{contentRef:o}=t,e=ot(o);return ta.createElement(La,{title:e.title,icon:e.icon||e.secondaryIcon,...Ic(e)})}s();var Vc=x(O());H();function B3(t){let{ancestors:o,node:e,children:n,attributes:r}=t,i=e.data.toFrozenObject(),{blockLayoutComponent:a}=Vc.useContext(Ge),c=tt(),l=Sd({ancestors:o,node:e.blockNodes.first(),diff:!0});return Vc.createElement(a,{renderMode:l.renderMode},Vc.createElement(Ls.View,{isPDF:c},Vc.createElement(te,{style:[N.position.relative,N.flex.column,l.blockStyle.style],inlineStyle:l.blockStyle.inlineStyle},Vc.createElement(S,{...r},l.diffLine?Vc.createElement(Uv,{diff:i,...l.diffLine}):null,n))))}s();var q3=x(O());H();function W3(t){let{mark:o,attributes:e,children:n}=t;return q3.createElement(yt,{style:Loe[o.type],...e},n)}var Loe=Q.create({[eg]:{color:Bl.added},[tg]:{color:Bl.deleted,textDecorationLine:"line-through"},[og]:{color:Bl.modified}});s();var Cb=x(O());s();var F3=JSON.parse('{"divider":"divider_osV0o"}');function z3(t){let{attributes:o}=t;return Cb.createElement(be,{...t},Cb.createElement(Bt,{...t},Cb.createElement(te,{as:"hr",style:F3.divider,...o})))}s();var $e=x(O());s();var pn=x(O());H();s();var Vo=x(O());function V3(t){let{onClose:o}=t,[e,n]=wn(),r=Vo.useRef(null),[i,a]=Vo.useState(!1),c=wo(i),l=wo(o),u=wo(e),d=Vo.useCallback(()=>{u.current||n(()=>l.current())},[l,u]);return Vo.useEffect(()=>nh("editor-block-modal"),[]),Hr({[Ue.EDITOR_SAVE]:p=>{d()}},"editor-block-modal",[]),Vo.useEffect(()=>{let p=null,m=f=>{f.key==="Escape"&&(c.current?(p&&clearTimeout(p),d()):(a(!0),p=setTimeout(()=>{a(!1)},2e3)))};return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m),p&&clearTimeout(p)}},[c,d]),Vo.useEffect(()=>{var p,m;i?(p=r.current)==null||p.open():(m=r.current)==null||m.close()},[i,r]),Vo.createElement(z,{tooltipRef:r,icon:v.X,disabled:e,onPress:d,title:i?Vo.createElement(Vo.Fragment,null,"Press ",Vo.createElement(ms,{shortcut:"ESC"})," again to save & close"):Vo.createElement(Vo.Fragment,null,"Save & Close ",Vo.createElement(ms,{shortcut:Ue.EDITOR_SAVE})),tooltipPreferredPlacement:"left"})}s();s();s();var G3=Wg("05ab87fa95f4c5a09220a4e1067733011498ba1a47c8b145f5ec78dcb9ffe75d",()=>import("https://app.gitbook.com/public/app/chunks/excalidraw.lazy-P2AMVUAA.min.js"));var Gl=G3;async function H3(t){let{default:{exportToSvg:o}}=await Gl.load(),e=await o({appState:{exportEmbedScene:!0},elements:t.elements,files:t.files});return new XMLSerializer().serializeToString(e)}s();var rO=er({getValue:async t=>{if(!t)return{elements:[],files:{}};let{default:{loadFromBlob:o}}=await Gl.load(),n=await(await fetch(t)).blob(),r=await o(n,null,null);return{elements:r.elements,files:r.files}}}),K3=er({getValue:async({downloadURL:t,theme:o})=>{let{default:{exportToSvg:e}}=await Gl.load(),n=await rO.readAsync(t),r=await e({appState:{viewBackgroundColor:"transparent",exportWithDarkMode:o==="dark"},elements:n.elements,files:n.files});return r.style.maxWidth="100%",r.removeAttribute("width"),r.removeAttribute("height"),r}});function X3(t){let{blockData:o,onClose:e}=t,[,n]=_(Aoe),r=pn.useRef(),i=Zs(Vi.fade),a=Zs(Vi.pop,{onEnd:()=>{var c;(c=r.current)==null||c.refresh()}});return pn.createElement(br,null,pn.createElement(S,{ref:i,style:[G.absoluteFill,n.modalBackdrop]},pn.createElement(S,{ref:a,style:n.modalBody},pn.createElement(pn.Suspense,{fallback:pn.createElement(Ao,{size:"large"})},pn.createElement(Doe,{blockData:o,onClose:e,excalidrawRef:r})))))}function Doe(t){var f,h;let{excalidrawRef:o,blockData:e,onClose:n}=t,r=Eg(),i=Co(),{Excalidraw:a,useExcalidrawStyle:c}=Gl.loadSuspense().default;c();let u=(h=(f=ot(e.ref).resolution)==null?void 0:f.extra)==null?void 0:h.file,{result:d,error:p}=rO.readSafe((u==null?void 0:u.downloadURL)||null),m=async()=>{let y=o.current;if(!y){n(void 0);return}let w=y.getSceneElements(),C=y.getFiles();if(d&&d.elements&&!Noe(d.elements,w)){n(void 0);return}let k=await H3({elements:w,files:C});n(new File([new Blob([k])],(u==null?void 0:u.name)||"file.excalidraw.svg",{type:"image/svg+xml"}))};return pn.useEffect(()=>{p&&i.notify({kind:"danger",icon:v.Warning.CSS,title:"Error loading drawing",details:p.expose?p.message:"An unexpected error occurred while loading the drawing"})},[p]),pn.createElement(S,{style:[G.absoluteFill]},pn.createElement(a,{ref:o,initialData:{...d,scrollToContent:!0},theme:r.color,UIOptions:{canvasActions:{export:!1,loadScene:!1,saveToActiveFile:!1,toggleTheme:!1,saveAsImage:!1,changeViewBackgroundColor:!1,clearCanvas:!1}},renderTopRightUI:(y,w)=>pn.createElement(S,null,pn.createElement(V3,{onClose:m}))}))}function Noe(t,o){return t.length!==o.length?!0:t.some((e,n)=>{let r=o[n];return e.version!==r.version})}var Aoe=G.create({modalBackdrop:t=>({backgroundColor:t.colors.backdrop.background}),modalBody:t=>({position:"absolute",top:g.large,bottom:g.large,right:g.xlarge,left:g.xlarge,borderRadius:M.RADIUS_L,backgroundColor:t.colors.background.main,overflow:"hidden"})});s();var uo=x(O());H();var j3=uo.forwardRef(function(o,e){let{readOnly:n,contentRef:r}=o,i=uo.useRef(null),a=Eg(),c=pd(),[,l]=_($3),[u,d]=uo.useState(null),m=ot(r).href,f=u;return r&&!m&&(f=new Ni.NotFound("Drawing file not found, the file may have been deleted")),uo.useImperativeHandle(e,()=>({openInGallery:()=>{c.open([{url:m}])}})),uo.useEffect(()=>{let h=!0;return K3.readAsync({downloadURL:m,theme:a.color}).then(y=>{let w=i.current;w&&y&&h&&(w.innerHTML="",w.appendChild(y.cloneNode(!0)))},y=>{h&&d(y)}),()=>{h=!1}},[m,a.color]),f?uo.createElement(U3,{kind:"danger",icon:v.Warning,message:f.expose?f.message:"An error occurred while rendering this drawing file."}):uo.createElement(S,{style:l.wrapper},m?uo.createElement("div",{ref:i},uo.createElement("img",{src:m,style:{width:"100%"}})):uo.createElement(U3,{icon:v.EditDrawing,message:n?"Drawing file not found":"Double click to start sketching out your thoughts."}))});function U3(t){let{icon:o,message:e,kind:n="default"}=t,[,r]=_($3),[,i]=_(W);return uo.createElement(S,{style:[r.fallback,g.Padding.large,b.alignCenter,b.justifyContentCenter]},uo.createElement(S,null,uo.createElement(o,{size:M.ICON_XL,style:n==="danger"?i.danger:i.textMuted})),uo.createElement(S,{style:g.Margin.mediumTop},uo.createElement(V,{style:[n==="danger"?i.danger:i.textMuted,i.Body]},e)))}var $3=G.create({wrapper:{},fallback:t=>({height:200,borderWidth:1,backgroundColor:t.colors.background.main,borderColor:t.colors.border.mid,borderRadius:M.RADIUS_M,borderStyle:"dashed"})});var Y3=K.createInteractiveHandle("drawing-block");function Z3(t){let{node:o,editor:e,isSelected:n}=t,{readOnly:r}=e,i=_t(),{uploadFiles:a,updateFile:c}=$e.useContext(Ge),[l,u]=$e.useState(null),[d,p]=wn(),m=$e.useRef(),f=$e.useRef(null),h=o.data.toFrozenObject(),y=()=>{var E;(E=w.current)==null||E.close(),u("edit")},w=$e.useRef(null),C=$e.useRef(null);$e.useEffect(()=>()=>{C.current&&clearTimeout(C.current)},[]);let k=wy(y),I=E=>{var T,q,F;r?(T=f.current)==null||T.openInGallery():(C.current&&clearTimeout(C.current),k(E)?(q=w.current)==null||q.close():((F=w.current)==null||F.open(),C.current=setTimeout(()=>{var U;(U=w.current)==null||U.close()},1e3)))},P=E=>{m.current=E?URL.createObjectURL(E):void 0,E&&p(async()=>{let T=h.ref;h.ref&&T?await c(T,E):T=(await a([E]))[0],yg(T,h.ref)&&e.change(q=>{q.setDataByKey(o.key,["ref"],T)})}),u(null)},R=async()=>{let[E]=await i.prompt({title:"Replace drawing file",acceptURL:!1,accept:"drawings"});(E==null?void 0:E.kind)==="file"&&e.change(T=>{T.insertDataByKey(o.key,["ref"],E)})},D=at(e,o.key,[{key:"types",commands:[{key:"edit",title:"Edit drawing",icon:v.EditDrawing,trigger:()=>{y()}},{key:"files",title:"Replace file\u2026",icon:v.Replace,trigger:()=>{R()}}]}]);return $e.createElement($e.Fragment,null,$e.createElement(be,{...t,palette:D},$e.createElement(Bt,{...t},$e.createElement(K.TouchableOpacity,{onPress:I},$e.createElement(K.View,{handle:Y3},$e.createElement($e.Suspense,{fallback:$e.createElement(Tr,null)},$e.createElement(j3,{ref:f,readOnly:r,contentRef:m.current&&d?{kind:"url",url:m.current}:h.ref})),r?null:$e.createElement(gi,{theme:{color:"dark"}},$e.createElement(vi,{ref:w,preferredPlacement:"left",tooltip:"Double click to edit!"},(E,T)=>$e.createElement(Boe,{ref:T,saving:d,isSelected:n,palette:D})))))),$e.createElement(qc,{...t})),$e.createElement(Ot,null,l==="edit"?$e.createElement(X3,{blockData:h,onClose:P}):null))}var Boe=$e.forwardRef(function(o,e){let{isSelected:n,saving:r,palette:i}=o,[,a]=_(qoe);return $e.createElement(K.View.Child,{ref:e,descendantOf:Y3,style:[a.blockToolbar,b.directionRow],inactiveStyle:n||r?Qe.visible:Qe.hidden,activeStyle:Qe.visible},r?$e.createElement(z,{size:"small",icon:Re},"Saving"):i.groups.map(c=>Array.isArray(c.commands)?c.commands:[]).flat().map((c,l,u)=>$e.createElement(z,{key:c.key,title:c.title,size:"small",icon:c.icon,style:[l<u.length-1?g.Margin.smallRight:null],onPress:()=>{var d;(d=c.trigger)==null||d.call(c,i)}})))}),qoe=G.create({blockToolbar:t=>({position:"absolute",top:g.small,right:g.small,padding:g.small,borderRadius:M.RADIUS_M,backgroundColor:t.colors.background.mid,...t.shadows.base})});s();var Va=x(O());function Q3(t){let{node:o,editor:e}=t,n=_t(),r=async()=>{let[a]=await n.prompt({title:"Replace file"});(a==null?void 0:a.kind)==="file"&&e.change(c=>{c.insertDataByKey(o.key,["ref"],a)})},i=at(e,o.key,[{key:"types",commands:()=>[{key:"files",title:"Replace file\u2026",icon:v.Paperclip,trigger:()=>{r()}}]}]);return Va.createElement(be,{...t,palette:i},Va.createElement(Bt,{...t},Va.createElement(Va.Suspense,{fallback:Va.createElement(La,{icon:Re,title:""})},Va.createElement(Woe,{...t,onReplace:r}))),Va.createElement(qc,{...t}))}function Woe(t){var u,d;let{node:o,editor:e,onReplace:n}=t,{ref:r}=o.data.toFrozenObject(),a=(d=(u=ot(r).resolution)==null?void 0:u.extra)==null?void 0:d.file,c=()=>{a?fs(Us(a.downloadURL)):e.readOnly||n()},l=No(fd,{file:a},[a]);return Va.createElement(La,{onPress:c,icon:l,title:a?a.name:"File has been deleted",subtitle:a?Em(a.size):void 0,details:a?H7(a):void 0})}s();var Tn=x(O());s();var Gc=x(O());H();function J3(t){let{node:o,editor:e,onClose:n}=t,r=lg(o.text),[i,a]=Gc.useState(()=>o.data.get("id")||""),c=u=>{let d=lg(u);d.length===u.length?a(d):a(u)},l=()=>{e.change(u=>{i?u.setDataByKey(o.key,["id"],lg(i)):u.removeDataByKey(o.key,["id"])}),n()};return Gc.createElement(ko,{size:"small",title:"Edit heading anchor",footer:Gc.createElement(S,{style:[b.directionRow,b.justifyContentEnd]},Gc.createElement(z,{kind:"secondary",onPress:n,style:g.Margin.smallRight},"Close"),Gc.createElement(z,{kind:"primary",onPress:l},"Save")),onClose:n},Gc.createElement(ao,{autoFocus:!0,size:"large",icon:v.Hash,label:"Anchor",labelDescription:"Edit this anchor to customize a nice looking url for this heading.",value:i,onChangeText:c,onSubmit:l,placeholder:r}))}var Foe=Z.createResponsiveComponent(he);function eB(t){let{editor:o,node:e,parent:n,children:r}=t,[,i]=_(W),[,a]=_(Voe),[c,l]=Tn.useState(null),u=Tn.useContext(kc),d=Tn.useContext(_r),p=Tn.useMemo(()=>bb(o,e.key,[{key:"edit",commands:[{key:"edit",title:"Edit anchor",icon:v.Link,trigger:()=>{l("edit")}}]}]),[o,e.key]),{anchorElement:m,anchoredBlockId:f,anchoredBlockInteractiveState:h,onAnchoredBlockPress:y}=ab(e,{accessibilityLabel:"Direct link to heading",anchorIconSize:Koe[e.type]}),w=n.type===jt;return Tn.createElement(Tn.Fragment,null,Tn.createElement(be,{...t,palette:p},Tn.createElement(Foe,{tag:zoe(e.type),nativeID:f,onClick:w?()=>{}:()=>y(),...h.events,style:[b.directionRow,b.alignEnd]},Tn.createElement(Z.Text,{selectable:!0,mobileStyle:[Hoe[e.type]],desktopStyle:[Goe[e.type]],nativeID:`text-${f}`,style:[i.text,a[u],a[d]]},r,w?null:m))),Tn.createElement(Ot,null,c==="edit"?Tn.createElement(J3,{node:e,editor:o,onClose:()=>l(null)}):null))}function zoe(t){switch(t){case Ve:return"h2";case Xe:return"h3";case rt:return"h4";default:throw new Error(`invalid node type (${t}) for heading`)}}var Voe=G.create({left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"},root:{},caption:{},quote:{},swaggerParameter:{}}),Goe={[Ve]:So.Heading1,[Xe]:So.Heading2,[rt]:So.Heading3},Hoe={[Ve]:So.Heading2,[Xe]:So.Heading3,[rt]:So.Body},Koe={[Ve]:M.ICON_L,[Xe]:M.ICON_S,[rt]:M.ICON_XXS};s();var xb=x(O());function tB(t){let{node:o,children:e,style:n,attributes:r}=t,{sections:i}=xb.useContext(Ci),a=i.get(o.key);return xb.createElement("div",{id:a,...r,style:n},e)}s();var iO=x(O());H();function oB(t){let{node:o,editor:e,children:n}=t,{align:r="center"}=o.data.toFrozenObject(),i=_t(),a=Oi(e,o.key),c=u=>{e.change(d=>{d.insertDataByKey(o.key,["align"],u)})},l=at(e,o.key,[{key:"types",commands:()=>[{key:"files",title:"Add images\u2026",icon:v.Image,trigger:()=>{i.prompt({accept:"images",title:"Select image",acceptURL:!0}).then(u=>{e.change(d=>{u.forEach(p=>{d.appendNodeByKey(o.key,Do.createImageBlock(p))})})})}}]},{key:"align",commands:[{key:"left",type:1,title:"Left align",selected:r==="left",icon:v.AlignTextLeft,trigger:()=>c("left")},{key:"center",type:1,title:"Center",selected:r==="center",icon:v.AlignTextCenter,trigger:()=>c("center")},{key:"right",type:1,title:"Right align",selected:r==="right",icon:v.AlignTextRight,trigger:()=>c("right")}]},...a?[a]:[]]);return iO.createElement(be,{palette:l,...t},iO.createElement(Z.View,{style:[b.directionRow,r==="center"&&b.justifyContentCenter,r==="left"&&b.justifyContentStart,r==="right"&&b.justifyContentEnd,Xoe.imagesWrapper],mobileStyle:[b.wrap,b.justifyContentCenter]},n))}var Xoe=Q.create({imagesWrapper:{columnGap:g.medium,rowGap:g.medium}});s();var Oe=x(O());H();s();var oa=x(O());H();function kb(t){let{node:o,editor:e,onClose:n}=t,[r,i]=oa.useState(()=>Do.getImageAltText(o)||""),a=()=>{e.change(c=>{c.insertDataByKey(o.key,["alt"],r)}),n()};return oa.createElement(ko,{title:"Set image alt text",onClose:n,footer:oa.createElement(S,{style:[b.directionRow,b.justifyContentEnd]},oa.createElement(z,{kind:"secondary",onPress:n,style:g.Margin.smallRight},"Cancel"),oa.createElement(z,{kind:"primary",onPress:a},"Save"))},oa.createElement(S,{style:[g.Margin.largeBottom]},oa.createElement(S,{style:[g.Margin.mediumBottom]},oa.createElement(Gg,null,"This will be read out by screen readers when the image is encountered. Describe the image in detail \u2013 it's how visually impaired readers know what's in front of them.")),oa.createElement(ao,{autoFocus:!0,size:"large",value:r,placeholder:"Edit alt text",onChangeText:i,onSubmit:a})))}s();s();s();var Lr=x(O());var Uoe=K.createInteractiveComponent(v.EmojiReaction);function nB(t){let{analyticsContext:o,page:e,size:n,readOnly:r=!0}=t,i=Lr.useRef(null),[,a]=_(W),[c,l]=wn(),u=Yt(),d=async p=>{var m;ze(u),(m=i.current)==null||m.close(),p!==e.emoji&&(await l(()=>u.change(f=>{f.updatePage(e.id,{emoji:p})})),ae({...o,...p?{type:"edit_pick_page_emoji",pageKind:e.type,emoji:p}:{type:"edit_remove_page_emoji",pageKind:e.type}}))};return r?e.emoji?Lr.createElement(Bo,{code:e.emoji,size:n}):null:Lr.createElement(Ys,{ref:i,wrapper:yi,anchor:({ref:p,opened:m,toggle:f})=>Lr.createElement(K.TouchableOpacity,{ref:p,onPress:f},c?Lr.createElement(Re,{size:n}):Lr.createElement(Lr.Fragment,null,e.emoji?Lr.createElement(Bo,{code:e.emoji,size:n}):Lr.createElement(Uoe.Child,{size:n,style:m?a.textMid:a.textMuted,activeStyle:a.textMid})))},Lr.createElement(xn,{kind:"wide",preferredAlignment:"middle"},Lr.createElement(My,{onPick:d,onRemove:e.emoji?()=>d(void 0):void 0})))}s();var se=x(O());H();s();var rB=JSON.parse('{"pageCoverBleedFull":"pageCoverBleedFull_eqtqd"}');s();var aB=x(O());var iB=new Set;function sB(t){let{hivePage:o,analyticsContext:e}=t;return aB.useCallback(()=>{let n=`${o.contentId}/${o.branchId}/${o.pageId}`;iB.has(n)||(iB.add(n),ae({...e,page:o.pageId,type:"edit_page_document_start",collaborators:o.dataSync.presences.length}))},[o,e])}var Go={};nI(Go,{COMMENTS_COLUMN_EXPANDED_WIDTH:()=>Ib,MAX_PAGE_OUTLINE_WIDTH:()=>Hc,PAGE_BODY_DESKTOP_H_PADDING:()=>Wt,PAGE_BODY_DESKTOP_WIDTH:()=>Ob,PAGE_BODY_MAX_WIDTH:()=>Dr,PAGE_BODY_MOBILE_H_PADDING:()=>tn,PAGE_OUTLINE_WIDTH:()=>cO,PUBLIC_DESKTOP_HEADER_HEIGHT:()=>joe,PUBLIC_MOBILE_HEADER_HEIGHT:()=>$oe,SPACE_HEADER_HEIGHT:()=>aO,TOC_DESKTOP_WIDTH:()=>sO,columnsWidthThreadhold:()=>uf,getPageOutlineWrapperWidth:()=>lO,getToCWrapperDesktopWidth:()=>cB,pageSwitchThreadhold:()=>Kc});s();var aO=M.L,Dr=750,Wt=110,tn=g.medium,Ob=Dr+2*Wt,sO=300,Ib=300,cO=220,Hc=300,joe=M.XL,$oe=M.L;function uf(t,o=0){let e=o+sO+Ob+cO;return t===2||(e+=Ib-tn),e}function Kc(t=0){return t+Ob}function cB(t){let o=`(100vw - ${Ob}px) / 2 - ${t||0}px`;return`max(${sO}px, calc(${o}))`}function lO(t,o){let e=`100vw - ${cB(t)} - ${Dr}px - ${Wt}px - ${typeof o>"u"?Wt:o||0}px - ${t||0}px`;return`max(${cO}px, calc(${e}))`}s();var _b=x(O());var Rb=_b.createContext({baseRevision:void 0,pages:[],diffs:new Map,diffMode:null});s();var Hl=x(O());var lB=Hl.createContext({pages:[],setContentDiffPage:t=>{}});s();var Kl=x(O());var uB="hive-rtc-beta-notification-dismissed",dB=!1;function pB(t){let o=h6(t),e=dP(),n=Co(),r="rtc-toaster",i=o.filter(a=>a.data.userId&&a.data.userId!==(e==null?void 0:e.uid));Kl.useEffect(()=>{dB||i.length===0||(dB=!0,!wr.get(uB)&&n.notify({id:r,kind:"info",icon:v.Users.CSS,title:"Realtime Collaboration (Beta)",details:Kl.createElement(Kl.Fragment,null,Kl.createElement(Cn,null,"Explore live editing with your team. Keep in mind, it's still in Beta so you may encounter some bugs. We appreciate your patience and feedback.")),timeout:1e4,actions:[{label:"Got it, dismiss",onPress:()=>{wr.set(uB,!0),n.close(r)}}]}))},[i.length])}s();var Mn=x(O());H();s();var fB=x(O());s();var mB=JSON.parse('{"commentHalo":"commentHalo_0AauK"}');function uO(t){var l;let{node:o}=t,{screen:e}=_a(),n=Kn(nk);if(!o)return null;let r=e.type==="space"&&((l=e.sideSheet)==null?void 0:l.type)==="comments"?e.sideSheet.node:null;return(n&&n.highlighting&&n.node!==r?n.node:null)===o||r===o?fB.default.createElement(te,{style:[mB.commentHalo],as:"span",contentEditable:!1}):null}uO.displayName="BlockCommentHalo";s();var Ga=x(O()),gB=x(yR());var hB=t=>{let{nodeKey:o,visible:e,buttonSize:n,style:r,shortcutsActive:i}=t,a=Ga.useContext(ik),{navigate:c}=xe(),l=Ga.useMemo(()=>a(o),[o]),u=(0,gB.useSubscription)(l),d=Ga.useMemo(()=>(u!=null?u:[]).reduce((w,C)=>{let k=Object.values(C.replies).reduce((I,P)=>I+P.count,0);return 1+w+k},0),[u]),p=d>0,m=u==null?void 0:u[0],f=()=>{var w;m&&c({screen:{type:"space",space:m.space,sideSheet:{type:"comments",node:(w=m.node)!=null?w:void 0,comment:m.key}}})},h=()=>{c({screen:{sideSheet:{type:"comments",node:o,context:"post",comment:void 0}}})},y=()=>p&&m?f():h();return Hr(i?{[Ue.EDITOR_COMMENT]:y}:{},["editor-selection-collapsed","editor-selection-expanded"],[i,m]),Ga.createElement(he,{editable:!1,style:[e||p?Qe.visible:Qe.hidden,r],"data-hide-on-drag":!0},Ga.createElement(CR,{kind:"secondary",size:"small"},Ga.createElement(io,{leadingIcon:v.Comment.CSS,tooltipTitle:p?`${d} Comment${d>1?"s":""}`:"Comment",onPress:y,size:n,iconOnly:!p,label:p?`${d}`:"Comment"}),p?Ga.createElement(io,{leadingIcon:v.Plus.CSS,size:n,tooltipTitle:"Leave another comment",label:"Leave another comment",iconOnly:!0,onPress:h}):null))};s();var pO=x(O());s();var dO=JSON.parse('{"blockWrapper":"blockWrapper_y0Ubs","pageWrapper":"pageWrapper_ca2kA"}');function yB(t){let{children:o,style:e}=t;return pO.createElement(te,{style:[dO.pageWrapper,N.margin.noneVertical,N.margin.autoHorizontal,e]},o)}function Dd(t){let{children:o,style:e}=t;return pO.createElement(te,{style:[dO.blockWrapper,N.margin.noneVertical,N.margin.autoHorizontal,e]},o)}function Yoe(t){let{children:o,renderMode:e,isDiffViewEnabled:n,isFullPage:r,isPDF:i,node:a,interactive:c}=t,{desktopSidebarWidth:l}=Mn.useContext(Ki),{customBreakpointsPageBodyStyles:u}=Mn.useMemo(()=>({customBreakpointsPageBodyStyles:{[uf(2,l)]:b.justifyContentCenter}}),[l]);if(e==="unstyled")return Mn.createElement(S,{...c==null?void 0:c.events},o);let d=e==="full-width"?Mn.Fragment:Dd;return Mn.createElement(S,{style:[b.flex1,i?vB.pdfContainer:null]},Mn.createElement(d,null,Mn.createElement(Z.View,{style:[b.flex1,b.directionRow,r?b.justifyContentCenter:b.justifyContentEnd],mobileStyle:[b.justifyContentCenter],customBreakpointsStyles:u,...c==null?void 0:c.events},Mn.createElement(S,{style:[b.flex1]},Mn.createElement(uO,{node:a}),Mn.createElement(Z.View,{mobileStyle:[n?vB.pageBodyMobileWithDiff:null]},o)))))}function bB(t){let{isCommentMarginVisible:o,isDiffViewEnabled:e,isFullPage:n}=t,r=tt();return Mn.useMemo(()=>[i=>Mn.createElement(Yoe,{...i,isPDF:r,isDiffViewEnabled:e,isCommentMarginVisible:o,isFullPage:n}),r||!o?void 0:hB],[e,n,o,r])}var vB=Q.create({pdfContainer:{breakInside:"avoid",breakBefore:"auto"},pageBody:{maxWidth:Dr+2*Wt},pageBodyWithComments:{maxWidth:Dr+Wt,paddingRight:0},pageBodyMobileWithDiff:{marginLeft:tn*2},pageBodyDesktopLeftMargin:{marginLeft:Wt},pageBodyDesktopRightPadding:{paddingRight:Wt},pageBodyMobileLeftMargin:{marginLeft:tn},pageBodyMobileRightPadding:{paddingRight:tn},pageBodyPDFLeftMargin:{marginLeft:tn},pageBodyPDFRightPadding:{paddingRight:tn}});s();var Se=x(O());H();s();var mO=x(I4()),ht=x(O());H();function SB(t){let{analyticsContext:o,parentPages:e,childPages:n,onClose:r,revision:i,page:a}=t,[,c]=_(Joe),[l,u]=wn(),d=Yt(),p=async(m=!0)=>{ze(d),await u(async()=>{await d.change(f=>{[a,...m?e:[],...m?n:[]].forEach(h=>{f.resolveConflict(h.id)})}),await ae({...o,type:"edit_conflicts_keep_page",pageKind:a.type})}),r()};return ht.createElement(ko,{title:"Keep page",onClose:r,footer:ht.createElement(S,{style:[b.directionRow,b.justifyContentEnd]},ht.createElement(z,{kind:"secondary",onPress:()=>{},style:g.Margin.smallRight,disabled:l},"Cancel"),ht.createElement(Ip,{kind:"secondary",onPress:()=>p(!1),style:g.Margin.smallRight},"Keep only this page"),ht.createElement(Ip,{kind:"merge",onPress:()=>p()},"Keep"))},(0,mO.default)(e)?null:ht.createElement(S,{style:[(0,mO.default)(n)?null:c.parentPages]},ht.createElement(Zoe,{revision:i,pages:e,onClose:r})),ht.createElement(Qoe,{revision:i,pages:n,onClose:r}))}function Zoe(t){let{pages:o,revision:e}=t,{conflicts:n}=e,[,r]=_(W),i=o.length;return o.length?ht.createElement(S,{style:[g.Margin.mediumTop]},ht.createElement(S,{style:[b.directionRow,g.Margin.smallBottom]},ht.createElement(xo,{kind:"warning",icon:v.Warning}),ht.createElement(V,{style:[g.Margin.mediumLeft,r.Label,r.text,r.Bold]},"There ",i>1?"are":"is"," ",o.length," conflicted parent"," ",ht.createElement(Gi,{count:i,singular:"page",plural:"pages"}),". Keeping the current page, you would keep"," ",ht.createElement(Gi,{count:i,singular:"it",plural:"all of them"}))),ht.createElement(S,null,o.map(a=>{let c=n==null?void 0:n.pages[a.id];return ht.createElement(ps,{key:a.id,layout:"wide",icon:()=>c==="deleted-in-base-subtree-modified-in-head"||c==="deleted-in-head-subtree-modified-in-base"?ht.createElement(xo,{kind:"warning",icon:v.Conflict}):ht.createElement(xo,{kind:"danger",icon:v.Trashcan}),title:a.title})}))):null}function Qoe(t){let{pages:o,revision:e}=t,{conflicts:n}=e,[,r]=_(W),i=o.length;return o.length?ht.createElement(S,{style:[g.Margin.mediumTop]},ht.createElement(S,{style:[b.directionRow,g.Margin.smallBottom]},ht.createElement(xo,{kind:"warning",icon:v.Warning}),ht.createElement(V,{style:[g.Margin.mediumLeft,r.Label,r.text,r.Bold]},"There ",o.length>1?"are":"is"," ",o.length," nested"," ",ht.createElement(Gi,{count:i,singular:"page",plural:"pages"}),". Keeping the current page, you would keep"," ",ht.createElement(Gi,{count:i,singular:"it",plural:"all of them"}))),ht.createElement(S,null,o.map(a=>{let c=n==null?void 0:n.pages[a.id];return ht.createElement(ps,{key:a.id,layout:"wide",icon:()=>c==="deleted-in-base-subtree-modified-in-head"||c==="deleted-in-head-subtree-modified-in-base"?ht.createElement(xo,{kind:"warning",icon:v.Conflict}):ht.createElement(xo,{kind:"danger",icon:v.Trashcan}),title:a.title})}))):null}var Joe=G.create({parentPages:t=>({borderBottomColor:t.colors.border.mid,borderBottomWidth:1,marginBottom:g.large,paddingBottom:g.large})});s();var Tt=x(O());H();s();var Nr=x(O());H();var wB=4;function CB(t){let{space:o,page:e,readOnly:n,...r}=t,[i,a]=Nr.useState(!1),c=gO(o,e),l=fO();if(c.length===0)return null;let u=i?c:c.slice(0,wB),d=c.length-wB,p=!i&&d>0;return Nr.createElement(S,{...r,style:[b.directionRow,b.wrap]},u.map(m=>Nr.createElement(S,{key:m.key,style:[g.Margin.mediumRight,g.Margin.mediumTop]},Nr.createElement(z,{kind:"default",size:"small",icon:v.ArrowDownLeft,onPress:()=>l(m)},m.page.title))),p?Nr.createElement(S,{style:[g.Margin.mediumTop]},Nr.createElement(z,{kind:"grey",size:"small",onPress:()=>a(!0),title:Nr.createElement(Nr.Fragment,null,"Show ",d," more"," ",Nr.createElement(Gi,{count:d,singular:"backlink",plural:"backlinks"}))},`+${d} more`)):null)}function fO(){let{navigate:t}=xe();return Nr.useCallback(o=>{let{page:e,revision:n}=o;if(e.type==="link")return;let r=ro(n,e.id);t({screen:i=>i.type==="space"&&n.contentId===i.space?{page:r}:{type:"space",space:n.contentId,page:r,changeRequest:void 0,revision:void 0}})},[])}function gO(t,o){return ene([{kind:"page",page:o.id},{kind:"page",page:o.id,space:t.key}]).filter(n=>n.page.id!==o.id||n.revision.contentId!==t.key)}function ene(t){let o=t.map(i=>P_(i)),[e]=Ra([E_(o)]),n=Ce(),r=U_(e,i=>{var c;let a=(c=Mu([ls(i.space)])[0])==null?void 0:c.result;if(a)return X_(()=>n.store.getRevision(a.key,a.revision))});return e.map((i,a)=>{let c=r[a];return c?Object.keys(i.pages).filter(u=>Object.keys(i.pages[u].references).some(d=>o.includes(d))).map(u=>({key:`${c.contentId}-${u}`,revision:c,page:c.pages[u]})):null}).filter(fe).flat().sort((i,a)=>i.page.id<a.page.id?-1:i.page.id>a.page.id?1:0)}function Pb(t){let{space:o,analyticsContext:e,page:n,onClose:r,revision:i}=t,[,a]=_(W),c=Yt(),l=async u=>{ze(c),u&&(await c.change(d=>{d.removePage(n.id,{deleteEmptyGroupParent:!0})}),ae({...e,type:"edit_remove_page",pageKind:n.type})),r()};return Tt.createElement(Ep,{title:n.type==="group"?"Delete group":"Delete page",kind:"danger",confirmButtonText:"Delete",onComplete:l},Tt.createElement(S,null,Tt.createElement(V,{style:[a.Body,a.text]},"Confirming will delete all the content; however, it will still be available in the version history.")),Tt.createElement(Tt.Suspense,{fallback:null},Tt.createElement(tne,{space:o,page:n,onClose:r})),n.type!=="link"?Tt.createElement(one,{revision:i,page:n,onClose:r}):null)}function tne(t){let{space:o,page:e,onClose:n}=t,[,r]=_(W),i=fO(),a=gO(o,e);return a.length===0?null:Tt.createElement(S,{style:[g.Margin.mediumTop]},Tt.createElement(S,null,Tt.createElement(V,{style:[r.Label,r.textMuted]},"Deleting this page will break links in the following ",a.length," pages:")),Tt.createElement(S,{style:[b.directionRow,b.wrap]},a.map(c=>Tt.createElement(S,{key:c.key,style:[g.Margin.smallRight,g.Margin.smallTop]},Tt.createElement(z,{kind:"secondary",size:"small",icon:v.ArrowDownLeft,onPress:()=>{n(),i(c)}},c.page.title)))))}function one(t){let{page:o,revision:e,onClose:n}=t,[,r]=_(W),{navigateToPage:i}=Oc(),c=mc(e,o.id).map(u=>{var d;return((d=e.conflicts)==null?void 0:d.pages[u.id])==="deleted-in-base"?u:null}).filter(fe),l=c.length;return l?Tt.createElement(S,{style:[g.Margin.mediumTop]},Tt.createElement(S,{style:[b.directionRow,g.Margin.mediumBottom]},Tt.createElement(xo,{kind:"warning",icon:v.Warning}),Tt.createElement(V,{style:[g.Margin.mediumLeft,r.Label,r.text,r.Bold]},"There ",l>1?"are":"is"," ",c.length," nested"," ",Tt.createElement(Gi,{count:Object.keys(c.length).length,singular:"page",plural:"pages"})," ","deleted in the primary content but modified in your change request.",Tt.createElement("br",null),"Deleting the current page, you would delete ",l>1?"all of them":"it",".")),Tt.createElement(S,null,c.map(u=>Tt.createElement(ps,{key:u.id,layout:"wide",icon:()=>Tt.createElement(xo,{kind:"danger",icon:v.Trashcan}),title:u.title,buttons:[Tt.createElement(z,{size:"medium",kind:"secondary",onPress:()=>{n(),i(e,u.id)}},"Open")]})))):null}function xB(t){let{page:o,document:e,conflictType:n,pageWithComments:r,pageIsDiff:i}=t,a=n===!1,[,c]=_(ine),l=Yt(),[u,d]=wn(),p=Co(),m=Wi.getDocumentConflicts(e),f=m.isEmpty(),h=()=>{ze(l),f&&d(async()=>{await l.change(w=>{w.resolveConflict(o.id)}),l.revision.conflicts||p.notify({kind:"success",icon:v.CheckCircle.CSS,title:"All conflicts have been resolved",details:"You can now merge this change request."})})},y=()=>{switch(n){case"deleted-in-head":case"deleted-in-base":case"deleted-in-base-subtree-modified-in-head":case"deleted-in-head-subtree-modified-in-base":return Se.createElement(rne,{...t,conflictType:n,onPressMarkAsResolved:h,loading:u,hasBeenResolved:a});case"document-conflict":return Se.createElement(nne,{conflictNodes:m,canBeResolved:f,loading:u,onPressMarkAsResolved:h,hasBeenResolved:a,...t});case!1:return null;default:Fe(n)}};return Se.createElement(S,{style:[b.directionRow,b.justifyContentCenter,g.Margin.mediumBottom,c.alert]},Se.createElement(S,{style:[b.flex1,r||i?c.alertWithComments:c.alertFullWidth]},Se.createElement(S,{style:[b.directionRow,b.alignCenter,g.Padding.mediumVertical,g.Padding.mediumHorizontal,c.alertInner]},y())))}var nne=t=>{let{hasBeenResolved:o,canBeResolved:e,loading:n,conflictNodes:r,onPressMarkAsResolved:i}=t,[,a]=_(W),c=Se.useRef(),l=m=>{let f=Qs(m);f&&L6(f)},u=m=>{var w;let h=(c.current?r.findIndex(C=>C.key===c.current):-1)+m;h<0?h=r.size-1:h>=r.size&&(h=0);let y=(w=r.get(h))==null?void 0:w.key;y&&(c.current=y,l(y))},d=()=>{u(1)},p=()=>{u(-1)};return Se.createElement(S,{style:[b.flex1,b.directionColumn]},Se.createElement(S,{style:[b.directionRow]},Se.createElement(S,{style:g.Margin.mediumRight,testID:"conflictBanner.badge"},o?Se.createElement(xo,{kind:"success",size:"large",icon:v.Check}):Se.createElement(xo,{kind:"merge",size:"large",icon:v.Conflict})),Se.createElement(S,{style:[b.flex1,b.directionColumn]},Se.createElement(V,{style:[a.Label,a.textMid],testID:"conflictBanner.message"},o?"All conflicts with the primary content have been resolved for this page.":Se.createElement(Se.Fragment,null,"This page has ",e?"no":r.size," ","unresolved"," ",Se.createElement(Gi,{count:r.size,singular:"conflict",plural:"conflicts"})," ","with the primary content."," ",e?"Confirm by marking this page as resolved.":"Resolve them by editing this document.")),o?null:Se.createElement(S,{style:[b.directionRow,b.wrap]},e?null:Se.createElement(S,{style:[b.directionRow,b.wrap,g.Margin.smallBottom]},Se.createElement(z,{style:[g.Padding.noneLeft],size:"medium",rightIcon:v.ChevronUp,onPress:p,testID:"conflictBanner.prevButton"},"Prev"),Se.createElement(z,{size:"medium",rightIcon:v.ChevronDown,onPress:d,style:g.Margin.smallRight,testID:"conflictBanner.nextButton"},"Next")),Se.createElement(S,{style:[{marginLeft:"auto"}]},Se.createElement(z,{size:"medium",kind:"secondary",title:e?"Confirm resolution of all conflicts in this page":"You need to first resolve conflicts in the document",disabled:n||!e,icon:n?Re:v.Check,onPress:i,testID:"conflictBanner.resolveButton"},"Mark as resolved"))))))},rne=t=>{let{hasBeenResolved:o,loading:e,onPressMarkAsResolved:n,page:r,space:i,analyticsContext:a,revision:c,conflictType:l}=t,[u,d]=Se.useState(!1),[p,m]=Se.useState(!1),[,f]=_(W),h=mc(c,r.id).filter(R=>{var D,E;return((D=c==null?void 0:c.conflicts)==null?void 0:D.pages[R.id])==="deleted-in-head"||((E=c==null?void 0:c.conflicts)==null?void 0:E.pages[R.id])==="deleted-in-base"}),y=()=>{let R="Do you want to keep the modified page or delete it?",D=h.length>1?"pages":"page";switch(l){case"deleted-in-base":return`This page has been deleted in the primary content, but has been modified in this change request. ${R}`;case"deleted-in-head":return`This page has been deleted in this change request, but has been modified in the primary content ${R}`;case"deleted-in-base-subtree-modified-in-head":return`This page has been deleted in the primary content but has ${h.length} conflicted child ${D}. Do you want to keep or delete it?`;case"deleted-in-head-subtree-modified-in-base":return`This page has been deleted in your change request but has ${h.length} conflicted child ${D}. Do you want to keep or delete it?`}},C=(R=>{let D=[];function E(T){var F;let q=Sn(c,T.id);q&&((F=c.conflicts)!=null&&F.pages[q.id])&&(D.push(q),E(q))}return E(R),D})(r),k=mc(c,r.id),I=()=>m(!0),P=()=>{if(C.length||k.length){d(!0);return}n()};return Se.createElement(Se.Fragment,null,Se.createElement(Se.Fragment,null,Se.createElement(S,{style:g.Margin.mediumRight,testID:"conflictBanner.badge"},o?Se.createElement(xo,{kind:"success",size:"large",icon:v.Check}):l==="deleted-in-base-subtree-modified-in-head"||l==="deleted-in-head-subtree-modified-in-base"?Se.createElement(xo,{kind:"warning",size:"large",icon:v.Conflict}):Se.createElement(xo,{kind:"danger",size:"large",icon:v.Trashcan})),Se.createElement(S,{style:[b.flex1]},Se.createElement(V,{style:[f.Label,f.textMid],testID:"conflictBanner.message"},o?"All conflicts with the primary content have been resolved for this page.":y())),o?null:Se.createElement(S,{style:[g.Margin.mediumLeft,b.directionRow]},Se.createElement(S,{style:[g.Margin.mediumLeft,b.directionRow]},Se.createElement(z,{size:"medium",icon:e?Re:v.Copy,onPress:P,testID:"conflictBanner.keepButton"},"Keep"),Se.createElement(z,{size:"medium",icon:e?Re:v.Trashcan,onPress:I,testID:"conflictBanner.deleteButton"},"Delete")))),Se.createElement(Ot,null,u?Se.createElement(SB,{page:r,revision:c,analyticsContext:a,onClose:()=>d(!1),parentPages:C,childPages:k}):null),Se.createElement(Ot,null,p?Se.createElement(Pb,{space:i,page:r,revision:c,analyticsContext:a,onClose:()=>m(!1)}):null))},ine=G.create({alert:t=>({position:"sticky",top:-M.RADIUS_L,right:0,left:0,zIndex:1}),alertInner:t=>({borderRadius:M.RADIUS_L,borderWidth:1,borderColor:t.colors.border.mid,backgroundColor:t.colors.background.main,...t.shadows.tight}),alertFullWidth:{maxWidth:Dr+2*Wt},alertWithComments:{maxWidth:Dr+Wt}});s();var _e=x(O());H();var OB=Cy({width:1448,height:240}),sne=K.createInteractiveComponent(OB.View);function hO(t){let{page:o}=t;return o.cover?_e.createElement(_e.Suspense,{fallback:_e.createElement(cne,null)},_e.createElement(lne,{...t,page:o})):null}function cne(t){return _e.createElement(S,{style:[Ns.pageCover]},_e.createElement(IB,null))}function lne(t){let{page:o,revision:e,readOnly:n,rounded:r,analyticsContext:i}=t,[a,c]=_e.useState(!1),l=_t(),u=Yt(),d=tt(),[p,m]=wn(),f=kB(),h=null;if(o.cover.ref){let F=o.cover.ref.kind==="file"?e.files[o.cover.ref.file]:null;f=(o.cover.ref.kind==="file"?F?Us(F==null?void 0:F.downloadURL):null:o.cover.ref.url)||f,F!=null&&F.dimensions&&(h=F.dimensions)}let y=o.cover.yPos||0,w=_e.useMemo(()=>new rn.Value(y),[o.id,o.cover.yPos]),C=_e.useRef(y);_e.useEffect(()=>{let F=w.addListener(({value:U})=>{C.current=U});return()=>{w.removeListener(F)}},[w]);let k=async()=>{ze(u),c(!1),await u.change(F=>{F.movePageCover(o.id,C.current)}),ae({...i,type:"edit_reposition_cover"})},I=()=>{c(!1),w.flattenOffset(),w.setValue(y)},P=_e.useRef(null),R=de(P),D=_e.useCallback(async()=>{ze(u);let[F]=await l.prompt({title:"Select cover image",accept:"images",acceptURL:!0});F&&(await m(()=>u.change(U=>{U.addPageCover(o.id,F)})),ae({...i,type:"edit_upload_cover"}))},[i,u,o.id]),E=_e.useCallback(async()=>{ze(u),await m(()=>u.change(F=>{F.removePageCover(o.id)})),ae({...i,type:"edit_remove_cover"})},[i,u,o.id]),T=_e.useCallback(F=>{ze(u),u.change(U=>{U.updatePageLayout(o.id,{coverSize:F})}),ae({...i,type:"edit_cover_size",coverSize:F})},[i,u,o.id]),q=_e.useMemo(()=>{if(n)return;let F=qu(o).coverSize;return ce({groups:[{key:"pageCover",commands:[{key:"pageCover.select",icon:v.Image,title:"Select image",trigger:()=>{D()}},{key:"pageCover.reposition",icon:v.ImageSizeBlock,title:"Reposition",trigger:()=>{c(!0)}}]},{key:"pageCoverSize",commands:[{key:"pageCoverSize.full",icon:v.FullWidth,title:"Full width",type:1,selected:F==="full",trigger:()=>T("full")},{key:"pageCoverSize.hero",icon:v.DefaultWidth,title:"Hero width",type:1,selected:F==="hero",trigger:()=>T("hero")}]},{key:"pageCoverDanger",commands:[{key:"pageCoverDanger.remove",icon:v.Trashcan,title:"Remove cover",trigger:()=>E()}]}]})},[i,E,n,D,T,o]);return _e.createElement(sne,{style:[Ns.pageCover],isPDF:d},_e.createElement(une,{coverUrl:f,animatedY:w,repositioning:a,rounded:r,isPDF:d,coverFileDimensions:h}),p?_e.createElement(IB,null):null,n||d?null:_e.createElement(K.View.Child,{style:[Ns.pageCoverButton,b.directionRow],activeStyle:"visible",inactiveStyle:a||R.opened?"visible":"hidden"},a?_e.createElement(_e.Fragment,null,_e.createElement(z,{kind:"secondary",size:"medium",style:[g.Margin.smallRight],onPress:I},"Cancel"),_e.createElement(z,{kind:"primary",size:"medium",onPress:k},"Save")):_e.createElement(_e.Fragment,null,o.cover?null:_e.createElement(z,{icon:v.Image,kind:"secondary",size:"medium",style:[g.Margin.smallRight],onPress:()=>{D()}},"Change cover"),_e.createElement(z,{ref:P,icon:v.MoreVertical,rounded:!0,size:"medium",kind:"secondary",active:R.opened,onPress:()=>{q&&R.open(q)}}))))}function une(t){let{coverUrl:o,animatedY:e,repositioning:n,isPDF:r,rounded:i,coverFileDimensions:a}=t,c=fi(),l=_e.useRef(null),[u,d]=_e.useState(a),[p,m]=OB.useDimensions(),f=u?dne(p,u):0,[,{pageCoverRounded:h}]=_(mne),y=_e.useMemo(()=>Ff.create({onStartShouldSetPanResponder:(P,R)=>!1,onStartShouldSetPanResponderCapture:(P,R)=>!1,onMoveShouldSetPanResponder:(P,{dx:R})=>n,onMoveShouldSetPanResponderCapture:(P,R)=>!1,onPanResponderGrant:(P,{dx:R})=>{e.extractOffset()},onPanResponderMove:(P,{dy:R})=>{e.setValue(R/f)},onPanResponderTerminationRequest:(P,R)=>!0,onPanResponderRelease:(P,{dy:R})=>{e.flattenOffset()}}),[f,n]),w=u?u.width*f:0,C=u?u.height*f:0,k=(p.height-C)/2,I=!!u&&m;return _e.createElement(S,{...y.panHandlers,style:[Q.absoluteFill,Ns.pageCoverInner,n&&pne.pageCoverRepositioning,i&&h],...I?{testID:"page.cover"}:{}},!r&&_e.createElement(S,{style:[Ns.pageCoverOverlay,c.color==="dark"&&Ns.pageCoverOverlayDark,I&&Ns.pageCoverOverlayReady]}),_e.createElement(lR,{ref:l,source:{uri:o},loading:"priority",style:[Ns.pageCoverImage,w&&C?{top:r?0:rn.diffClamp(rn.add(k,rn.multiply(e,f)),-(C-p.height),0),left:(p.width-w)/2,width:w,height:C}:{width:"100%",top:e}],onLoad:()=>{var P,R,D,E;d({width:(R=(P=l.current)==null?void 0:P.width)!=null?R:0,height:(E=(D=l.current)==null?void 0:D.height)!=null?E:0})}}))}function IB(){return _e.createElement(S,{style:Ns.pageCoverLoadingOverlay},_e.createElement(Re,{size:"large"}))}function dne(t,o){let e=t.width/o.width,n=t.height/o.height;return o.height*e<t.height?n:e}var pne=Q.create({pageCoverRepositioning:{cursor:"grab"}}),mne=G.create({pageCoverRounded:t=>({borderRadius:t.radiuses.xlarge})}),Ns=Q.create({pageCoverOverlay:{position:"absolute",inset:0,opacity:1,zIndex:1,transitionDelay:"200ms",transition:"opacity 500ms ease-in, z-index 1000ms ease-in",backgroundColor:"rgba(255,255,255,.2)",backdropFilter:"blur(10px)"},pageCoverOverlayDark:{backgroundColor:"rgba(0,0,0,.2)"},pageCoverOverlayReady:{zIndex:-1,opacity:0},pageCover:{position:"relative",width:"100%",height:240},pageCoverInner:{overflow:"hidden"},pageCoverImage:{position:"absolute",left:0,right:0,objectFit:"cover",pointerEvents:"none"},pageCoverButton:{position:"absolute",bottom:g.medium,right:g.medium},pageCoverLoadingOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:Y.GREY_BLUE_LIGHT,justifyContent:"center",alignItems:"center"}});s();var Be=x(O());H();s();var Xl=JSON.parse('{"pageHeaderContainer":"pageHeaderContainer_f8iPF","pageControls":"pageControls_65PGe","hiddenIcon":"hiddenIcon_MYEiw","revealOnHover":"revealOnHover_QTUA-"}');s();var fne=Dt({key:"pageOptionsAtom",default:null});function Mi(t){let o=Kn(fne);return o===null?qu(t):o.layoutOptions}var Nd={mobile:"MobileMainTitle",desktop:"MainTitle"},gne=Z.createResponsiveComponent(Gr),NJe=Z.createResponsiveComponent(CB),hne=Z.createResponsiveComponent(yt),RB=Be.memo(function(o){let{space:e,revision:n,page:r,changeRequest:i,readOnly:a,onSubmitDescription:c,analyticsContext:l,withDiff:u,toolbar:d}=o,[p,m]=_(W),[,f]=_(yne),h=tt(),y=le(),{navigate:w}=xe(),[C,k]=wn(),I=Yt(),P=Be.useRef(null),R=[m.Description,m.textMuted],D=Mi(r),E=async Ee=>{ze(I),await I.change(me=>{me.renamePage(r.id,Ee)}),ae({...l,type:"edit_page_title",pageKind:r.type})},T=async Ee=>{ze(I),await I.change(me=>{me.setPageDescription(r.id,Ee)}),ae({...l,type:"edit_page_description",pageKind:r.type})},q=Ee=>{Ee.nativeEvent.key==="Enter"&&(Ee.preventDefault(),P.current&&P.current.focus())},F=Ee=>{Ee.nativeEvent.key==="Enter"&&(Ee.preventDefault(),c&&c())},U=()=>{k(async()=>{ze(I),await I.change(Ee=>{Ee.addPageCover(r.id)}),ae({...l,type:"edit_add_cover"})})},$=!D.title,X=!D.description,oe=$&&X||!$,we=$&&!X;return Be.createElement(te,{style:[N.position.relative,N.flex.column,a?N.padding.xlargeTop:Xl.pageHeaderContainer,$&&X?null:N.margin.largeBottom]},a?null:Be.createElement(te,{style:[Xl.pageControls,Xl.revealOnHover,N.margin.smallTop,N.flex.row,N.gap.xsmallColumnGap]},Be.createElement(z,{kind:"default",size:"xsmall",style:[g.Padding.noneLeft],icon:v.Options,onPress:()=>w({screen:{sideSheet:{type:"page"}}})},"Page options"),Au(r)?null:Be.createElement(z,{kind:"default",size:"xsmall",icon:C?Re:v.Image,disabled:C,onPress:U},"Page cover")),!a&&($||X)?Be.createElement(te,{style:[Xl.revealOnHover,N.margin.smallTop,N.gap.smallColumnGap]},$?Be.createElement(te,{style:[N.flex.alignCenter,N.gap.xsmallColumnGap]},Be.createElement(v.EyeOff.CSS,{style:[Xl.hiddenIcon]}),Be.createElement(Cn,{style:[N.text.label,N.textColor.muted]},"Page title hidden")):null,X?Be.createElement(te,{style:[N.flex.alignCenter,N.gap.xsmallColumnGap]},Be.createElement(v.EyeOff.CSS,{style:[Xl.hiddenIcon]}),Be.createElement(Cn,{style:[N.text.label,N.textColor.muted]},"Page description hidden")):null):null,Be.createElement(te,{style:[N.flex.row,N.flex.justifySpaceBetween,N.flex.alignCenter,$&&X?N.margin.autoLeft:null]},$?null:Be.createElement(S,{style:[b.directionRow,b.flex1]},Be.createElement(Z.View,{style:[b.directionRow,b.justifyContentEnd,b.alignCenter],mobileStyle:f.emojiWrapperMobile,desktopStyle:f.emojiWrapperDesktop},r.emoji||!a?Be.createElement(Z.View,{mobileStyle:[yO.pageEmojiRelative,g.Padding.noneLeft,g.Padding.mediumRight],desktopStyle:[yO.pageEmojiAbsolute,g.Padding.mediumLeft,g.Padding.mediumRight]},Be.createElement(nB,{analyticsContext:l,page:r,readOnly:a,size:M.ICON_XL})):null),a?Be.createElement(S,{style:[b.flex1]},Be.createElement(hne,{testID:"page.title",tag:"h1",style:[m.text],selectable:!0,mobileStyle:m[Nd.mobile],desktopStyle:m[Nd.desktop]},r.title)):Be.createElement(gne,{key:r.id,testID:"page.title",component:_B,value:r.title,maxLength:Lp,style:[m.text,b.flex1,m.Body],onChangeText:E,onKeyPress:q,placeholder:y("untitled_page"),placeholderTextColor:p.colors.text.muted,mobileStyle:m[Nd.mobile],desktopStyle:m[Nd.desktop]})),h||!d?null:oe&&Be.createElement(d,{space:e,changeRequest:i,revision:n,page:r,analyticsContext:l,readOnly:a})),Be.createElement(te,{style:[N.flex.row,N.flex.justifySpaceBetween,N.flex.alignCenter,$&&X?N.margin.autoLeft:null]},X?null:Be.createElement(Z.View,{style:[$?null:g.Margin.mediumTop,b.flex1]},a?r.description?Be.createElement(S,null,Be.createElement(V,{style:R,selectable:!0},r.description)):u?Be.createElement(Z.View,{style:yO.pageDescriptionDiffPlaceholder,mobileStyle:"hidden"}):null:Be.createElement(Gr,{key:r.id,ref:P,component:_B,value:r.description,style:R,maxLength:hw,onChangeText:T,onSubmitEditing:c,onKeyPress:F,placeholder:y("page_description"),placeholderTextColor:p.colors.text.muted})),h||!d?null:we&&Be.createElement(d,{space:e,changeRequest:i,revision:n,page:r,analyticsContext:l,readOnly:a})),null)}),_B=Be.forwardRef(function(o,e){let{style:n,...r}=o,[i,a]=Be.useState(void 0);return Be.createElement(li,{ref:e,...r,multiline:!0,style:[n,typeof i<"u"?{height:i}:void 0],onContentSizeChange:l=>{l.nativeEvent.contentSize.height!==i&&a(l.nativeEvent.contentSize.height)}})}),yO=Q.create({pageEmojiRelative:{position:"relative"},pageEmojiAbsolute:{position:"absolute"},pageDescriptionDiffPlaceholder:{height:Rg.mediumLarge}}),yne=G.create({emojiWrapperMobile:{width:"auto",height:Ze[Nd.mobile].lineHeight},emojiWrapperDesktop:{height:Ze[Nd.desktop].lineHeight},pageBodyDesktopLeftMargin:{marginLeft:Wt},pageBodyMobileLeftMargin:{marginLeft:tn}});s();var Zt=x(O());H();var PB=Z.createResponsiveComponent(ds),EB=K.createInteractiveComponent(Vr),TB=Zt.memo(function(o){let{revision:e,page:n,style:r}=o,{getNavigationLinkProps:i}=xe(),[,a]=_(W),c=le(),l=tt(),u=K.useInteractiveComponent(v.ArrowLeft),d=K.useInteractiveComponent(v.ArrowRight),{desktopSidebarWidth:p}=Zt.useContext(Ki),{nextPage:m,previousPage:f}=Zt.useMemo(()=>{let k=vne(e),I=k.findIndex(P=>P.id===n.id);return I===-1?{nextPage:null,previousPage:null}:{nextPage:vO(k,I,1),previousPage:vO(k,I,-1)}},[e,n.id]),{previousLinkProps:h,previousGroup:y,nextLinkProps:w,nextGroup:C}=Zt.useMemo(()=>({previousLinkProps:f?i({screen:{page:ro(e,f.id)}}):void 0,previousGroup:f?Sn(e,f.id):null,nextLinkProps:m?i({screen:{page:ro(e,m.id)}}):void 0,nextGroup:m?Sn(e,m.id):null}),[e,m,f]);return!m&&!f||l?null:Zt.createElement(Z.View,{style:r,desktopStyle:b.directionRow,customBreakpointsStyles:{[Kc(p)]:b.directionColumn}},f?Zt.createElement(PB,{...h,style:[b.alignCenter,g.Padding.medium,b.flex1],desktopStyle:m?g.Margin.smallRight:null,customBreakpointsStyles:m?{[Kc(p)]:[g.Margin.noneRight,g.Margin.smallBottom]}:void 0},Zt.createElement(S,{style:[g.Margin.mediumRight]},Zt.createElement(u.Child,{size:M.XS,style:[a.textMuted],hoverStyle:a.primary})),Zt.createElement(S,{style:[b.flex1,b.alignEnd]},Zt.createElement(S,null,Zt.createElement(V,{style:[a.Caption,a.textMuted]},y&&y.type==="group"?`${y.title} - `:"",c("previous"))),Zt.createElement(EB.Child,{style:[a.Body,a.Medium,a.text],activeStyle:a.primary},f.title))):null,m?Zt.createElement(PB,{...w,style:[b.alignCenter,g.Padding.medium,b.flex1],desktopStyle:f?g.Margin.smallLeft:null,customBreakpointsStyles:f?{[Kc(p)]:[g.Margin.noneLeft,g.Margin.smallTop]}:void 0},Zt.createElement(S,{style:[b.flex1]},Zt.createElement(S,null,Zt.createElement(V,{style:[a.Caption,a.textMuted]},c("next"),C&&C.type==="group"?` - ${C.title}`:"")),Zt.createElement(EB.Child,{style:[a.Body,a.Medium,a.text],activeStyle:a.primary},m.title)),Zt.createElement(S,{style:[g.Margin.mediumLeft]},Zt.createElement(d.Child,{size:M.XS,style:[a.textMuted],hoverStyle:a.primary}))):null)});function vne(t){let o=[];function e(n){let r=t.pages[n];o.push(r),r.type!=="link"&&r.pages.length&&r.pages.forEach(e)}return t.rootPages.forEach(e),o}function vO(t,o,e){let n=t[o+e];if(n)return n.type!=="document"?vO(t,o+e,e):n}s();var Ho=x(O());H();var bne=Z.createResponsiveComponent(ds),Sne=K.createInteractiveComponent(Vr);function MB(t){let{subPages:o,revision:e}=t,{desktopSidebarWidth:n}=Ho.useContext(Ki),r=le(),[,i]=_(W);return tt()?null:Ho.createElement(S,null,Ho.createElement(V,{style:[i.Body,i.text]},r("page_articles_section")),Ho.createElement(Z.View,{style:[g.Padding.largeTop,b.wrap],desktopStyle:b.directionRow,customBreakpointsStyles:{[Kc(n)]:b.directionColumn}},o.map((c,l)=>Ho.createElement(Ho.Suspense,{fallback:Ho.createElement(LB,{page:c,revision:e,index:l,totalPageNumber:o.length}),key:c.id},Ho.createElement(wne,{page:c,revision:e,index:l,totalPageNumber:o.length})))))}function wne(t){let{page:o}=t,e=ot(o.type==="link"?o.target:void 0);return Ho.createElement(LB,{...t,contentRef:e})}function LB(t){let{page:o,revision:e,index:n,totalPageNumber:r,contentRef:i}=t,{desktopSidebarWidth:a}=Ho.useContext(Ki),{getNavigationLinkProps:c}=xe(),[,l]=_(W),u=o.emoji?K.createInteractiveComponent(Ct(Bo,{code:o.emoji})):null,d=K.createInteractiveComponent((i==null?void 0:i.secondaryIcon)||Re),p=r%2===0;return Ho.createElement(bne,{...o.type==="link"?i?Ic(i):{}:c({screen:{page:ro(e,o.id)}}),style:[b.alignCenter,g.Padding.medium,b.flex1,{minWidth:`calc(50% - ${g.small}px)`}],desktopStyle:[n%2===0?p?g.Margin.smallRight:null:g.Margin.smallLeft,n<r-(p?2:1)?g.Margin.smallBottom:null],customBreakpointsStyles:{[Kc(a)]:[g.Margin.noneHorizontal,n<r-1?g.Margin.smallBottom:null]}},u?Ho.createElement(S,{style:[g.Margin.mediumRight]},Ho.createElement(u.Child,{size:M.XS,style:[l.textMuted],hoverStyle:l.primary})):null,Ho.createElement(Sne.Child,{style:[l.Body,l.Medium,l.text],activeStyle:l.primary},o.title),o.type==="link"&&(!i||i.secondaryIcon)?Ho.createElement(S,{style:[g.Margin.mediumLeft]},Ho.createElement(d.Child,{size:M.XS,style:[l.textMuted],hoverStyle:l.primary})):null)}s();var ei=x(O());H();s();var bO=x(O());function Ad(t){let{space:o,changeRequest:e,analyticsContext:n,page:r,onClose:i}=t;return Tu({screen:"space_import",...n},[o.key,e==null?void 0:e.key]),bO.createElement(br,null,bO.createElement(DB,{target:{page:r,space:o,changeRequest:e==null?void 0:e.key},onClose:i}))}function NB(t){let{space:o,changeRequest:e,analyticsContext:n}=t,{navigate:r}=xe(),[i,a]=_(Cne),c=tt(),[l,u]=ei.useState(null);return c?null:ei.createElement(ei.Fragment,null,ei.createElement(Ot,null,l==="import"?ei.createElement(Ad,{space:o,changeRequest:e,analyticsContext:n,onClose:()=>{u(null)}}):null),ei.createElement(S,{style:[g.Padding.smallHorizontal,g.Padding.smallVertical,g.Margin.mediumTop,a.blankslateBox,b.directionRow,b.wrap]},ei.createElement(z,{icon:v.Download,size:"medium",style:g.Margin.xsmallRight,iconTint:i.colors.primary.main,onPress:()=>{u("import"),ae({...n,type:"space_blank_slate_initiate",kind:"import"})}},"Import content"),sl(o)?ei.createElement(z,{icon:v.Page,size:"medium",style:g.Margin.xsmallRight,iconTint:i.colors.primary.main,onPress:()=>{r({overlay:{type:"template",space:o.key,organization:o.organization}}),ae({...n,type:"space_blank_slate_initiate",kind:"template"})}},"Use a template"):null,ei.createElement(z,{icon:v.GitHub,size:"medium",style:g.Margin.xsmallRight,iconTint:i.colors.primary.main,onPress:()=>{r({screen:{sideSheet:{type:"gitsync"}}}),ae({...n,type:"space_blank_slate_initiate",kind:"gitsync"})}},"Sync with GitHub / GitLab"),sl(o)?ei.createElement(z,{icon:v.User,size:"medium",style:g.Margin.xsmallRight,iconTint:i.colors.primary.main,onPress:()=>{r({screen:{sideSheet:{type:"share",tab:"invite"}}}),ae({...n,type:"space_blank_slate_initiate",kind:"invite-members"})}},"Add members"):null))}var Cne=G.create({blankslateBox:t=>({borderRadius:M.RADIUS_L,borderWidth:1,borderColor:t.colors.border.mid})});s();var AB=x(O());function BB(t,o,e){let n=tt(),r=Tg();AB.useEffect(()=>{var i;if(o&&!n&&r.current)if(o.hash){let a=window.document.getElementById(o.hash);a&&a.scrollIntoView({behavior:"auto",block:"start",inline:"nearest"})}else(i=e==null?void 0:e.current)==null||i.scrollTo(0,0)},[t,o==null?void 0:o.hash,e,n])}s();var Xc=x(O());s();var na=x(O());H();var kne=K.createInteractiveComponent(Vr),One={[Ve]:null,[Xe]:g.Margin.smallLeft,[Lo]:null},Let=na.memo(function(o){let{sections:e,activeSection:n}=o,[,r]=_(W),[,i]=_(qB),a=le();return na.createElement(S,{style:[i.pageOutline]},na.createElement(S,{style:[b.directionRow,b.alignCenter,g.Padding.largeHorizontal,g.Margin.smallBottom]},na.createElement(V,{style:[r.GroupTitle,r.textMuted,r.Bold]},a("outline"))),e.map(c=>na.createElement(Ine,{key:c.key,section:c,active:n===c.key})))});function Ine(t){let{section:o,active:e}=t,[,n]=_(W),[,r]=_(qB),{navigateToHash:i}=xe();return na.createElement(K.TouchableOpacity,{style:[b.directionRow,g.Padding.largeHorizontal,r.sectionItem,e&&r.sectionItemActive],onPress:()=>{i(o.anchor)}},o.tag?na.createElement(Sr,{backgroundColor:Tl[o.tag]||Y.orange.base,style:[r.sectionTag,g.Margin.xsmallRight,b.alignSelfCenter]},na.createElement(V,{style:[n.textInsideColor,n.MobileCaption,n.Bold,n.Uppercase]},o.tag)):null,na.createElement(kne.Child,{style:[n.Label,n.textMid,o.type&&One[o.type],e&&n.primary],hoverStyle:n.primary},o.title))}var qB=G.create({pageOutline:t=>({borderLeftWidth:1,borderLeftColor:t.colors.border.main,maxWidth:Hc}),sectionItem:{paddingTop:g.xsmall,paddingBottom:g.xsmall,marginLeft:-1,borderLeftWidth:2,borderLeftColor:"transparent",width:"fit-content",maxWidth:"100%"},sectionItemActive:t=>({borderLeftColor:t.colors.primary.main}),sectionTag:{borderRadius:M.XXS,height:M.XXS,paddingHorizontal:g.small,justifyContent:"center"}});function WB(t,o){let e=g.large,n=t.length,r=Math.floor(Math.log2(n)+1),i=0,a=n-1,c=Math.ceil((i+a)/2),l=-1,u=null;for(let d=0;d<r;d++){let p=t[c];if(!p)return null;let m=Qs(p.key),f=m?m.getBoundingClientRect().top-o:null;if(f===null||f>e)a=c,c=Math.floor((i+a)/2);else{if(f>=-e&&f<=e)return t[c].key;f<e&&((u===null||f>u)&&(u=f,l=c),i=c,c=Math.ceil((i+a)/2))}}return l!==-1?t[l].key:null}var FB=.9;function zB(t,o){let[e,n]=Xc.useState(null),r=eh(),i=Xc.useRef(0),a=Xc.useRef(null),c=Xc.useRef(new Map),l=t.length>1,u=_ne(()=>{typeof i.current!="number"&&(i.current=o.current.getBoundingClientRect().top);let p=WB(t,i.current);p!==e&&n(p)},500),d=p=>{p.forEach(f=>{let h=f.target.getAttribute("data-key");h&&c.current.set(h,f.isIntersecting&&f.intersectionRatio>=FB)});let m=Array.from(c.current.entries()).find(([,f])=>f);m&&n(m[0])};return Xc.useEffect(()=>{var p;if(!(!(o!=null&&o.current)||!l)){if(!r)(p=o.current)==null||p.addEventListener("scroll",u);else{let m=t.map(f=>Qs(f.key)).filter(fe);a.current=new IntersectionObserver(d,{rootMargin:`-${Go.PUBLIC_DESKTOP_HEADER_HEIGHT}px 0px -40% 0px`,threshold:FB}),m.forEach(f=>{var h;(h=a.current)==null||h.observe(f)})}return()=>{var m,f;(m=o.current)==null||m.removeEventListener("scroll",u),(f=a.current)==null||f.disconnect()}}},[o==null?void 0:o.current,l]),e}function _ne(t,o){let e=!1;return(...n)=>{e||(t.apply(this,n),e=!0,setTimeout(()=>e=!1,o))}}s();var df=x(O());function SO(t,o,e){let{baseRevision:n,diffMode:r,diffs:i}=df.useContext(Rb),a=Ce(),c=df.useMemo(()=>{if(!r)return null;let l;switch(r){case"quick":let d=n==null?void 0:n.pages[o];l=d&&d.type==="document"?d.document:void 0;break;case"full":let p=i.get(o);if(!p||p.type!=="modified"||p.before.page.type!=="document")return null;l=p.before.page.document;break}if(!l)return bu(o);let u=zr(a.store.getDocument(t,l));if(!u)throw new Error(`Original page document "${l}" not found`);return vu(u)},[r,n,t,o,i]);return df.useMemo(()=>r!=="full"?[e,c]:[c?pp.create({document:XI(c.document,e.document)}):e,c],[r,c,e])}var Rne=dt("sheet"),Pne=Z.createResponsiveComponent(he);function Eb(t){let o=Yt(),{page:e,screen:n,scrollRef:r}=t;return BB(e.id,n,r),o?se.createElement(Tne,{...t,hiveBranch:o}):se.createElement(Ene,{...t})}function Ene(t){let{space:o,page:e}=t,n=Ce(),r=e.document?zr(n.store.getDocument(o.key,e.document)):void 0,i=se.useMemo(()=>r?vu(r):bu(e.id),[r]),[a,c]=SO(o.key,e.id,i);return se.createElement(VB,{...t,value:a,baseValue:c,onChange:()=>{}})}function Tne(t){let{space:o,page:e,analyticsContext:n}=t,r=Lu(),i=Yt();ze(i),pB(i);let a=f6({branch:i,pageId:e.id,presence:{userId:r.uid,userDisplayName:r.displayName}});se.useEffect(()=>()=>{a.dataSync.flushBatchUpdates()},[a]),se.useEffect(()=>{i.openPage(a.pageId)},[]);let c=sB({analyticsContext:n,hivePage:a}),l=v6(a),u=se.useMemo(()=>[l],[l]),[d,p,m]=g6(a),[f,h]=SO(o.key,e.id,d),y=se.useCallback(k=>{m(k),k.value.document!==k.initialValue.document&&c()},[m]);return se.createElement(VB,{...t,value:f,baseValue:h,onChange:y,selections:p,uploadFiles:async k=>{let I=[],P=await iw({kind:"space_file",space:o.key},k);return await i.change(R=>{P.forEach(D=>{let E=OD(D,r.uid);I.push({kind:"file",file:E.id}),R.insertFile(E)})}),I.forEach((R,D)=>{Rne.info(`file ${R.file} uploaded (${D+1} / ${I.length})`)}),I},updateFile:async(k,I)=>{let[P]=await iw({kind:"space_file",space:o.key},[I]);await i.change(R=>{R.updateFile(k.file,P)})},editorPlugins:u})}function VB(t){var tI,oI;let{space:o,revision:e,page:n,changeRequest:r,readOnly:i=!0,value:a,baseValue:c,onChange:l,selections:u,uploadFiles:d,updateFile:p,withComments:m,analyticsContext:f,withToC:h,outline:y,toolbar:w,footer:C,withDiff:k,scrollRef:I,sideColumnStickyTop:P,editorPlugins:R}=t,{color:D}=fi(),{mode:E}=se.useContext(Jo),T=se.useRef(null),{pages:q,setContentDiffPage:F}=se.useContext(lB),U=_a(),$=wP(),X=le(),oe=tt(),we=se.useRef(),{sections:Ee,sectionIDs:me}=se.useMemo(()=>{let wt=$I(a.document,we.current),Za=ug(a.document,wt).filter(lu=>lu.parentType==="document"&&lu.type!==null&&[Ve,Xe,Lo].includes(lu.type));return{sectionIDs:wt,sections:Za}},[a.document,we]);we.current=me;let We=U.screen.type==="space"&&((tI=U.screen.sideSheet)==null?void 0:tI.type)==="comments"?{commentKey:U.screen.sideSheet.comment,nodeKey:U.screen.sideSheet.node}:void 0;se.useEffect(()=>{var wt;We!=null&&We.commentKey&&(We!=null&&We.nodeKey)&&((wt=Qs(We.nodeKey))==null||wt.scrollIntoView())},[We==null?void 0:We.commentKey]);let mt=se.useRef(null),$o=se.useCallback(()=>{let wt=mt.current;if(!wt)return;let Za=wt.value.change();is(Za.value.document)||Za.collapseToStartOf(wt.value.document),Za.focus(),l(Za)},[mt]),Vn=se.useMemo(()=>q.find(wt=>wt.page.id===n.id&&wt.diff),[q,n.id]),lt=wt=>{l(wt),!Vn&&r&&!a.document.equals(wt.value.document)&&F({diff:"modified",page:n})},Gn=$o,Yo=Ee.length>1,Gt=!y||oe,nl=zB(Ee,I),Hs=se.useCallback(wt=>{ae({...f,...wt})},[f]),{desktopSidebarWidth:nn}=se.useContext(Ki),{customBreakpointsOutlineStyles:ci,customBreakpointsPageBodyStyles:j}=se.useMemo(()=>{let wt=E==="public-content"?1280:uf(2,nn);return{customBreakpointsOutlineStyles:{[wt]:"hidden"},customBreakpointsPageBodyStyles:{[wt]:b.justifyContentCenter}}},[E,nn]),ie=lO(nn,Ib),ee=(oI=e.conflicts)==null?void 0:oI.pages[n.id],ne=is(a.document),He=ne&&Object.keys(e.pages).length===1&&!i,{diffs:Ht}=se.useContext(Rb),ut=Ht.has(n.id),[St,xt]=bB({isDiffViewEnabled:k,isCommentMarginVisible:m,isFullPage:h||Gt}),Jt=B7(),Hn=se.useCallback(wt=>{wt?Jt.highlight(wt,{highlighting:!1,postButton:!0}):Jt.highlight(null)},[Jt]),fr=!U.overlay&&ne&&!i;se.useEffect(()=>{fr&&$o()},[n.id,fr,$o]);let gr=Mi(n),rl=Au(n)&&!!gr.cover,Nf=gr.coverSize,FS=!gr.pagination||o.showPagination===!1,zS=se.useMemo(()=>({type:"document",editable:!0,spaceId:o.key,theme:D}),[o.key,D]),O4=nP({operationId:"listSpaceIntegrationsBlocks",params:{spaceId:o.key}},se.useCallback(wt=>{let Za={};return wt.forEach(lu=>{Za[lu.name]=lu.blocks}),Za},[]));return se.createElement(se.Fragment,null,rl&&Nf==="full"?se.createElement(te,{style:E==="public-content"&&!h?rB.pageCoverBleedFull:null},se.createElement(hO,{revision:e,page:n,readOnly:i,analyticsContext:f})):null,se.createElement(S,{ref:T,style:[b.flex1,b.directionRow]},se.createElement(yB,{style:[N.flex.flex1,N.flex.column]},rl&&Nf==="hero"?se.createElement(Dd,null,se.createElement(te,{style:[N.flex.flex1,N.margin.mediumTop]},se.createElement(hO,{revision:e,page:n,readOnly:i,analyticsContext:f,rounded:!0}))):null,se.createElement(he,{tag:"main",style:[b.flex1,b.directionColumn]},se.createElement(Dd,null,se.createElement(Z.View,{style:[b.flex1,b.directionRow],customBreakpointsStyles:j},se.createElement(S,{style:[b.flex1]},se.createElement(RB,{space:o,revision:e,page:n,changeRequest:r,readOnly:i,onSubmitDescription:Gn,analyticsContext:f,withDiff:k,toolbar:w})))),se.createElement(Z.View,{desktopStyle:oe?void 0:g.Padding.xlargeBottom},ee!==void 0?se.createElement(St,{renderMode:"marginless-centered"},se.createElement(xB,{space:o,page:n,revision:e,document:a.document,pageIsDiff:k,conflictType:ee,analyticsContext:f})):null,i&&ne&&n.pages.length?se.createElement(St,{renderMode:"centered"},se.createElement(MB,{subPages:n.pages.map(wt=>e.pages[wt]),revision:e})):se.createElement(V7,{withComments:m,spaceKey:o.key,pageKey:n.id,changeRequestKey:r==null?void 0:r.key},se.createElement(GB,{ref:mt,value:a,baseValue:c,selections:u,onChange:lt,readOnly:i,isDiff:ut,logAnalyticsEvent:Hs,uploadFiles:d,updateFile:p,placeholder:"Enter your content here\u2026",sectionIDs:me,selectedSection:U.screen.hash||null,blockLayoutComponent:St,rightGutterComponent:xt,integrationBlocksContext:zS,integrationsBlocksSubscription:O4,integrationBlocksRemote:$,onBlockHover:Hn,plugins:R}),He?se.createElement(St,{renderMode:"centered"},se.createElement(NB,{space:o,analyticsContext:f,changeRequest:r})):null),He?null:se.createElement(Dd,{style:N.margin.largeTop},se.createElement(Z.View,{style:[b.flex1,b.directionRow],customBreakpointsStyles:j},se.createElement(S,{style:[b.flex1]},se.createElement(Z.View,null,FS?null:se.createElement(TB,{analyticsContext:f,space:o,revision:e,page:n,style:g.Margin.largeBottom}),C||null))))))),Gt?null:se.createElement(Pne,{tag:"aside",accessibilityLabel:X("page_outline"),testID:"page.outline",style:[wO.pageSideColumn,g.Margin.largeVertical,{top:P!==void 0?P:g.large,maxHeight:P!==void 0?`calc(100vh - ${P}px)`:`calc(100vh - ${aO+g.large}px)`},E==="app"?wO.pageSideMaxWidth:wO.pageSidePublicMaxWidth],mobileStyle:"hidden",desktopStyle:{width:ie},customBreakpointsStyles:ci},Yo?se.createElement(y,{sections:Ee,activeSection:nl}):null)))}var wO=Q.create({pageSideMaxWidth:{maxWidth:Hc},pageSidePublicMaxWidth:{maxWidth:Hc},pageSideColumn:{position:"sticky",overflowY:"auto",alignSelf:"flex-start"},pageBody:{maxWidth:Dr+2*Wt},pageBodyWithComments:{maxWidth:Dr+Wt,marginRight:0},pageBodyDesktopRightPadding:{paddingRight:Wt},pageBodyMobileRightPadding:{paddingRight:tn},pageBodyPDFRightPadding:{paddingRight:tn},pageBodyDesktopLeftMargin:{marginLeft:Wt},pageBodyMobileLeftMargin:{marginLeft:tn},pageBodyPDFLeftMargin:{marginLeft:tn}});s();var CO=x(O());H();function Mb(t){let{withPageOutline:o=!0}=t;return CO.createElement(Z.View,{style:[b.directionRow,b.justifyContentCenter],desktopStyle:[g.Padding.xxlargeTop,Tb.pageSheetLoadingDesktop,o&&Tb.pageSheetLoadingDesktopWithOutline],mobileStyle:[g.Padding.mediumTop,Tb.pageSheetLoadingMobile]},CO.createElement(Ao,{size:"xlarge",style:Tb.pageBody}))}var Tb=Q.create({pageSheetLoadingDesktop:{paddingRight:Wt,paddingLeft:Wt},pageSheetLoadingDesktopWithOutline:{paddingRight:Hc+Wt},pageSheetLoadingMobile:{paddingLeft:tn,paddingRight:tn},pageBody:{maxWidth:Dr+2*Wt}});s();var Ln=x(O());s();var Je=x(O());H();function HB(t){let{revision:o,analyticsContext:e,page:n,onClose:r}=t,i=Je.useRef(null),[,a]=_(W),[c,l]=Je.useState(n.title),[u,d]=Je.useState(n.emoji),[p,m]=Je.useState("slug"in n&&n.slug?n.slug:""),[f,h]=Je.useState(n.type==="link"?n.target:void 0),y=Yt(),w=c.length>0&&(n.type==="link"?!!f:!0),C=Sn(o,n.id),k=C?ro(o,C.id):"",I=n.type!=="link"?S_(o,n.id,c):"",P=async()=>{w&&(ze(y),await y.change(E=>{E.updatePage(n.id,n.type!=="link"?{title:c,emoji:u,slug:p?$S(p):void 0}:{title:c,emoji:u,target:f})}),n.title!==c&&ae({...e,type:"edit_page_title",pageKind:n.type}),n.type!=="link"&&p&&n.slug!==p&&ae({...e,type:"edit_page_path",pageKind:n.type}),n.emoji!==u&&ae({...e,...u?{type:"edit_pick_page_emoji",pageKind:n.type,emoji:u}:{type:"edit_remove_page_emoji",pageKind:n.type}}),r())},R=E=>{var T;(T=i.current)==null||T.close(),d(E)},D=Je.useMemo(()=>u?Ct(Bo,{code:u}):null,[u]);return Je.createElement(ko,{title:"Edit page",onClose:r,footer:Je.createElement(S,{style:[b.directionRow,b.justifyContentEnd]},Je.createElement(z,{kind:"secondary",onPress:r,style:g.Margin.smallRight},"Cancel"),Je.createElement(Ip,{disabled:!w,kind:"primary",onPress:P},"Save"))},Je.createElement(S,{style:[g.Margin.largeBottom]},Je.createElement(S,{style:[g.Margin.smallBottom]},Je.createElement(Pu,null,"Title")),Je.createElement(S,{style:[b.directionRow,b.alignEnd]},Je.createElement(S,{style:[g.Margin.mediumRight]},Je.createElement(Ys,{ref:i,wrapper:yi,anchor:({ref:E,opened:T,toggle:q})=>Je.createElement(z,{ref:E,active:T,onPress:q,kind:"secondary",size:"large",icon:D||v.EmojiReaction})},Je.createElement(xn,{kind:"wide"},Je.createElement(My,{onPick:R,onRemove:u?()=>R(void 0):void 0})))),Je.createElement(S,{style:[b.flex1]},Je.createElement(ao,{size:"large",value:c,onChangeText:l,onSubmit:P})))),n.type==="link"?Je.createElement(S,null,Je.createElement(Ky,{label:"Reference",size:"large",value:f,onChangeValue:h})):Je.createElement(S,null,Je.createElement(ao,{label:"Slug",size:"large",prefix:`${k}/`,value:p,placeholder:I,onChangeText:m,onSubmit:P,feedback:p&&!II(p)?{type:"warning",message:Je.createElement(Je.Fragment,null,"The page slug contains unsupported characters for an URL. Saving will replace it by"," ",Je.createElement(V,{style:[a.Bold]},$S(p)),".")}:void 0})))}s();var cr=x(O());s();var ra=x(O());H();function KB(t){let{onClose:o,onSubmit:e}=t,[n,r]=ra.useState(""),[i,a]=ra.useState(),c=async()=>{i?e(DP({title:n,target:i})):o()};return ra.createElement(ko,{title:"Insert link",onClose:o,subtitle:"Insert a link to external content in your content navigation, this link will open in a new tab.",footer:ra.createElement(S,{style:[b.directionRow,b.justifyContentEnd]},ra.createElement(z,{kind:"secondary",onPress:o,style:g.Margin.smallRight},"Cancel"),ra.createElement(z,{kind:"primary",onPress:c,disabled:!i},"Insert"))},ra.createElement(S,{style:[g.Margin.largeBottom]},ra.createElement(ao,{autoFocus:!0,label:"Title",size:"large",placeholder:"Enter title to display",value:n,onChangeText:r})),ra.createElement(Ky,{label:"To",size:"large",placeholder:"Paste in or type a url",value:i,onChangeValue:a}))}function XB(t){let{space:o,revision:e,changeRequest:n,analyticsContext:r,parent:i}=t,{navigateToPage:a}=Oc(),[c,l]=cr.useState(null),u=Yt(),d=cr.useCallback(y=>{ze(u);let w=u.syncChange(C=>{let k=typeof y=="function"?y(C):y;return C.insertPage(k,{into:i}),k});ae({...r,type:"edit_create_page",pageKind:w.type}),w.type!=="link"&&a(u.revision,w.id)},[u,a]),p=cr.useCallback(()=>{ze(u);let y=u.syncChange(w=>{let C=y_({title:w.getUniquePageTitle("Group",!0)}),k=Sp({title:w.getUniquePageTitle("Page",!0)});return w.insertPage(C,{into:i}),w.insertPage(k,{into:C.id}),k});ae({...r,type:"edit_create_page",pageKind:"group"}),a(u.revision,y.id)},[e,u,a]),m=cr.useMemo(()=>ce({groups:[{key:"insertPage",commands:[{key:"insertPage.sheet",icon:v.Page,title:"New document page",trigger:()=>{d(y=>Sp({title:y.getUniquePageTitle("Page",!0)}))}},i?null:{key:"insertPage.group",icon:v.AddPageGroup,title:"New group",trigger:()=>{p()}},{key:"insertPage.link",icon:v.Link,title:"New link",trigger:()=>{l("link")}}].filter(fe)},{key:"insertExisting",commands:[{key:"insertExisting.import",icon:v.Download,title:"Import new pages",trigger:()=>{l("import")}}].filter(fe)}]}),[e,i,p,d]),f=()=>{l(null)};return[cr.createElement(cr.Fragment,null,cr.createElement(Ot,null,c==="link"?cr.createElement(KB,{onClose:f,onSubmit:y=>{d(y),l(null)}}):null),cr.createElement(Ot,null,c==="import"?cr.createElement(Ad,{space:o,changeRequest:n,page:i,analyticsContext:r,onClose:f}):null)),m,d]}function Lb(t,o=[]){let{space:e,revision:n,changeRequest:r,page:i,analyticsContext:a,readOnly:c}=t,[l,u]=Ln.useState(null),d=Ce(),p=Yt(),{getNavigationHref:m,navigateToPage:f}=Oc(),{navigate:h}=xe(),y=Ln.useContext(Jo),w=le(),C=Dg(),[k,I,P]=XB({space:e,revision:n,changeRequest:r,parent:i.id,analyticsContext:a}),R=Object.keys(n.pages).length>1,D=Ln.useMemo(()=>{var T,q,F,U,$;return ce({groups:[c?null:{key:"pageEdit",commands:[i.type!=="link"?{key:"pageEdit.insert",icon:v.AddPageGroup,title:"Insert subpage",descendant:()=>I,trigger:()=>{P(X=>Sp({title:X.getUniquePageTitle("Page",!0)}))}}:null,i.type!=="link"?{key:"pageEdit.import",icon:v.Download,title:"Import subpages",trigger:()=>{u("import")}}:null,i.type==="document"&&Au(i)?{key:"pageEdit.addCover",icon:v.Image,title:"Add cover",trigger:async()=>{ze(p),await p.change(X=>{X.addPageCover(i.id)}),ae({...a,type:"edit_add_cover"})}}:null,{key:"pageEdit.edit",icon:v.Type,title:i.type==="link"?"Edit":"Rename",trigger:()=>{u("edit")}},{key:"pageEdit.duplicate",icon:v.PageDuplicate,title:"Duplicate",trigger:async()=>{ze(p);let X=await d.duplicateContent({contentId:p.contentId,branchId:p.branchId},{contentId:p.contentId,branchId:p.branchId,pageId:i.id});ae(Cg(e,i,{...a,type:"edit_duplicate_page",pageKind:i.type})),i.type!=="link"&&f(p.revision,X.pageId)}},i.type==="document"?{key:"pageEdit.options",icon:v.Options,title:"Options",trigger:()=>{h({screen:{sideSheet:{type:"page"}}})}}:null,R?{key:"pageEdit.delete",icon:v.Trashcan,title:"Delete",trigger:()=>{u("delete")}}:null].filter(fe)},{key:"pageRead",commands:[i.type==="document"&&(e.hasPDFExport||y.mode!=="public-content")?{key:"pageRead.export",icon:v.PDF,title:w("export_pdf"),testID:"page.exportButton",trigger:()=>{f(n,i.id,{sideSheet:{type:"share",tab:"pdf"}})}}:null,i.type!=="link"?{key:"pageRead.copyURL",icon:v.Link,title:w("copy_link"),trigger:()=>{let X=m(n,i.id),oe=`${window.location.origin}${X}`;C.writeTextAndNotify(oe,{title:"Page URL copied to clipboard"})}}:null,i.type!=="link"&&e.showEditOnGitProvider&&((T=e.git)!=null&&T.url)&&((q=e.git)!=null&&q.installationProvider)&&((F=i.git)!=null&&F.filePath)&&y.mode==="public-content"?{key:"pageRead.editOnGitHub",icon:RP[(U=e.git)==null?void 0:U.installationProvider],title:w("edit_on_github",PP[($=e.git)==null?void 0:$.installationProvider]),trigger:()=>{var X,oe;window.location.assign(`${(X=e.git)==null?void 0:X.url}/${(oe=i.git)==null?void 0:oe.filePath}`)}}:null,...o].filter(fe)}].filter(fe)})},[c,e,n,i,R,y.mode,m,f,r,o,d,p]),E=()=>{u(null)};return[Ln.createElement(Ln.Fragment,null,k,Ln.createElement(Ot,null,l==="edit"?Ln.createElement(HB,{revision:n,page:i,analyticsContext:a,onClose:E}):null),Ln.createElement(Ot,null,l==="delete"?Ln.createElement(Pb,{space:e,page:i,revision:n,analyticsContext:a,onClose:E}):null),Ln.createElement(Ot,null,l==="import"?Ln.createElement(Ad,{space:e,changeRequest:r,page:i.id,analyticsContext:a,onClose:E}):null)),D]}var Mne=[{size:25,label:"Small"},{size:50,label:"Medium"},{size:75,label:"Large"},{size:100,label:"Fit"}];function UB(t,o){let e=typeof t=="number"?t:t==null?void 0:t.value,n=typeof t=="number"?"px":t==null?void 0:t.unit;return`${e||100}${n||o}`}function jB(t,o){return typeof t=="number"?`${t}px`:(t==null?void 0:t.unit)==="px"?`${t.value}${t.unit}`:o}async function Lne(t,o,e){let n=o.nodes.toArray().map(a=>{let{ref:c}=a.data.toFrozenObject();return c}),r={url:"",broken:!0},i=n.map(a=>w2(t,a,e).then(({uri:c})=>typeof c!="string"||c===""?r:{url:c,broken:!1}).catch(()=>r));return Promise.all(i)}function $B(t){let{node:o,parent:e,isSelected:n,attributes:r,editor:i}=t,{readOnly:a}=i,{ref:c,height:l,width:u}=o.data.toFrozenObject(),d=tb(i,o.key),{logAnalyticsEvent:p}=Oe.useContext(Ge),m=Xy(c),f=Ce(),h=pt(),[,y]=_(xO),w=pd(),C=K.useInteractiveState(),k=e.nodes.size>1,[{dragging:I},P]=Ba({type:"block",item:{id:o.key,type:"block",blockType:o.type,previewLabel:"Move image"},canDrag:()=>!a,collect:me=>({dragging:me.isDragging()})}),R=K.useInteractiveState(),[D,E]=Oe.useState(null),T=Do.getImageAltText(o),q=UB(u,"%"),F=UB(l,"%"),U=jB(l,"auto"),$=jB(u,"100%"),X=()=>{E("alt")},oe=()=>{E(null)},we=async()=>{if(!m||!m.uri)return;let me=await Lne(f,e,h),We=e.getChildIndex(o.key);w.open(me,We)},Ee=me=>{if(!m)return;p({type:"edit_page_document_edit_block_property",blockType:qi,blockProperty:"size",fromValue:void 0,toValue:me.label});let We=Bne(m,me.size);i.change(mt=>{l&&mt.removeDataPathByKey(o.key,["height"]),We?mt.insertDataByKey(o.key,["width"],We):mt.removeDataPathByKey(o.key,["width"])})};return Oe.createElement(Oe.Fragment,null,Oe.createElement(Ot,null,D==="alt"?Oe.createElement(kb,{...t,onClose:oe}):null),Oe.createElement(S,{style:[b.alignCenter,b.flex1]},Oe.createElement(S,{style:[y.imageWrapper,{maxWidth:q,maxHeight:F}],...C.events,...r},Oe.createElement(Bt,{...t},m?Oe.createElement(K.TouchableOpacity,{onPress:we,style:b.alignCenter},Oe.createElement(Qo,{width:$,height:U,source:m,accessibilityLabel:T,loading:d?"priority":"lazy",style:[y.image,I&&Qe.translucent]})):Oe.createElement(Dne,{accessibilityLabel:T})),a?null:Oe.createElement(Oe.Fragment,null,(n||C.hovered)&&!I?Oe.createElement(Nne,{...t,openAltTextModal:X,setSize:Ee}):null,Oe.createElement(gi,{theme:{color:"dark"}},k?Oe.createElement(S,{ref:P,style:[y.imageDragHandle,{display:(C.hovered||R.hovered)&&!I?"flex":"none"}],...R.events},Oe.createElement(v.GrabberVertical,{size:M.ICON_S,style:[y.imageDragHandleIcon]})):null)))),Oe.createElement(qc,{...t,isSelected:t.isSelected||C.hovered}))}function Dne(t){let{style:o,...e}=t,[,n]=_(W),[,r]=_(xO);return Oe.createElement(S,{style:[b.alignCenter,b.justifyContentCenter,r.brokenImage,g.Padding.large,o],...e},Oe.createElement(S,null,Oe.createElement(v.CloudOff,{size:M.ICON_L,style:[n.textMuted]})),Oe.createElement(S,{style:[g.Margin.mediumTop]},Oe.createElement(V,{style:[n.Caption,n.textMuted]},"Could not load image")))}function Nne(t){let{editor:o,node:e,openAltTextModal:n,setSize:r}=t,[,i]=_(xO),a=_t(),[c,l]=Oe.useState(!1),u=async()=>{let[p]=await a.prompt({title:"Replace image",accept:"images",acceptURL:!0});p&&o.change(m=>{m.insertDataByKey(e.key,["ref"],p),m.removeDataPathByKey(e.key,["height"]),m.removeDataPathByKey(e.key,["width"])})},d=()=>{o.change(p=>{e&&ye.isTextRange(p.value.selection)&&!p.value.selection.hasEdgeIn(e)&&p.collapseToStartOf(e),p.focus()}),l(!0)};return Oe.createElement(Oe.Fragment,null,Oe.createElement(S,{style:[i.imageToolbar,b.directionRow,c?i.imageToolbarOpen:null]},c?Oe.createElement(Oe.Fragment,null,Oe.createElement(Ane,{onPress:r,...t}),Oe.createElement(z,{title:"ALT text",size:"small",icon:v.AltText,style:[g.Margin.smallRight],onPress:n}),Oe.createElement(z,{title:"Replace",size:"small",icon:v.Replace,style:[g.Margin.smallRight],onPress:()=>u()}),Oe.createElement(z,{size:"small",icon:v.X,onPress:()=>l(!1)})):Oe.createElement(z,{size:"small",icon:v.MoreVertical,onPress:d})))}function Ane(t){let{editor:o,node:e,onPress:n}=t,r=Oe.useRef(null),i=Mne.map(({size:l,label:u})=>({key:`${l}`,title:u,trigger:()=>{n({size:l,label:u})}})),a=de(r),c=()=>{a.open(ce({position:{width:"anchor"},groups:[{key:"image.resize",commands:i}].filter(fe)})),o.change(l=>{e&&ye.isTextRange(l.value.selection)&&!l.value.selection.hasEdgeIn(e)&&l.collapseToStartOf(e),l.focus()})};return Oe.createElement(Oe.Fragment,null,Oe.createElement(z,{ref:r,active:a.opened,size:"small",rightIcon:v.ChevronDown,onPress:c},"Size"))}function Bne(t,o){let e=t.width||Go.PAGE_BODY_MAX_WIDTH;if(o===100)return;let n=Math.min(e,Go.PAGE_BODY_MAX_WIDTH);return Math.round(n*(o/100))}var xO=G.create({imageWrapper:{position:"relative",borderRadius:M.RADIUS_M},imageCaption:{position:"relative",textAlign:"center"},image:{borderRadius:M.RADIUS_M,maxWidth:"100%"},imageToolbar:t=>({position:"absolute",top:g.small,right:g.small,padding:g.small,borderRadius:M.RADIUS_M,borderColor:t.colors.border.mid,borderWidth:1,borderStyle:"solid",backgroundColor:t.colors.background.mid,width:42,overflow:"hidden",transition:"width 50ms ease-in-out"}),imageToolbarOpen:{width:172},imageDragHandle:{position:"absolute",top:g.small,left:g.small,cursor:"grab"},imageDragHandleIcon:{textShadowColor:Y.BLACK,textShadowRadius:3,color:Y.WHITE},brokenImage:t=>({borderRadius:M.RADIUS_M,backgroundColor:t.colors.background.muted})});s();var Ae=x(O());s();var kO=JSON.parse('{"tooltip":"tooltip_8qsEs","brokenImage":"brokenImage_F5FWc"}');function YB(t){let{editor:o,node:e,parent:n,ancestors:r}=t,i=tb(o,e.key),a=Ae.useRef(null),c=sr(n.object==="block"?n:null),l=e.data.get("size","original"),[,u]=_(zne),d=r.some(m=>m.object==="inline"&&m.type===bn),p=m=>Ae.createElement(_d,{...m,...t,style:[u.inlineFrame,l==="line"?b.alignCenter:null]},Ae.createElement(Ae.Suspense,{fallback:Ae.createElement(Re,{size:"small"})},Ae.createElement(qne,{node:e,parentLineHeight:c,size:l,ref:a,withPriorityLoading:i})));return o.readOnly?p(d?{}:{onPress:()=>{var m;(m=a.current)==null||m.openInGallery()}}):Ae.createElement(Fne,{...t,anchor:p})}var qne=Ae.forwardRef(function(o,e){let{node:n,parentLineHeight:r,size:i,withPriorityLoading:a}=o,c=n.data.get("ref"),l=Do.getImageAltText(n),u=Xy(c),d=pd();Ae.useImperativeHandle(e,()=>({openInGallery:()=>{u!=null&&u.uri&&d.open([{url:u.uri}])}}),[u==null?void 0:u.uri]);let p={};i==="original"?p={maxWidth:300}:p={maxHeight:r,height:r,width:"auto"};let m=Ae.createElement(Wne,{accessibilityLabel:l});return u?Ae.createElement(Qo,{accessibilityLabel:l,source:u,style:p,errorFallback:m,loading:a?"priority":"lazy"}):m});function Wne(t){let{accessibilityLabel:o}=t,[,e]=_(W);return Ae.createElement(te,{style:kO.brokenImage,"aria-label":o},Ae.createElement(v.CloudOff,{size:M.ICON_M,style:e.textMuted}))}function Fne(t){let{node:o,anchor:e,isFocused:n,editor:r}=t,{logAnalyticsEvent:i}=Ae.useContext(Ge),a=Ae.useRef(null),c=_t(),[l,u]=Ae.useState(null),d=n&&r.value.selection.isCollapsed,[p,m]=Ae.useState(!1);Ae.useEffect(()=>{if(d){m(!0);return}let C=setTimeout(()=>{m(!1)},300);return()=>{clearTimeout(C)}},[d]);let f=()=>{r.change(C=>{C.collapseToStartOf(o).focus()})},h=C=>{r.change(k=>{k.insertDataByKey(o.key,["size"],C),k.collapseToStartOf(o).focus()})},y=()=>{i({type:"edit_page_document_edit_block_type",fromType:mu,toType:qi}),r.change(C=>{Do.replaceInlineImageWithBlock(C,o)})},w=async()=>{let[C]=await c.prompt({title:"Replace image",accept:"images",acceptURL:!0});C&&r.change(k=>{k.insertDataByKey(o.key,["ref"],C)})};return Ou(()=>{var C;(C=a.current)==null||C.updatePosition()},[o.data]),Ae.createElement(Ae.Fragment,null,Ae.createElement(Ot,null,l==="alt"?Ae.createElement(kb,{...t,onClose:()=>u(null)}):null),Ae.createElement(xa,{ref:a,opened:d||p,anchor:({ref:C})=>e({ref:C,onPress:f})},Ae.createElement(xn,{kind:"tooltip"},Ae.createElement(te,{style:kO.tooltip},Ae.createElement(z,{size:"small",title:"Inline size",onPress:()=>h("line"),icon:v.ImageSizeSmall}),Ae.createElement(z,{size:"small",title:"Original size",onPress:()=>h("original"),icon:v.ImageSizeLarge}),Ae.createElement(z,{size:"small",title:"Convert to block",onPress:y,icon:v.ImageSizeBlock}),Ae.createElement(z,{size:"small",title:"Replace",onPress:w,icon:v.Replace}),Ae.createElement(z,{size:"small",title:"ALT text",onPress:()=>u("alt"),icon:v.AltText})))))}var zne=G.create({inlineFrame:{maxWidth:"100%"}});s();var ZB=x(O());function QB(t){let{children:o,attributes:e}=t;return ZB.createElement(yt,{tag:"strong",style:So.Bold,...e},o)}s();var JB=x(O());function e5(t){let{children:o,attributes:e}=t;return JB.createElement(yt,{tag:"em",style:So.Italic,...e},o)}s();var t5=x(O());function o5(t){let{children:o,attributes:e}=t;return t5.createElement(yt,{tag:"span",style:So.Strikethrough,...e},o)}s();var n5=x(O());function r5(t){let{children:o,attributes:e}=t,[,n]=_(Vne);return PR(),n5.createElement(yt,{tag:"code",style:[n.markCode],...e},o)}var Vne=G.create({markCode:t=>({backgroundColor:t.colors.background.muted,borderRadius:t.radiuses.medium,paddingLeft:g.xsmall,paddingRight:g.xsmall,fontFamily:Ig})});s();var i5=x(O());function a5(t){let{children:o,mark:e,attributes:n}=t,r=e.data.toObject(),i=fi(),a=r.background&&r.background!=="default",c=r.text&&r.text!=="default",l=a&&i.color==="dark"?{color:Y.lightModeText.base}:null;c&&(l=Py.find(d=>d.key===r.text)||null);let u=a?Ey.find(d=>d.key===r.background):null;return i5.createElement(yt,{tag:"mark",style:[{color:l?l.color:"inherit",backgroundColor:u?u.color:"inherit"}],...n},o)}s();var Ha=x(O());H();s();var Ko=x(O());H();s();var s5=JSON.parse('{"exitHint":"exitHint_xASL-","show":"show_HIlHf"}');function Db(t){let{node:o,anchor:e,isSelected:n,isOnlyNodeSelected:r,isFocused:i,editor:a}=t,{formula:c}=o.data.toFrozenObject(),l=Ko.useRef(null),[u,d]=Ko.useState(!1),[p,m]=Ko.useState(!1),[f,h]=js(c,[c]),[,y]=_(W),w=()=>{d(!1),m(!1)},C=()=>{u||(a.change(R=>{Kt(R.value.selection)&&R.collapseToStartOf(o).focus()}),d(!0))};Ko.useEffect(()=>{var R;u&&((R=l.current)==null||R.focus())},[u]),Ko.useEffect(()=>{r&&C()},[r]);let k=R=>{h(R),m(!1)},I=()=>{w(),a.change(R=>{R.blur(),R.insertDataByKey(o.key,["formula"],o.object==="inline"?f.replace(/\n/g," "):f)})},P=()=>{w(),a.change(R=>{var D;if(R.blur(),R.insertDataByKey(o.key,["formula"],o.object==="inline"?f.replace(/\n/g," "):f),o.object==="block")kt(R);else{let E=(D=o.getFirstText())==null?void 0:D.key;if(E){let T=R.value.document.getNextText(E);T&&R.collapseToStartOf(T)}}R.focus()})};return a.readOnly?e({formula:c}):Ko.createElement(P6,{opened:u,onClose:I,wrapper:bR,anchor:({ref:R})=>e({ref:R,isFocused:n&&i||u,onPress:C,formula:f,onError:()=>{m(!0)}})},Ko.createElement(xn,{kind:"tooltip"},Ko.createElement(S,null,Ko.createElement(ao,{ref:l,multiline:!0,numberOfLines:3,autoFocus:!0,selectTextOnFocus:!0,value:f,onChangeText:k,placeholder:"Enter your TeX formula",onSubmit:P,kind:"inverted",textStyle:p?[y.danger]:void 0}),Ko.createElement(Gne,null),p?Ko.createElement(vi,{tooltip:"There is an error in your math formula",preferredPlacement:"bottom"},(R,D)=>Ko.createElement(S,{ref:D,style:Hne.blockErrorBadge,...R.events},Ko.createElement(xo,{icon:v.ExclamationCircle,kind:"danger"}))):null)))}function Gne(){return Ko.createElement(Cn,{style:[s5.exitHint,N.text.label,N.textColor.muted,N.text.notSelectable],contentEditable:!1},"Exit with"," ",Ko.createElement(ms,{kind:"muted",style:[N.flex.inline],shortcut:Ue.EDITOR_EXIT_BLOCK}))}var Hne=Q.create({blockErrorBadge:{position:"absolute",bottom:g.small,left:g.small}});s();var Nb=Fg("f1a718ae5a0b5d0a680254c13fabc0ed4b38f7b4037704dda83756645a7f1027",()=>import("https://app.gitbook.com/public/app/chunks/MathTeXView.lazycomponent-BFSUMVVU.min.js"));function c5(t){return Ha.createElement(Db,{anchor:({formula:o,onError:e,...n})=>Ha.createElement(be,{...t},Ha.createElement(Bt,{...t,...n},Ha.createElement(Ha.Suspense,{fallback:Ha.createElement(Tr,null)},Ha.createElement(ma,{horizontal:!0,showsVerticalScrollIndicator:!1,contentContainerStyle:Kne.container},Ha.createElement(Nb,{formula:o,inline:!1,onError:e}))))),...t})}var Kne=Q.create({container:{marginLeft:"auto",marginRight:"auto"}});s();var Uc=x(O());function l5(t){return Uc.createElement(Db,{anchor:({formula:o,onError:e,...n})=>Uc.createElement(_d,{...t,...n},Uc.createElement(Uc.Suspense,{fallback:Uc.createElement(Re,{size:"small"})},Uc.createElement(Nb,{formula:o,inline:!0,onError:e}))),...t})}s();var oo=x(O());s();var u5=x(O()),Ab=u5.createContext(new Map);s();s();var _O=x(O());s();s();var OO=x(O());H();var d5={title:"Checkbox",description:"A single checkbox that can be checked or unchecked.",IconComponent:v.ColumnTypeCheckbox,ValueComponent:Xne,onKeyDown:(t,o,e)=>{switch(t){case"backspace":o&&e(!1);break;case"enter":e(!o);break}}};function Xne(t){let{value:o,readOnly:e,onValueChange:n,style:r}=t;return OO.default.createElement(S,{style:[r,b.flex1,b.directionRow,b.alignCenter]},OO.default.createElement(ec,{value:o,onValueChange:n,readOnly:e}))}s();var ti=x(O());H();var p5={title:"Link",description:"Reference another page, file, space or collection.",IconComponent:v.PageLink,ValueComponent:Une};function Une(t){let{value:o,selected:e,readOnly:n,displayMode:r,style:i,onValueChange:a}=t,c=ti.default.useRef(null),l=de(c),u=pt(),d=Ce(),p=()=>{l.open(Pn(a,u,d,{accept:["page","file","space","collection","anchor","url"]}))};return ti.default.createElement(S,{ref:c,style:[b.directionRow,b.wrap,b.flex1,b.alignCenter,i]},ti.default.createElement(ti.default.Suspense,{fallback:ti.default.createElement(Re,null)},o?ti.default.createElement(S,{style:[b.flex1,b.directionRow]},ti.default.createElement(jne,{contentRef:o})):null,(r==="block"||e)&&!n?ti.default.createElement(z,{icon:v.MoreVertical,title:r!=="block"?"Select target":null,kind:"secondary",size:"small",onPress:p},r==="block"?"Select target":null):null))}function jne(t){let{contentRef:o}=t,[e]=mk([o]),[,n]=_(W);return e?ti.default.createElement(S,{style:[b.directionRow,b.alignCenter]},e.icon?ti.default.createElement(S,{style:[g.Margin.smallRight]},ti.default.createElement(e.icon,{size:M.ICON_M,style:[n.textMuted]})):null,ti.default.createElement(Ia,{url:e.href,onPress:r=>{r.preventDefault(),e.open()},style:[n.Body]},e.title)):null}s();var Ar=x(O());H();var m5={title:"Files",description:"Attachments allow you to add images, documents, or other files which can then be viewed or downloaded.",IconComponent:v.ColumnTypeFile,ValueComponent:$ne};function $ne(t){let{value:o,selected:e,readOnly:n,displayMode:r,onValueChange:i,style:a}=t,c=_t(),l=async()=>{let d=await c.prompt({title:"Select file"});i([...o,...d.filter(p=>p.kind==="file").map(p=>p.file)])},u=d=>{let p=[...o];p.splice(d,1),i(p)};return Ar.default.createElement(S,{style:[b.directionRow,b.wrap,b.flex1,o.length>0?Zne.filesList:null,a]},Ar.default.createElement(Ar.default.Suspense,{fallback:Ar.default.createElement(Re,null)},o.map((d,p)=>Ar.default.createElement(Yne,{key:d,fileId:d,readOnly:n,onRemove:()=>u(p)}))),(r==="block"||e)&&!n?Ar.default.createElement(z,{icon:v.Plus,title:"Add attachment",kind:"secondary",size:"small",onPress:l},r==="block"?"Add file":null):null)}function Yne(t){var p,m;let{fileId:o,readOnly:e,onRemove:n}=t,[,r]=_(W),i=K.useInteractiveState(),a=Ar.default.useRef(null),c=de(a),l=ot({kind:"file",file:o}),u=(m=(p=l.resolution)==null?void 0:p.extra)==null?void 0:m.file;return Ar.default.createElement(Ke,{onPress:()=>{e?l.href&&fs(l.href):c.open(ce({groups:[{key:"file",commands:[{key:"remove",title:"Remove",icon:v.Trashcan,trigger:()=>{n()}},u?{key:"download",title:"Download",icon:v.Download,trigger:()=>{fs(l.href)}}:null].filter(fe)}]}))},...i.events},Ar.default.createElement(S,{ref:a,style:[b.directionRow,b.alignCenter,g.Margin.smallRight]},Ar.default.createElement(S,{style:[g.Margin.smallRight]},Ar.default.createElement(fd,{file:u,size:M.BUTTON_S})),Ar.default.createElement(S,null,Ar.default.createElement(V,{style:[r.Body,i.active||c.opened?r.primary:r.text]},(u==null?void 0:u.name)||"Deleted"))))}var Zne=Q.create({filesList:{gap:g.small}});s();var IO=x(O());H();var f5={title:"Number",description:"",IconComponent:v.Numbers,ValueComponent:Qne,onKeyDown:(t,o,e)=>{switch(t){case"backspace":e(null);break;case"enter":typeof o!="number"&&e(0);break}}};function Qne(t){let{readOnly:o,value:e,onValueChange:n,onSelectionChange:r,style:i}=t,[,a]=_(W),c=[a.Body,Jne.numberInput,a.textMid,i],l=()=>{r(!0)};return o?IO.default.createElement(V,{style:c},typeof e=="number"?String(e):""):IO.default.createElement(li,{style:c,value:typeof e=="number"?String(e):"",onChangeText:u=>n(Number(u)),onFocus:l})}var Jne=Q.create({numberInput:{height:"auto",padding:0,width:"100%",borderWidth:0}});s();var Ul=x(O());H();var ere=8,tre={info:Y.primary.light,merge:Y.violet.light,upgrade:Y.fuchsia.light,danger:Y.scarlet.light},g5={title:"Rating",description:"",IconComponent:v.ColumnTypeRating,ValueComponent:nre,commands:ore,onKeyDown:(t,o,e)=>{switch(t){case"backspace":e(0);break;case"enter":break}}};function ore(t){let{definition:o,setDefinition:e}=t;return[{key:"rating",commands:[{key:"rating.max_value",title:"Max",icon:v.MaximumValue,descendant:()=>ce({search:"Select max rating\u2026",groups:[{key:"max_values",commands:[...Array(5).keys()].map(n=>({key:`${n+1}`,title:`${n+1}`,type:1,selected:o.max===n+1,trigger:()=>{e({...o,max:n+1})}}))}]})}]}]}function nre(t){let{value:o,definition:e,definitionColorKind:n,onValueChange:r,readOnly:i,style:a}=t,[c,l]=_(ire),[u,d]=Ul.default.useState(0),p=[...Array(e.max+1).keys()].slice(1),m=w=>{r(w===o?null:w)},f=w=>{i||d(w)},h=l.circleBase,y=n?{backgroundColor:tre[n]}:l.circleActiveDefault;return Ul.default.createElement(S,{style:[b.directionRow,b.flex1,b.alignCenter,a]},p.map(w=>Ul.default.createElement(K.WithInteractiveState,{key:String(w),onHoverIn:()=>f(w),onHoverOut:()=>f(0)},({events:C})=>Ul.default.createElement(Ke,{...C,onPress:()=>m(w)},Ul.default.createElement(rre,{size:ere+2*(w-1),style:[u===0&&o&&o>=w||u>=w?y:h,{marginRight:g.xsmall}]})))))}function rre({size:t,style:o}){return Ul.default.createElement(S,{style:[{width:t,height:t,borderRadius:t/2},o]})}var ire=G.create({circleBase:t=>({backgroundColor:t.colors.background.standout}),circleActiveDefault:()=>({backgroundColor:Y.primary.light})});s();var h5=x(QI()),Dn=x(O());H();var y5={title:"Select",description:"Select allows you to select an option from predefined options in a dropdown.",IconComponent:v.ColumnTypeSelect,ValueComponent:cre,commands:are,onKeyDown:(t,o,e)=>{switch(t){case"backspace":o.length>0&&e([]);break}}};function are(t){let{definition:o,setDefinition:e}=t;return[{key:"select",commands:[{key:"select.allow_multiple",title:"Allow multiple",icon:v.OptionAdd,type:2,enabled:o.multiple,trigger:()=>{let[n]=e({...o,multiple:!o.multiple});return n}},{key:"select.options",title:"Manage options",icon:v.OptionManage,descendant:()=>v5(t)}]}]}function v5(t){let{definition:o,setDefinition:e,openModal:n}=t,{options:r}=o,i=r.map((a,c)=>{let l=u=>{let d=[...r];d[c]={...a,label:u},e({...o,options:d})};return{key:a.value,title:a.label,descendant:()=>ce({groups:[{key:"select.options.manageOption",commands:[{key:"editOption",title:"Edit option",icon:v.Edit,trigger:()=>{n(u=>Dn.default.createElement(sre,{...u,option:a,onSave:l}))}},{key:"deleteOption",title:"Delete option",icon:v.Trashcan,trigger:()=>{let u=[...r];u.splice(c,1),e({...o,options:u})}}]}]})}});return ce({search:"Search options or type to add",groups:[{key:"select.options.manage",commands:a=>{let c=a.query.text.trim();return a.query.text&&!i.find(l=>l.title===c)?[{key:"add_new_option",title:c,icon:v.Plus,trigger:()=>{let u={value:$f(),label:c,color:"blue"},[,d]=e({...o,options:[...r,u]});return v5(d)}},...i]:i}}]})}function sre(t){let{option:o,definition:e,onSave:n,onClose:r}=t,{options:i}=e,a=[...i].filter(f=>f.label!==o.label),[c,l]=Dn.default.useState(o),u=f=>f.length===0?"The label can not be empty":a.filter(y=>y.label===f).length>0?"Another option already exists with this label":null,d=()=>{n(c.label),r()},p=f=>{l({...c,label:f})},m=u(c.label);return Dn.default.createElement(ko,{title:"Edit option",footer:Dn.default.createElement(S,{style:[b.directionRow,b.justifyContentEnd]},Dn.default.createElement(z,{kind:"secondary",onPress:r,style:g.Margin.smallRight},"Cancel"),Dn.default.createElement(z,{kind:"primary",onPress:d,disabled:!!m},"Save")),onClose:r},Dn.default.createElement(S,null,Dn.default.createElement(ao,{autoFocus:!0,value:c.label,label:"Label",onChangeText:p,feedback:m?{type:"danger",message:m}:void 0})))}function cre(t){let{value:o,selected:e,definition:n,onValueChange:r,definitionColorKind:i,readOnly:a,displayMode:c,style:l}=t,u=Dn.default.useRef(null),d=de(u),[,p]=_(W),m=()=>{d.open(lre(n,o,r))},f=Dn.default.createElement(S,{style:[b.directionRow,b.wrap,b.flex1,o.length>0?ure.optionsList:null]},o.map(h=>{let y=n.options.find(w=>w.value===h);return y?Dn.default.createElement(zR,{key:y.value,deletable:!a&&n.multiple,kind:i!=null?i:"info",onPress:()=>n.multiple?r(o.filter(w=>w!==y.value)):null,size:"small"},y.label):null}));return a||c==="inline"&&!e?f:Dn.default.createElement(Ke,{ref:u,onPress:m,style:[l]},Dn.default.createElement(S,{style:[b.directionRow,b.flex1,b.alignCenter]},f,c==="inline"?Dn.default.createElement(S,{style:[g.Margin.smallLeft]},Dn.default.createElement(v.ChevronDown,{size:M.ICON_XS,style:p.textMuted})):null))}function lre(t,o,e){return ce({search:"Find an option\u2026",position:{width:"small"},groups:[{key:"options",commands:t.options.map(n=>{let r=o.includes(n.value);return{key:n.value,title:n.label,...t.multiple?{type:1,selected:r}:{selected:void 0},trigger:()=>{e(r?o.filter(i=>i!==n.value):(0,h5.default)(t.multiple?[...o,n.value]:[n.value]))}}})}]})}var ure=Q.create({optionsList:{gap:g.small}});s();var Bb=x(O());H();var b5={title:"Text",description:"",IconComponent:v.ColumnTypeText,ValueComponent:pre,commands:dre};function dre(t){let{definition:o}=t,{textAlignment:e}=o,n={left:v.AlignTextLeft,center:v.AlignTextCenter,right:v.AlignTextRight};return[{key:"text.alignment",commands:[{key:"text.alignment",title:"Alignment",descendant:()=>S5(t),icon:n[e]}]}]}function S5(t){let{definition:o,setDefinition:e}=t;return ce({groups:[{key:"text.alignment.select",commands:[{label:"Left",value:"left",icon:v.AlignTextLeft},{label:"Center",value:"center",icon:v.AlignTextCenter},{label:"Right",value:"right",icon:v.AlignTextRight}].map(n=>({key:`text.alignment.${n.value}`,title:n.label,type:1,selected:o.textAlignment===n.value,icon:n.icon,trigger:()=>{let[,r]=e({...o,textAlignment:n.value});return S5(r)}}))}]})}function pre(t){let{value:o,definition:e,style:n,readOnly:r}=t;return o==null?null:Bb.default.createElement(S,{style:[b.flex1,!r&&mre.editableFragment,n]},Bb.default.createElement(kc.Provider,{value:e.textAlignment},Bb.default.createElement(tr,{fragment:o})))}var mre=Q.create({editableFragment:{cursor:"text"}});s();var Nn=x(O());H();var w5={title:"Users",description:"A user field lets you add collaborators to your records.",IconComponent:v.Users,ValueComponent:gre,commands:fre};function fre(t){let{definition:o,setDefinition:e}=t;return[{key:"users",commands:[{key:"users.allow_multiple",title:"Allow multiple",icon:v.Team,type:2,enabled:o.multiple,trigger:()=>{let[n]=e({...o,multiple:!o.multiple});return n}}]}]}function gre(t){let{value:o,selected:e,readOnly:n,displayMode:r,definition:i,onValueChange:a,style:c}=t,l=Nn.default.useRef(null),u=de(l),d=f=>{let h=[...o];h.splice(f,1),a(h)},p=()=>{u.open(ce({search:"Search users\u2026",position:{width:"small"},groups:[{key:"users",commands:f=>gl.read({query:f.query.text,types:["users"]}).map(y=>y.index!=="users"?null:{key:y.object.objectID,title:y.object.displayName,icon:({size:w})=>Nn.default.createElement(hl,{user:y.object,size:w}),trigger:()=>{a([...o,y.object.objectID])}}).filter(fe)}]}))},m=i.multiple?"Add users":"Replace";return Nn.default.createElement(S,{style:[b.flex1,b.directionRow,c]},Nn.default.createElement(S,{style:[b.directionRow,b.wrap,b.flex1,o.length>0?yre.filesList:null]},Nn.default.createElement(Nn.default.Suspense,{fallback:null},o.map((f,h)=>Nn.default.createElement(hre,{key:f,userId:f,readOnly:n,onRemove:()=>d(h)})))),(r==="block"||e)&&!n?Nn.default.createElement(z,{ref:l,icon:i.multiple?v.Plus:v.ChevronDown,title:r==="block"?void 0:m,kind:"secondary",size:"small",onPress:p,active:u.opened},r==="block"?m:null):null)}function hre(t){let{userId:o,readOnly:e,onRemove:n}=t,[,r]=_(W),i=K.useInteractiveState(),a=Nn.default.useRef(null),c=de(a),[l]=Ra([wI(o)]);return Nn.default.createElement(Ke,{onPress:()=>{c.open(ce({position:{width:"small"},groups:[{key:"user",commands:[e?null:{key:"remove",title:"Remove",icon:v.Trashcan,trigger:()=>{n()}}].filter(fe)}]}))},...i.events},Nn.default.createElement(S,{ref:a,style:[b.directionRow,b.alignCenter,g.Margin.smallRight]},l?Nn.default.createElement(S,{style:[g.Margin.smallRight]},Nn.default.createElement(hl,{user:l,size:M.BUTTON_S})):null,Nn.default.createElement(S,null,Nn.default.createElement(V,{style:[r.Body,i.active||c.opened?r.primary:r.text]},(l==null?void 0:l.displayName)||"Deleted"))))}var yre=Q.create({filesList:{gap:g.small}});var oi={checkbox:d5,number:f5,text:b5,files:m5,select:y5,users:w5,rating:g5,"content-ref":p5},C5=["text","number","checkbox","select","users","files","content-ref","rating"];function Ka(t){return t.title||oi[t.type].title}function Bd(t){let{record:o,definition:e,readOnly:n,displayMode:r="inline",editor:i,nodeKey:a,selected:c,definitionColorKind:l,style:u}=t,{ValueComponent:d}=oi[t.definition.type],p=h=>{i.change(y=>{re.setRecordValue(y,a,o.key,e.id,h)})},m=h=>{h&&i.change(y=>{re.moveTableSelection(y,a,{recordId:o.key,definitionId:e.id})})},f=_O.createElement(d,{editor:i,nodeKey:a,readOnly:n,displayMode:r,selected:c,value:o.value.values[e.id],definitionColorKind:l,definition:e,onValueChange:p,onSelectionChange:m,style:u});return e.type==="text"?f:_O.createElement(he,{style:b.flex1,onClick:h=>{h.stopPropagation(),m(!0)}},f)}s();function As(t,o={}){return ce({search:"Select column type",groups:[{key:"types",commands:C5.map(e=>{let n=oi[e];return{key:e,icon:n.IconComponent,title:n.title,...o.selectedType?{type:1,selected:o.selectedType===e}:{selected:void 0},trigger:()=>{t(e)}}})}]})}s();var jc=x(O());H();function x5(t){return t.readOnly?jc.createElement(vre,{...t}):jc.createElement(bre,{...t})}function vre(t){let{definition:o,style:e}=t,[,n]=_(W);return jc.createElement(V,{style:[b.directionRow,o.type==="text"?qb[o.textAlignment]:null,n.Body,n.textMid,n.Medium,qb.columnHeader,e],selectable:!0},Ka(o))}function bre(t){let{editor:o,nodeKey:e,definition:n,style:r}=t,[i,a]=_(W),c=m=>{o.change(f=>{re.renameColumn(f,e,n.id,m)})},l=n.title||"",u=Ka(n),d=jc.useMemo(()=>Q.flatten([r,a.Body,a.textMid,a.Medium,qb.columnHeader,n.type==="text"?qb[n.textAlignment]:null]),[r,n]),p=jc.useMemo(()=>Hg(l||u||"",d),[l,u,d]);return jc.createElement(Gr,{component:li,value:l,placeholder:u,placeholderTextColor:i.colors.text.muted,onChangeText:c,style:[d,p===void 0?{}:{width:p,maxWidth:"100%"}]})}var qb=Q.create({columnHeader:{wordWrap:"anywhere"},left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"}});s();var O5=x(O()),k5=["info","merge","upgrade","danger"];function Sre(t,o){let{definitionColorsKindsMap:e}=o.reduce((n,r)=>{let i=t[r];if(i.type==="rating"||i.type==="select"){let a=k5[n.colorIndexToBeClaimed];n.definitionColorsKindsMap[r]=a,n.colorIndexToBeClaimed=(n.colorIndexToBeClaimed+1)%k5.length}return n},{colorIndexToBeClaimed:0,definitionColorsKindsMap:{}});return e}function I5(t,o){return O5.default.useMemo(()=>Sre(t,o),[t])}s();var ri=x(O());s();s();s();var RO=x(O());function _5(t){return RO.default.createElement(RO.default.Fragment,null)}s();s();function qd(t,o,e={}){let{selected:n=[],search:r="Select columns\u2026",multiple:i=!1,filterDefinition:a=()=>!0}=e;return ce({search:r,groups:[{key:"columns",commands:Object.entries(t).filter(([c,l])=>a(l)).map(([c,l])=>{let u=oi[l.type],d=n.includes(c);return{key:c,title:Ka(l),icon:u.IconComponent,type:1,selected:d,trigger:()=>o(i?d?n.filter(p=>p!==c):[...n,c]:d?[]:[c])}})}]})}s();function mn(t,o,e,n){let{focus:r="end",definition:i,record:a}=n;if(!e.selection.definitionId)return!1;let c=e.records.findIndex(p=>p.key===e.selection.recordId),l=e.view.columns.indexOf(e.selection.definitionId),u=e.records["relative"in a?c+a.relative:a.absolute],d=e.view.columns["relative"in i?l+i.relative:i.absolute];return!d||!u?!1:(re.moveTableSelection(t,o,{recordId:u.key,definitionId:d},r),!0)}function jl(t,o,e,n){let r=e.records.findIndex(a=>a.key===e.selection.recordId),i=e.records["relative"in n?r+n.relative:n.absolute];return i?(re.moveTableSelection(t,o,{recordId:i.key,definitionId:void 0}),!0):!1}var R5=(t,o,e,n)=>{if(!e.selection.definitionId&&e.selection.recordId)return Cre(t,o,e,n);if(e.selection.definitionId&&e.selection.recordId)return wre(t,o,e,n)},wre=(t,o,e,n)=>{let r=e.view.cardSize==="medium"?3:2;switch(t){case"move-up":case"move-down":{mn(n,o,e,{definition:{relative:t==="move-up"?-1:1},record:{relative:0},focus:t==="move-up"?"end":"start"})||mn(n,o,e,{definition:{absolute:t==="move-up"?e.view.columns.length-1:0},record:{relative:t==="move-up"?-r:r},focus:t==="move-up"?"end":"start"})||(t==="move-up"?gu(n,o):kt(n,o));break}case"move-left":case"move-right":{mn(n,o,e,{definition:{absolute:0},record:{relative:t==="move-left"?-1:1},focus:t==="move-left"?"end":"start"});break}case"tab":case"enter":{if(!mn(n,o,e,{definition:{relative:1},record:{relative:0},focus:"end"})&&!mn(n,o,e,{definition:{absolute:0},record:{relative:1},focus:"end"})){let i=re.insertEmptyRecord(n,o.key);re.moveTableSelection(n,o,{recordId:i,definitionId:e.view.columns[0]},"start")}break}case"backspace":{mn(n,o,e,{definition:{relative:-1},record:{relative:0},focus:"end"})||re.moveTableSelection(n,o,{recordId:e.selection.recordId,definitionId:void 0});break}}},Cre=(t,o,e,n)=>{let r=e.view.cardSize==="medium"?3:2;switch(t){case"tab":{jl(n,o,e,{relative:1});break}case"shift+tab":{jl(n,o,e,{relative:-1});break}case"move-left":case"move-right":{jl(n,o,e,{relative:t==="move-left"?-1:1})||(t==="move-left"?gu(n,o):kt(n,o));break}case"move-up":case"move-down":{jl(n,o,e,{relative:t==="move-up"?-r:r})||(t==="move-up"?gu(n,o):kt(n,o));break}case"backspace":{jl(n,o,e,{relative:-1})||jl(n,o,e,{relative:1}),re.removeRecord(n,o.key,e.selection.recordId);break}case"enter":{mn(n,o,e,{definition:{absolute:0},record:{relative:0},focus:"start"});break}}};s();var Bs=x(O());s();var Wb=x(O());function P5(t){let{editor:o,nodeKey:e,defaultTextDefinitionId:n}=t,[,r]=_(xre),[,i]=_(W),a=()=>{o.change(c=>{let l=re.insertEmptyRecord(c,e);re.moveTableSelection(c,e,{recordId:l,definitionId:n})})};return Wb.createElement(K.TouchableOpacity,{style:[b.flex1,r.cardPlaceholder,b.directionRow,b.alignCenter,b.justifyContentCenter,g.Padding.medium],activeStyle:r.cardPlaceholderActive,onPress:a},Wb.createElement(K.Text.Child,{style:[i.Body,i.textMuted],activeStyle:i.primary},Wb.createElement(v.Plus,{size:M.ICON_M,style:[g.Margin.smallRight]}),"New card"))}var xre=G.create({cardPlaceholder:t=>({borderRadius:t.radiuses.large,borderColor:t.colors.border.mid,borderWidth:1,borderStyle:"dashed"}),cardPlaceholderActive:t=>({borderColor:t.colors.primary.main})});s();var An=x(O());H();s();var Fb=JSON.parse('{"targetCard":"targetCard_YoeqR","controlButtons":"controlButtons_l18tz","grab":"grab_y1-pK","grabbing":"grabbing_fDPig"}');s();var $c=x(O());H();function E5(t){var P;let{nodeKey:o,editor:e,record:n,view:r,visible:i,onExpand:a,dragHandleRef:c,isDragging:l}=t,u=$c.useRef(null),d=hi(u,c),p=de(u),m=_t(),f=pt(),h=Ce(),y=r.coverDefinition?((P=n.value.values[r.coverDefinition])==null?void 0:P.length)>0:!1,w=r.targetDefinition?!!n.value.values[r.targetDefinition]:!1,C=async()=>{let[R]=await m.prompt({title:"Select file",accept:"images",acceptURL:!1});!R||R.kind!=="file"||e.change(D=>{re.cards.setCardCoverForRecord(D,o,n.key,R)})},k=()=>Pn(R=>{e.change(D=>{re.cards.setCardTargetForRecord(D,o,n.key,R)})},f,h,{accept:["page","file","space","collection","anchor","url"]}),I=R=>{R.preventDefault(),R.stopPropagation(),p.open(ce({groups:[{key:"actions",commands:[{key:"actions.target",icon:v.PageLink,...w?{title:"Target link",descendant:()=>ce({groups:[{key:"target",commands:[{key:"target.set",title:"Replace target",icon:v.Replace,trigger:()=>k()},{key:"target.remove",title:"Remove target",icon:v.Trashcan,trigger:()=>{e.change(D=>{re.cards.removeCardTargetForRecord(D,o,n.key)})}}]}]})}:{title:"Add target link",trigger:()=>k()}},{key:"actions.cover",icon:v.Image,...y?{title:"Cover",descendant:()=>ce({groups:[{key:"cover",commands:[{key:"cover.set",title:"Replace cover",icon:v.Replace,trigger:()=>{C()}},{key:"cover.remove",title:"Remove cover",icon:v.Trashcan,trigger:()=>{e.change(D=>{re.cards.removeCardCoverForRecord(D,o,n.key)})}}]}]})}:{title:"Add cover",trigger:()=>{C()}}},{key:"actions.delete",title:"Delete",icon:v.Trashcan,trigger:()=>{e.change(D=>{re.removeRecord(D,o,n.key)})}}]}]}))};return $c.createElement(go,{onPressIn:R=>{R.preventDefault(),R.stopPropagation()}},$c.createElement(te,{style:[N.flex.row,N.flex.alignCenter,Fb.controlButtons,l&&N.opacity.translucent],inlineStyle:p.opened||i?{opacity:1}:void 0},$c.createElement(io,{ref:d,kind:"secondary",size:"small",leadingIcon:v.GrabberVertical.CSS,iconOnly:!0,rounded:!0,label:"Drag card",tooltipTitle:l?void 0:`Click for options.
Drag to move.`,onClick:I,preventFocusOnPress:!0,style:{cursor:l?"grabbing":"grab"}}),$c.createElement(te,{style:[N.gap.smallColumnGap,N.margin.autoLeft]},$c.createElement(z,{kind:"secondary",size:"small",rounded:!0,icon:v.Maximize,onPress:a,title:"Open card",tooltipDelay:300}))))}s();var PO=x(O());H();function T5(t){var a,c;let{coverRef:o}=t,[,e]=_(kre),n=ot(o),r=(c=(a=n.resolution)==null?void 0:a.extra)==null?void 0:c.file,i=n&&r&&Xs(r)?Hi(r.downloadURL,{width:371}):null;return i?PO.createElement(S,{style:e.cardCover},PO.createElement(rI,{source:{uri:i},style:e.cardImage})):null}var kre=G.create({cardCover:t=>({backgroundColor:t.colors.background.muted}),cardImage:{width:"100%",aspectRatio:16/9}});function M5(t){var we,Ee;let{nodeKey:o,definition:e,editor:n,readOnly:r,record:i,view:a,selected:c,selectedBy:l,isLastInRow:u,beforeOrderIndex:d,afterOrderIndex:p,onExpand:m}=t,[,f]=_(Ire),[,h]=_(W),y=qa(l),[w,C]=An.useState(),k=wo(w),I=An.useRef(null),P={type:"table-record",id:i.key,blockKey:o,previewLabel:"Move card"},[{dragging:R},D]=Mc({type:P.type,item:P,canDrag:()=>!r,collect:me=>({dragging:me.isDragging()})}),[E,T]=ir({accept:[P.type],drop:(me,We)=>{We.didDrop()||n.change(mt=>{re.moveRecord(mt,o,me.id,k.current==="before"?{before:d,after:i.value.orderIndex}:{before:i.value.orderIndex,after:p})})},hover:(me,We)=>{if(!We.canDrop())return;let mt=Ore(We,I);w!==mt&&C(mt)},canDrop:me=>i.key!==me.id&&o===me.blockKey,collect:me=>({higlighted:me.isOver()&&me.canDrop()})}),q=T(I),F=a.targetDefinition?i.value.values[a.targetDefinition]:void 0,U=ot(F),$=()=>{n.change(me=>{re.moveTableSelection(me,o,{recordId:i.key}),me.focus()})},X=a.coverDefinition&&((we=i.value.values[a.coverDefinition])!=null&&we[0])?(Ee=i.value.values[a.coverDefinition])==null?void 0:Ee[0]:null,oe=An.createElement(S,{style:[b.flex1,g.Padding.medium,!X&&!r&&g.Margin.mediumVertical,!r&&f.editableArea]},a.columns.map((me,We)=>{let mt=e[me],$o=An.createElement(Bd,{record:i,selected:!1,definition:mt,nodeKey:o,editor:n,readOnly:r});return An.createElement(S,{key:me,style:[We<a.columns.length-1?g.Margin.smallBottom:null]},a.hideColumnTitle?null:An.createElement(S,null,An.createElement(V,{style:[h.Label,h.textMid]},mt.title)),$o)}));return An.createElement($k,{style:[b.flex1],readOnly:r,selected:c,selectionColor:y.base,onSelect:$},An.createElement(te,{style:[Fb.targetCard,N.flex.flex1,R&&N.opacity.translucent,_R,{[Bg]:E.higlighted&&(!u||u&&w==="before"),[_u]:E.higlighted&&u&&w==="after"}],ref:q},An.createElement(ds,{style:[b.flex1,b.directionColumn],...F?{component:K.TouchableOpacity,href:r?U.href:void 0,onPress:me=>{me.preventDefault(),U==null||U.open()}}:{component:K.View}},X?An.createElement(T5,{coverRef:{kind:"file",file:X}}):null,r?oe:An.createElement(go,{onPressIn:me=>{me.preventDefault(),me.stopPropagation()}},oe),r?null:An.createElement(E5,{nodeKey:o,editor:n,record:i,view:a,visible:c,onExpand:m,dragHandleRef:D,isDragging:R}))))}function Ore(t,o){if(!(o!=null&&o.current))return;let e=o.current.getBoundingClientRect(),n=.5*(e.right-e.left),r=t.getClientOffset();return r?r.x-e.left<n?"before":"after":void 0}var Ire=G.create({editableArea:{cursor:"text"}});function L5(t){let{nodeKey:o,editor:e,readOnly:n,definition:r,records:i,view:a,selection:c,selections:l,openRecord:u}=t,d=Iu(),p=Bs.useMemo(()=>a.columns.find(h=>r[h].type==="text")||void 0,[a.columns,r]),m=Bs.useMemo(()=>{switch(a.cardSize){case"medium":return{mobile:1,tablet:2,desktop:3};case"large":return{mobile:1,tablet:1,desktop:2};default:Fe(a.cardSize)}},[a.cardSize]),f=Bs.useCallback(({item:h,index:y})=>{if(h.key==="new")return Bs.createElement(P5,{editor:e,nodeKey:o,defaultTextDefinitionId:p});let w=!c.definitionId&&c.recordId===h.key,C=l.find(k=>k.recordId===h.key&&!k.definitionId);return Bs.createElement(M5,{nodeKey:o,editor:e,readOnly:n,definition:r,record:h,view:a,selected:w||!!C,selectedBy:w||C==null?void 0:C.clientId,isLastInRow:m[d]===1||(y+1)%m[d]===0,beforeOrderIndex:y>0?i[y-1].value.orderIndex:void 0,afterOrderIndex:y<i.length-1?i[y+1].value.orderIndex:void 0,onExpand:()=>u(h.key)})},[o,e,n,r,a,c.recordId,!!c.definitionId,p,u,l]);return Bs.createElement(OR,{data:n?i:[...i,{key:"new"}],renderItem:f,numColumnsPerScreen:m,columnSpacing:g.medium,rowSpacing:g.medium})}var D5={IconComponent:v.Cards3Columns,title:"Cards",recordName:"card",definitionName:"field",selectableView:!1,ViewComponent:L5,DefinitionSettingsComponent:_5,commands:_re,onKeyDown:R5};function _re(t){let{view:o,setView:e}=t;return[{key:"cards.definitions",commands:[{key:"cards.selectCover",title:"Cover image",icon:v.Image,descendant:()=>Rre(t)},{key:"cards.selectTarget",title:"Target link",icon:v.PageLink,descendant:()=>Pre(t)}]},{key:"cards.size",commands:[{key:"cards.size.medium",title:"Medium",icon:v.Cards3Columns,type:1,selected:o.cardSize==="medium",trigger:()=>{let[n]=e({...o,cardSize:"medium"});return n}},{key:"cards.size.large",title:"Large",icon:v.Cards2Columns,type:1,selected:o.cardSize==="large",trigger:()=>{let[n]=e({...o,cardSize:"large"});return n}}]},{key:"cards.options",commands:[{key:"cards.hideColumnTitle",title:"Show labels",icon:v.EyeOff,type:2,enabled:!o.hideColumnTitle,trigger:()=>{let[n]=e({...o,hideColumnTitle:!o.hideColumnTitle});return n}},{key:"cards.definitions",title:"Fields",icon:v.EyeOff,descendant:()=>N5(t)}]}]}function Rre(t){let{view:o,definition:e,setView:n}=t;return qd(e,r=>{n({...o,coverDefinition:r[0]})},{multiple:!1,search:"Select column for cover\u2026",selected:o.coverDefinition?[o.coverDefinition]:[],filterDefinition:r=>r.type==="files"})}function Pre(t){let{view:o,definition:e,setView:n}=t;return qd(e,r=>{n({...o,targetDefinition:r[0]})},{multiple:!1,search:"Select column for target\u2026",selected:o.targetDefinition?[o.targetDefinition]:[],filterDefinition:r=>r.type==="content-ref"})}function N5(t){let{view:o,definition:e,setView:n}=t;return qd(e,r=>{let[,i]=n({...o,columns:r});return N5(i)},{multiple:!0,search:"Select visible columns\u2026",selected:o.columns})}s();s();var pf=x(O());s();var B5=x(Yf()),Ft=x(O());H();var qs=Ft.createContext(new Map),q5=Ft.forwardRef((t,o)=>{let{nodeKey:e,editor:n,view:r,children:i}=t,{readOnly:a}=n,[,c]=_(W5),[l]=Ls.useDimensions(),u=tt(),d=u?l.width:l.width-2,{widths:p,totalWidth:m}=Ft.useMemo(()=>Zv(r,d,u),[d,r.columns,r.columnWidths]),[f,h]=Ft.useState({left:!1,right:!1});Ft.useEffect(()=>{h(I=>({left:m>d?I.left:!1,right:m>d?I.right:!1}))},[m,d]);let y=wo(f),w=Ft.useCallback(I=>{let{contentOffset:P,contentSize:R,layoutMeasurement:D}=I.nativeEvent,E=P.x>0,T=P.x<R.width-D.width;y.current.left===E&&y.current.right===T||h({left:E,right:T})},[]),C=Ft.useCallback((I,P)=>{let R=p.get(I);ze(R),n.change(D=>{D.setDataByKey(e,["view","columnWidths",I],(0,B5.default)(R.width+P,Yv,ef),{normalize:!1}),D.setDataByKey(e,["view","useNewSizing"],!0,{normalize:!1})})},[p]),k=(I,P)=>{n.change(R=>{re.moveColumn(R,e,P.id,I)})};return Ft.createElement(S,{ref:o},Ft.createElement(qs.Provider,{value:p},Ft.createElement(ma,{horizontal:!0,style:c.tableScrollWrapper,onScroll:w,scrollEventThrottle:100,contentContainerStyle:c.tableWrapper},i,a?null:[...r.columns].reverse().reduce((I,P,R,D)=>{let E=p.get(P);return ze(E),Ft.createElement(Ere,{key:P,columnId:P,columnAfterId:D[R-1],tableKey:e,controller:E.controller,width:E.animated,onResizeComplete:C,onDropBefore:T=>k(P,T)},I)},null))),!u&&f.left?Ft.createElement(S,{style:c.tableScrollIndicatorLeft,pointerEvents:"none"}):null,!u&&f.right?Ft.createElement(S,{style:c.tableScrollIndicatorRight,pointerEvents:"none"}):null)});function Ere(t){let{tableKey:o,columnId:e,columnAfterId:n,controller:r,width:i,children:a,onDropBefore:c,onResizeComplete:l}=t,[u,d]=_(W5),p=Ft.useMemo(()=>Ff.create({onStartShouldSetPanResponder:(y,w)=>!1,onStartShouldSetPanResponderCapture:(y,w)=>!1,onMoveShouldSetPanResponder:(y,{dx:w})=>!0,onMoveShouldSetPanResponderCapture:(y,w)=>!1,onPanResponderGrant:(y,{dx:w})=>{},onPanResponderMove:(y,{dx:w})=>{r.setValue(w)},onPanResponderTerminationRequest:(y,w)=>!1,onPanResponderRelease:(y,{dx:w})=>{l(e,w)},onPanResponderTerminate:(y,w)=>{}}),[e,r,l]),m=K.useInteractiveState(p.panHandlers),[f,h]=ir({accept:"table-definition",drop:(y,w)=>{w.didDrop()||c(y)},canDrop:y=>e!==y.id&&n!==y.id&&o===y.blockKey,collect:y=>({highlighted:y.isOver({shallow:!0})&&y.canDrop()})},[e,n,o]);return Ft.createElement(rn.View,{ref:h,style:[d.columnLine,{left:i}]},Ft.createElement(S,{style:d.blockGrabber,...m.events},Ft.createElement(S,{style:[d.blockGrabberBar,(m.hovered||m.dragging||f.highlighted)&&{backgroundColor:u.colors.primary.main}]})),a)}var zb=10,A5=3,W5=G.create({tableScrollWrapper:{borderWidth:0},tableScrollIndicatorLeft:t=>({position:"absolute",left:-1,top:0,bottom:0,width:1,shadowColor:Y.BLACK,shadowOffset:{width:5,height:0},shadowOpacity:.6,shadowRadius:7,elevation:4}),tableScrollIndicatorRight:t=>({position:"absolute",right:-1,top:0,bottom:0,width:1,shadowColor:Y.BLACK,shadowOffset:{width:-5,height:0},shadowOpacity:.6,shadowRadius:7,elevation:4}),tableWrapper:{position:"relative",overflow:"hidden",flexDirection:"column"},columnLine:{position:"absolute",top:0,bottom:0},blockGrabber:{position:"absolute",top:0,right:-(zb/2),bottom:0,width:zb,cursor:"ew-resize"},blockGrabberBar:{position:"absolute",top:0,right:zb/2-A5/2,bottom:0,width:A5,borderRadius:M.RADIUS_M},blockGrabberPlus:{position:"absolute",top:g.small,left:-(M.BUTTON_XS/2)+zb/2}});function F5(t){var a;let{view:o,columnId:e,setView:n}=t,r=pf.default.useContext(qs);function i(c){var l;if(c){let{[e]:u,...d}=o.columnWidths||{};n({...o,useNewSizing:!0,columnWidths:d})}else n({...o,useNewSizing:!0,columnWidths:{...o.columnWidths,[e]:((l=r.get(e))==null?void 0:l.width)||Dc}})}return pf.default.createElement(pf.default.Fragment,null,pf.default.createElement(Kg,{value:typeof((a=o.columnWidths)==null?void 0:a[e])>"u",onValueChange:i,label:"Fill available space",labelDescription:"Expand this column to fill the available horizontal space"}))}s();var z5=(t,o,e,n)=>{let r=(i=e.selection.definitionId)=>{if(!i)return;let a=e.records.findIndex(d=>d.key===e.selection.recordId),c=e.records[a],l=e.records[a+1],u=re.insertEmptyRecord(n,o.key,{before:c.value.orderIndex,after:l==null?void 0:l.value.orderIndex});re.moveTableSelection(n,o,{recordId:u,definitionId:i},"start")};switch(t){case"move-up":case"move-down":{mn(n,o,e,{definition:{relative:0},record:{relative:t==="move-up"?-1:1},focus:t==="move-up"?"end":"start"})||(t==="move-up"?gu(n,o):kt(n,o));break}case"tab":case"move-right":{let i=t==="tab"?"select":"start";mn(n,o,e,{definition:{relative:1},record:{relative:0},focus:i})||!mn(n,o,e,{definition:{absolute:0},record:{relative:1},focus:i})&&t==="tab"&&r(e.view.columns[0]);break}case"shift+tab":case"move-left":{let i=t==="shift+tab"?"select":"end";mn(n,o,e,{definition:{relative:-1},record:{relative:0},focus:i})||mn(n,o,e,{definition:{absolute:e.view.columns.length-1},record:{relative:-1},focus:i});break}case"enter":{r();break}case"backspace":{if(mn(n,o,e,{definition:{relative:-1},record:{relative:0},focus:"end"}))break;e.selection.recordId&&re.isRowEmpty(o,e.selection.recordId)?(mn(n,o,e,{definition:{absolute:e.view.columns.length-1},record:{relative:-1},focus:"end"}),re.removeRecord(n,o.key,e.selection.recordId)):mn(n,o,e,{definition:{absolute:e.view.columns.length-1},record:{relative:-1},focus:"end"});break}}};s();var qn=x(O());H();s();var Li=x(O());s();var Vb=g.Padding.mediumLeft;s();var lr=x(O());H();var Gb=lr.default.forwardRef(function(o,e){let{recordKey:n,columnId:r,selected:i,selectedBy:a,width:c,children:l,header:u=!1,isFirstColumn:d=!1,isFirstRow:p=!1,isLastColumn:m=!1,isLastRow:f=!1,onPress:h,readOnly:y,...w}=o,C=lr.default.useRef(null),k=hi(C,e),[,I]=_(Tre),R={backgroundColor:qa(a).base};lr.default.useEffect(()=>{i&&C.current&&Vg(C.current,{behavior:"smooth",scrollMode:"if-needed"})},[i]);let D=lr.default.createElement(rn.View,{ref:k,style:[I.cell,b.directionRow,b.alignCenter,d?I.farLeftCell:{},p?I.topCell:{},f?I.bottomCell:{},p&&d?I.topLeftCell:{},p&&m?I.topRightCell:{},f&&d?I.bottomLeftCell:{},f&&m?I.bottomRightCell:{},u?I.columnHeader:{},p?So.Bold:{},{width:c}]},l,i?lr.default.createElement(lr.default.Fragment,null,lr.default.createElement(S,{style:[I.cellSelectionBorderTop,R]}),lr.default.createElement(S,{style:[I.cellSelectionBorderBottom,R]}),lr.default.createElement(S,{style:[I.cellSelectionBorderRight,R]}),lr.default.createElement(S,{style:[I.cellSelectionBorderLeft,R]})):null);return lr.default.createElement(he,{style:[I.unsetDefaultTH,b.directionRow,b.justifyContentCenter],tag:u?"th":"td"},y?lr.default.createElement(lr.default.Fragment,null,D):lr.default.createElement(go,{...w},D))}),Bn=1,Tre=G.create({unsetDefaultTH:{textAlign:"left"},cell:t=>({position:"relative",paddingVertical:g.small,paddingHorizontal:g.medium,borderLeftWidth:1,borderTopWidth:1,borderColor:t.colors.border.mid}),cellSelectionBorderTop:{position:"absolute",top:-Math.floor(Bn/2),left:-Math.floor(Bn/2),right:-Math.floor(Bn/2),height:Bn},cellSelectionBorderBottom:{position:"absolute",bottom:-Math.floor(Bn/2),left:-Math.floor(Bn/2),right:-Math.floor(Bn/2),height:Bn},cellSelectionBorderRight:{position:"absolute",bottom:-Math.floor(Bn/2),top:-Math.floor(Bn/2),right:-Math.floor(Bn/2),width:Bn},cellSelectionBorderLeft:{position:"absolute",bottom:-Math.floor(Bn/2),top:-Math.floor(Bn/2),left:-Math.floor(Bn/2),width:Bn},topCell:{borderTopWidth:0},farLeftCell:{borderLeftWidth:0},topLeftCell:{},bottomLeftCell:{},topRightCell:{},bottomRightCell:{},bottomCell:{borderBottomWidth:1},columnHeader:t=>({backgroundColor:"transparent"})});var G5=Li.memo(function(o){let{editor:e,nodeKey:n,readOnly:r,definition:i,view:a}=o,c=Li.useContext(qs),[,l]=_(Dre);return Li.createElement(he,{tag:"thead"},Li.createElement(he,{style:[b.directionRow,l.background],tag:"tr"},a.columns.map((u,d)=>{let p=i[u],m=c.get(u);return ze(m),Li.createElement(Lre,{key:u,columnId:u,editor:e,nodeKey:n,columnDef:p,view:a,readOnly:r,width:m.animated,isFirstColumn:d===0,isLastColumn:d===a.columns.length-1,isFirstRow:!0,header:!0})})))}),V5=K.createInteractiveHandle("table-column"),Mre=K.createInteractiveComponent(he);function Lre(t){let{columnDef:o,readOnly:e,editor:n,nodeKey:r,view:i,...a}=t;return Li.createElement(Mre,{handle:V5},Li.createElement(Gb,{focusable:!1,readOnly:e,...a},Li.createElement(x5,{editor:n,nodeKey:r,definition:o,readOnly:e,style:[b.flex1,a.isFirstColumn&&!e?Vb:null]}),e?null:Li.createElement(Hb,{editor:n,nodeKey:r,view:i,definition:o,descendantOf:V5,icon:v.GrabberVertical,rounded:!0})))}var Dre=G.create({background:t=>({backgroundColor:t.colors.background.mid,borderBottomColor:t.colors.border.mid,borderBottomWidth:2})});s();var zt=x(O());H();var H5=K.createInteractiveHandle("table-row"),Nre=K.createInteractiveComponent(he),U5=zt.memo(zt.forwardRef(function(o,e){let{nodeKey:n,editor:r,readOnly:i,record:a,definition:c,view:l,isFirstRow:u,isLastRow:d,beforeOrderIndex:p,afterOrderIndex:m,selectedColumnId:f,selections:h,definitionColorKinds:y,openRecord:w,style:C}=o,k=zt.useContext(qs),I=ni[l.type],P={id:a.key,type:"table-record",blockKey:n,previewLabel:"Move record",previewIcon:"TableRecord"},[{dragging:R},D]=Ba({type:P.type,item:P,canDrag:()=>!i,collect:X=>({dragging:X.isDragging()})}),E=(X,oe)=>{r.change(we=>{re.moveRecord(we,n,X.id,oe)})},T=zt.useRef(null),q=de(T),F=()=>{q.open(ce({search:"Select action\u2026",groups:[{key:"table.row",commands:[{key:"table.row.open",title:`Open ${I.recordName}`,icon:v.Maximize,trigger:()=>{w(a.key)}},{key:"table.row.insertAbove",title:"Insert above",icon:v.TableInsertRowAbove,trigger:()=>{r.change(X=>{re.insertEmptyRecord(X,n,{after:a.value.orderIndex,before:p})})}},{key:"table.row.insertBelow",title:"Insert below",icon:v.TableInsertRow,trigger:()=>{r.change(X=>{re.insertEmptyRecord(X,n,d?{before:a.value.orderIndex}:{after:a.value.orderIndex,before:m})})}},{key:"table.row.addColumn",icon:v.TableInsertColumn,title:`Add ${I.definitionName}`,trigger:()=>{r.change(X=>{re.insertColumn(X,n,re.createColumnFromType("text"))})},descendant:()=>As(X=>{r.change(oe=>{re.insertColumn(oe,n,re.createColumnFromType(X))})})},{key:"table.row.remove",title:`Delete ${I.recordName}`,icon:v.Trashcan,trigger:()=>{r.change(X=>{re.removeRecord(X,n,a.key)})}}]}]}))},[,U]=_(j5),$=zt.createElement(Nre,{ref:e,handle:H5,style:[b.directionRow,R&&Qe.translucent,C],tag:"tr"},l.columns.map((X,oe)=>{let we=c[X],Ee=f===X,me=h==null?void 0:h.find($o=>$o.definitionId===X),We=y[X],mt=zt.createElement(Bd,{definitionColorKind:We,record:a,selected:Ee,definition:we,nodeKey:n,editor:r,readOnly:i});return zt.createElement(Gb,{key:X,recordKey:a.key,columnId:X,width:k.get(X).animated,selected:Ee||!!me,selectedBy:Ee||me==null?void 0:me.clientId,isFirstColumn:oe===0,isLastColumn:oe===l.columns.length-1,isFirstRow:u,isLastRow:d,onPressIn:$o=>{$o.type!=="keydown"&&($o.preventDefault(),r.change(Vn=>{re.moveTableSelection(Vn,n,{recordId:a.key,definitionId:X})}))},readOnly:i},oe>0||i?mt:zt.createElement(zt.Fragment,null,zt.createElement(K.View.Child,{descendantOf:H5,ref:D,style:[b.justifyContentCenter,U.rowGrabber],inactiveStyle:q.opened?{}:Qe.hidden,activeStyle:Qe.visible},zt.createElement(z,{ref:T,size:"xsmall",rounded:!0,kind:"grey",active:q.opened,title:`Click for options.
Drag to move.`,icon:v.GrabberVertical,onPress:F})),zt.createElement(S,{style:[b.flex1,b.justifyContentCenter,Vb]},mt)))}));return i?$:zt.createElement(S,null,$,zt.createElement(K5,{currentItem:P,position:"before",onDrop:X=>E(X,{before:p,after:a.value.orderIndex})}),d?zt.createElement(K5,{currentItem:P,position:"after",onDrop:X=>E(X,{before:a.value.orderIndex,after:m})}):null)}));function K5(t){let{currentItem:o,position:e,onDrop:n}=t,r=K.useInteractiveState(),[,i]=_(j5),{logAnalyticsEvent:a}=zt.useContext(Ge),[c,l]=ir({accept:"table-record",drop:(u,d)=>{d.didDrop()||(a({type:"edit_page_document_move_block",method:"dnd",blockType:"table-row",toParent:"table",fromParent:"table"}),n(u))},canDrop:u=>o.id!==u.id&&o.blockKey===u.blockKey,collect:u=>({highlighted:u.isOver()&&u.canDrop()})});return zt.createElement(S,{ref:l,style:[i.insertionLineWrapper,e==="after"?i.insertionLineAfter:i.insertionLineBefore],...r.events},zt.createElement(S,{style:[i.insertionLineBar,(r.hovered&&r.dragging||c.highlighted)&&i.insertionLineBarHovered]}))}var Kb=10,X5=3,j5=G.create({insertionLineWrapper:{position:"absolute",left:0,right:0,height:Kb},insertionLineBefore:{top:-(Kb/2)},insertionLineAfter:{bottom:-(Kb/2)},insertionLineBar:{position:"absolute",left:0,right:0,top:Kb/2-X5/2,height:X5,borderRadius:M.RADIUS_M},insertionLineBarHovered:t=>({backgroundColor:t.colors.primary.main}),rowGrabber:{position:"absolute",left:g.xsmall,bottom:"auto",zIndex:10}});var Are=20;function $5(t){let{view:o,editor:e,nodeKey:n}=t,[r,i]=qn.useState(),a=qn.useCallback(c=>{c!==null&&i(c)},[]);return qn.createElement(q5,{editor:e,nodeKey:n,view:o,ref:a},qn.createElement(Bre,{...t,parentRef:r}))}function Bre(t){let{selection:o,selections:e,records:n,definition:r,view:i,readOnly:a,editor:c,nodeKey:l,parentRef:u,openRecord:d}=t,{mode:p}=qn.useContext(Jo),m=c.value.document.getNode(l),f=qn.useContext(qs),h=BR({enabled:p==="app"&&n.length>Are,parentRef:u?{current:u}:void 0,getEstimatedItemHeight:k=>Xk(m,String(k.key),f),list:n.map(k=>({key:k.key}))}),y=I5(r,i.columns),C=!(i.hideHeader||a&&re.isHeaderEmpty({definition:r,view:i,records:{}}))||!!o.recordId;return qn.createElement(he,{tag:"table"},C?qn.createElement(G5,{definition:r,view:i,editor:c,nodeKey:l,readOnly:a}):null,qn.createElement(he,{tag:"tbody"},h.map(([k,I,P],R)=>{let D=n[R],E=R>0?n[R-1]:void 0,T=n[R+1],q=e.filter(F=>F.recordId===D.key);return I?qn.createElement(U5,{key:D.key,ref:k.nodeRef,selectedColumnId:o.recordId===D.key?o.definitionId:void 0,selections:q.length>0?q:void 0,record:D,definition:r,view:i,readOnly:a,editor:c,nodeKey:l,isFirstRow:!C&&R===0,isLastRow:R===n.length-1,beforeOrderIndex:E==null?void 0:E.value.orderIndex,afterOrderIndex:T==null?void 0:T.value.orderIndex,definitionColorKinds:y,openRecord:d,...k.nodeProps}):qn.createElement(S,{key:D.key,style:{height:P},ref:k.nodeRef},qn.createElement(V,null,re.getTableRowPlainText(m,D.value)))})))}var Y5={IconComponent:v.Table,title:"Table",recordName:"row",definitionName:"column",selectableView:!0,ViewComponent:$5,DefinitionSettingsComponent:F5,commands:Wre,definitionCommands:qre,onKeyDown:z5};function qre(t){var i;let{view:o,definition:e,setView:n}=t,r=typeof((i=o.columnWidths)==null?void 0:i[e.id])>"u";return[{key:"grid",commands:[{key:"grid.autoSize",title:"Auto size",icon:v.AutoSize,type:2,enabled:r,trigger:()=>{if(r)n({...o,useNewSizing:!0,columnWidths:{...o.columnWidths,[e.id]:Dc}});else{let{[e.id]:a,...c}=o.columnWidths||{};n({...o,useNewSizing:!0,columnWidths:c})}}}]}]}function Wre(t){let{view:o,setView:e}=t;return[{key:"grid",commands:[{key:"grid.toggleHeader",title:"Show header",type:2,enabled:!o.hideHeader,trigger:()=>{let[n]=e({...o,hideHeader:!o.hideHeader});return n}},{key:"grid.resetSizing",title:"Reset column sizing",trigger:()=>{let{columnWidths:n,...r}=o;e({...r,useNewSizing:!0})}},{key:"grid.columns",title:"Hide Columns",icon:v.EyeOff,descendant:()=>Z5(t)}]}]}function Z5(t){let{view:o,definition:e,setView:n}=t;return qd(e,r=>{let[,i]=n({...o,columns:r});return Z5(i)},{multiple:!0,search:"Select visible columns",selected:o.columns})}var ni={grid:Y5,cards:D5};function Hb(t){let{nodeKey:o,editor:e,view:n,definition:r,descendantOf:i,icon:a,rightIcon:c,rounded:l}=t,u={id:r.id,type:"table-definition",blockKey:o,previewLabel:Ka(r)},[,d]=_(Fre),p=ri.useRef(null),m=de(p),f=K.useInteractiveState(),[,h]=Mc({type:u.type,item:u,canDrag:()=>!0}),[y,w]=ri.useState(null),C=T=>{e.change(q=>{re.setColumnDefinition(q,o,r.id,T)})},k=()=>{let q=e.value.document.assertBlock(o).data.toFrozenObject(),F=q.definition[r.id];return[P(q.view,F),I(q.view,F)]},I=(T,q)=>({definition:q,view:T,setView:F=>(e.change(U=>{re.setView(U,o,F)}),k()),setDefinition:F=>(C(F),k()),openModal:F=>{w({type:"command",modal:ri.createElement(F,{definition:q,onClose:()=>w(null)})})}}),P=(T,q)=>{let F=oi[q.type],U=ni[T.type],$=I(T,q);return ce({search:"Select action\u2026",groups:[{key:"definition.type",commands:[{key:"definition.type.change",title:F.title,icon:F.IconComponent,descendant:()=>As(X=>{w({type:"change_type",columnType:X})},{selectedType:q.type})}]},...F.commands?F.commands($):[],...U.definitionCommands?U.definitionCommands($):[],{key:"definition.danger",commands:[{key:"definition.add",title:`Add ${U.definitionName}`,icon:v.TableInsertColumn,trigger:()=>{e.change(X=>{let oe=[...T.columns].findIndex(we=>q.id===we);re.insertColumn(X,o,re.createColumnFromType("text"),oe+1)})},descendant:()=>As(X=>{let oe=[...T.columns].findIndex(we=>q.id===we);e.change(we=>{re.insertColumn(we,o,re.createColumnFromType(X),oe+1)})})},{key:"definition.hide",title:`Hide ${U.definitionName}`,icon:v.EyeOff,trigger:()=>{e.change(X=>{re.hideColumn(X,o,q.id)})}},{key:"definition.delete",title:`Delete ${U.definitionName}`,icon:v.Trashcan,trigger:()=>{w({type:"delete"})}}]}]})},R=()=>{m.open(P(n,r))},D=T=>{w(null),T&&e.change(q=>{re.removeColumn(q,o,r.id)})},E=T=>{w(null),T&&(y==null?void 0:y.type)==="change_type"&&C(re.changeColumnType(r,y.columnType))};return ri.createElement(ri.Fragment,null,(y==null?void 0:y.type)==="delete"?ri.createElement(Ep,{kind:"danger",title:"Delete column",confirmButtonText:"Delete",onComplete:D},"Do you really want to delete this column and all of its data?"):null,(y==null?void 0:y.type)==="change_type"?ri.createElement(Ep,{title:"Change column type",confirmButtonText:"Change",onComplete:E},"You are about to change this column type from ",r.type," to"," ",y.columnType,". We will try to convert any value automatically, but you may lose data if we cannot convert them."):null,(y==null?void 0:y.type)==="command"?y.modal:null,ri.createElement(K.View.Child,{...f.events,descendantOf:i,ref:h,style:[b.justifyContentCenter,d.columnGrabber],inactiveStyle:m.opened||f.focused?{}:Qe.hidden,activeStyle:Qe.visible,focusStyle:Qe.translucent},ri.createElement(z,{kind:"grey",size:"small",ref:p,title:`Click for options.
Drag to move.`,active:m.opened,icon:a,rightIcon:c,rounded:l,onPress:R})))}var Fre=G.create({columnGrabber:{position:"absolute",right:g.xsmall,bottom:"auto"}});function Xb(t,o,e){let n=o.data.toFrozenObject(),r=ni[n.view.type],i=r.commands?r.commands(Q5(t,n,o.key,e)):[];return{...at(t,o.key,[{key:"views",commands:Object.entries(ni).map(([a,c])=>({key:a,title:c.title,icon:c.IconComponent,type:1,selected:a===n.view.type,trigger:()=>{t.change(u=>{re.setView(u,o.key,{type:a})});let l=t.value.document.assertBlock(o.key);return Xb(t,l,e)}}))},{key:"table",commands:[{key:"addColumn",icon:v.ArrowRight,title:`Add ${r.definitionName}`,trigger:()=>{t.change(a=>{re.insertColumn(a,o.key,re.createColumnFromType("text"))})},descendant:()=>As(a=>{t.change(c=>{re.insertColumn(c,o.key,re.createColumnFromType(a))})})},{key:"insertRow",icon:v.ArrowDown,title:`Insert ${r.recordName}`,trigger:()=>{t.change(a=>{re.insertEmptyRecord(a,o.key)})}}]},...i,...e]),search:"Select action\u2026"}}function Q5(t,o,e,n){return{view:o.view,definition:o.definition,setView:r=>{t.change(a=>{re.setView(a,e,r)});let i=t.value.document.assertBlock(e);return[Xb(t,i,n),Q5(t,i.data.toFrozenObject(),e,n)]}}}s();var eq=x(R4()),po=x(O());H();s();var Xa=x(O());H();s();var EO=JSON.parse('{"definitionWrapper":"definitionWrapper_0vx5U","grabberWrapper":"grabberWrapper_WLh-V"}');var J5=K.createInteractiveHandle("record-column-value-line");function TO(t){let{nodeKey:o,editor:e,readOnly:n,record:r,view:i,definition:a,style:c}=t,[,l]=_(zre),u={id:a.id,type:"table-definition",blockKey:o,previewLabel:Ka(a)},[{dragging:d},p]=Mc({type:u.type,item:u,canDrag:()=>!n,collect:h=>({dragging:h.isDragging()})}),[m,f]=ir({accept:[u.type],drop:(h,y)=>{y.didDrop()||e.change(w=>{re.moveColumn(w,o,h.id,a.id)})},canDrop:h=>a.id!==h.id&&o===h.blockKey,collect:h=>({higlighted:h.isOver()&&h.canDrop()})});return Xa.createElement(te,{ref:f,style:[N.flex.column,N.flex.flex1,EO.definitionWrapper,d&&N.opacity.translucent,qg,{[_u]:m.higlighted}]},Xa.createElement(K.View,{handle:J5,style:c},Xa.createElement(S,{style:[b.directionRow,b.alignCenter,g.Margin.xsmallBottom]},Xa.createElement(te,{style:[N.position.relative,N.flex.alignCenter]},Xa.createElement(p7,{style:[N.padding.smallRight,EO.grabberWrapper],ref:p,size:"medium"}),Xa.createElement(S,{style:[b.flex1]},Xa.createElement(Pu,null,Ka(a)))),n?null:Xa.createElement(Hb,{nodeKey:o,editor:e,view:i,definition:a,descendantOf:J5,icon:oi[a.type].IconComponent,rightIcon:v.ChevronDown})),Xa.createElement(Bd,{nodeKey:o,editor:e,readOnly:n,record:r,definition:a,selected:!1,displayMode:"block",style:[l.recordValueBox,g.Padding.smallVertical,g.Padding.mediumHorizontal]})))}var zre=G.create({recordValueBox:t=>({borderWidth:1,borderColor:t.colors.border.mid,backgroundColor:t.colors.background.main,borderRadius:t.radiuses.large,minHeight:M.BUTTON_L})});function tq(t){let{nodeKey:o,editor:e,readOnly:n,record:r,records:i,view:a,definition:c,openRecord:l,onClose:u}=t,[,d]=_(W),[,p]=_(Vre),[m,f]=po.useState(!1),h=ni[a.type],y=a.columns,w=po.useMemo(()=>(0,eq.default)(Object.keys(c),y),[y,a,c]),C=po.useMemo(()=>i.findIndex(P=>P.key===r.key),[i,r.key]),k=i[C-1],I=i[C+1];return po.createElement(ko,{title:`Edit ${h.recordName}`,size:"large",footer:po.createElement(S,{style:[b.directionRow,b.alignCenter,b.justifySpaceBetween]},n?null:po.createElement(z,{icon:v.Trashcan,kind:"secondary",size:"medium",onPress:()=>{e.change(P=>{re.removeRecord(P,o,r.key)}),u()}},`Delete ${h.recordName}`),po.createElement(S,{style:[b.directionRow,b.alignCenter]},po.createElement(z,{icon:v.ChevronLeft,kind:"secondary",size:"medium",title:`Previous ${h.recordName}`,disabled:!k,onPress:()=>{k&&l(k.key)}}),po.createElement(S,{style:[g.Padding.mediumHorizontal]},po.createElement(V,{style:[d.Body,d.textMuted]},`${C+1} of ${i.length}`)),po.createElement(z,{icon:v.ChevronRight,kind:"secondary",size:"medium",title:`Next ${h.recordName}`,disabled:!I,onPress:()=>{I&&l(I.key)}}))),onClose:u},po.createElement(S,null,y.map((P,R)=>po.createElement(TO,{key:P,nodeKey:o,editor:e,readOnly:n,view:a,record:r,definition:c[P],style:[g.Margin.mediumBottom,R===0?null:g.Margin.xsmallTop]}))),w.length>0||!n?po.createElement(S,{style:[b.directionRow,b.justifySpaceBetween]},w.length>0?po.createElement(z,{icon:m?v.ChevronUp:v.ChevronDown,kind:"grey",size:"medium",onPress:()=>{f(P=>!P)}},m?"Hide":`Show hidden ${h.definitionName}s`):null,n?null:po.createElement($g,{icon:v.Plus,kind:"grey",size:"medium",palette:()=>As(P=>{e.change(R=>{re.insertColumn(R,o,re.createColumnFromType(P))})})},"Add ",h.definitionName)):null,m?po.createElement(S,{style:[p.hiddenColumnsGroup,g.Margin.mediumTop,g.Padding.mediumTop]},w.map((P,R)=>po.createElement(TO,{key:P,nodeKey:o,editor:e,readOnly:n,view:a,record:r,definition:c[P],style:[g.Margin.mediumBottom,R===0?null:g.Margin.xsmallTop]}))):null)}var Vre=G.create({hiddenColumnsGroup:t=>({borderTopWidth:1,borderTopColor:t.colors.border.mid,borderTopStyle:"dashed"})});s();function oq(t){return re.defaultRecordSortedKeys(t).map(e=>({key:e,value:t.records[e]}))}function nq(t){let{node:o,editor:e,isFocused:n,selections:r}=t,i=o.data.toFrozenObject(),a=oo.useMemo(()=>oq(i),[i]),[c,l]=oo.useState(null),u=oo.useMemo(()=>c===null?null:a.find(C=>C.key===c),[a,c]),d=oo.useCallback(C=>{l(C)},[l]),p=oo.useMemo(()=>{let C=[],k=[];return r.forEach(I=>{let P=re.getTableSelection(e.value.document,I,o);C.push(P),!P.recordId&&!P.definitionId&&k.push(I)}),{states:C,filtered:ha.create(k)}},[a,o,e.readOnly,r]),m=oo.useMemo(()=>e.readOnly?{}:re.getTableSelection(e.value.document,e.value.selection,o),[a,o,e.readOnly,e.value.selection]),f={view:i.view,definition:i.definition,records:a,selection:m,selections:p.states},h=oo.useContext(Ab);h.set(o.key,f),oo.useEffect(()=>()=>{h.delete(o.key)},[h,o.key]);let y=ni[f.view.type],w=Oi(e,o.key);return oo.createElement(oo.Fragment,null,oo.createElement(be,{...t,palette:Xb(e,o,w?[w]:[])},oo.createElement(Bt,{...t,selectable:y.selectableView,isFocused:n&&!m.definitionId&&!m.recordId,selections:p.filtered,onSelect:()=>{e.change(C=>{re.moveTableSelection(C,o,{}),C.focus()})}},oo.createElement(AR,{readOnly:!!u},oo.createElement(y.ViewComponent,{editor:t.editor,nodeKey:o.key,readOnly:e.readOnly,openRecord:d,...f})))),u?oo.createElement(tq,{editor:t.editor,nodeKey:o.key,readOnly:e.readOnly,view:f.view,records:f.records,definition:f.definition,record:u,openRecord:d,onClose:()=>{l(null)}}):null)}s();var $l=x(mi()),jb=x(O());var rq=(0,$l.isKeyHotkey)("enter"),Gre=(0,$l.isKeyHotkey)("shift+enter"),iq=(0,$l.isKeyHotkey)("mod+enter"),MO=(0,$l.isKeyHotkey)("tab"),Ub=(0,$l.isKeyHotkey)("shift+tab"),aq=(0,$l.isKeyHotkey)("backspace");function sq(){let t=jb.useContext(Ab);return[jb.useMemo(()=>({onKeyDown:(...e)=>Hre(t,...e)}),[t])]}function Hre(t,o,e,n){if(o.key!=="ArrowUp"&&o.key!=="ArrowDown"&&o.key!=="ArrowRight"&&o.key!=="ArrowLeft"&&!(rq(o)&&!Gre(o))&&!iq(o)&&!aq(o)&&!MO(o)&&!Ub(o))return;let{selection:r}=e.value;if(!Kt(r)||!r.isCollapsed&&!MO(o)&&!Ub(o))return;let i=re.getCurrentTable(e.value);if(!i)return;let{table:a,fragment:c}=i;if(i.ancestorBlocks&&i.ancestorBlocks.size>0)return;if(iq(o))return o.preventDefault(),kt(e,a),e;let l=t.get(a.key);if(!l||!l.selection.recordId&&!l.selection.definitionId)return;let u=a.data.toFrozenObject(),d=l.selection.recordId?u.records[l.selection.recordId]:null,p=l.selection.definitionId?u.definition[l.selection.definitionId]:null,m=ni[l.view.type],f=p?oi[p.type]:null,h=w=>{if(!f||!f.onKeyDown||!d||!p)return!1;let C=!1;return f.onKeyDown(w,d.values[p.id],k=>{C=!0,re.setRecordValue(e,a.key,l.selection.recordId,l.selection.definitionId,k)}),C},y=w=>{m.onKeyDown&&m.onKeyDown(w,a,l,e)};if(rq(o)){if(c&&!r.hasAnchorAtEndOf(c))return;o.preventDefault(),h("enter")||y("enter")}else if(aq(o)){if(c&&!r.hasAnchorAtStartOf(c))return;o.preventDefault(),h("backspace")||y("backspace")}else if(MO(o)||Ub(o))o.preventDefault(),y(Ub(o)?"shift+tab":"tab");else if(o.key==="ArrowDown"){if(c&&!Xre(c,r))return;o.preventDefault(),y("move-down")}else if(o.key==="ArrowUp"){if(c&&!Kre(c,r))return;o.preventDefault(),y("move-up")}else if(o.key==="ArrowRight"){if(c&&!r.hasAnchorAtEndOf(c))return;o.preventDefault(),y("move-right")}else if(o.key==="ArrowLeft"){if(c&&!r.hasAnchorAtStartOf(c))return;o.preventDefault(),y("move-left")}return e}function Kre(t,o){let e=t.nodes.first();return e?o.hasAnchorIn(e):!1}function Xre(t,o){let e=t.nodes.last();return e?o.hasAnchorIn(e):!1}s();var mo=x(O());H();s();var cq=x(O());H();function LO(t){let{children:o}=t,[,e]=_(Ure);return cq.default.createElement(S,{style:[e.blockTabsBody]},o)}var Ure=G.create({blockTabsBody:t=>({border:`1px solid ${t.colors.border.main}`,backgroundColor:t.colors.background.main,paddingHorizontal:Gk,borderRadius:t.radiuses.medium,borderTopLeftRadius:0,"@media print":{padding:0,border:0}})});s();var $b=x(O());H();function DO(t){let{children:o}=t,[,e]=_(jre);return $b.default.createElement(S,{style:e.blockTabsHeader},$b.default.createElement(Ag,{style:e.blockTabsHeaderContainer},$b.default.createElement(S,{style:e.blockTabsHeaderContent},o)))}var jre=G.create({blockTabsHeader:{position:"relative",display:"flex",flexDirection:"row",width:"100%",alignItems:"center",whiteSpace:"nowrap",marginBottom:-1,"@media print":{display:"none"},zIndex:1},blockTabsHeaderContainer:{maxWidth:"100%",display:"flex"},blockTabsHeaderContent:t=>({maxWidth:"100%",display:"flex",flexDirection:"row",borderTopRightRadius:t.radiuses.medium,borderTopLeftRadius:t.radiuses.medium,pointerEvents:"auto"})});s();var Eo=x(O()),_q=x(xq());H();s();var Wd=x(O());H();var Iq=Wd.default.forwardRef(function(o,e){let{active:n,editor:r,tab:i,isLast:a,onDropBefore:c,onDropAfter:l,onInsertLeft:u,onInsertRight:d,onDelete:p,children:m,...f}=o;return Wd.default.createElement(S,{style:[Oq.tabItemControls,n&&Oq.tabItemControlsActive],...f,ref:e},Wd.default.createElement(kq,{position:"before",onDrop:c,onInsert:u}),m,a?Wd.default.createElement(kq,{position:"after",onDrop:l,onInsert:d}):null)});function kq(t){let{position:o,onDrop:e,onInsert:n}=t,[r,i]=ir({accept:["tab"],drop:(a,c)=>{c.didDrop()||a.type==="tab"&&e(a.id)},canDrop:a=>a.type==="tab",collect:a=>({hovered:a.isOver({shallow:!0})&&a.canDrop()})});return Wd.default.createElement(Rp,{ref:i,dropHovered:r.hovered,position:o==="before"?"left":"right",button:{kind:"default",size:"xsmall",icon:v.Plus,onPress:n}})}var Oq=Q.create({tabItemControls:{position:"relative",flexShrink:1},tabItemControlsActive:{flexShrink:0},tabItemInsertionLine:{flex:1,opacity:0,display:"flex",alignItems:"center",justifyContent:"center"},tabItemInsertionLineHovered:{opacity:1}});function WO(t){let{editor:o,tab:e,index:n,active:r,isFirst:i,isLast:a,onSelect:c}=t,{readOnly:l}=o,u=e.data?e.data.get("title"):"Untitled",[{isDragging:d},p]=Ba({type:"tab",item:{type:"tab",id:e.key,previewLabel:"Move tab"},canDrag:()=>!l,collect:w=>({isDragging:w.isDragging()})}),m=w=>{o.change(C=>{let k=C.value.document.getParent(e.key);if(!k)return;let I=Fi.createTabsItem("Untitled");C.insertNodeByKey(k.key,n+w,I);let P=C.value.document.getDescendant(I.key);P&&C.collapseToStartOf(P).focus(),c(I)})},f=w=>{o.change(C=>{C.setNodeByKey(e.key,{data:e.data.merge({title:w})})})},h=(w,C)=>{o.change(k=>{C==="before"?k.moveBeforeNodeByKey(w,e.key):k.moveAfterNodeByKey(w,e.key);let I=k.value.document.getDescendant(w);I&&k.collapseToStartOf(I).focus()})},y=()=>{o.change(w=>{w.removeNodeByKey(e.key)})};return l?Eo.default.createElement(go,{onPress:()=>c(e)},Eo.default.createElement(qO,{title:u,active:r,isFirst:i,isLast:a,isEditable:!1,withOptions:!1,editor:o,tab:e})):Eo.default.createElement(go,{onPress:()=>c(e)},Eo.default.createElement(Iq,{onInsertLeft:()=>m(0),onInsertRight:()=>m(1),onDropBefore:w=>h(w,"before"),onDropAfter:w=>h(w,"after"),onDelete:y,...t},Eo.default.createElement(qO,{title:u,active:r,isFirst:i,isLast:a,isEditable:r,onTitleChange:f,editor:o,tab:e,withOptions:!0,isDragging:d,dragHandleRef:p})))}var qO=Eo.default.forwardRef((t,o)=>{let{title:e,titlePlaceholder:n="Untitled",active:r=!1,isFirst:i=!1,isLast:a=!1,isDragging:c=!1,isEditable:l,withOptions:u,onTitleChange:d,editor:p,tab:m,dragHandleRef:f,...h}=t,[y,w]=Eo.default.useState(e),[C,k]=_(iie),I=d?()=>{d(y||"")}:void 0;Eo.default.useEffect(()=>{w(e)},[e]);let P=Eo.default.useRef(null),R=hi(P,f),D=de(P),E=()=>{D.open(ce({position:{width:"small"},groups:[{key:"tab",commands:[{key:"delete",title:"Delete",icon:v.Trashcan,trigger:()=>{p.change(T=>{Fi.removeTab(T,m.key)})}}]}]}))};return Eo.default.createElement(K.View,{ref:o,style:[k.blockTabsBodyItem,g.Padding.xsmallVertical,r&&k.blockTabsBodyItemActive,i&&k.blockTabsBodyItemFirst,a&&k.blockTabsBodyItemLast],...h},Eo.default.createElement(S,{style:k.flexPadding}),Eo.default.createElement(S,{style:[k.blockTabsBodyItemTitleContainer,c&&Qe.translucent,g.Padding.xsmallVertical]},l?Eo.default.createElement(Eo.default.Fragment,null,Eo.default.createElement(_q.default,{value:y,inputStyle:{...Ze.Label,color:C.colors.text.main,backgroundColor:"transparent",border:"none",...Pg.Bold,padding:0,margin:0,lineHeight:"22px"},title:y,placeholder:n,onChange:T=>w(T.target.value),onBlur:I})):Eo.default.createElement(V,{style:[So.Label,k.blockTabsBodyItemReadonlyTitle,r&&k.blockTabsBodyItemTitleReadonlyActive]},y||n)),u?Eo.default.createElement(K.View.Child,{style:[k.tabItemOptions],inactiveStyle:D.opened||l?Qe.visible:Qe.hidden,activeStyle:Qe.visible},Eo.default.createElement(z,{ref:R,kind:"grey",size:"small",rounded:!0,active:D.opened,onPress:E,icon:v.GrabberVertical,title:`Click for options.
Drag to move.`})):null,Eo.default.createElement(S,{style:k.flexPadding}))});qO.displayName="TabItem";var iie=G.create({blockTabsBodyItem:t=>({flexGrow:0,flexShrink:1,flexBasis:"auto",textOverflow:"ellipsis",maxWidth:"100%",minWidth:0,borderWidth:1,borderColor:t.colors.border.main,borderLeftColor:"transparent",backgroundColor:t.colors.background.muted,flexDirection:"row",cursor:"pointer"}),blockTabsBodyItemFirst:t=>({borderLeftColor:t.colors.border.main,borderTopLeftRadius:t.radiuses.medium}),blockTabsBodyItemLast:t=>({borderTopRightRadius:t.radiuses.medium}),blockTabsBodyItemActive:t=>({flexGrow:0,flexShrink:0,flexBasis:"auto",cursor:"auto",backgroundColor:t.colors.background.main,borderBottomColor:t.colors.background.main}),flexPadding:{minWidth:8,width:16,flexGrow:1,flexShrink:1,flexBasis:"16px"},blockTabsBodyItemTitleContainer:{flexGrow:0,flexShrink:1,flexBasis:"auto",maxWidth:"100%",minWidth:0,display:"flex",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flexDirection:"row"},blockTabsBodyItemReadonlyTitle:t=>({color:t.colors.text.muted,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),blockTabsBodyItemTitleReadonlyActive:t=>({color:t.colors.text.main}),tabItemOptions:{marginLeft:g.medium,display:"flex",alignItems:"center",justifyContent:"center"}});s();var Pq=x(O());H();function FO(t){let{active:o,children:e,...n}=t;return Pq.default.createElement(S,{style:[Rq.blockTabsItem,o&&Rq.blockTabsItemActive],...n},e)}var Rq=Q.create({blockTabsItem:{display:"none",pageBreakInside:"avoid"},blockTabsItemActive:{display:"flex"}});s();var ff=x(O());var aie=5,Eq={activeKeys:{},activeTitles:[]},sie=Dt({key:"tabsAtom",default:Eq,effects:[wr.recoilEffect("@recoil/tabsAtom",Eq)]});function Tq(t){let{sections:o,selected:e}=ff.useContext(Ci),n=ff.useMemo(()=>{let u=new Map;return t.blockNodes.forEach(d=>{let p=hu();[...o.entries()].filter(([m])=>d.getNode(m)).forEach(([m,f])=>{p.set(m,f)}),u.set(d.key,p)}),u},[o,t]),[r,i]=Xn(sie),[a,c]=js(!1,[e]),l=Js();return ff.useMemo(()=>{let{value:u,readOnly:d}=l;return[(d?null:lie(u,t))||cie(r,t,a,n,e)||(d?uie(r,t):null)||t.blockNodes.first(),m=>{let f=m.data.get("title");c(!0),i(h=>({activeKeys:{...h.activeKeys,[t.key]:m.key},activeTitles:f?h.activeTitles.filter(y=>y!==f).concat([f]).slice(-aie):h.activeTitles}))}]},[l,r,i,a,n,e])}function cie(t,o,e,n,r){let i=t.activeKeys[o.key];return e&&i?o.blockNodes.find(a=>a.key===i):o.blockNodes.find(a=>{var c;return[...((c=n.get(a.key))==null?void 0:c.values())||[]].includes(r||"")})}function lie(t,o){if(t.selection.isFocused)return o.blockNodes.find(e=>ye.isTextRange(t.selection)&&(t.selection.hasAnchorIn(e)||t.selection.hasFocusIn(e)))}function uie(t,o){return o.blockNodes.map(e=>{let n=e.data.get("title");return{node:e,score:t.activeTitles.indexOf(n)}}).filter(({score:e})=>e>=0).sortBy(({score:e})=>-e).map(({node:e})=>e).first()||void 0}function Mq(t){let{node:o,children:e,editor:n}=t,[r,i]=Tq(o),a=o.getChildIndex(r.key),c=tt(),l=mo.default.useRef(null),u=mo.default.useRef(null),d=mo.default.useCallback(f=>{let h=l.current;h&&h.measureInWindow((y,w)=>{u.current=w}),n.readOnly||n.change(y=>{y.blur()}),i(f)},[n,i]);mo.default.useEffect(()=>{let{current:f}=u;f&&(u.current=null,window.requestAnimationFrame(()=>{let h=l.current;h&&h.measureInWindow((y,w)=>{window.scrollBy(0,w-f)})}))},[r]);let p=o.blockNodes.map((f,h)=>mo.default.createElement(WO,{key:f.key,editor:n,tab:f,index:h,active:h===a,isFirst:h===0,isLast:h===o.nodes.size-1,onSelect:y=>d(y)})),m=mo.default.Children.map(e,(f,h)=>mo.default.createElement(FO,{key:f&&typeof f=="object"&&"key"in f?f.key:h,active:h===a},f));return c?mo.default.createElement(be,{...t},mo.default.createElement(S,{ref:l},mo.default.Children.map(e,(f,h)=>{let y=o.nodes.toArray()[h];return mo.default.createElement(be,{key:y.key,...t},mo.default.createElement(S,{ref:l},mo.default.createElement(DO,null,mo.default.createElement(WO,{editor:n,key:y.key,tab:y,index:h,active:!0,isFirst:!0,isLast:!1,onSelect:()=>{}})),mo.default.createElement(LO,null,mo.default.createElement(FO,{active:!0},f))))}))):mo.default.createElement(be,{...t},mo.default.createElement(S,{ref:l},mo.default.createElement(DO,null,p),mo.default.createElement(LO,null,m)))}s();var zO=x(O());H();function Lq(t){let{attributes:o,children:e}=t;return zO.default.createElement(be,{...t},zO.default.createElement(S,{...o},e))}s();var gf=x(mi());var Dq={onKeyDown:die};function die(t,o){let{value:e}=o;return Mo(e.selection)?null:(0,gf.default)("backspace",t)&&e.isCollapsed?pie(t,o):(0,gf.default)("enter",t)?mie(t,o):(0,gf.default)("mod+enter",t)?fie(t,o):(0,gf.default)("mod+a",t)?gie(t,o):null}function pie(t,o){let{value:e}=o,n=Fi.getCurrentTab(e);return!n||!hp(n)?null:(t.preventDefault(),Fi.removeTab(o,n.key))}function mie(t,o){let{value:e}=o,n=Fi.getCurrentTab(e);if(!n||n.nodes.size<=1||!hp(n.blockNodes.last()))return null;let r=e.document.getClosest(e.startKey,u=>"type"in u&&u.type===$n);if(!r)throw new Error("Could not find parent of type BLOCK_TABS while exiting tab when enter is pressed twice");let i=e.document.getParent(r.key);if(!i)throw new Error("Could not find parent of tab while exiting tab when enter is pressed twice");let a=i.getChildIndex(r.key);if(a<0)throw new Error("Could not find child of parent while exiting tab when enter is pressed twice");t.preventDefault();let c=n.blockNodes.last();c&&o.removeNodeByKey(c.key);let l=Xt.create({type:ge,nodes:[Zf.create("")]});return o.insertNodeByKey(i.key,a+1,l).collapseToStartOf(l)}function fie(t,o){let{value:e}=o;if(!Fi.getCurrentTab(e))return null;let r=e.document.getClosest(e.startKey,c=>"type"in c&&c.type===$n);if(!r)throw new Error("Could not find parent of type BLOCK_TABS while exiting tab when enter are pressed twice");let i=e.document.getParent(r.key);if(!i)throw new Error("Could not find parent of tab while exiting tab on mod+enter");if(i.getChildIndex(r.key)<0)throw new Error("Could not find child of parent while exiting tab on mod+enter");return t.preventDefault(),kt(o,r),o}function gie(t,o){let{value:e}=o,n=Fi.getCurrentTab(e);return n?(t.preventDefault(),o.collapseToStartOf(n).extendToEndOf(n)):null}var Nq={renderNode:hie,renderVirtualNode:yie,renderMark:vie,estimateNodeSize:(t,o)=>{let e=Ii(t,o);return{height:Fl(t,o,{blockSpacing:e})}}};function hie(t){if(Xt.isBlock(t.node)&&!dp.isInline(t.parent)){let o=t;switch(t.node.type){case ge:return Ye.createElement(C3,{...o,node:t.node,parent:t.parent});case yo:case Ut:case vo:return Ye.createElement(l3,{...o,node:t.node,parent:t.parent});case Zo:return Ye.createElement(u3,{...o,node:t.node,parent:t.parent});case Ve:case Xe:case rt:return Ye.createElement(eB,{...o,node:t.node,parent:t.parent});case yr:return Ye.createElement(nq,{...o,node:t.node,parent:t.parent});case Un:return Ye.createElement(E8,{...o,node:t.node,parent:t.parent});case ya:return Ye.createElement(L8,{...o,node:t.node,parent:t.parent});case jn:return Ye.createElement(oB,{...o,node:t.node,parent:t.parent});case qi:return Ye.createElement($B,{...o,node:t.node,parent:t.parent});case es:return Ye.createElement(Q3,{...o,node:t.node,parent:t.parent});case vn:return Ye.createElement(B8,{...o,node:t.node,parent:t.parent});case Lo:return Ye.createElement(_9,{...o,node:t.node,parent:t.parent});case ho:return Ye.createElement(_3,{...o,node:t.node,parent:t.parent});case jt:return Ye.createElement(O3,{...o,node:t.node,parent:t.parent});case $n:return Ye.createElement(Mq,{...o,node:t.node,parent:t.parent});case hr:return Ye.createElement(Lq,{...o,node:t.node,parent:t.parent});case cl:return Ye.createElement(c5,{...o,node:t.node,parent:t.parent});case fu:return Ye.createElement(B3,{...o,node:t.node,parent:t.parent});case ns:return Ye.createElement(A3,{...o,node:t.node,parent:t.parent});case Wr:return Ye.createElement(U8,{...o,node:t.node,parent:t.parent});case Ja:return Ye.createElement(Z3,{...o,node:t.node,parent:t.parent});case di:return Ye.createElement(W8,{...o,node:t.node,parent:t.parent});case ts:return Ye.createElement(z3,{...o,node:t.node,parent:t.parent})}}if(dp.isInline(t.node)&&!Ks.isDocument(t.parent))switch(t.node.type){case bn:return Ye.createElement(r3,{...t,node:t.node,parent:t.parent});case mu:return Ye.createElement(YB,{...t,node:t.node,parent:t.parent});case Qf:return Ye.createElement(l5,{...t,node:t.node,parent:t.parent});case Jf:return Ye.createElement(R8,{...t,node:t.node,parent:t.parent})}return null}function yie(t){switch(t.node.type){case Ve:case Xe:case rt:return Ye.createElement(tB,{...t,key:t.node.key})}}function vie(t){switch(t.mark.type){case Yn:return Ye.createElement(QB,{...t});case Zn:return Ye.createElement(e5,{...t});case Fr:return Ye.createElement(o5,{...t});case bo:return Ye.createElement(r5,{...t});case mp:return Ye.createElement(a5,{...t});case eg:case og:case tg:return Ye.createElement(W3,{...t})}return null}var GB=st.forwardRef(function(o,e){var Hs,nn,ci,j,ie,ee;let{value:n,baseValue:r,selections:i=ha.create(),onChange:a,placeholder:c,uploadFiles:l,updateFile:u,logAnalyticsEvent:d,readOnly:p=!1,style:m,sectionIDs:f,selectedSection:h,isDiff:y,blockLayoutComponent:w,rightGutterComponent:C,integrationBlocksContext:k,integrationBlocksRemote:I,integrationsBlocksSubscription:P,onBlockHover:R,plugins:D}=o,{mode:E}=st.useContext(Jo),T=st.useRef(null),q=hi(T,e),F=st.useMemo(()=>i.filter(Kt).filter(ne=>ne.isSet),[i]),U=st.useMemo(()=>({...uk,...w?{blockLayoutComponent:w}:{},...C?{rightGutterComponent:C}:{},onBlockHover:R,integrationBlocksContext:k,integrationsBlocksSubscription:P}),[R,k,P]);l&&(U.uploadFiles=l),u&&(U.updateFile=u),d&&(U.logAnalyticsEvent=d),U.integrationBlocksRemote=I;let[,$]=_(W),X=w8(U),[oe]=sq(),we=z8(P.getCurrentValue),Ee=s3(U),me=LR(n.document,Un),We=st.useMemo(()=>[Nq,oe,C8,D8,P3,Dq,x3,d3,Ee,...h3,w3,X8,J8,we,V8,j8,P8,me,N3,X,k8,n8,x8,...D!=null?D:[]],[X,Ee,me,D]),mt=tt(),$o=is(n.document);st.useEffect(()=>{var ne,ve;if((ne=T.current)!=null&&ne.value.isFocused)return nh((ve=T.current)!=null&&ve.value.selection.isCollapsed?"editor-selection-collapsed":"editor-selection-expanded")},[(Hs=T.current)==null?void 0:Hs.value.isFocused,(nn=T.current)==null?void 0:nn.value.selection.isCollapsed]);let Vn=st.useRef(null),lt=(j=(ci=T.current)==null?void 0:ci.value)!=null&&j.selection?Mo((ee=(ie=T.current)==null?void 0:ie.value)==null?void 0:ee.selection):!1;st.useEffect(()=>{let ne=lt?"block":"text";Vn.current&&ne!==Vn.current&&(d==null||d({type:"edit_switch_selection_mode",selectionMode:ne})),Vn.current=lt?"block":"text"},[lt]);let[Gn,Yo]=st.useState(null),Gt=st.useMemo(()=>({sections:f||hu(),active:Gn,selected:h,setActive:Yo}),[f,Gn]),nl=r===null?null:r===void 0?void 0:r.document;return st.createElement(i8,{original:nl,modified:n.document},st.createElement(Ci.Provider,{value:Gt},st.createElement(Ge.Provider,{value:U},st.createElement(Ls.View,{style:[Fd.editor,m],isPDF:mt},p?null:st.createElement(go,{onPress:()=>{var ne;(ne=T.current)==null||ne.change(ve=>ew(ve,"DOCUMENT_START"))}},st.createElement(S,{style:[Fd.editorFocusArea,Fd.editorFocusAreaTop]})),$o&&c&&!n.isFocused&&!p?st.createElement(U.blockLayoutComponent,{renderMode:"centered"},st.createElement(S,{style:[Fd.placeholder]},st.createElement(V,{style:[$.Body,$.textMuted]},c))):null,st.createElement(qR,{ref:q,testID:"page.contentEditor",value:n,onChange:a,readOnly:p,selections:F,plugins:We,virtualize:E==="app",enableBlockContainment:p&&!y},!p&&Kt(n.selection)?st.createElement(q9,{value:n,selection:n.selection}):null),p?null:st.createElement(go,{onPress:()=>{var ne;(ne=T.current)==null||ne.change(ve=>ew(ve,"DOCUMENT_END"))}},st.createElement(S,{style:[Fd.editorFocusArea,Fd.editorFocusAreaBottom]}))))))}),Fd=Q.create({editor:{position:"relative"},editorFocusArea:{position:"absolute",cursor:"text",right:0,left:0},editorFocusAreaTop:{height:g.large,top:-g.large},editorFocusAreaBottom:{height:g.large,bottom:-g.large},placeholder:{position:"absolute",top:g.small}});s();var ur=x(O());s();s();var Of=x(O());s();var Ua=x(O());s();var Wn=x(O());s();var Yl="right-scroll-bar-position",Zl="width-before-scroll-bar",VO="with-scroll-bars-hidden",GO="--removed-body-scroll-bar-size";s();s();function Aq(t,o){return typeof t=="function"?t(o):t&&(t.current=o),t}s();var Bq=x(O());function qq(t,o){var e=(0,Bq.useState)(function(){return{value:t,callback:o,facade:{get current(){return e.value},set current(n){var r=e.value;r!==n&&(e.value=n,e.callback(n,r))}}}})[0];return e.callback=o,e.facade}s();function hf(t,o){return qq(o||null,function(e){return t.forEach(function(n){return Aq(n,e)})})}s();s();s();function Wq(t){return t}function Fq(t,o){o===void 0&&(o=Wq);var e=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:t},useMedium:function(i){var a=o(i,n);return e.push(a),function(){e=e.filter(function(c){return c!==a})}},assignSyncMedium:function(i){for(n=!0;e.length;){var a=e;e=[],a.forEach(i)}e={push:function(c){return i(c)},filter:function(){return e}}},assignMedium:function(i){n=!0;var a=[];if(e.length){var c=e;e=[],c.forEach(i),a=e}var l=function(){var d=a;a=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),e={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),e}}}};return r}function yf(t,o){return o===void 0&&(o=Wq),Fq(t,o)}function Ql(t){t===void 0&&(t={});var o=Fq(null);return o.options=an({async:!0,ssr:!1},t),o}s();var zq=x(O()),Vq=function(t){var o=t.sideCar,e=al(t,["sideCar"]);if(!o)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=o.read();if(!n)throw new Error("Sidecar medium not found");return zq.createElement(n,an({},e))};Vq.isSideCarExport=!0;function Jl(t,o){return t.useMedium(o),Vq}var Yb=Ql();var HO=function(){},Zb=Wn.forwardRef(function(t,o){var e=Wn.useRef(null),n=Wn.useState({onScrollCapture:HO,onWheelCapture:HO,onTouchMoveCapture:HO}),r=n[0],i=n[1],a=t.forwardProps,c=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,p=t.shards,m=t.sideCar,f=t.noIsolation,h=t.inert,y=t.allowPinchZoom,w=t.as,C=w===void 0?"div":w,k=al(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),I=m,P=hf([e,o]),R=an(an({},k),r);return Wn.createElement(Wn.Fragment,null,d&&Wn.createElement(I,{sideCar:Yb,removeScrollBar:u,shards:p,noIsolation:f,inert:h,setCallbacks:i,allowPinchZoom:!!y,lockRef:e}),a?Wn.cloneElement(Wn.Children.only(c),an(an({},R),{ref:P})):Wn.createElement(C,an({},R,{className:l,ref:P}),c))});Zb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zb.classNames={fullWidth:Zl,zeroRight:Yl};s();s();s();function zd(){return zd=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},zd.apply(this,arguments)}var Mt=x(O());s();var vf="data-focus-lock",Qb="data-focus-lock-disabled",Gq="data-no-focus-lock",Hq="data-autofocus-inside",Kq="data-no-autofocus";var jq=x(O());s();var Vd=x(O());var Gd={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},Xq=function(o){var e=o.children;return Vd.createElement(Vd.Fragment,null,Vd.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:Gd}),e,e&&Vd.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:Gd}))};Xq.propTypes={};Xq.defaultProps={children:null};s();var Jb=yf({},function(t){var o=t.target,e=t.currentTarget;return{target:o,currentTarget:e}}),eS=yf(),Uq=yf(),tS=Ql({async:!0});var Sie=[],KO=Mt.forwardRef(function(o,e){var n,r=Mt.useState(),i=r[0],a=r[1],c=Mt.useRef(),l=Mt.useRef(!1),u=Mt.useRef(null),d=o.children,p=o.disabled,m=o.noFocusGuards,f=o.persistentFocus,h=o.crossFrame,y=o.autoFocus,w=o.allowTextSelection,C=o.group,k=o.className,I=o.whiteList,P=o.hasPositiveIndices,R=o.shards,D=R===void 0?Sie:R,E=o.as,T=E===void 0?"div":E,q=o.lockProps,F=q===void 0?{}:q,U=o.sideCar,$=o.returnFocus,X=o.focusOptions,oe=o.onActivation,we=o.onDeactivation,Ee=Mt.useState({}),me=Ee[0],We=Mt.useCallback(function(){u.current=u.current||document&&document.activeElement,c.current&&oe&&oe(c.current),l.current=!0},[oe]),mt=Mt.useCallback(function(){l.current=!1,we&&we(c.current)},[we]);(0,jq.useEffect)(function(){p||(u.current=null)},[]);var $o=Mt.useCallback(function(nn){var ci=u.current;if(ci&&ci.focus){var j=typeof $=="function"?$(ci):$;if(j){var ie=typeof j=="object"?j:void 0;u.current=null,nn?Promise.resolve().then(function(){return ci.focus(ie)}):ci.focus(ie)}}},[$]),Vn=Mt.useCallback(function(nn){l.current&&Jb.useMedium(nn)},[]),lt=eS.useMedium,Gn=Mt.useCallback(function(nn){c.current!==nn&&(c.current=nn,a(nn))},[]),Yo=zd((n={},n[Qb]=p&&"disabled",n[vf]=C,n),F),Gt=m!==!0,nl=Gt&&m!=="tail",Hs=hf([e,Gn]);return Mt.createElement(Mt.Fragment,null,Gt&&[Mt.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:p?-1:0,style:Gd}),P?Mt.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:p?-1:1,style:Gd}):null],!p&&Mt.createElement(U,{id:me,sideCar:tS,observed:i,disabled:p,persistentFocus:f,crossFrame:h,autoFocus:y,whiteList:I,shards:D,onActivation:We,onDeactivation:mt,returnFocus:$o,focusOptions:X}),Mt.createElement(T,zd({ref:Hs},Yo,{className:k,onBlur:lt,onFocus:Vn}),d),nl&&Mt.createElement("div",{"data-focus-guard":!0,tabIndex:p?-1:0,style:Gd}))});KO.propTypes={};KO.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};var $q=KO;s();function XO(t){var o=window,e=o.setImmediate;typeof e<"u"?e(t):setTimeout(t,1)}var Yq=$q;s();var oS=Ql(),nS="data-focus-on-hidden";var Zq=Ua.forwardRef(function(t,o){var e=Ua.useState(!1),n=e[0],r=e[1],i=t.children,a=t.autoFocus,c=t.shards,l=t.enabled,u=l===void 0?!0:l,d=t.scrollLock,p=d===void 0?!0:d,m=t.focusLock,f=m===void 0?!0:m,h=t.returnFocus,y=h===void 0?!0:h,w=t.inert,C=t.allowPinchZoom,k=t.sideCar,I=t.className,P=t.shouldIgnore,R=t.style,D=t.as,E=al(t,["children","autoFocus","shards","enabled","scrollLock","focusLock","returnFocus","inert","allowPinchZoom","sideCar","className","shouldIgnore","style","as"]),T=k,q=n.onActivation,F=n.onDeactivation,U=al(n,["onActivation","onDeactivation"]),$=an(an({},U),{sideCar:k,shards:c,allowPinchZoom:C,as:D,inert:w,style:R,enabled:u&&p});return Ua.createElement(Ua.Fragment,null,Ua.createElement(Yq,{ref:o,sideCar:k,disabled:!(n&&u&&f),returnFocus:y,autoFocus:a,shards:c,onActivation:q,onDeactivation:F,className:I,whiteList:P,lockProps:$,as:Zb},i),u&&Ua.createElement(T,an({},E,{sideCar:oS,setLockProps:r,shards:c})))});s();s();s();var yW=x(O());s();s();s();function bf(t,o){return bf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},bf(t,o)}function UO(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,bf(t,o)}var rS=x(O());function wie(t,o){function e(n){return n.displayName||n.name||"Component"}return function(r){var i=[],a;function c(){a=t(i.map(function(u){return u.props})),o(a)}var l=function(u){UO(d,u);function d(){return u.apply(this,arguments)||this}d.peek=function(){return a};var p=d.prototype;return p.componentDidMount=function(){i.push(this),c()},p.componentDidUpdate=function(){c()},p.componentWillUnmount=function(){var f=i.indexOf(this);i.splice(f,1),c()},p.render=function(){return rS.default.createElement(r,this.props)},d}(rS.PureComponent);return Zy(l,"displayName","SideEffect("+e(r)+")"),l}}var Qq=wie;s();s();s();s();var Fn=function(t){for(var o=Array(t.length),e=0;e<t.length;++e)o[e]=t[e];return o},Sf=function(t){return Array.isArray(t)?t:[t]};s();var Cie=function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var o=window.getComputedStyle(t,null);return!o||!o.getPropertyValue?!1:o.getPropertyValue("display")==="none"||o.getPropertyValue("visibility")==="hidden"},Jq=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},eW=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},xie=function(t,o){return!t||eW(t)||!Cie(t)&&o(Jq(t))},jO=function(t,o){var e=t.get(o);if(e!==void 0)return e;var n=xie(o,jO.bind(void 0,t));return t.set(o,n),n},kie=function(t,o){return t&&!eW(t)?Iie(t)?o(Jq(t)):!1:!0},$O=function(t,o){var e=t.get(o);if(e!==void 0)return e;var n=kie(o,$O.bind(void 0,t));return t.set(o,n),n},YO=function(t){return t.dataset},Oie=function(t){return t.tagName==="BUTTON"},tW=function(t){return t.tagName==="INPUT"},ZO=function(t){return tW(t)&&t.type==="radio"},oW=function(t){return!((tW(t)||Oie(t))&&(t.type==="hidden"||t.disabled))},Iie=function(t){var o=t.getAttribute(Kq);return![!0,"true",""].includes(o)},wf=function(t){var o;return!!(t&&(!((o=YO(t))===null||o===void 0)&&o.focusGuard))},Hd=function(t){return!wf(t)},nW=function(t){return!!t};s();var _ie=function(t,o){var e=t.tabIndex-o.tabIndex,n=t.index-o.index;if(e){if(!t.tabIndex)return 1;if(!o.tabIndex)return-1}return e||n},QO=function(t,o,e){return Fn(t).map(function(n,r){return{node:n,index:r,tabIndex:e&&n.tabIndex===-1?(n.dataset||{}).focusGuard?0:-1:n.tabIndex}}).filter(function(n){return!o||n.tabIndex>=0}).sort(_ie)};s();s();var rW=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"];var JO=rW.join(","),Rie="".concat(JO,", [data-focus-guard]"),iW=function(t,o){var e;return Fn(((e=t.shadowRoot)===null||e===void 0?void 0:e.children)||t.children).reduce(function(n,r){return n.concat(r.matches(o?Rie:JO)?[r]:[],iW(r))},[])},iS=function(t,o){return t.reduce(function(e,n){return e.concat(iW(n,o),n.parentNode?Fn(n.parentNode.querySelectorAll(JO)).filter(function(r){return r===n}):[])},[])},aW=function(t){var o=t.querySelectorAll("[".concat(Hq,"]"));return Fn(o).map(function(e){return iS([e])}).reduce(function(e,n){return e.concat(n)},[])};var e1=function(t,o){return Fn(t).filter(function(e){return jO(o,e)}).filter(function(e){return oW(e)})},t1=function(t,o){return o===void 0&&(o=new Map),Fn(t).filter(function(e){return $O(o,e)})},Cf=function(t,o,e){return QO(e1(iS(t,e),o),!0,e)},o1=function(t,o){return QO(e1(iS(t),o),!1)},sW=function(t,o){return e1(aW(t),o)},Yc=function(t,o){return t.shadowRoot?Yc(t.shadowRoot,o):Object.getPrototypeOf(t).contains!==void 0&&Object.getPrototypeOf(t).contains.call(t,o)?!0:Fn(t.children).some(function(e){return Yc(e,o)})};s();var Pie=function(t){for(var o=new Set,e=t.length,n=0;n<e;n+=1)for(var r=n+1;r<e;r+=1){var i=t[n].compareDocumentPosition(t[r]);(i&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&o.add(r),(i&Node.DOCUMENT_POSITION_CONTAINS)>0&&o.add(n)}return t.filter(function(a,c){return!o.has(c)})},cW=function(t){return t.parentNode?cW(t.parentNode):t},Kd=function(t){var o=Sf(t);return o.filter(Boolean).reduce(function(e,n){var r=n.getAttribute(vf);return e.push.apply(e,r?Pie(Fn(cW(n).querySelectorAll("[".concat(vf,'="').concat(r,'"]:not([').concat(Qb,'="disabled"])')))):[n]),e},[])};s();var lW=function(t){return t.activeElement?t.activeElement.shadowRoot?lW(t.activeElement.shadowRoot):t.activeElement:void 0},Xd=function(){return document.activeElement?document.activeElement.shadowRoot?lW(document.activeElement.shadowRoot):document.activeElement:void 0};var Eie=function(t){return t===document.activeElement},Tie=function(t){return!!Fn(t.querySelectorAll("iframe")).some(function(o){return Eie(o)})},aS=function(t){var o=document&&Xd();return!o||o.dataset&&o.dataset.focusGuard?!1:Kd(t).some(function(e){return Yc(e,o)||Tie(e)})};s();var n1=function(){var t=document&&Xd();return t?Fn(document.querySelectorAll("[".concat(Gq,"]"))).some(function(o){return Yc(o,t)}):!1};s();s();s();var Mie=function(t,o){return o.filter(ZO).filter(function(e){return e.name===t.name}).filter(function(e){return e.checked})[0]||t},sS=function(t,o){return ZO(t)&&t.name?Mie(t,o):t},uW=function(t){var o=new Set;return t.forEach(function(e){return o.add(sS(e,t))}),t.filter(function(e){return o.has(e)})};s();var r1=function(t){return t[0]&&t.length>1?sS(t[0],t):t[0]},i1=function(t,o){return t.length>1?t.indexOf(sS(t[o],t)):o};var a1="NEW_FOCUS",dW=function(t,o,e,n){var r=t.length,i=t[0],a=t[r-1],c=wf(e);if(!(e&&t.indexOf(e)>=0)){var l=e!==void 0?o.indexOf(e):-1,u=n?o.indexOf(n):l,d=n?t.indexOf(n):-1,p=l-u,m=o.indexOf(i),f=o.indexOf(a),h=uW(o),y=e!==void 0?h.indexOf(e):-1,w=y-(n?h.indexOf(n):l),C=i1(t,0),k=i1(t,r-1);if(l===-1||d===-1)return a1;if(!p&&d>=0)return d;if(l<=m&&c&&Math.abs(p)>1)return k;if(l>=f&&c&&Math.abs(p)>1)return C;if(p&&Math.abs(w)>1)return d;if(l<=m)return k;if(l>f)return C;if(p)return Math.abs(p)>1?d:(r+d+p)%r}};s();var Lie=function(t){return function(o){var e,n=(e=YO(o))===null||e===void 0?void 0:e.autofocus;return o.autofocus||n!==void 0&&n!=="false"||t.indexOf(o)>=0}},pW=function(t,o,e){var n=t.map(function(i){var a=i.node;return a}),r=t1(n.filter(Lie(e)));return r&&r.length?r1(r):r1(t1(o))};s();var c1=function(t,o){return o===void 0&&(o=[]),o.push(t),t.parentNode&&c1(t.parentNode.host||t.parentNode,o),o},s1=function(t,o){for(var e=c1(t),n=c1(o),r=0;r<e.length;r+=1){var i=e[r];if(n.indexOf(i)>=0)return i}return!1},cS=function(t,o,e){var n=Sf(t),r=Sf(o),i=n[0],a=!1;return r.filter(Boolean).forEach(function(c){a=s1(a||c,c)||a,e.filter(Boolean).forEach(function(l){var u=s1(i,l);u&&(!a||Yc(u,a)?a=u:a=s1(u,a))})}),a},mW=function(t,o){return t.reduce(function(e,n){return e.concat(sW(n,o))},[])};var Die=function(t,o){var e=new Map;return o.forEach(function(n){return e.set(n.node,n)}),t.map(function(n){return e.get(n)}).filter(nW)},fW=function(t,o){var e=document&&Xd(),n=Kd(t).filter(Hd),r=cS(e||t,t,n),i=new Map,a=o1(n,i),c=Cf(n,i).filter(function(m){var f=m.node;return Hd(f)});if(!(!c[0]&&(c=a,!c[0]))){var l=o1([r],i).map(function(m){var f=m.node;return f}),u=Die(l,c),d=u.map(function(m){var f=m.node;return f}),p=dW(d,l,e,o);return p===a1?{node:pW(a,d,mW(n,i))}:p===void 0?p:u[p]}};s();var l1=function(t){var o=Kd(t).filter(Hd),e=cS(t,t,o),n=new Map,r=Cf([e],n,!0),i=Cf(o,n).filter(function(a){var c=a.node;return Hd(c)}).map(function(a){var c=a.node;return c});return r.map(function(a){var c=a.node,l=a.index;return{node:c,index:l,lockItem:i.indexOf(c)>=0,guard:wf(c)}})};s();var Nie=function(t,o){"focus"in t&&t.focus(o),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus()},u1=0,d1=!1,gW=function(t,o,e){e===void 0&&(e={});var n=fW(t,o);if(!d1&&n){if(u1>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),d1=!0,setTimeout(function(){d1=!1},1);return}u1++,Nie(n.node,e.focusOptions),u1--}};var p1=gW;var Aie=function(){return document&&document.activeElement===document.body},Bie=function(){return Aie()||n1()},jd=null,Ud=null,$d=null,xf=!1,qie=function(){return!0},Wie=function(o){return(jd.whiteList||qie)(o)},Fie=function(o,e){$d={observerNode:o,portaledElement:e}},zie=function(o){return $d&&$d.portaledElement===o};function hW(t,o,e,n){var r=null,i=t;do{var a=n[i];if(a.guard)a.node.dataset.focusAutoGuard&&(r=a);else if(a.lockItem){if(i!==t)return;r=null}else break}while((i+=e)!==o);r&&(r.node.tabIndex=0)}var Vie=function(o){return o&&"current"in o?o.current:o},Gie=function(o){return o?!!xf:xf==="meanwhile"},Hie=function t(o,e,n){return e&&(e.host===o&&(!e.activeElement||n.contains(e.activeElement))||e.parentNode&&t(o,e.parentNode,n))},Kie=function(o,e){return e.some(function(n){return Hie(o,n,n)})},lS=function(){var o=!1;if(jd){var e=jd,n=e.observed,r=e.persistentFocus,i=e.autoFocus,a=e.shards,c=e.crossFrame,l=e.focusOptions,u=n||$d&&$d.portaledElement,d=document&&document.activeElement;if(u){var p=[u].concat(a.map(Vie).filter(Boolean));if((!d||Wie(d))&&(r||Gie(c)||!Bie()||!Ud&&i)&&(u&&!(aS(p)||d&&Kie(d,p)||zie(d,u))&&(document&&!Ud&&d&&!i?(d.blur&&d.blur(),document.body.focus()):(o=p1(p,Ud,{focusOptions:l}),$d={})),xf=!1,Ud=document&&document.activeElement),document){var m=document&&document.activeElement,f=l1(p),h=f.map(function(y){var w=y.node;return w}).indexOf(m);h>-1&&(f.filter(function(y){var w=y.guard,C=y.node;return w&&C.dataset.focusAutoGuard}).forEach(function(y){var w=y.node;return w.removeAttribute("tabIndex")}),hW(h,f.length,1,f),hW(h,-1,-1,f))}}}return o},vW=function(o){lS()&&o&&(o.stopPropagation(),o.preventDefault())},uS=function(){return XO(lS)},bW=function(o){var e=o.target,n=o.currentTarget;n.contains(e)||Fie(n,e)},Xie=function(){return null},Uie=function(o){var e=o.children;return yW.createElement("div",{onBlur:uS,onFocus:bW},e)};Uie.propTypes={};var SW=function(){xf="just",setTimeout(function(){xf="meanwhile"},0)},jie=function(){document.addEventListener("focusin",vW),document.addEventListener("focusout",uS),window.addEventListener("blur",SW)},$ie=function(){document.removeEventListener("focusin",vW),document.removeEventListener("focusout",uS),window.removeEventListener("blur",SW)};function Yie(t){return t.filter(function(o){var e=o.disabled;return!e})}function Zie(t){var o=t.slice(-1)[0];o&&!jd&&jie();var e=jd,n=e&&o&&o.id===e.id;jd=o,e&&!n&&(e.onDeactivation(),t.filter(function(r){var i=r.id;return i===e.id}).length||e.returnFocus(!o)),o?(Ud=null,(!n||e.observed!==o.observed)&&o.onActivation(),lS(!0),XO(lS)):($ie(),Ud=null)}Jb.assignSyncMedium(bW);eS.assignMedium(uS);Uq.assignMedium(function(t){return t({moveFocusInside:p1,focusInside:aS})});var wW=Qq(Yie,Zie)(Xie);var Oht=Jl(tS,wW);s();s();var Lt=x(O());s();s();var dS=x(O());s();s();s();var kW=x(O());s();s();var CW;var xW=function(){if(CW)return CW;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Qie(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var o=xW();return o&&t.setAttribute("nonce",o),t}function Jie(t,o){t.styleSheet?t.styleSheet.cssText=o:t.appendChild(document.createTextNode(o))}function eae(t){var o=document.head||document.getElementsByTagName("head")[0];o.appendChild(t)}var m1=function(){var t=0,o=null;return{add:function(e){t==0&&(o=Qie())&&(Jie(o,e),eae(o)),t++},remove:function(){t--,!t&&o&&(o.parentNode&&o.parentNode.removeChild(o),o=null)}}};var f1=function(){var t=m1();return function(o,e){kW.useEffect(function(){return t.add(o),function(){t.remove()}},[o&&e])}};var eu=function(){var t=f1(),o=function(e){var n=e.styles,r=e.dynamic;return t(n,r),null};return o};s();var tae={left:0,top:0,right:0,gap:0},g1=function(t){return parseInt(t||"",10)||0},oae=function(t){var o=window.getComputedStyle(document.body),e=o[t==="padding"?"paddingLeft":"marginLeft"],n=o[t==="padding"?"paddingTop":"marginTop"],r=o[t==="padding"?"paddingRight":"marginRight"];return[g1(e),g1(n),g1(r)]},h1=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return tae;var o=oae(t),e=document.documentElement.clientWidth,n=window.innerWidth;return{left:o[0],top:o[1],right:o[2],gap:Math.max(0,n-e+o[2]-o[0])}};var nae=eu(),rae=function(t,o,e,n){var r=t.left,i=t.top,a=t.right,c=t.gap;return e===void 0&&(e="margin"),`
  .`.concat(VO,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([o&&"position: relative ".concat(n,";"),e==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),e==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yl,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Zl,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Yl," .").concat(Yl,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Zl," .").concat(Zl,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body {
    `).concat(GO,": ").concat(c,`px;
  }
`)},y1=function(t){var o=t.noRelative,e=t.noImportant,n=t.gapMode,r=n===void 0?"margin":n,i=dS.useMemo(function(){return h1(r)},[r]);return dS.createElement(nae,{styles:rae(i,!o,r,e?"":"!important")})};s();var v1=!1;if(typeof window<"u")try{kf=Object.defineProperty({},"passive",{get:function(){return v1=!0,!0}}),window.addEventListener("test",kf,kf),window.removeEventListener("test",kf,kf)}catch(t){v1=!1}var kf,tu=v1?{passive:!1}:!1;s();var iae=function(t){return t.tagName==="TEXTAREA"},OW=function(t,o){var e=window.getComputedStyle(t);return e[o]!=="hidden"&&!(e.overflowY===e.overflowX&&!iae(t)&&e[o]==="visible")},aae=function(t){return OW(t,"overflowY")},sae=function(t){return OW(t,"overflowX")},b1=function(t,o){var e=o;do{typeof ShadowRoot<"u"&&e instanceof ShadowRoot&&(e=e.host);var n=IW(t,e);if(n){var r=_W(t,e),i=r[1],a=r[2];if(i>a)return!0}e=e.parentNode}while(e&&e!==document.body);return!1},cae=function(t){var o=t.scrollTop,e=t.scrollHeight,n=t.clientHeight;return[o,e,n]},lae=function(t){var o=t.scrollLeft,e=t.scrollWidth,n=t.clientWidth;return[o,e,n]},IW=function(t,o){return t==="v"?aae(o):sae(o)},_W=function(t,o){return t==="v"?cae(o):lae(o)},uae=function(t,o){return t==="h"&&o==="rtl"?-1:1},RW=function(t,o,e,n,r){var i=uae(t,window.getComputedStyle(o).direction),a=i*n,c=e.target,l=o.contains(c),u=!1,d=a>0,p=0,m=0;do{var f=_W(t,c),h=f[0],y=f[1],w=f[2],C=y-w-i*h;(h||C)&&IW(t,c)&&(p+=C,m+=h),c=c.parentNode}while(!l&&c!==document.body||l&&(o.contains(c)||o===c));return(d&&(r&&p===0||!r&&a>p)||!d&&(r&&m===0||!r&&-a>m))&&(u=!0),u};var pS=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},PW=function(t){return[t.deltaX,t.deltaY]},EW=function(t){return t&&"current"in t?t.current:t},dae=function(t,o){return t[0]===o[0]&&t[1]===o[1]},pae=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},mae=0,Yd=[];function TW(t){var o=Lt.useRef([]),e=Lt.useRef([0,0]),n=Lt.useRef(),r=Lt.useState(mae++)[0],i=Lt.useState(function(){return eu()})[0],a=Lt.useRef(t);Lt.useEffect(function(){a.current=t},[t]),Lt.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var y=dI([t.lockRef.current],(t.shards||[]).map(EW),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var c=Lt.useCallback(function(y,w){if("touches"in y&&y.touches.length===2)return!a.current.allowPinchZoom;var C=pS(y),k=e.current,I="deltaX"in y?y.deltaX:k[0]-C[0],P="deltaY"in y?y.deltaY:k[1]-C[1],R,D=y.target,E=Math.abs(I)>Math.abs(P)?"h":"v";if("touches"in y&&E==="h"&&D.type==="range")return!1;var T=b1(E,D);if(!T)return!0;if(T?R=E:(R=E==="v"?"h":"v",T=b1(E,D)),!T)return!1;if(!n.current&&"changedTouches"in y&&(I||P)&&(n.current=R),!R)return!0;var q=n.current||R;return RW(q,w,y,q==="h"?I:P,!0)},[]),l=Lt.useCallback(function(y){var w=y;if(!(!Yd.length||Yd[Yd.length-1]!==i)){var C="deltaY"in w?PW(w):pS(w),k=o.current.filter(function(R){return R.name===w.type&&R.target===w.target&&dae(R.delta,C)})[0];if(k&&k.should){w.cancelable&&w.preventDefault();return}if(!k){var I=(a.current.shards||[]).map(EW).filter(Boolean).filter(function(R){return R.contains(w.target)}),P=I.length>0?c(w,I[0]):!a.current.noIsolation;P&&w.cancelable&&w.preventDefault()}}},[]),u=Lt.useCallback(function(y,w,C,k){var I={name:y,delta:w,target:C,should:k};o.current.push(I),setTimeout(function(){o.current=o.current.filter(function(P){return P!==I})},1)},[]),d=Lt.useCallback(function(y){e.current=pS(y),n.current=void 0},[]),p=Lt.useCallback(function(y){u(y.type,PW(y),y.target,c(y,t.lockRef.current))},[]),m=Lt.useCallback(function(y){u(y.type,pS(y),y.target,c(y,t.lockRef.current))},[]);Lt.useEffect(function(){return Yd.push(i),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:m}),document.addEventListener("wheel",l,tu),document.addEventListener("touchmove",l,tu),document.addEventListener("touchstart",d,tu),function(){Yd=Yd.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,tu),document.removeEventListener("touchmove",l,tu),document.removeEventListener("touchstart",d,tu)}},[]);var f=t.removeScrollBar,h=t.inert;return Lt.createElement(Lt.Fragment,null,h?Lt.createElement(i,{styles:pae(r)}):null,f?Lt.createElement(y1,{gapMode:"margin"}):null)}var hyt=Jl(Yb,TW);s();var gS=x(O());s();var fae=function(t){if(typeof document>"u")return null;var o=Array.isArray(t)?t[0]:t;return o.ownerDocument.body},Zd=new WeakMap,mS=new WeakMap,fS={},S1=0,gae=function(t,o,e,n){var r=Array.isArray(t)?t:[t];fS[e]||(fS[e]=new WeakMap);var i=fS[e],a=[],c=new Set,l=new Set(r),u=function(p){!p||c.has(p)||(c.add(p),u(p.parentNode))};r.forEach(u);var d=function(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,function(m){if(c.has(m))d(m);else{var f=m.getAttribute(n),h=f!==null&&f!=="false",y=(Zd.get(m)||0)+1,w=(i.get(m)||0)+1;Zd.set(m,y),i.set(m,w),a.push(m),y===1&&h&&mS.set(m,!0),w===1&&m.setAttribute(e,"true"),h||m.setAttribute(n,"true")}})};return d(o),c.clear(),S1++,function(){a.forEach(function(p){var m=Zd.get(p)-1,f=i.get(p)-1;Zd.set(p,m),i.set(p,f),m||(mS.has(p)||p.removeAttribute(n),mS.delete(p)),f||p.removeAttribute(e)}),S1--,S1||(Zd=new WeakMap,Zd=new WeakMap,mS=new WeakMap,fS={})}},MW=function(t,o,e){e===void 0&&(e="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),r=o||fae(t);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live]"))),gae(n,r,e,"aria-hidden")):function(){return null}};s();var LW=x(O());var hae=eu(),yae=`
 [`+nS+`] {
   pointer-events: none !important;
 }
`,DW=function(){return LW.createElement(hae,{styles:yae})};var Zc=x(O()),NW=function(t){return"current"in t?t.current:t};function AW(t){var o=t.setLockProps,e=t.onEscapeKey,n=t.onClickOutside,r=t.shards,i=t.onActivation,a=t.onDeactivation,c=t.noIsolation,l=(0,Zc.useState)(void 0),u=l[0],d=l[1],p=(0,Zc.useRef)(null),m=(0,Zc.useRef)(0);return gS.useEffect(function(){var f=function(C){C.defaultPrevented||(C.code==="Escape"||C.key==="Escape"||C.keyCode===27)&&e&&e(C)},h=function(C){C.defaultPrevented||C.target===p.current||C instanceof MouseEvent&&C.button!==0||r&&r.map(NW).some(function(k){return k&&k.contains(C.target)||k===C.target})||n&&n(C)},y=function(C){h(C),m.current=C.touches.length},w=function(C){m.current=C.touches.length};if(u)return document.addEventListener("keydown",f),document.addEventListener("mousedown",h),document.addEventListener("touchstart",y),document.addEventListener("touchend",w),function(){document.removeEventListener("keydown",f),document.removeEventListener("mousedown",h),document.removeEventListener("touchstart",y),document.removeEventListener("touchend",w)}},[u,n,e]),(0,Zc.useEffect)(function(){if(u)return i&&i(u),function(){a&&a()}},[!!u]),(0,Zc.useEffect)(function(){var f=function(){return null},h=!1,y=function(C){c||(f=MW(uI([C],(r||[]).map(NW)),document.body,nS)),d(function(){return C})},w=function(){f(),h||d(null)};return o({onMouseDown:function(C){p.current=C.target},onTouchStart:function(C){p.current=C.target},onActivation:y,onDeactivation:w}),function(){h=!0,o(!1)}},[]),gS.createElement(DW,null)}var BW=Jl(oS,AW);var vae=function(t){return Of.createElement(BW,an({},t))},w1=Of.forwardRef(function(t,o){return Of.createElement(Zq,an({},t,{ref:o,sideCar:vae}))});H();var jW=x(UW());function $W(t){let o=ur.useRef(null),[e,n]=Xn(rk),{medias:r,currentIndex:i}=e,a=()=>{n({medias:[],currentIndex:0})},c=()=>{n(d=>({...d,currentIndex:Math.max(d.currentIndex-1,0)}))},l=()=>{n(d=>({...d,currentIndex:Math.min(d.currentIndex+1,d.medias.length-1)}))},u=d=>{n(p=>({...p,currentIndex:d}))};return $s({opened:r.length>0,closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,closeOnEsc:!0,onClose:a},o),Hr(r.length?{Left:()=>c(),Right:()=>l()}:{},"all",[n,!r.length]),r.length?ur.createElement(br,{ref:o},ur.createElement(w1,null,ur.createElement(S,{style:Jd.imagesZoonPortal},ur.createElement(jW.default,{imageUrls:r.map(d=>({url:d.url})),index:i,renderIndicator:d=>ur.createElement(S,{style:Jd.indactor},ur.createElement(S,{style:Jd.indicatorElement}),ur.createElement(S,{style:[Jd.indicatorElement,b.alignCenter,b.justifyContentCenter]},ur.createElement(V,{style:Jd.indicatorText},`${d}/${r.length}`)),ur.createElement(S,{style:[Jd.indicatorElement,b.alignEnd,b.justifyContentCenter]},ur.createElement(z,{icon:v.X,defaultTextStyle:{color:Y.WHITE},onPress:()=>a()}))),renderArrowLeft:()=>ur.createElement(z,{icon:v.ChevronLeft,defaultTextStyle:{color:Y.WHITE},onPress:()=>c()}),renderArrowRight:()=>ur.createElement(z,{icon:v.ChevronRight,defaultTextStyle:{color:Y.WHITE},onPress:()=>l()}),onChange:d=>u(d||0),onCancel:()=>a(),enableSwipeDown:!0})))):null}var Jd=Q.create({imagesZoonPortal:{position:"fixed",top:0,left:0,right:0,bottom:0},indactor:{height:48,position:"absolute",left:0,top:0,right:0,display:"flex",flexDirection:"row",zIndex:20},indicatorElement:{flex:1},indicatorText:{color:Y.WHITE}});s();var YW=x(O());function ZW(t){let o=Lu(),{navigate:e}=xe(),n=Co(),r=fP(),i=hP(t),a=gP(t),c=wo(i),l=aw(a,"create-space"),u=aw(a,"create-collection")&&Dae(t,r);return YW.default.useMemo(()=>sl(t)?{createSpace:l?async(d=!0)=>{let p=await rc(),m;try{m=(await p.spaces.createSpace(t.organization,{parent:t.collection})).data}catch(f){throw n.notify({title:"Error while creating space",details:ga(f),kind:"danger"}),f}return ae(Nt(m,{type:"space_create"})),d&&e({screen:{type:"space",space:m.id,organization:t.organization,page:""}}),m}:void 0,createCollection:u?async(d=!0)=>{let p=new Ai("startCollection");p.label("User",o.uid),p.label("Owner type",Xf(t)?"user":"organization"),p.label("Owner",Xf(t)?t.user:t.organization),t.collection&&p.label("Collection",t.collection),p.label("Perm",a);let[m,f]=R7(h=>TI(h,{title:"New Collection",owner:t,at:OI(c.current.collections),createdBy:o.uid,perm:a}));return p.wrapPromise(f),ae(z_(m,{type:"collection_create",collection:m.key,restricted:!1})),d&&e({screen:{type:"collection",collection:m.key,...lp(m)}}),m}:void 0}:{createSpace:void 0,createCollection:void 0},[Xf(t)?t.user:t.organization,t.collection,o.uid,c,e,l,u])}function Dae(t,o){let e=0,n=t.collection;for(;n;){let r=o.collections.find(i=>i.key===n);n=r?r.collection:void 0,e++}return e<EI}s();var P1=x(O());s();var ep=JSON.parse('{"iconWrapper":"iconWrapper_x37cD","icon":"icon_TnMUQ","active":"active_CllGx","ok":"ok_V1sO-","interactive":"interactive_B2TwX","good":"good_nqe9w","bad":"bad_pz0f3"}');function QW(t){let{active:o=!0,interactive:e=!1,size:n,rating:r}=t,i=Nae[r];return P1.createElement(te,{style:[ep.iconWrapper,ep[r],o&&ep.active,e&&ep.interactive],inlineStyle:{"--rating-size":`${n}px`}},P1.createElement(i,{style:[ep.icon]}))}var Nae={["ok"]:v.FeedbackOk.CSS,["good"]:v.FeedbackGood.CSS,["bad"]:v.FeedbackBad.CSS};s();var Pf=x(O());s();var Br=x(O());H();function JW(t){let{sources:o,pickSource:e,withGitSyncAction:n,onClose:r}=t,[,i]=_(eF),{navigate:a}=xe(),c=()=>{r(),a({screen:l=>l.type!=="space"?l:{sideSheet:{type:"gitsync"}}})};return Br.createElement(jg,{size:"large",onClose:r,title:"Import your content",subtitle:"Choose a file type or platform below to get started importing your data.",footer:Br.createElement(bi,{icon:v.GitHub.CSS,kind:"default",title:"Need to stay in sync?",details:n?"Set up GitHub or GitLab Sync and link a repo for two-way syncing.":"Start a new space, set up GitHub or GitLab Sync, and link a repo for two-way syncing.",actions:n?[{label:"Set up now",onPress:c}]:void 0})},Br.createElement(S,{style:[i.cardsWrapper]},o.map(({title:l,name:u,source:d,icon:p})=>Br.createElement(Aae,{key:l,title:u,onPress:()=>e(d),icon:p}))))}function Aae(t){let{title:o,description:e,icon:n,onPress:r,style:i}=t,[,a]=_(W),[,c]=_(eF);return Br.createElement(K.TouchableOpacity,{style:[b.directionRow,b.alignCenter,g.Padding.smallVertical,g.Padding.smallRight,c.importCard,i],onPress:r},Br.createElement(S,{style:g.Margin.smallLeft},typeof n=="function"?Br.createElement(n,{size:M.ICON_L}):Br.createElement(Qo,{source:n,style:c.importCardImage})),Br.createElement(S,{style:g.Margin.smallLeft},Br.createElement(S,null,Br.createElement(K.Text.Child,{style:[a.Label,a.text],activeStyle:a.primary},o)),Br.createElement(S,null,Br.createElement(K.Text.Child,{style:[a.Body,a.textMuted],activeStyle:a.primary},e))))}var eF=G.create({importCard:t=>({borderWidth:1,borderColor:t.colors.border.main,borderRadius:4,flexShrink:0,flexGrow:0,flexBasis:"32%",padding:g.small,marginRight:g.small,marginBottom:g.small}),importCardImage:{width:M.ICON_L,height:M.ICON_L},cardsWrapper:{flexWrap:"wrap",flexDirection:"row",marginRight:-g.small}});s();function ru(t){return"organization"in t}s();var wS=x(O());s();var ja=x(O());s();var aa=x(O());H();s();var ia=x(O());H();s();var Jc=x(O());H();function tF(t){let{fileIcon:o,files:e,setFiles:n}=t,[,r]=_(W),i=No(o,{style:r.primary},[o]),a=Jc.useCallback(({item:c})=>{let l=()=>{n(u=>u.filter(d=>d.key!==c.key))};return Jc.createElement(ps,{layout:"wide",icon:i,title:c.file.name,buttons:[c.uploaded||c.failed?null:Jc.createElement(Re,{size:"medium"}),c.failed?Jc.createElement(z,{tint:Y.scarlet.base,icon:v.Alert,title:"Failed to upload. Please try again.",onPress:l}):null,Jc.createElement(z,{icon:v.X,title:"Remove",onPress:l})]})},[o,n]);return Jc.createElement(qf,{data:e,renderItem:a})}function bS(t){let{getSpace:o,files:e,setFiles:n,fileIcon:r,fileExtension:i,limitWarning:a=!1,fileUploadsLimit:c=1/0}=t,[,l]=_(W),u=Co(),d=(h,y)=>{n(w=>w.map(C=>C.key===h?{...C,...y}:C))},p=async h=>{let y=await o();try{let w=await k_({kind:"space_import",space:y.id},h.file);d(h.key,{uploaded:w})}catch(w){throw u.notify({kind:"danger",title:"Error while uploading files",details:"Please try again or contact support if the problem persists.",icon:v.Alert.CSS}),d(h.key,{failed:!0}),w}},m=h=>{let y=[];for(let w of h){if(e.length>=c){u.notify({kind:"danger",title:"Cannot upload file",details:`You can only upload ${c} file for this operation`,timeout:5e3});break}if(w.size>209715200){u.notify({kind:"danger",title:`Your file must be less than ${Em(209715200)}`,details:`Please try a different file that's below ${Em(209715200)}`,timeout:5e3});continue}let C={key:$f(),file:w};y.push(C)}n(w=>w.concat(y)),y.forEach(w=>p(w))};return ia.createElement(ia.Fragment,null,ia.createElement(S,null,ia.createElement(IR,{icon:r,onDropFiles:m,onPress:async()=>{let h=await CP();m(h)},hint:`Drop your ${i} file here or choose a file`})),a?ia.createElement(S,{style:g.Margin.smallTop},ia.createElement(V,{style:[l.Caption,l.textMuted]},"GitBook has limits for imported content,"," ",ia.createElement(Ia,{url:"https://docs.gitbook.com/features/import#limits"},"read more here."))):null,e.length>0?ia.createElement(S,{style:[g.Margin.mediumTop]},ia.createElement(tF,{fileIcon:r,files:e,setFiles:n})):null)}s();var Rf=x(O());H();function tp(t){let{title:o,subtitle:e,onClose:n,onSubmit:r,children:i}=t;return Rf.default.createElement(jg,{title:o,subtitle:e,footer:Rf.default.createElement(S,{style:[b.directionRow,b.justifyContentEnd]},Rf.default.createElement(z,{kind:"secondary",onPress:n,style:g.Margin.smallRight},"Back"),Rf.default.createElement(z,{kind:"primary",onPress:r},"Start import")),onClose:n},i)}function nF(t){let{getSpace:o,fileIcon:e,fileExtension:n,steps:r=[],startImport:i,limitWarning:a=!1,fileUploadsLimit:c}=t,[,l]=_(W),[u,d]=aa.useState([]),m=u.some(h=>!h.uploaded)||u.length===0;return aa.createElement(tp,{...t,onSubmit:async()=>{if(!m){let h=await o();i(u.map(y=>{var w;return(w=y.uploaded)==null?void 0:w.downloadURL}).filter(fe),h)}}},r.length>0?aa.createElement(S,{style:[g.Margin.mediumBottom]},r.map((h,y)=>aa.createElement(S,{key:y,style:[b.directionRow]},aa.createElement(S,{style:[g.Margin.smallRight]},aa.createElement(V,{style:[l.Body,l.textMid]},`${y+1}.`)),aa.createElement(S,{style:b.flex1},aa.createElement(V,{style:[l.Body,l.textMid]},h))))):null,aa.createElement(bS,{getSpace:o,files:u,setFiles:d,fileIcon:e,fileExtension:n,limitWarning:a,fileUploadsLimit:c}))}s();var SS=x(O());function rF(t){let o=SS.useRef(),{createSpace:e}=ZW({organization:t.organization});return SS.useMemo(()=>async()=>{if(o.current)return o.current;if(!e)throw new Error("Cannot import into shared space due to incorrect hook usage");return o.current=await e(!1),o.current},[e,o])}s();var Uo=x(O());H();s();var sa=x(O());H();function iF(t){let{url:o,setURL:e,placeholder:n="e.g: https://mysite.com/a_file",supportedFormats:r=[],validate:i=ui}=t,[,a]=_(W),c=i(o);return sa.createElement(sa.Fragment,null,sa.createElement(S,null,sa.createElement(ao,{size:"large",placeholder:n,value:o,cleareable:!0,onChangeText:e,feedback:o&&!c?{type:"danger",message:"URL is invalid. It must be a valid absolute URL starting with https:// or http://"}:{type:"none"}})),r.length>1?sa.createElement(S,{style:[g.Margin.smallTop,b.directionRow,b.alignCenter]},sa.createElement(S,null,sa.createElement(v.InfoCircle,{size:M.ICON_S,style:a.info})),sa.createElement(S,{style:[g.Margin.smallLeft,b.flex1]},sa.createElement(V,{style:[a.Caption,a.info]},`Supported formats: ${r.join(", ")}`))):null)}function aF(t){let{getSpace:o,fileIcon:e,fileExtension:n,steps:r=[],startImport:i,limitWarning:a=!1,fileUploadsLimit:c}=t,[,l]=_(W),[u,d]=Uo.useState([]),[p,m]=Uo.useState(""),[f,h]=Uo.useState("files"),y=u.some(I=>!I.uploaded),w=I=>ui(I),C=(y||u.length===0)&&(!p||!w(p));return Uo.createElement(tp,{...t,onSubmit:async()=>{if(!C){let I=await o();i(f==="files"?u.map(P=>{var R;return(R=P.uploaded)==null?void 0:R.downloadURL}).filter(fe):[p],I)}}},r.length>0?Uo.createElement(S,{style:[g.Margin.mediumBottom]},r.map((I,P)=>Uo.createElement(S,{key:P,style:[b.directionRow]},Uo.createElement(S,{style:[g.Margin.smallRight]},Uo.createElement(V,{style:[l.Body,l.textMid]},`${P+1}.`)),Uo.createElement(S,{style:b.flex1},Uo.createElement(V,{style:[l.Body,l.textMid]},I))))):null,Uo.createElement(S,{style:[b.flex1,b.directionRow,b.alignCenter]},Uo.createElement(oc,null,Uo.createElement(oc.Tab,{active:f==="files",onPress:()=>h("files")},"Files"),Uo.createElement(oc.Tab,{active:f==="url",onPress:()=>h("url")},"URL"))),Uo.createElement(S,{style:[b.directionColumn,g.Margin.smallTop]},f==="files"?Uo.createElement(bS,{getSpace:o,files:u,setFiles:d,fileIcon:e,fileExtension:n,limitWarning:a,fileUploadsLimit:c}):null,f==="url"?Uo.createElement(iF,{url:p,validate:w,setURL:m,placeholder:"https://myapi.io/swagger.yaml",supportedFormats:["JSON","YAML"]}):null))}s();var dr=x(O());H();function sF(t){let{title:o="Import a Website",subtitle:e="Enter a link to a web page below to import it into your space.",getSpace:n,startImport:r}=t,[i,a]=dr.useState(""),[,c]=_(W),l=i?ui(i):!1,u=async()=>{if(l){let d=await n();r([i],d)}};return dr.createElement(tp,{...t,title:o,subtitle:e,onSubmit:u},dr.createElement(S,{style:[g.Margin.smallBottom]},dr.createElement(Gr,{label:"URL",labelDescription:"We\u2019ll crawl your site and pull in as much of your content as possible.",placeholder:"https://docs.mycompany.com",value:i,onChangeText:a,onSubmit:u,feedback:i?{type:l?"success":"danger",message:l?"":"URL is not valid"}:void 0})),dr.createElement(S,{style:g.Margin.mediumBottom},dr.createElement(V,{style:[c.Caption,c.textMuted]},"GitBook has limits for imported content,"," ",dr.createElement(Ia,{url:"https://docs.gitbook.com/features/import#limits"},"read more here."))),i&&l?dr.createElement(dr.Suspense,{fallback:null},dr.createElement(Bae,{url:i})):null)}function Bae(t){let{url:o}=t,[e]=Wy(o);return e.data?dr.createElement(S,{style:[g.Margin.mediumBottom]},dr.createElement(La,{title:e.data.title,details:e.data.site,icon:Ct(Ca,{source:{uri:e.data.icon||void 0}}),onPress:()=>{fs(o)}})):null}function cF(t){return ru(t.target)?ja.createElement(Wae,{...t,target:t.target}):ja.createElement(qae,{...t,target:t.target})}function qae(t){let o=ja.useCallback(async()=>{if("id"in t.target.space)return t.target.space;let{data:e}=await eP({operationId:"getSpaceById",params:{spaceId:t.target.space.key}});return e},[t.target.space]);return ja.createElement(lF,{...t,getSpace:o})}function Wae(t){let o=rF(t.target);return o?ja.createElement(lF,{...t,getSpace:o}):null}function lF(t){let{sourceInfo:o,startImport:e,target:n,setSource:r,getSpace:i,onBack:a}=t,{source:c}=o!=null?o:{};if(o===void 0||c===void 0)return null;switch(c){case"website":case"github-wiki":return ja.createElement(sF,{target:n,title:o.title,subtitle:o.subtitle,getSpace:i,startImport:e,onClose:()=>{r(null)}});case"docx":case"markdown":case"html":case"zip":case"dropbox-paper":case"google-docs":case"confluence":case"quip":case"notion":{let l=c==="zip"||c==="confluence"||c==="notion";return ja.createElement(nF,{target:n,getSpace:i,title:o.title,subtitle:o.subtitle,steps:o.steps,fileIcon:o.fileIcon,fileExtension:o.fileExtension,onClose:a,startImport:e,limitWarning:l})}case"open-api":return ja.createElement(aF,{target:n,getSpace:i,title:o.title,subtitle:o.subtitle,steps:o.steps,fileIcon:o.fileIcon,fileExtension:o.fileExtension,onClose:a,startImport:e,fileUploadsLimit:1,limitWarning:!0});default:Fe(c)}}s();var qe=x(O());H();s();var E1="https://app.gitbook.com/public/app/assets/confluence-XZRVQN7T.png";var T1="https://app.gitbook.com/public/app/assets/dropbox-paper-F627BIKK.png";var M1="https://app.gitbook.com/public/app/assets/google-docs-T6C75XLR.png";var L1="https://app.gitbook.com/public/app/assets/openapi-H4Y5H3P5.png";var D1="https://app.gitbook.com/public/app/assets/quip-SHLUXOMG.png";function uF(){let[t]=_(),[,o]=_(W),e=No(v.FileCode,{style:o.primary}),n=No(v.FileText,{style:{color:Y.scarlet.light}}),r=No(v.FileWord,{style:{color:Y.primary.light}}),i=No(v.FileCode,{style:{color:Y.violet.light}}),a=No(v.FileZIP,{style:{color:Y.orange.light}}),c=No(v.GitHub,{style:{color:t.colors.text.main}}),l=No(v.Notion,{style:{color:t.colors.text.main}}),u=No(Ca,{source:{uri:E1}}),d=No(Ca,{source:{uri:D1}}),p=No(Ca,{source:{uri:T1}}),m=No(Ca,{source:{uri:M1}}),f=No(Ca,{source:{uri:L1}});return[{name:"Website",title:"Import a Website",subtitle:"Enter a link to a web page below to import it into your space.",source:"website",icon:e,type:"application"},{name:"Markdown",title:"Import a Markdown file",source:"markdown",icon:n,subtitle:"Drag and drop your .md file below to start the import.",fileIcon:v.FileText,fileExtension:".md",type:"file"},{name:"MS Word",title:"Import a Word document",source:"docx",icon:r,subtitle:"Drag and drop your .docx file below to start the import.",fileIcon:v.FileWord,fileExtension:".docx",type:"application"},{name:"HTML",title:"Import a HTML file",source:"html",subtitle:"Drag and drop your .html file below to start the import.",icon:i,fileIcon:v.FileCode,fileExtension:".html",type:"file"},{name:"ZIP",title:"Import a ZIP file",source:"zip",subtitle:"Drag and drop your .zip file below to start the import.",icon:a,fileIcon:v.FileZIP,fileExtension:".zip",type:"file"},{name:"Confluence",title:"Import from Confluence",icon:u,source:"confluence",type:"application",subtitle:"Export your space as ZIP to bring your content from Confluence.",fileExtension:".zip",fileIcon:v.FileZIP,steps:[qe.createElement(qe.Fragment,null,"Go to ",qe.createElement(V,{style:[o.Bold,o.text]},"Space Settings")," for the space you're looking to export and select the"," ",qe.createElement(V,{style:[o.Bold,o.text]},"Content tools")," section."),qe.createElement(qe.Fragment,null,"Click on the ",qe.createElement(V,{style:[o.Bold,o.text]},"Export")," tab, and select"," ",qe.createElement(V,{style:[o.Bold,o.text]},"HTML"),", then hit"," ",qe.createElement(V,{style:[o.Bold,o.text]},"Next, and Export"),"."),qe.createElement(qe.Fragment,null,"Choose ",qe.createElement(V,{style:[o.Bold,o.text]},"Normal Export")," unless you want to choose specific pages to export.")]},{name:"Notion",title:"Import from Notion",icon:l,source:"notion",type:"application",subtitle:"Export your workspace as Markdown to bring your content from Notion.",steps:[qe.createElement(qe.Fragment,null,"Go to the Workspace you're looking to export and select the"," ",qe.createElement(V,{style:[o.Bold,o.text]},"\u2026")," button in the top right."),qe.createElement(qe.Fragment,null,"Choose ",qe.createElement(V,{style:[o.Bold,o.text]},"Export All as Markdown"))],fileIcon:v.FileText,fileExtension:".md"},{name:"GitHub Wiki",title:"Import from GitHub Wiki",subtitle:"Enter a link to a GitHub Wiki below to import it into your space.",icon:c,source:"github-wiki",type:"application"},{name:"Quip",title:"Import from Quip",icon:d,source:"quip",fileIcon:v.FileText,fileExtension:".md",type:"application"},{name:"Dropbox Paper",title:"Import from Dropbox Paper",icon:p,source:"dropbox-paper",steps:[qe.createElement(qe.Fragment,null,`Click "\u2026" (ellipsis) in the Paper doc you're viewing.`),qe.createElement(qe.Fragment,null,"Click ",qe.createElement(V,{style:[o.Bold,o.text]},"Export"),"."),qe.createElement(qe.Fragment,null,"Select ",qe.createElement(V,{style:[o.Bold,o.text]},".docx")," and click"," ",qe.createElement(V,{style:[o.Bold,o.text]},"Download"),"."),qe.createElement(qe.Fragment,null,"Drag your downloaded files to the box below to import.")],fileIcon:v.FileWord,fileExtension:".docx",type:"application"},{name:"Google docs",title:"Import from Google Docs",icon:m,source:"google-docs",type:"application",subtitle:"Export your documents as .docx or webpage to bring your content from Google Docs.",steps:[qe.createElement(qe.Fragment,null,"Click on ",qe.createElement(V,{style:[o.Bold,o.text]},"File ",">"," Download"),"."),qe.createElement(qe.Fragment,null,"Choose between ",qe.createElement(V,{style:[o.Bold,o.text]},"Microsoft Word")," or"," ",qe.createElement(V,{style:[o.Bold,o.text]},"Web Page"),".")],fileIcon:v.FileWord,fileExtension:".docx"},{name:"OpenAPI",title:"Import from OpenAPI",icon:f,source:"open-api",type:"application",subtitle:"Provide an OpenAPI specification file or URL to import your API.",fileIcon:v.FileText,fileExtension:".yaml or .json",fileUploadsLimit:1}]}function dF({target:t,onStartImport:o,onComplete:e,onBack:n}){let[r,i]=wS.useState(null),a=uF(),c=Co(),l=m=>{m&&(ru(t)?ae(wg(t.organization,{type:"templates_pick_import",source:m})):ae(Nt(t.space,{type:"edit_pick_import",source:m}))),i(m)},u=async(m,f)=>{if(!r)return;let h=await rc(),y={url:m,source:r};if(ru(t)||!t.page&&!t.changeRequest)return h.spaces.importContent(f.id,y);if(t.page&&t.changeRequest)return h.spaces.importContentInChangeRequestPageById(f.id,t.changeRequest,t.page,y);if(t.page)return h.spaces.importContentInPageById(f.id,t.page,y);if(t.changeRequest)return h.spaces.importContentInChangeRequest(f.id,t.changeRequest,y)},d=async(m,f)=>{if(r){ae(V_(f,void 0,{type:"edit_import",source:r})),o?o(f):n();try{(await c.notifyProgress(Promise.all(m.map(async w=>{let C=await u(w,f);return C?C.data:void 0})),{title:"Importing docs",details:"We are importing your docs, this might take a while."})).some(w=>w&&w.totalResources!==w.importedResources)?c.notify({kind:"warning",title:"Incomplete import",timeout:0,icon:v.Alert.CSS,details:"Some of your docs were not imported due to file limits, try splitting them into several imports."}):(c.notify({icon:v.CheckCircle.CSS,kind:"success",title:"Imported docs",details:"Docs have been successfully imported. Enjoy!"}),e&&e(f))}catch(h){throw c.notify({kind:"danger",title:"Error while importing docs",details:ga(h,"Please try again or contact support if the problem persists."),icon:v.Alert.CSS}),h}}},p=a.find(({source:m})=>m===r);return{modals:wS.createElement(cF,{sourceInfo:p,startImport:d,target:t,setSource:i,onBack:n}),source:r,sources:a,onSelectSource:l}}function DB(t){let{target:o,onStartImport:e,onComplete:n,onClose:r}=t,{modals:i,source:a,sources:c,onSelectSource:l}=dF({onStartImport:u=>{e?e(u):r()},onComplete:n,onBack:()=>l(null),target:o});return Pf.createElement(Pf.Fragment,null,a?i:Pf.createElement(JW,{withGitSyncAction:!ru(o),sources:c,pickSource:l,onClose:r}))}s();var pF=x(O());var Kae=5,mF=Dt({key:"recentSearches",default:[],effects:[wr.recoilEffect("@recoil/recentSearches",[])]});function fF(){return Kn(mF)}function gF(t){let o=Di(mF);pF.useEffect(()=>{if(!t)return;let e=setTimeout(()=>{o(n=>n.includes(t)?n:[t,...n.slice(0,Kae-1)])},3e3);return()=>clearTimeout(e)},[t])}s();var hF=x(O());function yF(t,o){let{space:e,organization:n}=o,r=eh();hF.useEffect(()=>{if(!t)return;let i=setTimeout(()=>{let a={type:r?"public_content_search_type":"search_type",query:t};e?ae(Nt(e,a)):n?ae(wg(n,a)):ae(a)},700);return()=>{clearTimeout(i)}},[t])}s();var et=x(O());s();var N1=JSON.parse('{"loadingDelayedText":"loadingDelayedText_WVBF7","loadingDelayedTextVisible":"loadingDelayedTextVisible_y5onq"}');s();var ii=x(O());s();var vF=JSON.parse('{"aiAnswerFooter":"aiAnswerFooter_UeG4c"}');s();var iu=x(O());function bF(t){let{answer:o,singleSpace:e}=t,{navigate:n}=xe(),r=Ce(),i=iu.useMemo(()=>Xae(r,o,e),[r,o,e]),a=iu.useCallback(l=>{switch(ae({type:"ai_search_open_source"}),l.type){case"space":n({screen:{type:"space",space:l.space.key,...lp(l.space),page:"",query:void 0}});break;case"page":n({screen:{type:"space",space:l.space.key,...lp(l.space),page:l.path,query:void 0}});break;default:Fe(l)}},[n]),c=iu.useCallback(l=>{switch(l.type){case"space":return{icon:Mg(Ct(Bo,{code:D_(l.space)})),title:l.space.title||cs,action:"Go to space"};case"page":return{icon:v.Page.CSS,title:l.page.title,subtitle:l.ancestors.filter(u=>u.id!==l.page.id).map(u=>u.title).join(" \u203A "),nested:!e,action:"Go to page"};default:Fe(l)}},[e]);return iu.createElement(nc,{data:i,getKey:Uae,renderItem:c,onOpen:a})}function Xae(t,o,e){let n=new Map;return xP(o.pages,r=>{var d;let i=(d=Mu([ls(r.space)])[0])==null?void 0:d.result;if(!i)return null;let a=zr(t.store.getRevision(r.space,i.revision));if(!a)return null;let c=a.pages[r.page];if(!c||c.type!=="document")return null;let l=wu(a,c.id),u=n.get(i.key)||[];u.length===0&&!e&&u.push({type:"space",space:i}),u.push({type:"page",space:i,page:c,ancestors:l,path:ro(a,c.id)}),n.set(i.key,u)}),Array.from(n.values()).flat()}function Uae(t){switch(t.type){case"space":return`space:${t.space.key}`;case"page":return`page:${t.space.key}/${t.page.id}`;default:Fe(t)}}function SF(t){let{answer:o,singleSpace:e}=t,[n,r]=ii.useState(!1),i=le();return ii.createElement(te,{style:[N.flex.column,N.padding.mediumHorizontal,N.padding.mediumVertical,vF.aiAnswerFooter]},ii.createElement(te,{style:[N.flex.row]},ii.createElement(te,{style:[N.flex.flex1]},ii.createElement(z,{size:"small",rightIcon:n?v.ChevronDown:v.ChevronRight,onPress:()=>{r(!n)}},i("search_answer_sources",`${o.pages.length}`)))),n?ii.createElement(te,{style:N.margin.mediumTop},ii.createElement(ii.Suspense,{fallback:ii.createElement(Ao,{size:"medium"})},ii.createElement(bF,{answer:o,singleSpace:e}))):null)}s();var $a=x(O());function wF(t){let{query:o,answer:e}=t,[n,r]=$a.useState(!1),i=Co(),a=Dg(),c=le(),l=()=>{a.writeTextAndNotify(e.text)},u=()=>{ae({type:"ai_search_upvote_answer",query:o,answer:e.text}),r(!0),i.notify({icon:v.ThumbsUp.CSS,title:c("search_answer_feedback_title"),details:c("search_answer_feedback_details")})},d=()=>{ae({type:"ai_search_downvote_answer",query:o,answer:e.text}),r(!0),i.notify({icon:v.ThumbsUp.CSS,title:c("search_answer_feedback_title"),details:c("search_answer_feedback_details")})};return $a.createElement(te,{style:[N.flex.row]},$a.createElement(z,{size:"small",title:c("search_answer_copy"),icon:v.Copy,onPress:l}),n?null:$a.createElement($a.Fragment,null,$a.createElement(z,{size:"small",icon:v.ThumbsUp,title:c("search_answer_feedback_upvote"),onPress:u,style:g.Margin.xsmallLeft}),$a.createElement(z,{size:"small",icon:v.ThumbsDown,title:c("search_answer_feedback_downvote"),onPress:d,style:g.Margin.xsmallLeft})))}s();var B1=x(O());s();var A1=JSON.parse('{"aiSearchSpinner":"aiSearchSpinner_cTH2Q","aiSearchSpinnerAnim":"aiSearchSpinnerAnim_75OX-","aiSearchSpinnerIcon":"aiSearchSpinnerIcon_MOqIL"}');function CF(t){let{size:o=M.ICON_L}=t;return B1.createElement(te,{style:A1.aiSearchSpinner,inlineStyle:{width:o,height:o}},B1.createElement(v.AILens.CSS,{style:A1.aiSearchSpinnerIcon}))}function xF(t){let{query:o,target:e}=t,n=et.useCallback((r,i,a)=>{ae(e.space?Nt(e.space,{type:"ai_search_crash",query:o.query}):{type:"ai_search_crash",query:o.query})},[o]);return et.createElement(Kf,{fallback:()=>et.createElement(Zae,null),onError:n},et.createElement(et.Suspense,{fallback:et.createElement($ae,null)},et.createElement(jae,{...t})))}function jae(t){let{target:o,query:e,onAnswerLoaded:n,onSubmitQuery:r}=t,i=tP(o.space?{operationId:"askQueryInSpace",params:{spaceId:o.space.key},query:{},body:e}:{operationId:"askQuery",params:{},query:{},body:e}),{answer:a}=i.data;if(et.useEffect(()=>{ae(o.space?Nt(o.space,{type:"ai_search_view_answer",query:e.query,queriesInMemory:e.previousQueries.length,hasAnswer:!!a,hasFollowupQuestions:!!a&&a.followupQuestions.length>0}):{type:"ai_search_view_answer",query:e.query,queriesInMemory:e.previousQueries.length,hasAnswer:!!a,hasFollowupQuestions:!!a&&a.followupQuestions.length>0})},[e,a,o.space]),et.useEffect(()=>{a&&(n==null||n())},[a,n]),!a)return et.createElement(Yae,null);let c=l=>{ae(o.space?Nt(o.space,{type:"ai_search_pick_followup",query:e.query,followup:l,previousQueriesCount:e.previousQueries.length}):{type:"ai_search_pick_followup",query:e.query,followup:l,previousQueriesCount:e.previousQueries.length}),r(l)};return et.createElement(te,{style:[N.flex.column]},et.createElement(te,{style:[N.flex.column,N.padding.large]},et.createElement(te,{style:[N.flex.row,N.margin.mediumBottom]},et.createElement(te,{style:[N.margin.mediumRight,N.flex.flex1]},et.createElement(Cn,{style:[N.text.heading2,N.textColor.main]},e.query)),et.createElement(te,{style:N.margin.smallRight},et.createElement(wF,{query:e.query,answer:a}))),et.createElement(Eu,{markdown:a.text}),a.followupQuestions.length>0?et.createElement(te,{style:[N.flex.row,N.flex.wrap,N.margin.smallTop]},a.followupQuestions.map(l=>et.createElement(te,{style:[N.margin.smallTop,N.margin.smallRight]},et.createElement(z,{icon:v.AILens,kind:"pill",size:"medium",key:l,onPress:()=>{c(l)}},l)))):null),et.createElement(SF,{answer:a,singleSpace:!!o.space}))}function $ae(t){let[o,e]=et.useState(!1),n=le();return et.useEffect(()=>{let r=setTimeout(()=>{e(!0)},3e3);return()=>{clearTimeout(r)}},[]),et.createElement(ka,{size:"small",icon:CF,title:n("search_answer_loading")},et.createElement(Cn,{style:[N1.loadingDelayedText,o&&N1.loadingDelayedTextVisible]},n("search_answer_loading_wait")))}function Yae(t){let o=le();return et.createElement(ka,{size:"small",title:o("search_answer_none_title")},o("search_answer_none_details"))}function Zae(t){let o=le();return et.createElement(ka,{size:"small",icon:v.Alert,title:o("search_answer_error_title")},o("search_answer_error_details"))}s();var kF=x(O());function CS(t){var e;let o=oP(t===null||((e=t.documents)==null?void 0:e.length)===0?null:t.space?{operationId:"getRecommendedQuestionsInSpace",params:{spaceId:t.space.key},query:{}}:{operationId:"getRecommendedQuestions",params:{},query:{},body:{documents:t.documents}});return kF.useMemo(()=>o?o.data.questions.map(n=>({type:"recommended-question",question:n})):[],[o])}s();var Qae=x(O());var Jae=Dt({key:"recentAISearches",default:[],effects:[wr.recoilEffect("@recoil/recentAISearches",[])]});function xS(){return Kn(Jae)}s();var Fs=x(O());function OF(t){let{allowEnterToOpen:o,target:e,onSubmitAIQuery:n}=t,r=le(),i=xS(),a=CS(e),c=Fs.useCallback(p=>{switch(p.type){case"recent-search":return{icon:v.Search.CSS,title:p.query,action:r("search_ask")};case"recommended-question":return{icon:v.AILens.CSS,title:p.question,action:r("search_ask")};default:Fe(p)}},[r]),l=Fs.useCallback(p=>{switch(p){case"recent-search":return{title:r("search_blankslate_recent_questions")};case"recommended-question":return{title:r("search_blankslate_recommended_questions")};default:return}},[r]),u=(p,m)=>{switch(p.type){case"recent-search":{n(p.query),ae({type:"ai_search_pick_suggestion_recent_search",suggestionIndex:m});break}case"recommended-question":ae({type:"ai_search_pick_suggestion_question"}),n(p.question);break;default:Fe(p)}},d=Fs.useMemo(()=>[...i.map(m=>({type:"recent-search",query:m})),...a],[i,a]);return d.length===0?Fs.createElement(ka,null,r("search_blankslate_ai")):Fs.createElement(te,{style:[N.flex.flex1,N.flex.column]},Fs.createElement(nc,{data:d,getKey:ese,renderItem:c,renderGroup:l,groupItem:tse,getGroupKey:ose,onOpen:u,style:[N.padding.mediumHorizontal,N.padding.mediumVertical],allowEnterToOpen:o}))}function ese(t){switch(t.type){case"recent-search":return`recent-search:${t.query}`;case"recommended-question":return`recommended-question:${t.question}`;default:Fe(t)}}function tse(t){return t.type}function ose(t){return t}s();var IF=x(O());var nse=10,rse=Dt({key:"aiSearchQuery",default:{query:"",previousQueries:[]},effects:[wr.recoilEffect("@recoil/aiSearchQuery",{query:"",previousQueries:[]})]});function _F(){let[t,o]=Xn(rse),e=IF.useCallback(n=>{o(r=>r?{query:n,previousQueries:[...r.previousQueries.filter(i=>i!==n&&i!==r.query),...r.query?[r.query]:[]].slice(-nse)}:{query:n,previousQueries:[]})},[o]);return[t,e]}s();var fo=x(O());H();var ise=dt("app:crash");function Ef(t){let{children:o}=t,e=fo.useCallback((n,r,i)=>{ise.emergency(`An error occured during rendering:

`,n,`

The error is located at:
`,r),ae({type:"crash",crashType:q1(n),sentryEvent:i})},[]);return fo.createElement(Kf,{fallback:n=>fo.createElement(ase,{...n}),onError:e,beforeCapture:lse},o)}function ase(t){let{eventId:o,error:e}=t,[,n]=_(use),r=()=>{fI({eventId:o||void 0})},i=()=>{window.location.reload()};fo.useEffect(()=>{let c=document.querySelector(".gitbook-splashscreen");c==null||c.remove()},[]);let a=()=>{switch(q1(e)){case"network-crash":return fo.createElement(cse,{onReload:i,...t});case"crash":default:return fo.createElement(sse,{onShareFeedback:r,onReload:i,...t})}};return fo.createElement(S,{style:[n.background]},a())}function sse(t){let o=le(),{onReload:e,onShareFeedback:n}=t;return fo.createElement(_p,{title:o("something_wrong"),action:fo.createElement(fo.Fragment,null,fo.createElement(z,{kind:"primary",size:"medium",onPress:e,style:g.Margin.smallRight},o("reload")),fo.createElement(z,{kind:"secondary",size:"medium",onPress:n},o("let_us_know")))},o("we_have_been_notified"))}function cse(t){let{onReload:o}=t,e=le(),n=()=>{window.open("https://docs.gitbook.com/resources/firewall-safelist","_blank")};return fo.createElement(_p,{title:e("connection_lost"),icon:v.CloudOff,action:fo.createElement(fo.Fragment,null,fo.createElement(z,{kind:"primary",size:"medium",onPress:o,style:g.Margin.smallRight},e("reload")),fo.createElement(z,{size:"medium",icon:v.Link,onPress:n},e("network_troubleshooting")))},e("device_offline"))}function lse(t,o){switch(q1(o)){case"network-crash":t.setTag("error_category","network-crash");break;case"crash":default:t.setTag("error_category","react-crash")}}function q1(t){return t.name==="FirebaseError"&&t.code==="unavailable"?"network-crash":"crash"}var use=G.create({background:t=>({backgroundColor:t.colors.background.main,minHeight:"100vh"})});s();var si=x(O());s();var W1=x(O());function kS(t){let{children:o,ssrRequestPath:e,ssrRouterContext:n}=t;return n?W1.createElement(O7,{location:e,context:n},o):W1.createElement(tk,null,o)}s();var OS=x(O());function RF(t="https://policies.gitbook.com/privacy/cookies",o=!1){let e=Co(),n=le();OS.useEffect(()=>{if(!o)return;let r=!1;if(xg()!==null)return;let i=e.notify({title:n("cookies"),details:n("cookie_prompt",OS.createElement(Ia,{url:t},n("cookie_policy"))),timeout:0,icon:v.Cookies.CSS,actions:[{label:n("reject_all"),onPress:()=>{r=!0,sw(!1),i()}}],onClose:()=>{r||sw(!0)}})},[])}s();var pe=x(O());H();s();var PF=JSON.parse('{"withStickyHeader":"withStickyHeader_HQiM-"}');s();var pr=x(O());H();var{TOC_DESKTOP_WIDTH:dse}=Go,pse=Z.createResponsiveComponent(Ke),mse=K.createInteractiveComponent(pse),F1=dse-g.large-g.large;function IS(t){let{space:o,collection:e,headerBackgroundColor:n,headerLogoURL:r,mobileStyle:i,desktopStyle:a}=t,[,c]=_(W),{getNavigationLinkProps:l}=xe(),d={color:Ta(n)==="light"?Y.lightModeText.base:Y.darkModeText.base},p=(e?(e==null?void 0:e.publishedTitle)||(e==null?void 0:e.title):o.publishedTitle||o.title)||cs,m=p.length>14,f=m?2:1,h=Bi(o);return pr.createElement(mse,{style:[b.directionRow,b.alignCenter],mobileStyle:i,desktopStyle:a,...l({screen:{space:o.key,page:""}}),testID:"public.headerHomeLink",accessibilityLabel:p},r?pr.createElement(Z.View,{style:[b.flex1,b.directionRow,b.alignCenter,Tf.headerDesktop],mobileStyle:Tf.logoMobile,desktopStyle:Tf.logoDesktop},pr.createElement(Z.View,{desktopStyle:"visible",mobileStyle:"hidden"},pr.createElement(Qo,{source:{uri:Hi(r,{height:40,fit:"contain"})},loading:"priority",style:{maxHeight:40,maxWidth:F1,width:"auto",height:"auto"}})),pr.createElement(Z.View,{desktopStyle:"hidden",mobileStyle:"visible"},pr.createElement(Qo,{source:{uri:Hi(r,{height:30,fit:"contain"})},style:{maxHeight:30,maxWidth:F1,width:"auto",height:"auto"}}))):pr.createElement(S,{style:[Tf.headerDesktop,b.flex1,b.directionRow,b.justifyContentStart,b.alignCenter]},pr.createElement(S,null,pr.createElement(Z.View,{mobileStyle:"hidden",desktopStyle:"visible"},pr.createElement(gw,{content:e||o,renderFor:"public-content",size:M.BUTTON_L,style:[g.Margin.mediumRight]})),pr.createElement(Z.View,{mobileStyle:"visible",desktopStyle:"hidden"},pr.createElement(gw,{content:e||o,renderFor:"public-content",size:M.ICON_XL,style:[g.Margin.mediumRight]}))),pr.createElement(Z.Text,{style:Tf.textOverflow,mobileStyle:[c.Heading3],desktopStyle:[m?c.Heading3:c.Heading2]},pr.createElement(K.Text.Child,{style:[d],numberOfLines:f,ellipsizeMode:"tail",inactiveStyle:c.text,activeStyle:h==="bold"?c.textStandout:c.primary},p))))}var Tf=Q.create({textOverflow:{overflow:"hidden"},logoMobile:{height:30},logoDesktop:{height:40},headerDesktop:{maxWidth:F1}});s();var su=x(O());H();s();s();var ai=x(O());H();var fse=Z.createResponsiveComponent(K.TouchableOpacity),gse=K.createInteractiveComponent(Z.View);function _S(t){return`hsla(${oR(t.colors.text.primary).h}, 60%, 70%, 0.1)`}var EF=ai.forwardRef(function(o,e){let{isLast:n,leftIcon:r,icon:i,rightIcon:a,kind:c="primary",children:l,expanded:u=!1,onChevronPress:d,active:p=!1,onPress:m,textStyle:f,href:h}=o,y=K.useInteractiveState(),[w,C]=_(hse),[,k]=_(W),I=c==="primary"?k.textMid:k.textMuted,P=p?k.primary:I,R=m?fse:gse,D=u?v.ChevronDown:v.ChevronRight;return ai.createElement(R,{ref:e,...y.events,style:[C.tocMenuItem,g.Padding.smallHorizontal,g.Margin.smallRight,n?null:g.Margin.xsmallBottom,p?{backgroundColor:_S(w)}:null],hoverStyle:m&&!p?C.tocMenuItemHovered:null,mobileStyle:C.tocMenuItemMobile,desktopStyle:C.tocMenuItemDesktop,onPress:m,href:h&&m?h:void 0},r?ai.createElement(S,{style:[g.Margin.mediumRight]},ai.createElement(r,{size:M.ICON_M,style:[P,f]})):null,i?ai.createElement(S,{style:[g.Margin.mediumRight]},ai.createElement(i,{size:M.ICON_M,style:[P,f]})):null,ai.createElement(V,{style:[b.flex1,g.Padding.xsmallVertical,c==="group"?k.GroupTitle:k.Label,P,f,p?k.Bold:null]},l),d?ai.createElement(Ke,{style:[b.directionRow,b.alignCenter],onPress:d},ai.createElement(D,{size:M.ICON_S,style:P})):null,a?ai.createElement(S,{style:C.tocMenuItemRightIcon},ai.createElement(a,{size:M.ICON_M,style:k.textMuted})):null)}),hse=G.create({tocMenuItem:t=>({flexDirection:"row",alignItems:"center",borderColor:"transparent",borderWidth:1,borderRadius:t.radiuses.medium,minHeight:M.XS}),tocMenuItemMobile:{borderRightWidth:1},tocMenuItemDesktop:{borderRightWidth:0},tocMenuItemHovered:t=>({backgroundColor:t.colors.background.standout}),tocMenuItemRightIcon:{marginLeft:g.small,marginRight:(M.S-M.ICON_M)/2}});s();var rp=x(O());s();var ua=x(O());H();s();var yse=750,vse=g.xxlarge,bse=yse+2*vse,z1=300,Sse=220;function TF(t=0){return t+z1+bse+Sse}s();var Mf=x(O());H();s();var fn=x(O());H();function V1(t){return fn.createElement(fn.Suspense,{fallback:fn.createElement(MF,{...t})},fn.createElement(wse,{...t}))}function wse(t){let{treePage:o}=t,{page:e}=o,n=ot(e.type==="link"?e.target:void 0);return fn.createElement(MF,{...t,contentRef:n})}function MF(t){let{revision:o,treePage:e,parent:n,currentPage:r,contentRef:i,isLastPage:a}=t,{page:c}=e,{getNavigationHref:l,navigateToPage:u}=Oc(),d=r?r.id:null,p=d===c.id,m=!!d&&MD(o,c.id,d),[f,h]=fn.useState(m),[,y]=_(Cse),w=C=>{C.isDefaultPrevented()||C.nativeEvent.metaKey||C.nativeEvent.ctrlKey||(C.preventDefault(),c.type==="document"?u(o,c.id):c.type==="link"&&(i==null||i.open()))};return fn.useEffect(()=>{m&&h(!0)},[m]),fn.createElement(S,{style:[c.type==="group"&&g.Margin.mediumVertical]},fn.createElement(EF,{isLast:a,kind:c.type==="group"?"group":!n||n.type==="group"?"primary":"secondary",icon:c.emoji?Ct(Bo,{code:c.emoji}):void 0,rightIcon:c.type==="link"?i?i.secondaryIcon:Re:void 0,active:p,expanded:f,onPress:c.type==="group"?void 0:w,href:(()=>c.type==="link"?i==null?void 0:i.href:l(o,c.id))(),onChevronPress:e.pages.length>0&&c.type==="document"?C=>{C.preventDefault(),h(k=>!k)}:void 0},c.title),(f||c.type==="group")&&e.pages.length>0?fn.createElement(S,{style:[y.tocItemChildren,...c.type==="group"?[g.Margin.noneLeft]:[g.Margin.smallLeft,g.Margin.xsmallTop,g.Margin.smallBottom]]},e.pages.map((C,k)=>fn.createElement(S,{style:c.type==="group"?null:g.Margin.smallLeft,key:C.renderKey},fn.createElement(V1,{...t,treePage:C,isLastPage:k===e.pages.length-1,parent:c}))),c.type==="group"?null:fn.createElement(S,{style:y.tocItemChildrenLine})):null)}var Cse=G.create({tocItemChildren:{position:"relative"},tocItemChildrenLine:t=>({position:"absolute",top:0,bottom:0,left:0,width:1,backgroundColor:t.colors.border.main})});s();var ca=x(O());H();var LF=x($6());var G1=40,xse=K.createInteractiveComponent(uR);function op(t){return ca.createElement(ml,null,ca.createElement(kse,{...t}))}function kse(t){let{space:o,floating:e}=t,[n,r]=_(Ose),[,i]=_(W),a=le(),c=new URLSearchParams({utm_source:"content",utm_medium:"trademark",utm_campaign:o.key}),l=`https://${fa.homepage.domain}/?${c.toString()}`,u=()=>{ae(Nt(o,{type:"public_content_click_trademark"}))};return ca.createElement(S,{style:e&&r.floatingWrapper},e?ca.createElement(LF.default,{colors:[`${n.colors.background.main}00`,n.colors.background.main],style:r.floatingTopGradient}):null,ca.createElement(S,{style:e&&[g.Padding.mediumHorizontal,g.Padding.mediumBottom,r.floatingBackground]},ca.createElement(K.TouchableOpacity,{style:[b.directionRow,b.alignCenter,...e?[r.trademarkFloating,g.Padding.smallVertical,g.Padding.mediumHorizontal]:[r.tradeMarkDefault]],activeStyle:i.primary,onPress:u,href:l,target:"_blank"},ca.createElement(xse,{size:G1,style:i.textMuted,activeStyle:i.primary}),ca.createElement(S,{style:[b.flex1,g.Padding.mediumLeft]},ca.createElement(K.Text.Child,{style:[i.Label,i.textMuted],activeStyle:i.primary},a("powered_by",ca.createElement(V,{style:i.Bold},"GitBook")))))))}var Ose=G.create({floatingWrapper:{position:"absolute",bottom:0,zIndex:1,width:"100%"},floatingTopGradient:{height:g.medium},floatingBackground:t=>({backgroundColor:t.colors.background.main}),tradeMarkDefault:t=>({backgroundColor:"transparent"}),trademarkFloating:t=>({backgroundColor:t.colors.background.standout,borderRadius:t.radiuses.xlarge})});function RS(t){let{showingTrademark:o,revision:e}=t,n=Mf.useMemo(()=>nx(e.pages,e.rootPages),[e]);return Mf.createElement(ma,{style:b.flex1,contentContainerStyle:[g.Padding.mediumVertical,o?Ise.scrollviewWithTrademark:null]},n.map((r,i)=>Mf.createElement(V1,{key:r.renderKey,...t,treePage:r,isLastPage:i===n.length-1})))}var Ise=Q.create({scrollviewWithTrademark:{paddingBottom:g.medium+G1+2*g.medium}});s();var zn=x(O());H();s();var PS=x(O());s();var el=x(O());var _se={color:cp,radius:xI},la=el.createContext([_se,()=>{}]),DF="@gitbook/themeMode";function Rse(t,o){let[e,n]=el.useState(()=>{if(typeof window>"u"||!t.themeModeTogglable)return o;let i=wr.get(DF);return i!==null?i:o});return{themeMode:e,toggleThemeMode:()=>{n(i=>{let a=i==="light"?"dark":"light";return wr.set(DF,a),ae(F_(t,{type:"public_content_toggle_theme_mode",themeMode:a})),a})}}}function NF(t){let{content:o,isPreview:e,children:n}=t,{color:r,radius:i}=kI(o),{themeMode:a,toggleThemeMode:c}=Rse(o,r);el.useEffect(()=>{window==null||window.document.body.classList.remove("theme-overlay")},[]);let l=e?r:a!=null?a:r;return zi(u=>{u.setTheme([`${l?`theme-color-${l}`:""}`,`${i?`theme-radius-${i}`:""}`].join(" "))}),el.createElement(la.Provider,{value:[{color:l,radius:i},c]},n)}function gn(t){let[{color:o}]=PS.useContext(la);return PS.useMemo(()=>qy(t,o),[o,t])}s();var ES=x(O());function au(t){let{content:o,mode:e="switch"}=t,[{color:n},r]=ES.useContext(la),{headerBackgroundColor:i}=gn(o);return ES.createElement(e7,{onValueChange:r,value:n==="dark",mode:e,backgroundColor:i})}s();var zs=x(O());H();s();function H1(t){switch(vy(t)){case"lightest":return{backgroundColor:"rgba(59, 69, 78, 0.1)",textColor:Y.lightModeText.base};case"light":return{backgroundColor:"rgba(255, 255, 255, 0.6)",textColor:Y.lightModeText.base};case"semiLight":return{backgroundColor:"rgba(255, 255, 255, 0.55)",textColor:Y.lightModeText.base};case"medium":return{backgroundColor:"rgba(59, 69, 78, 0.25)",textColor:Y.darkModeText.base};case"semiDark":return{backgroundColor:"rgba(59, 69, 78, 0.3)",textColor:Y.darkModeText.base};case"dark":return{backgroundColor:"rgba(59, 69, 78, 0.5)",textColor:Y.darkModeText.base};case"darkest":default:return{backgroundColor:"rgba(255, 255, 255, 0.2)",textColor:Y.darkModeText.base}}}function AF(t){let[,{open:o}]=Jg(),e=le();return zs.createElement(z,{icon:v.SearchPublic,onPress:o,accessibilityLabel:e("search"),...t})}function BF(t){let{contentTheme:o,headerBackgroundColor:e}=t,[,{open:n}]=Jg(),r=le(),{textColor:i}=H1(e);return zs.createElement(z,{icon:v.SearchPublic,size:"medium",kind:o==="bold"?"default_bold":"default",alignItems:"start",onPress:n,style:[g.Padding.noneHorizontal],defaultTextStyle:[{color:i}],accessibilityLabel:r("search")})}function TS(t){let{headerBackgroundColor:o=Y.WHITE}=t,[,{open:e}]=Jg(),n=le(),[,r]=_(W),[,i]=_(Pse),{backgroundColor:a,textColor:c}=H1(o);return zs.createElement(K.TouchableOpacity,{style:[{backgroundColor:a},i.searchBarButton,b.directionRow,b.justifySpaceBetween,b.alignCenter,g.Padding.mediumLeft,g.Padding.smallRight],activeStyle:i.searchBarButtonActive,accessibilityLabel:n("search"),onPress:e},zs.createElement(S,{style:[b.directionRow,b.alignCenter]},zs.createElement(v.SearchPublic,{size:M.ICON_XS,style:[{color:c},g.Margin.smallRight]}),zs.createElement(K.Text.Child,{style:[r.Label,{color:c}],activeStyle:r.text},n("search"))),zs.createElement(S,null,zs.createElement(ms,{kind:"main",shortcut:Ue.SEARCH_OPEN})))}var Pse=G.create({searchBarButton:t=>({width:"100%",height:M.BUTTON_L,borderRadius:t.radiuses.large,borderWidth:1,borderColor:"transparent"}),searchBarButtonActive:t=>({borderColor:t.colors.border.mid})});function MS(t){let{space:o,collection:e,collectionSpaces:n,currentPage:r,revision:i}=t,[,a]=_(qF),{headerBackgroundColor:c,headerLogoURL:l,headerDisabled:u}=gn(o),d=n&&(e==null?void 0:e.publishingType)==="variants"?zn.createElement(np,{key:"variants-picker",currentVariant:o,collection:e,variants:n,revision:i,currentPage:r}):null;return zn.createElement(zn.Fragment,null,u?zn.createElement(zn.Fragment,null,zn.createElement(Ese,{key:"space-header",space:o,collection:e,headerBackgroundColor:c,headerLogoURL:l,variantsSwitcher:d}),zn.createElement(Z.View,{mobileStyle:"hidden",desktopStyle:"visible",style:[a.searchBarSection,b.directionRow,b.justifySpaceBetween,b.alignCenter,g.Margin.mediumRight]},zn.createElement(S,{style:[b.flex1,b.directionRow,g.Margin.mediumVertical]},zn.createElement(TS,{key:"search-bar",headerBackgroundColor:c})),o.themeModeTogglable?zn.createElement(S,{style:[g.Margin.mediumLeft]},zn.createElement(au,{content:o,mode:"button"})):null)):null)}function Ese(t){let{space:o,collection:e,headerBackgroundColor:n,headerLogoURL:r,variantsSwitcher:i}=t,[,a]=_(qF);return zn.createElement(Z.View,{style:[a.spaceTitleWrapper,b.directionRow,b.justifyContentCenter,b.alignCenter],mobileStyle:"hidden",desktopStyle:"visible"},zn.createElement(IS,{space:o,collection:e,headerBackgroundColor:n,headerLogoURL:r,desktopStyle:b.flex1}),zn.createElement(S,{style:[b.alignSelfCenter,g.Margin.smallHorizontal]},i))}var qF=G.create({searchBarSection:t=>({borderColor:t.colors.border.mid,borderBottomWidth:1}),selectedTab:t=>({borderLeftColor:t.colors.primary.main,borderLeftWidth:2}),hoverTab:t=>({backgroundColor:t.colors.background.standout}),tab:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",outlineStyle:"none",borderWidth:0,borderColor:"transparent",borderLeftWidth:2,height:M.BUTTON_M,lineHeight:M.BUTTON_M,borderRadius:0,paddingHorizontal:g.medium},mainBadge:{fontFamily:Q_,fontSize:_g.xxsmall,lineHeight:M.BUTTON_M,...Pg.Bold,textTransform:"uppercase",letterSpacing:1},spaceTitleWrapper:t=>({height:M.L}),variantScrollView:{flexGrow:0,flexShrink:1,height:"fit-content"}});var{PUBLIC_DESKTOP_HEADER_HEIGHT:Tse}=Go;function WF(t){let{space:o}=t,e=le(),{headerDisabled:n}=gn(o),[,r]=_(Mse[n?"none":"default"]),{desktopSidebarWidth:i}=ua.useContext(Ki),a=ua.useMemo(()=>({[TF(i)]:"visible"}),[i]),c=!o.hideTrademark;return ua.createElement(Z.View,{testID:"page.desktopTableOfContents",mobileStyle:"hidden",desktopStyle:"visible",customBreakpointsStyles:a,style:[r.tocDesktopWrapper,b.directionRow,b.justifyContentEnd]},ua.createElement(he,{tag:"nav",accessibilityLabel:e("table_of_contents"),style:[Lse.tocDesktop,b.directionColumn]},ua.createElement(S,{style:[b.flex1,g.Padding.largeLeft]},ua.createElement(MS,{...t}),ua.createElement(RS,{...t,showingTrademark:c})),c?ua.createElement(op,{floating:!0,space:o}):null))}var Mse={none:G.create({tocDesktopWrapper:t=>({position:"sticky",top:0,height:"100vh",overflowY:"auto",alignSelf:"flex-start",backgroundColor:t.colors.background.main,borderRightColor:t.colors.border.mid,borderRightWidth:1})}),default:G.create({tocDesktopWrapper:t=>({position:"sticky",top:g.xxlarge,height:`calc(100vh - ${Tse}px)`,overflowY:"auto",alignSelf:"flex-start",backgroundColor:t.colors.background.main,borderRightColor:t.colors.border.mid,borderRightWidth:1})})},Lse=Q.create({tocDesktop:{width:z1}});s();var Vt=x(O());H();var Dse=Z.createResponsiveComponent(rn.View),Nse=Z.createResponsiveComponent(rn.createAnimatedComponent(Ke));function zF(t){let{currentPage:o,space:e,collection:n,collectionSpaces:r,revision:i}=t,a=le(),c=Tp(Xn(Rm),Vt.useState(!1)),[,l]=_(W),{sidebarMobileLeft:u,showOverlay:d}=ZR(c),[p,m]=_(VF);Vt.useEffect(()=>{c.close()},[o==null?void 0:o.id]);let f=!e.hideTrademark,h=r&&(n==null?void 0:n.publishingType)==="variants"?Vt.createElement(np,{key:"variants-picker",currentVariant:e,collection:n,variants:r,revision:i,currentPage:o}):null,y=!!e.themeModeTogglable,w=y?Vt.createElement(S,{style:[g.Margin.mediumRight]},Vt.createElement(au,{content:e,mode:"button"})):null;return Vt.createElement(br,null,Vt.createElement(Dse,{style:[m.sidebar,{left:u}],mobileStyle:"visible",desktopStyle:"hidden"},Vt.createElement(he,{tag:"nav",accessibilityLabel:a("table_of_contents"),style:[b.directionColumn,b.flex1]},Vt.createElement(S,{style:b.flex1},Vt.createElement(Ase,{key:"mobile-closing-bar",switcher:h!=null?h:w}),y&&h?Vt.createElement(S,{style:[b.directionRow,b.justifySpaceBetween,b.alignCenter,g.Padding.smallVertical,g.Padding.mediumHorizontal,m.mobileChangeAppearance]},Vt.createElement(V,{style:[l.Label,l.text]},a("theme_change_appearance")),Vt.createElement(au,{content:e})):null,Vt.createElement(MS,{...t}),Vt.createElement(S,{style:[g.Padding.mediumLeft,b.flex1,m.sidebarWrapper]},Vt.createElement(RS,{...t,showingTrademark:f}))),f?Vt.createElement(op,{floating:!0,space:e}):null)),Vt.createElement(Nse,{style:[m.screenOverlay,{backgroundColor:u.interpolate({inputRange:[-Yg.MOBILE_WIDTH,0],outputRange:[p.colors.backdrop.transparent,p.colors.backdrop.background]})}],mobileStyle:d?"visible":"hidden",desktopStyle:"hidden",onPress:c.closeMobile}))}function Ase(t){let[,o]=_(VF),e=Tp(Xn(Rm),Vt.useState(!1));return Vt.createElement(Z.View,{style:[o.mobileClosingBar,g.Padding.smallHorizontal,b.justifySpaceBetween,b.alignCenter,b.directionRow],mobileStyle:"visible",desktopStyle:"hidden"},Vt.createElement(z,{icon:v.X,size:"large",kind:"default",onPress:()=>e.closeMobile(),style:[b.alignSelfCenter,g.Padding.smallHorizontal],accessibilityLabel:"Close"}),t.switcher)}var FF=10,VF=G.create({sidebar:t=>({backgroundColor:t.colors.background.main,width:Yg.MOBILE_WIDTH,maxWidth:"100%",height:"100%",flexDirection:"row",position:"fixed",top:0,bottom:0,zIndex:FF}),sidebarWrapper:t=>({borderRightWidth:1,borderRightColor:t.colors.border.mid}),sidebarCloseButton:{position:"absolute",width:M.BUTTON_M,height:M.BUTTON_M,top:(M.M-M.BUTTON_M)/2,left:Yg.MOBILE_WIDTH+M.BUTTON_M/2},screenOverlay:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:FF-1},mobileClosingBar:t=>({height:M.L,borderBottomWidth:1,borderBottomColor:t.colors.border.mid,backgroundColor:t.colors.background.main}),mobileChangeAppearance:t=>({borderBottomWidth:1,borderColor:t.colors.border.mid})});function GF(t){return rp.createElement(rp.Fragment,null,rp.createElement(WF,{...t}),rp.createElement(zF,{...t}))}var K1=150,Bse=200,qse=150;function LS(t){let[,o]=_(HF);return su.createElement(Z.View,{style:o.wrapper,mobileStyle:[o.wrapperMobile,g.Margin.smallVertical,g.Margin.smallHorizontal],desktopStyle:[o.wrapperDesktop,g.Margin.smallVertical,g.Margin.xsmallHorizontal]},su.createElement(ma,null,t.children))}function DS(t){let{title:o,kind:e="default",active:n=!1,onPress:r,isLast:i}=t,[a,c]=_(HF),[,l]=_(W);return su.createElement(K.TouchableOpacity,{hoverStyle:c.menuItemHovered,style:[c.menuItem,g.Padding.xsmallVertical,g.Padding.smallHorizontal,i?null:g.Margin.xsmallBottom,n?{backgroundColor:_S(a)}:null],onPress:r},su.createElement(S,{style:[b.directionRow,b.alignCenter,b.justifySpaceBetween]},su.createElement(K.Text.Child,{hoverStyle:n?null:l.textStandout,style:[l.Label,e==="link"?l.SemiBold:null,...n?[l.primary,l.Bold]:[l.text]],numberOfLines:2,ellipsizeMode:"tail"},o),su.createElement(S,{style:[g.Margin.mediumLeft]},t.rightElement)))}var HF=G.create({wrapper:t=>({backgroundColor:t.colors.background.main}),wrapperDesktop:{minWidth:K1,maxWidth:Bse,maxHeight:qse},wrapperMobile:{width:"auto",maxWidth:"100%",maxHeight:"100%"},menuItem:t=>({borderRadius:t.radiuses.large}),menuItemHovered:t=>({backgroundColor:t.colors.background.muted})});s();var hn=x(O());H();function np(t){let{backgroundColor:o,currentPage:e,collection:n,variants:r,currentVariant:i,revision:a}=t,{getNavigationLinkProps:c}=xe(),l=le(),u=hn.useRef(null),[,d]=_(W),p=hn.useMemo(()=>e?ro(a,e.id):"",[e]);return hn.createElement(Ys,{ref:u,wrapper:yi,closeOnClick:!0,closeOnOutsideClick:!0,anchor:({ref:m,toggle:f,opened:h})=>{let y=h?v.ChevronUp:v.ChevronDown;return hn.createElement(z,{ref:m,size:"medium",rightIcon:y,kind:Ta(o||Y.WHITE)?"default_bold":"default",alignItems:"start",onPress:f,style:[g.Padding.noneHorizontal]},hn.createElement(S,{style:[KF.variantsPicker]},hn.createElement(V,{numberOfLines:1,ellipsizeMode:"tail"},i.publishedTitle||i.title||cs)))}},hn.createElement(xn,{kind:"menu",preferredAlignment:"start"},hn.createElement(hn.Suspense,{fallback:hn.createElement(Ao,{size:"small"})},hn.createElement(LS,null,r.map((m,f,h)=>hn.createElement(DS,{key:m.key,title:m.title,active:m.key===i.key,isLast:f===h.length-1,rightElement:m.key===n.primarySpace?hn.createElement(V,{style:[d.textMuted,d.Uppercase,KF.mainLabel]},l("main")):null,...c({screen:{space:m.key,page:p}},()=>{var y;(y=u.current)==null||y.close()})}))))))}var KF=Q.create({mainLabel:{letterSpacing:1.2},variantsPicker:{maxWidth:K1}});s();var NS=x(O());var Lf=NS.forwardRef(function(o,e){let{contentRef:n,style:r,kind:i="default",...a}=o,c=ot(n);return NS.createElement(Ia,{ref:e,url:c.href,onPress:l=>{l.nativeEvent.metaKey||l.nativeEvent.ctrlKey||(l.preventDefault(),c.open())},kind:i,sameWebTab:!1,style:[So.Body,So.SemiBold,r],numberOfLines:2,ellipsizeMode:"tail",accessibilityLabel:o.title,...a},o.title)});s();var UF=x(O());s();var XF=JSON.parse('{"publicContainer":"publicContainer_11UZS"}');function AS(t){let{children:o,style:e}=t;return UF.createElement(te,{style:[XF.publicContainer,e]},o)}var{PAGE_BODY_DESKTOP_H_PADDING:Wse,TOC_DESKTOP_WIDTH:Fse,PUBLIC_DESKTOP_HEADER_HEIGHT:zse,PUBLIC_MOBILE_HEADER_HEIGHT:Vse}=Go,Gse=Z.createResponsiveComponent(z),Hse=Z.createResponsiveComponent(he);function $F(t){let{space:o}=t,e=fi(),{headerBackgroundColor:n,headerDisabled:r,headerLinksColor:i,headerLogoURL:a}=gn(o),c=pe.useMemo(()=>({...e,color:Ta(n)}),[n,e]);return pe.createElement(gi,{theme:c},r?pe.createElement(Z.View,{desktopStyle:"hidden",mobileStyle:"visible"},pe.createElement(jF,{...t,headerDisabled:r,headerBackgroundColor:n,headerLinksColor:i,headerLogoURL:a})):pe.createElement(jF,{...t,headerDisabled:r,headerBackgroundColor:n,headerLinksColor:i,headerLogoURL:a}))}function jF(t){let{space:o,headerDisabled:e,headerBackgroundColor:n,headerLogoURL:r,headerLinksColor:i,revision:a,collection:c,collectionSpaces:l,currentPage:u}=t,[,d]=_($se[e?"none":Bi(o)==="default"?"defaultWithBorder":"default"]),p=Tp(Xn(Rm),pe.useState(!1)),f=Mi(u).tableOfContents,h=[tl.searchWrapper,g.Padding.largeLeft,g.Padding.smallRight],[y]=pe.useContext(la);return pe.createElement(pe.Fragment,null,pe.createElement(Hse,{tag:"header",desktopStyle:tl.desktopHeight,mobileStyle:tl.mobileHeight,style:[d.spaceHeader,b.directionRow,b.alignCenter,e?null:{backgroundColor:n}]},pe.createElement(AS,{style:[N.padding.smallHorizontal,N.flex.alignCenter,PF.withStickyHeader]},f?pe.createElement(Gse,{desktopStyle:"hidden",mobileStyle:"visible",icon:v.Menu,style:g.Margin.smallRight,kind:"grey",rounded:!0,title:p.opened?"Hide Table of Content":"Show Table of Content",onPress:p.toggle}):null,pe.createElement(IS,{space:o,collection:c,headerBackgroundColor:n,headerLogoURL:r,mobileStyle:[tl.autoWidth,g.Padding.noneLeft,g.Padding.mediumRight,b.flexShrink1,b.justifyContentStart,f?null:g.Margin.smallLeft],desktopStyle:[tl.autoWidth,g.Padding.mediumLeft,g.Padding.largeRight,b.justifyContentStart]}),l&&(c==null?void 0:c.publishingType)==="variants"?pe.createElement(Z.View,{mobileStyle:"hidden",desktopStyle:"visible"},pe.createElement(np,{key:"variants-picker",backgroundColor:n,currentPage:u,collection:c,revision:a,variants:l,currentVariant:o})):null,pe.createElement(Kse,{space:o,linkColor:i}),o.themeModeTogglable?pe.createElement(Z.View,{mobileStyle:"hidden",desktopStyle:"visible"},pe.createElement(au,{content:o})):null,pe.createElement(gi,{theme:y},pe.createElement(Z.View,{mobileStyle:"hidden",desktopStyle:"visible",style:[h,tl.searchBarContainer,b.flex1]},pe.createElement(TS,{contentTheme:Bi(o),headerBackgroundColor:n})),pe.createElement(Z.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[h]},pe.createElement(BF,{contentTheme:Bi(o),headerBackgroundColor:n}))))),pe.createElement(Z.View,{mobileStyle:"visible",desktopStyle:"hidden"},pe.createElement(gi,{theme:y},pe.createElement(jse,{space:o}))))}function Kse(t){let{space:o,linkColor:e}=t;return pe.createElement(Z.View,{style:[b.directionRow,b.justifyContentEnd,b.alignCenter,b.flex1,g.Padding.mediumLeft],mobileStyle:"hidden"},(o.headerLinks||[]).map((n,r,i)=>n.title?pe.createElement(Xse,{key:n.title,headerLink:n,linkColor:e}):null))}function Xse(t){let{headerLink:o,linkColor:e}=t,n=K.useInteractiveState({hoverDelay:250}),r=K.useInteractiveState(),i=a=>pe.createElement(Lf,{ref:a.ref,style:[g.Padding.mediumHorizontal,e?{color:e}:null],title:o.title,contentRef:o.to,...a.events});return o.links&&o.links.length>0?pe.createElement(xa,{opened:n.hovered||r.hovered,wrapper:yi,anchor:({ref:a})=>i({ref:a,events:n.events})},pe.createElement(xn,{kind:"menu",preferredAlignment:"start"},pe.createElement(S,{...r.events},pe.createElement(LS,null,o.links.map((a,c,l)=>pe.createElement(Use,{key:c,link:a,isLast:c===l.length-1})))))):i({})}function Use(t){let{link:o,isLast:e}=t,n=ot(o.to);return pe.createElement(DS,{kind:"link",title:o.title,isLast:e,onPress:r=>{r.nativeEvent.metaKey||r.nativeEvent.ctrlKey||(r.preventDefault(),n.open())}})}function jse(t){let{space:o}=t,[e,n]=pe.useState(!1),[,{headerLinksMobile:r}]=_(Yse),i=e?v.ChevronDown:v.ChevronRight;return!o.headerLinks||o.headerLinks.length===0?null:pe.createElement(S,{style:[tl.headerLinksMobile,r,b.justifyContentCenter,g.Padding.medium]},pe.createElement(S,{style:[tl.headerLinksMobileButton]},pe.createElement(z,{size:"large",rightIcon:i,alignItems:"start",onPress:()=>n(a=>!a),style:[g.Padding.noneHorizontal]},"Links")),e?pe.createElement(S,null,o.headerLinks.map((a,c,l)=>a.title?pe.createElement(YF,{space:o,link:a,isLast:c===l.length-1}):null)):null)}function YF(t){let{link:o,space:e,isLast:n}=t,[r,i]=pe.useState(!1),a="links"in o?o.links||[]:[],c=r?v.ChevronDown:v.ChevronRight,l=Bi(e);return pe.createElement(S,{style:[b.directionColumn]},pe.createElement(S,{style:[b.directionRow,b.alignCenter]},pe.createElement(Lf,{style:[g.Padding.smallTop,n?null:g.Padding.smallBottom],kind:l==="bold"?"bold":"default",title:o.title,contentRef:o.to}),a.length>0?pe.createElement(z,{size:"large",kind:"link",rightIcon:c,alignItems:"start",onPress:()=>i(u=>!u),style:[g.Padding.noneHorizontal]}):null),r?pe.createElement(S,{style:[g.Margin.smallLeft,g.Margin.smallBottom]},a.map((u,d,p)=>pe.createElement(YF,{key:d,space:e,link:u,isLast:d===p.length-1}))):null)}var $se={none:G.create({spaceHeader:t=>({borderBottomWidth:1,borderBottomColor:t.colors.border.mid,zIndex:1})}),default:G.create({spaceHeader:{zIndex:1,position:"sticky",top:0}}),defaultWithBorder:G.create({spaceHeader:t=>({borderBottomWidth:1,borderBottomColor:t.colors.border.mid,zIndex:1,position:"sticky",top:0})})},Yse=G.create({headerLinksMobile:t=>({backgroundColor:t.colors.background.main,borderBottomWidth:1,borderBottomColor:t.colors.border.main})}),tl=Q.create({searchWrapper:{marginLeft:"auto"},searchBarContainer:{maxWidth:225},autoWidth:{width:"auto"},tocDesktop:{width:Fse},headerLinks:{paddingHorizontal:Wse-g.medium},headerLinksMobile:{minHeight:M.M},headerLinksMobileButton:{marginRight:"auto"},mobileHeight:{height:Vse},desktopHeight:{height:zse}});s();var jo=x(O());s();var qr=x(O());H();s();var da=x(O());H();function ZF(t){let{space:o,revision:e,page:n,analyticsContext:r}=t,i=G_(),[,a]=_(W),c=le(),[{result:l,error:u}]=oh([T_(o.key,n.id,i)]);if(u)return null;let d=p=>{p!==(l==null?void 0:l.rating)&&(ae({...r,type:"public_content_page_feedback_post",rating:p}),HS(m=>{M_(m,{space:o.key,page:n.id,revision:e.id,visitorId:i,rating:p,previousRating:l==null?void 0:l.rating})}))};return da.createElement(S,{style:[b.directionRow,b.alignCenter]},da.createElement(S,null,da.createElement(V,{style:[a.GroupTitle,a.textMuted]},c("was_it_helpful"))),da.createElement(S,{style:[b.directionRow,b.alignCenter]},da.createElement(X1,{tooltip:c("poor_content"),active:(l==null?void 0:l.rating)==="bad",rating:"bad",onPress:d}),da.createElement(X1,{tooltip:c("ok_content"),active:(l==null?void 0:l.rating)==="ok",rating:"ok",onPress:d}),da.createElement(X1,{tooltip:c("excellent_content"),active:(l==null?void 0:l.rating)==="good",rating:"good",onPress:d})))}function X1(t){let{active:o,tooltip:e,rating:n,onPress:r}=t;return da.createElement(vi,{tooltip:e},(i,a)=>da.createElement(Ke,{ref:a,onPress:()=>r(n),style:[g.Margin.smallLeft],accessibilityLabel:e,...i.events},da.createElement(QW,{active:o,interactive:!0,rating:n,size:M.BUTTON_S})))}function QF(t){let{space:o,revision:e,page:n,analyticsContext:r}=t,[,i]=_(W),[,a]=_(Zse),c=le(),l=vp(n.edits),u=Bu(n),d=!!l,p=o.hasPublicFeedback,m=!o.hideTrademark&&(u==="editorial"||u==="landing");if(!d&&!p)return null;let f=qr.createElement(ub,null,qr.createElement(qr.Suspense,{fallback:null},qr.createElement(ZF,{space:o,revision:e,page:n,analyticsContext:r})));return qr.createElement(S,{style:[g.Padding.largeTop,a.footer]},qr.createElement(Z.View,{tabletStyle:b.directionColumn,desktopStyle:b.directionRow,style:[b.alignCenter,b.justifySpaceBetween]},d?qr.createElement(Z.View,{tabletStyle:g.Margin.mediumBottom,style:m?[]:[b.flex1]},qr.createElement(V,{style:[i.textMuted,i.Label]},c("last_modified",qr.createElement(KR,{value:new Date(l.updatedAt),onlyDate:!1})))):null,m?qr.createElement(op,{space:o,floating:!1}):null,p?qr.createElement(Z.View,{tabletStyle:m?"hidden":"visible",desktopStyle:"visible"},f):null),m&&p?qr.createElement(Z.View,{tabletStyle:"visible",desktopStyle:"hidden",style:[b.directionRow,b.flex1,b.justifyContentCenter,g.Margin.largeTop]},f):null)}var Zse=G.create({footer:t=>({borderTopColor:t.colors.border.mid,borderTopWidth:1})});s();var pa=x(O());H();var Qse=K.createInteractiveComponent(Vr),Jse={[Ve]:null,[Xe]:g.Margin.smallLeft,[Lo]:null},JF=pa.memo(function(o){let{sections:e,activeSection:n}=o,[,r]=_(W),[,i]=_(e4),a=le();return pa.createElement(S,{style:[i.pageOutline]},pa.createElement(S,{style:[b.directionRow,b.alignCenter,g.Padding.largeHorizontal,g.Margin.smallBottom]},pa.createElement(V,{style:[r.GroupTitle,r.textMuted,r.Bold]},a("outline"))),e.map(c=>c.type===null||c.type===rt?null:pa.createElement(ece,{key:c.key,section:c,active:n===c.key})))});function ece(t){let{section:o,active:e}=t,[,n]=_(W),[,r]=_(e4),{navigateToHash:i}=xe();return pa.createElement(K.TouchableOpacity,{style:[b.directionRow,g.Padding.largeHorizontal,r.sectionItem,e&&r.sectionItemActive],onPress:()=>{i(o.anchor)}},o.tag?pa.createElement(Sr,{backgroundColor:Tl[o.tag]||Y.orange.base,style:[r.sectionTag,g.Margin.xsmallRight,b.alignSelfCenter]},pa.createElement(V,{style:[n.textInsideColor,n.MobileCaption,n.Bold,n.Uppercase]},o.tag)):null,pa.createElement(Qse.Child,{style:[n.Label,n.textMid,o.type&&Jse[o.type],...e?[n.primary,n.Medium]:[]],hoverStyle:n.primary},o.title))}var e4=G.create({pageOutline:t=>({maxWidth:Go.MAX_PAGE_OUTLINE_WIDTH}),sectionItem:{marginTop:g.xsmall,marginBottom:g.xsmall,marginLeft:-1,borderLeftWidth:3,borderLeftColor:"transparent",width:"fit-content",maxWidth:"100%"},sectionItemActive:t=>({borderLeftColor:t.colors.primary.main}),sectionTag:{borderRadius:M.XXS,height:M.XXS,paddingHorizontal:g.small,justifyContent:"center"}});s();var ol=x(O());function t4(t){let{space:o,page:e}=t,[{color:n},r]=ol.useContext(la),i=le(),{headerDisabled:a}=gn(o),{tableOfContents:c}=Mi(e),l=!c&&a,u=[l?{key:"pageRead.switchTheme",icon:n==="light"?v.ThemeDark:v.ThemeLight,title:i(n==="light"?"switch_to_dark_theme":"switch_to_light_theme"),trigger:r}:null].filter(fe),[d,p]=Lb(t,u);return ol.createElement(ol.Fragment,null,d,l&&ol.createElement(AF,{kind:"grey",size:"large",title:"Search",rounded:!0}),ol.createElement($g,{palette:p,icon:v.MoreVertical,kind:"grey",size:"large",title:"Page actions",rounded:!0,testID:"pageToolbar.paletteButton"}))}var{PUBLIC_DESKTOP_HEADER_HEIGHT:tce}=Go;function o4(t){var C;let{space:o,revision:e,screen:n,analyticsContext:r,collection:i,collectionSpaces:a,assetHostname:c,currentPage:l}=t,u=le(),[d,p]=_(oce);X7(o);let{headerDisabled:m}=gn(o),f=Mi(l),h=x6();zi(k=>{k.writeAsync([{type:"meta",name:"description",content:l&&l.description?l.description:""},{type:"meta",name:"og:description",content:l&&l.description?l.description:""},{type:"meta",name:"og:image",content:o.socialPreviewURL?Hi(o.socialPreviewURL,{height:640,width:1280,fit:"contain"}):rce(o,e,l)},{type:"meta",name:"twitter:card",content:"summary_large_image"}]),o.visibility==="in-collection"?(k.setTitle(l?l.title:u("page_not_found"),(i==null?void 0:i.publishedTitle)||(i==null?void 0:i.title)||cs),k.writeAsync([{type:"meta",name:"robots",content:(i==null?void 0:i.visibility)!=="public"?"noindex, nofollow":"index"}])):(k.setTitle(l?l.title:u("page_not_found"),o.publishedTitle||o.title||cs),k.writeAsync([{type:"meta",name:"robots",content:o.visibility!=="public"?"noindex, nofollow":"index"}]))}),Tu(l?Cg(o,l,{screen:"space",visibility:o.visibility,pageLayout:Bu(l),diffMode:!1}):Nt(o,{screen:"space_page_notfound",visibility:o.visibility}),[o.key,l==null?void 0:l.id]),T7(o,(C=l==null?void 0:l.id)!=null?C:null);let y=!!f.tableOfContents,w=!!f.outline;if(!l&&n.page){let[k]=th([W_(o.key,n.page)]);if(k&&e.pages[k.page])return jo.default.createElement(v2,{to:ro(e,k.page)})}return jo.default.createElement(jo.default.Fragment,null,jo.default.createElement(ice,{space:i||o,assetHostname:c}),jo.default.createElement(Z.View,{style:[b.flex1,p.spacePageContainerBg],mobileStyle:b.directionColumn,desktopStyle:b.directionRow},jo.default.createElement(AS,null,y?jo.default.createElement(GF,{space:o,revision:e,currentPage:(l==null?void 0:l.type)==="document"?l:null,analyticsContext:r,collection:i,collectionSpaces:a}):null,jo.default.createElement(Sr,{style:[p.spacePageBody],backgroundColor:d.colors.background.main},jo.default.createElement(jo.default.Suspense,{fallback:jo.default.createElement(Mb,{withPageOutline:(l==null?void 0:l.layout)!=="landing"})},l&&l.type==="document"?jo.default.createElement(Eb,{screen:n,key:nce(n,e,l),space:o,changeRequest:void 0,revision:e,page:l,scrollRef:h,readOnly:!0,withComments:!1,withToC:y,analyticsContext:r,outline:w?JF:void 0,toolbar:t4,footer:jo.default.createElement(QF,{space:o,revision:e,page:l,analyticsContext:r}),sideColumnStickyTop:g.large+(m?0:tce)}):jo.default.createElement(A8,{statusCode:404},jo.default.createElement(_p,{title:u("page_not_found"),action:jo.default.createElement(sP,{kind:"secondary",size:"medium",to:{screen:{type:"space",space:o.key,page:""}}},u("back_to_home"))},u("page_not_found_long"))))))))}var oce=G.create({spacePageContainerBg:t=>({backgroundColor:t.colors.background.main}),spacePageBody:{flex:1}});function nce(t,o,e){let n=t.space;return n+=`/${t.changeRequest||"main"}`,n+=`/${o.conflicts?"conflicts":"normal"}`,n+=`/${e.id}`,t.diff&&(n+="/diff"),t.revision&&(n+="/revision"),n}function rce(t,o,e){let n=e&&o.rootPages[0]!==e.id?`/page/${e.id}`:"",{primaryColor:r,headerLogoURL:i}=qy(t),a=Bi(t),c=`color=${encodeURIComponent(r||"")}&logo=${encodeURIComponent(Us(i||t.iconURL||""))}&theme=${encodeURIComponent(a||"")}`;return`${Gf()}/share/space/thumbnail/${t.key}${n}.png?${c}`}function ice(t){let{space:o,assetHostname:e}=t,n=N_(o,"public-content"),[r]=_(),[i,a]=jo.default.useState(n.iconURL||(n.emoji?`${e}${L_(n.emoji)}`:null));return jo.default.useEffect(()=>{if(i)return;let c=192,l=document.createElement("canvas"),u=l.getContext("2d");if(!u)return;l.width=c,l.height=c,u.fillStyle=r.colors.background.main,u.fillRect(0,0,c,c);let d=.7;u.fillStyle=r.colors.text.main,u.font=`400 ${c*d}px gitbook-content-font`,u.textAlign="center",u.textBaseline="middle",u.fillText(o.title.slice(0,1),c/2,c/2),a(l.toDataURL("image/png"))},[o.title,a]),zi(c=>{c.writeAsync([{type:"link",rel:"icon",href:i?Us(i):`${e}/public/images/icon-512.png`},{type:"link",rel:"apple-touch-icon",href:i?Us(i):`${e}/public/images/icon-512.png`}])}),null}s();var Ne=x(O());H();var ace=Z.createResponsiveComponent(he),n4=200,sce=4*(n4+g.small);function r4(t){let{space:o,collection:e}=t,[,n]=_(W),[,r]=_(uce),i=Ne.useMemo(()=>(o==null?void 0:o.footer)||(e==null?void 0:e.footer),[o,e]);return Ne.createElement(Ne.Fragment,null,i?Ne.createElement(ace,{tag:"footer",style:[b.alignCenter,r.footer]},Ne.createElement(Z.View,{desktopStyle:[Ya.desktopContainer]},Ne.createElement(Z.View,{desktopStyle:b.directionRow,mobileStyle:b.directionColumn},i!=null&&i.logoURL?Ne.createElement(Z.View,{style:[b.directionRow,b.alignStart,g.Padding.xlargeTop,i!=null&&i.copyright?null:g.Padding.xlargeBottom],desktopStyle:g.Margin.xxlargeHorizontal,mobileStyle:g.Margin.largeHorizontal},Ne.createElement(Z.View,{desktopStyle:"visible",mobileStyle:"hidden"},Ne.createElement(Qo,{source:{uri:i==null?void 0:i.logoURL},style:Ya.footerImageDesktop,loading:"lazy"})),Ne.createElement(Z.View,{desktopStyle:"hidden",mobileStyle:"visible"},Ne.createElement(S,{style:g.Margin.largeLeft},Ne.createElement(Qo,{source:{uri:i==null?void 0:i.logoURL},style:Ya.footerImageMobile,loading:"lazy"})))):null,i!=null&&i.linkGroups?Ne.createElement(Z.View,{style:[g.Padding.xlargeTop,i.logoURL?b.alignStart:b.alignCenter,b.flex1,i!=null&&i.copyright?null:g.Padding.xlargeBottom],mobileStyle:b.alignStart,tabletStyle:g.Padding.largeLeft},Ne.createElement(Z.View,{mobileStyle:"hidden",tabletStyle:"hidden",desktopStyle:i.linkGroups.length<3&&!i.logoURL?"visible":"hidden"},Ne.createElement(cce,{linkGroups:i.linkGroups})),Ne.createElement(Z.View,{mobileStyle:"visible",tabletStyle:"visible",desktopStyle:i.linkGroups.length>=3||i.logoURL?"visible":"hidden"},Ne.createElement(lce,{linkGroups:i.linkGroups}))):null),i!=null&&i.copyright?Ne.createElement(Z.View,{style:[b.flex1,g.Padding.xlargeVertical]},Ne.createElement(V,{style:[Ya.copyright,n.textMuted]},i==null?void 0:i.copyright)):null)):null)}function cce(t){let{linkGroups:o}=t,[,e]=_(W),n=[],r=o==null?void 0:o.map(({title:i})=>i);return o==null||o.forEach(i=>{var a;(a=i==null?void 0:i.links)==null||a.forEach((c,l)=>{if(n[l]===void 0)return n[l]=[c];n[l].push(c)})}),Ne.createElement(S,{style:[b.flex1,b.justifyContentStart,b.directionRow]},Ne.createElement(S,{style:Ya.linkGroupColumnDesktop},Ne.createElement(S,{style:[b.flex1]},r==null?void 0:r.map((i,a)=>Ne.createElement(S,{key:i,style:[b.alignStart,a>0?g.Margin.smallTop:null]},Ne.createElement(V,{style:[e.text,e.Heading3]},i))))),n.map((i,a)=>Ne.createElement(S,{key:a,style:Ya.linkGroupColumnDesktop},Ne.createElement(i4,{links:i,renderMode:"horizontal"}))))}function lce(t){let{linkGroups:o}=t,[,e]=_(W);return Ne.createElement(Z.View,{style:[b.flex1,b.justifyContentStart,b.directionRow],desktopStyle:[Ya.linkGroupColumnsDesktop,b.directionRow,b.wrap,b.flexShrink1],mobileStyle:b.directionColumn},o.map((n,r)=>Ne.createElement(Z.View,{key:r,desktopStyle:[Ya.linkGroupColumnDesktop,g.Margin.xlargeTop],mobileStyle:[Ya.linkGroupColumnMobile,g.Margin.xlargeTop,g.Margin.largeLeft]},Ne.createElement(S,{style:b.alignStart},Ne.createElement(V,{style:[e.text,e.Heading3]},n.title)),Ne.createElement(i4,{links:n.links,renderMode:"vertical"}))))}function i4(t){let{links:o,renderMode:e}=t,[,n]=_(W);return Ne.createElement(Z.View,{style:[b.alignStart,b.flex1,b.directionColumn],desktopStyle:e==="vertical"?g.Margin.largeTop:null,mobileStyle:g.Margin.smallTop},(o||[]).map((r,i)=>{let a=i===o.length-1;return r.title?Ne.createElement(Ne.Suspense,{fallback:null,key:r.title},Ne.createElement(S,{style:[Ya.referenceLink,e==="horizontal"&&i>0?g.Margin.smallTop:null]},Ne.createElement(Lf,{title:r.title,contentRef:r.to,style:[n.textMuted,n.Medium,e==="horizontal"?null:[g.Padding.smallTop,a?null:g.Padding.smallBottom]]}))):null}))}var uce=G.create({footer:t=>({backgroundColor:t.colors.background.mid})}),Ya=Q.create({linkGroupColumnsDesktop:{maxWidth:sce,marginTop:-g.xlarge},linkGroupColumnDesktop:{width:n4,marginLeft:g.small,paddingRight:g.xlarge},linkGroupColumnMobile:{width:"auto"},desktopContainer:{maxWidth:1280,width:"100%"},copyright:{textAlign:"center"},mobileHeight:{height:"auto"},referenceLink:{maxWidth:"100%"},footerImageDesktop:{maxHeight:150,maxWidth:150,objectFit:"contain"},footerImageMobile:{maxHeight:30,maxWidth:30,objectFit:"contain"}});s();var on=x(O());s();var To=x(O());s();var Df=x(O());function a4(t){let{query:o,space:e,onUpdateQuery:n,onSubmitAIQuery:r,allowEnterToOpen:i}=t,a=Df.useCallback(()=>{n("")},[n]);return o.query?Df.createElement(xF,{target:{space:e},query:o,onAnswerLoaded:a,onSubmitQuery:r}):Df.createElement(OF,{target:{space:e},onSubmitAIQuery:r,allowEnterToOpen:i})}s();var U1=x(O());s();var Vs=x(O());function s4(t){let{space:o,onUpdateQuery:e,onSubmitAIQuery:n}=t,r=le(),i=fF(),a=xS(),c=CS(o.hasAISearch?{space:o}:null),l=Vs.useCallback(m=>{switch(m.type){case"recent-search":return{icon:v.Search.CSS,title:m.query,action:r("search")};case"recent-question":return{icon:v.AILens.CSS,title:m.question,action:r("search_ask")};case"recommended-question":return{icon:v.AILens.CSS,title:m.question,action:r("search_ask")};default:Fe(m)}},[r]),u=Vs.useCallback(m=>{switch(m){case"recent-search":return{title:r("search_blankslate_recent_searches")};case"recent-question":return{title:r("search_blankslate_recent_questions")};case"recommended-question":return{title:r("search_blankslate_recommended_questions")};default:return}},[r]),d=(m,f)=>{switch(m.type){case"recent-search":{e(m.query),ae(Nt(o,{type:"search_pick_suggestion_recent_search",suggestionIndex:f}));break}case"recent-question":{n(m.question),ae(Nt(o,{type:"ai_search_pick_suggestion_recent_search",suggestionIndex:f}));break}case"recommended-question":ae(Nt(o,{type:"search_pick_suggestion_question"})),n(m.question);break;default:Fe(m)}},p=Vs.useMemo(()=>{let m=o.hasAISearch?a.map(h=>({type:"recent-question",question:h})):[],f=i.filter(h=>!a.includes(h)).map(h=>({type:"recent-search",query:h}));return[...m,...f,...c]},[i,a,c,o.hasAISearch]);return p.length===0?Vs.createElement(ka,null,r("search_blankslate")):Vs.createElement(te,{style:[N.flex.flex1,N.flex.column]},Vs.createElement(nc,{data:p,getKey:dce,renderItem:l,renderGroup:u,groupItem:pce,getGroupKey:mce,onOpen:d,style:[N.padding.mediumHorizontal,N.padding.mediumVertical]}))}function dce(t){switch(t.type){case"recent-search":return`recent-search:${t.query}`;case"recent-question":return`recent-question:${t.question}`;case"recommended-question":return`recommended-question:${t.question}`;default:Fe(t)}}function pce(t){return t.type}function mce(t){return t}s();var Gs=x(O());function c4(t){let{space:o}=t,e=Gs.useDeferredValue(t.query),n=le(),{navigate:r}=xe(),i=EP({query:e,types:["pages","sections"],hitsPerPage:30,analyticsTags:[{type:"space",space:o.key}]}),a=Gs.useCallback(u=>{switch(u.type){case"page":return{title:u.title,icon:v.Page.CSS,subtitle:u.ancestors.filter(d=>d.type!=="group"&&d.id!==u.page.id).map(d=>d.title).join(" \u203A "),action:n("search_goto_page")};case"section":return{title:u.title,body:u.body,icon:v.Hash.CSS,nested:!0,action:n("search_goto_section")};default:throw new Error("Unexpected item type")}},[n]),c=Gs.useCallback(u=>{if(u)return{title:u.page.title}},[]),l=Gs.useCallback((u,d)=>{if(!(u.type!=="page"&&u.type!=="section"))switch(ae(Nt(o,{type:"public_content_search_open_result",resultType:u.type,resultIndex:d})),u.type){case"page":r({screen:{type:"space",space:u.space.key,page:u.path,hash:void 0,query:void 0}});break;case"section":r({screen:{type:"space",space:u.space.key,page:u.path,hash:u.anchor,query:void 0}});break;default:Fe(u)}},[]);return i.length===0?Gs.createElement(ka,null,n("search_blankslate_query",e)):Gs.createElement(nc,{data:i,getKey:fce,renderItem:a,renderGroup:c,groupItem:hce,getGroupKey:gce,onOpen:l,style:[N.padding.mediumHorizontal,N.padding.mediumVertical]})}function fce(t){return t.key}function gce(t){return t?t.page.id:""}function hce(t){return t.groups.find(o=>o.type==="page")}function l4(t){let{space:o,query:e,onUpdateQuery:n,onSubmitAIQuery:r}=t;return gF(e),yF(e,{space:o}),e?U1.createElement(c4,{space:o,query:e}):U1.createElement(s4,{space:o,onUpdateQuery:n,onSubmitAIQuery:r})}function u4(t){let{space:o}=t,[e,{open:n,close:r,setQuery:i}]=cP();return Hr({[Ue.SEARCH_OPEN]:()=>{n()},"/":()=>{n()}},["all"],[]),To.createElement(gR,null,typeof e=="string"?To.createElement(yce,{space:o,query:e,setQuery:i,close:r}):null)}function yce(t){let{space:o,query:e,setQuery:n,close:r}=t,i=le(),a=To.useRef(null),[c,l]=_F(),[u,d]=js("search",[!!o.hasAISearch]);Tu({screen:"search",screenTab:u},[u]);let p=To.useCallback(h=>{var y;n(h),(y=a.current)==null||y.focus()},[n,a]),m=To.useCallback(h=>{var y;o.hasAISearch&&(d("lens"),n(h),l(h),(y=a.current)==null||y.focus(),ae(Nt(o,{type:"ai_search_submit",query:h})))},[!o.hasAISearch,d,n,l,a]),f=To.useCallback(h=>{d(h),l(h==="search"?"":e)},[d,l]);return To.useEffect(()=>{var h;(h=a.current)==null||h.focus()},[u]),To.createElement(QR,{ref:a,inputIcon:u==="search"?v.Search.CSS:v.AILens.CSS,rightButton:o.hasAISearch?To.createElement(te,{style:[N.flex.row,N.flex.alignCenter]},u==="lens"&&e&&e!==c.query?To.createElement(te,{style:[N.margin.mediumRight,N.flex.row,N.flex.alignCenter]},To.createElement(te,{style:N.margin.xsmallRight},To.createElement(Cn,{style:[N.text.caption,N.textColor.muted]},"Enter")),To.createElement(v.ArrowEnter.CSS,{style:[N.icons.xsmall,N.textColor.muted]})):null,To.createElement(d7,{activeTab:u,tabs:[{key:"search",label:i("search")},{key:"lens",label:"Lens"}],onPress:f})):null,query:e,onQueryChange:n,onSubmitQuery:m,onClose:r,queryPlaceholder:i(u==="search"?"search_placeholder":"search_placeholder_ask")},u==="search"||!o.hasAISearch?To.createElement(l4,{query:e,space:o,onUpdateQuery:p,onSubmitAIQuery:m}):To.createElement(a4,{query:c,space:o,onUpdateQuery:p,onSubmitAIQuery:m,allowEnterToOpen:e.length===0}))}s();var BS=x(O());var ip=new Map;typeof window<"u"&&(window.GitBook=window.GitBook||{addEventListener:(t,o)=>{ip.has(t)||ip.set(t,[]),ip.get(t).push(o)},removeEventListener:(t,o)=>{if(!ip.has(t))return;let e=ip.get(t),n=e.indexOf(o);n!==-1&&e.splice(n,1)}});function d4(t,...o){let e=ip.get(t);e&&e.forEach(n=>{n(...o)})}function p4(t){if(BS.useContext(Jo).mode!=="public-content")throw new Error("useInjectIntegrationsScripts can only be used in public-content mode");BS.useEffect(()=>(d4("load"),()=>{d4("unload")}),[t.key])}function qS(t){let{space:o,assetHostname:e,collection:n,collectionSpaces:r,usesCookies:i}=t,{locale:a}=on.useContext(Jo),{screen:c}=_a(),l=Ce(),u=M7(o.key,c),d=c.type==="space"&&typeof c.changeRequest=="string";if(d&&!u)throw new Ni.NotFound("Change request not found");let p=c.type==="space"&&c.revision,m=d&&u?u.revisionCurrent:p&&c.revision||o.revision,f=zr(l.store.getRevision(o.key,m));if(!f)throw d?new Ni.NotFound("Change request not found"):c.type==="space"&&c.revision?new Ni.NotFound("Revision not found"):new Error("Expected revision");z7(o),p4(o);let h=sl(o)?o.organization:void 0,y=on.useMemo(()=>Nt(o,{}),[o.key,h,o.collection]);if(c.type!=="space"||c.space!==o.key)throw new Error("screen should be the space we render");on.useEffect(()=>{if(o.searchKey)return mP(o.searchKey)},[o.searchKey]),zi(I=>{I.write({type:"font",font:o.font||"Inter",fontFamilyName:"gitbook-content-font"}),(c.revision||c.changeRequest||c.sideSheet)&&I.write({type:"meta",name:"robots",content:"noindex"}),I.setLang(a)}),RF(o.privacyPolicyURL,sk(o)||i);let[w,C]=OP(f,c.page),k={space:o.key,...C?{page:C.id}:{},...u?{changeRequest:u.key}:{revision:f.id}};return on.createElement(on.Fragment,null,w?on.createElement(Qg,{to:{screen:w}}):null,on.createElement(g2,{value:k},on.createElement($F,{space:o,revision:f,collection:n,currentPage:C,collectionSpaces:r}),on.createElement(o4,{space:o,revision:f,screen:c,analyticsContext:y,collection:n,collectionSpaces:r,assetHostname:e,currentPage:C}),on.createElement(r4,{space:o,collection:n}),on.createElement(u4,{space:o}),on.createElement($W,null),on.createElement(y2,{organization:h,content:o,contentRef:ls(o.key)})))}s();var j1=x(O());s();function ap(t){return t?t.endsWith("/")?t:`${t}/`:""}function m4(t,o){return e=>{let n=`/${ap(t.basePath)}`;switch(e.type){case"back_office":case"account":case"error_notfound":case"org_invite":case"org_join":case"org_settings":case"root":case"join":case"account_verification":case"integrations":case"import":case"template":case"welcome":case"contentkit_builder":throw new Error(`Cannot navigate to ${e.type} on public content`);case"home":{if(e.organization){let i=fl.read({type:"organization",organization:e.organization});n=xp(i);break}throw new Error("Cannot navigate to home without an org on public content")}case"user":{let i=fl.read({type:"user",user:e.user});n=xp(i);break}case"collection":{let i=fl.read({type:"collection",collection:e.collection});n=xp(i);break}case"space":{let i=fl.read({type:"space",space:e.space});i.hostname===t.hostname&&(!t.basePath||i.pathname.startsWith(t.basePath))||o?(t.shareLink&&(n+=ap(t.shareLink)),i.pathname!==t.basePath&&(t.basePath?n+=ap(PI(i.pathname,ap(t.basePath))):n+=ap(i.pathname))):n=xp(i),n+=vce(e);break}case"legacy_space":case"legacy_account":throw new Error("Cannot navigate to legacy urls");default:Fe(e)}let r;if(typeof e.query=="string"){let i=new URLSearchParams;i.set("q",e.query),r=`?${i.toString()}`}return{pathname:n,hash:e.hash,search:r}}}function vce(t){let o="";return t.revision&&(o+=`~/revisions/${t.revision}/`),t.changeRequest&&(o+=`~/changes/${t.changeRequest}/`),o+=`${t.page[0]==="/"?t.page.slice(1):t.page}`,t.sideSheet&&(o=`${ap(o)}~/${t.sideSheet.type}${"tab"in t.sideSheet?`/${t.sideSheet.tab}`:""}`),o}s();function f4(t,o,e,n=[]){return r=>{let{spaceKey:i,pathname:a}=MI({currentSpaceKey:o,collectionSpaces:n,collection:e,pathname:r.pathname,paths:t}),c={type:"space",space:i,page:""};bce(c,x_(a)),r.hash&&(c.hash=r.hash.replace(/^#/,""));let u=new URLSearchParams(r.search).get("q");return typeof u=="string"&&(c.query=u),c}}function bce(t,o){rw(o,[{path:`/~/revisions/:revision/:page${fg}`,onMatch:e=>{Object.assign(t,{page:e.params.page,revision:e.params.revision}),sp(t,e,o)}},{path:"/~/revisions/:revision",onMatch:e=>{Object.assign(t,{revision:e.params.revision,page:""}),sp(t,e,o)}},{path:`/~/changes/:changeRequest/:page${fg}`,onMatch:e=>{Object.assign(t,{changeRequest:e.params.changeRequest,revision:void 0,page:e.params.page}),sp(t,e,o)}},{path:"/~/changes/:changeRequest",onMatch:e=>{Object.assign(t,{changeRequest:e.params.changeRequest,revision:void 0,page:""}),sp(t,e,o)}},{path:`/:page${fg}`,onMatch:e=>{Object.assign(t,{page:e.params.page,diff:!1}),sp(t,e,o)}},{path:"/",onMatch:e=>{Object.assign(t,{diff:!1,page:""}),sp(t,e,o)}}])}function sp(t,o,e){rw(e,[{path:"/~/share/pdf",onMatch:n=>{Object.assign(t,{sideSheet:{type:"share",tab:"pdf"}})}}],{prefix:o.path})}function WS(t,o,e,n,r){let i=_7(),a=(0,j1.useMemo)(()=>f4(t,e,n,r),[t.hostname,t.basePath,t.shareLink,e,n,r]),c={hostname:t.hostname,pathname:t.basePath},l=(0,j1.useMemo)(()=>m4({hostname:c.hostname,basePath:c.pathname,shareLink:t.shareLink},o),[t.hostname,t.basePath,t.shareLink]);return{forceHardNavigation:!i,getNavigationScreenFromLocation:a,getLocationForNavigationScreen:l}}function g4(t){let{space:o,ssrRequestPath:e,ssrRouterContext:n,basePath:r,hostname:i,customToken:a,shareLink:c,assetHostname:l,preview:u=!1,usesCookies:d=!1}=t,p=WS({hostname:i,basePath:r,shareLink:c},u,o.key),{primaryColor:m}=gn(o);return si.createElement(Mp,{mode:"public-content",preview:u,locale:o.language},si.createElement(si.Suspense,{fallback:si.createElement(Ao,{size:"large"})},si.createElement(ml,{primaryColor:m},si.createElement(Ef,null,si.createElement(kS,{ssrRequestPath:e,ssrRouterContext:n},si.createElement(Zg,{persist:!1,...p},si.createElement(By,null,a&&typeof window>"u"?si.createElement(Ao,{size:"large"}):si.createElement(qS,{space:o,assetHostname:l,usesCookies:d}))))))))}s();var yn=x(O());function h4(t){let{collection:o,basePath:e,hostname:n,customToken:r,collectionSpaces:i,ssrRequestPath:a,ssrRouterContext:c,shareLink:l,assetHostname:u,preview:d=!1,usesCookies:p=!1}=t,m=WS({hostname:n,basePath:e,shareLink:l},d,void 0,o,i),{primaryColor:f}=gn(o);if(!d&&o.publishingType!=="variants")throw new Error("we do not know how to render anything else than variants for now");return yn.createElement(Mp,{mode:"public-content",preview:d,locale:o.language},yn.createElement(ml,{primaryColor:f},yn.createElement(Ef,null,yn.createElement(kS,{ssrRequestPath:a,ssrRouterContext:c},yn.createElement(Zg,{persist:!1,...m},yn.createElement(yn.Suspense,{fallback:yn.createElement(Ao,{size:"large"})},yn.createElement(By,null,r&&typeof window>"u"?yn.createElement(Ao,{size:"large"}):yn.createElement(Sce,{collection:o,collectionSpaces:i,assetHostname:u,usesCookies:p}))))))))}function Sce(t){let{screen:o}=_a();if(o.type!=="space")throw new Error("screen should be a space");let[e]=Ra([ls(o.space)]);if(!e)throw new Error("the space should exist");let{primaryColor:n}=gn(e);return yn.createElement(Mp,{locale:e.language},yn.createElement(ml,{primaryColor:n},yn.createElement(Ef,null,yn.createElement(qS,{...t,space:e}))))}s();var mr=x(O());H();s();var $1=x(O());async function wce(t){let o=await rc(),{data:e}=await o.hive.generateSpaceHiveReadAccessToken(t);return Object.values(e.contents)}function y4(t){return t.client?$1.createElement(Nx,{client:t.client},t.children):$1.createElement(Nx,{endpoint:TP(),fetchContentAuthToken:wce,store:t.store},t.children)}s();var cu=x(O());var Y1=dt("preview:child");function v4(t,o){let[e,n]=cu.useState(t),[r,i]=cu.useState(void 0);return Cce(e.footer),cu.useEffect(()=>{o&&(window.addEventListener("message",a=>{if(a.data.source!=="gitbook-preview-parent"||(Y1.info("receive message",a.origin,a.data),a.origin!==Gf()&&a.origin!=="http://127.0.0.1:5001"))return;let c=SI(a.data.payload),l=a.data.previewID;Y1.debug("update content with",c),n(c),i(l),window.parent.postMessage({source:"gitbook-preview-child"},"*")}),Y1.info("notify parent that we are ready"),window.parent.postMessage({source:"gitbook-preview-child"},"*"))},[o]),[e,r]}function Cce(t){let o=cu.useRef(t);Ou(()=>{t&&t!==o.current&&window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"}),o.current=t},[t])}s();var b4=x(O());function Z1(){b4.useEffect(()=>{typeof window>"u"},[])}function Q1(t){var i;let o="collection"in t?t.collection:t.space,[e,n]=v4(o,!!t.preview),r=t.hive&&t.hive.client?{client:t.hive.client}:{store:(i=t.hive)==null?void 0:i.contentStore};return Z1(),mr.createElement(aI,null,mr.createElement(NF,{content:e,isPreview:!!t.preview},mr.createElement(y4,{...r},mr.createElement(xce,{...t,content:e,previewID:n}))))}function xce(t){let{content:o,previewID:e}=t;Z1();let[n]=mr.useContext(la);return mr.createElement(gi,{theme:n},mr.createElement(rR,{theme:n},mr.createElement(e9,null,mr.createElement(u7,null,mr.createElement(J_,{enabled:!0},"collection"in t?mr.createElement(h4,{...t,collection:o}):mr.createElement(g4,{...t,space:o})),e?mr.createElement(S,{testID:e}):null))))}s();function J1(t){let o=new URLSearchParams(window.location.search),e=window.location.hash;if(o.has("jwt_token")){o.delete("jwt_token");let i=o.toString();window.history.replaceState({},"",`${window.location.pathname}${i?`?${i}`:""}${e||""}`)}let{dsn:n,tracesSampling:r}={...fa.sentry,...fa.sentry.publicContent};mI({dsn:n,release:pI,projectId:fa.firebase.projectId,tracesSampling:r}),window.location.hostname!=="127.0.0.1"&&O_(t.hostname),f7({customToken:t.customToken,waitUserReady:!1})}s();function S4(t){t!=null&&t.firestore&&gs.fromJS(t.firestore),t!=null&&t.head&&eR.cache.fromJS(t.head),t!=null&&t.contentURLs&&fl.fromJS(t.contentURLs),t!=null&&t.contentRefs&&Ji.fromJS(t.contentRefs),t!=null&&t.screenToContentRefs&&Vy.fromJS(t.screenToContentRefs),t!=null&&t.swaggers&&Nl.fromJS(t.swaggers),t!=null&&t.api&&JR.fromJS(t.api)}s();var w4=dt("browser-compatibility");function C4(){let t=["webcache.googleusercontent.com","translate.googleusercontent.com","translate.google.com"];return!window.location.hostname||t.includes(window.location.hostname)?(w4.warning("The application is served over an unsupported hostname and has been made static."),!1):kce()?!0:(w4.warning("Your browser is missing required features, the application has been made static."),!1)}function kce(){try{if("\u212B".normalize("NFKD")!=="A\u030A")return!1}catch(t){return!1}return!(!window.Intl||![].flat)}s();function x4(t){document.readyState==="interactive"||document.readyState==="complete"?t():document.addEventListener("DOMContentLoaded",()=>{t()})}s();var k4=x(T4());function eI(t){return new Ai("ssr.deserializeFromHTML").wrapSync(()=>{let e=k4.default.decompress(t);return e?JSON.parse(e):null})}C4()&&x4(()=>{Oce()});async function Oce(){let t=window.__GITBOOK_INITIAL_PROPS__,o=eI(t);J1(o),window.__GITBOOK_LAZY_MODULES__&&await TR(window.__GITBOOK_LAZY_MODULES__);let e=window.__GITBOOK_INITIAL_STATE__,n=eI(e);n?(S4(n),VS.registerComponent("PublicContentApplication",()=>Q1),VS.runApplication("PublicContentApplication",{hydrate:!0,rootTag:document.querySelector(".gitbook-root"),initialProps:o})):console.error("Invalid state received from server, content won't be interactive")}
/*! Bundled license information:

statuses/index.js:
  (*!
   * statuses
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

rangefix/rangefix.js:
  (*!
   * RangeFix v0.2.9
   * https://github.com/edg2s/rangefix
   *
   * Copyright 2014-17 Ed Sanders.
   * Released under the MIT license
   *)
*/
//# sourceMappingURL=https://app.gitbook.com/public/app/public-3FGSQION.min.js.map
